[
    {
        "content": "<p>Hello!<br>\nIs there a way to get a list of users+email address of a specific realm?<br>\nMy pending invite list has vanished (I think after the upgrade from 3.2 to 3.3) and I would like to invite again the users whose invite was not accepted yet (I have the original invite list).</p>\n<p>I tried with </p>\n<div class=\"codehilite\"><pre><span></span><code>./manage.py user_stats\n</code></pre></div>\n<p>but it shows a list of local users (without the email address) so I can't easily figure out who is who. : -(<br>\nI am running an on premises 3.3 zulip server on a debian 10.7</p>\n<p>Thanks a lot for your help,<br>\n Michele</p>",
        "id": 1077980,
        "sender_full_name": "Michele Zamboni",
        "timestamp": 1607531770
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"15939\">@Michele Zamboni</span> What does the <code>user_stats</code> command do?</p>",
        "id": 1078003,
        "sender_full_name": "Vishnu KS",
        "timestamp": 1607533911
    },
    {
        "content": "<p>Anyway, if you know Python, you can get inside the Django shell and write a simple query to print the name and email of the users.</p>",
        "id": 1078004,
        "sender_full_name": "Vishnu KS",
        "timestamp": 1607534008
    },
    {
        "content": "<p>Example</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]:</span> <span class=\"n\">users</span> <span class=\"o\">=</span> <span class=\"n\">UserProfile</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">realm</span><span class=\"o\">=</span><span class=\"n\">get_realm</span><span class=\"p\">(</span><span class=\"s2\">\"realm-subdomain\"</span><span class=\"p\">))</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]:</span> <span class=\"k\">for</span> <span class=\"n\">user</span> <span class=\"ow\">in</span> <span class=\"n\">users</span><span class=\"p\">:</span>\n   <span class=\"o\">...</span><span class=\"p\">:</span>     <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">full_name</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">delivery_email</span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 1078005,
        "sender_full_name": "Vishnu KS",
        "timestamp": 1607534084
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"52\">Vishnu KS</span> <a href=\"#narrow/stream/31-production-help/topic/export.20user.20list.20and.20email/near/1078003\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"15939\">Michele Zamboni</span> What does the <code>user_stats</code> command do?</p>\n</blockquote>\n<div class=\"codehilite\"><pre><span></span><code>ussluccagames\n65 users\n9 streams\n              user73@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user65@zulip.pluck.it     0     0     0     0     1     0     0     0     0     0\n              user76@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user95@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user86@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user92@zulip.pluck.it     0     0     0     0     2     0     0     0     0     0\n             user100@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user74@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user87@zulip.pluck.it     0     1     0     0     3     0     0     0     0     0\n              user66@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user77@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user93@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user67@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user79@zulip.pluck.it     0     0     0     0     2     0     0     0     0     0\n              user94@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user78@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user60@zulip.pluck.it     0     0     0     0     1     0     0     0     0     0\n              user59@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user96@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user75@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user80@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n             user105@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n             user101@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user88@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user68@zulip.pluck.it     0     0     0     1    11     0     0     0     0     0\n              user52@zulip.pluck.it     0     0     4     0     0     1     0     0     0     0\n              user54@zulip.pluck.it     0     0     0     0    16     0     0     0     0     0\n              user69@zulip.pluck.it     0     0     0     0     5     0     0     0     0     0\n             user106@zulip.pluck.it     0     0     1     0     0     0     0     0     0     0\n              user81@zulip.pluck.it     0     0     0     0     1     0     0     0     0     0\n              user57@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user61@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user58@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user97@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user89@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n             user102@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n             user109@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user70@zulip.pluck.it     0     0     0     0     2     0     0     0     0     0\n              user50@zulip.pluck.it     0     0     0     0     0     7     0     0     0     0\n              user98@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n             user107@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user83@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user47@zulip.pluck.it     0     0     0     0     5    29     0     0     0     0\n             user103@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user62@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user63@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user53@zulip.pluck.it     0     0     0     0     8     0     0     0     0     0\n              user55@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user56@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user82@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user90@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user71@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n             user110@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user46@zulip.pluck.it     0     0    10     1    60    99     0     0     0     0\n              user48@zulip.pluck.it     0     0     0     0     0     2     0     0     0     0\n              user49@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user51@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user64@zulip.pluck.it     0     0     0     0     1     0     0     0     0     0\n              user99@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user84@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user72@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user85@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n             user104@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n              user91@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n             user108@zulip.pluck.it     0     0     0     0     0     0     0     0     0     0\n</code></pre></div>",
        "id": 1078006,
        "sender_full_name": "Michele Zamboni",
        "timestamp": 1607534091
    },
    {
        "content": "<p>Does <code>user_stats</code> command come with Zulip? I have never heard of it before.</p>",
        "id": 1078007,
        "sender_full_name": "Vishnu KS",
        "timestamp": 1607534306
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"52\">Vishnu KS</span> <a href=\"#narrow/stream/31-production-help/topic/export.20user.20list.20and.20email/near/1078005\">said</a>:</p>\n<blockquote>\n<p>Example</p>\n<p><div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]:</span> <span class=\"n\">users</span> <span class=\"o\">=</span> <span class=\"n\">UserProfile</span><span class=\"o\">.</span><span class=\"n\">objects</span><span class=\"o\">.</span><span class=\"n\">filter</span><span class=\"p\">(</span><span class=\"n\">realm</span><span class=\"o\">=</span><span class=\"n\">get_realm</span><span class=\"p\">(</span><span class=\"s2\">\"realm-subdomain\"</span><span class=\"p\">))</span>\n\n<span class=\"n\">In</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]:</span> <span class=\"k\">for</span> <span class=\"n\">user</span> <span class=\"ow\">in</span> <span class=\"n\">users</span><span class=\"p\">:</span>\n   <span class=\"o\">...</span><span class=\"p\">:</span>     <span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">full_name</span><span class=\"p\">,</span> <span class=\"n\">user</span><span class=\"o\">.</span><span class=\"n\">delivery_email</span><span class=\"p\">)</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I don't know python very well but you pointed me in the right direction. <br>\nI will try and let you know. Thanks!</p>",
        "id": 1078008,
        "sender_full_name": "Michele Zamboni",
        "timestamp": 1607534323
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"52\">@Vishnu KS</span> With your hits I managed to extract the list I needed! Thanks again for your help! :-)</p>",
        "id": 1078025,
        "sender_full_name": "Michele Zamboni",
        "timestamp": 1607537591
    },
    {
        "content": "<p>I think <code>manage.py user_stats</code> is one of the super ancient analytics tools written in 2013 and replaced for our own use by /stats.</p>",
        "id": 1082163,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1608162473
    }
]