[
    {
        "content": "<p>Hello,</p>\n<p>I am writing to seek assistance regarding an issue I am facing with LDAP integration in my Zulip installation. I have followed the documentation provided, but I am encountering some confusion and difficulties. I hope you can help me resolve these problems.</p>\n<p>The command /home/zulip/deployments/current/manage.py sync_ldap_user_data seems to be working fine, indicating that the password and other configurations are set up correctly.</p>\n<p>However, I noticed that the sync process only queries existing users in Zulip and does not sync new users as expected. According to the documentation, it states that \"New users will be populated automatically with the name/avatar/etc. from LDAP (as configured) on account creation.\" Could you please guide me on how to ensure that new users are also synced properly?</p>\n<p>Another issue I encountered is related to logging in using LDAP credentials. The documentation mentions that after making the necessary configuration changes and restarting the Zulip server, I should be able to log in by entering the email address and LDAP password on the Zulip login form. However, when I tried using the auth_ldap_bind_password password along with the user's email, it displayed an error message stating, \"Please enter a correct email and password. Note that both fields may be case-sensitive.\" in the frontend with \"Authentication failed for xxxx-xxxx-xxxxx-xxxx: user DN/password rejected by LDAP server.\" in <code>/var/log/zulip/ldap.log</code>. I would appreciate any guidance on how to address this login issue.</p>\n<div class=\"codehilite\"><pre><span></span><code>AUTHENTICATION_BACKENDS: Tuple[str, ...] = (\n    &quot;zproject.backends.ZulipLDAPAuthBackend&quot;,  # LDAP, setup below\n)\n\nimport ldap\nfrom django_auth_ldap.config import GroupOfNamesType, LDAPGroupQuery, LDAPSearch  # noqa: F401\n\nAUTH_LDAP_SERVER_URI = &quot;ldap://___IP_ADDRESS&quot;\n\nAUTH_LDAP_BIND_DN = &quot;cn=Manager,dc=___IP_ADDRESS&quot;\nAUTH_LDAP_USER_SEARCH = LDAPSearch(&quot;ou=users,dc=___IP_ADDRESS&quot;, ldap.SCOPE_SUBTREE, &quot;(uid=%(user)s)&quot;)\n\nLDAP_EMAIL_ATTR = &quot;mail&quot;\n\nAUTH_LDAP_REVERSE_EMAIL_SEARCH = LDAPSearch(\n    &quot;ou=users,dc=___IP_ADDRESS&quot;,\n    ldap.SCOPE_SUBTREE, &quot;(mail=%(email)s)&quot;\n)\n\nAUTH_LDAP_USERNAME_ATTR = &quot;uid&quot;\n\nAUTH_LDAP\n</code></pre></div>",
        "id": 1574178,
        "sender_full_name": "Ritesh Shakya",
        "timestamp": 1684779178
    },
    {
        "content": "<p>Not sure if the config came through. Sending it again.</p>\n<div class=\"codehilite\"><pre><span></span><code>AUTHENTICATION_BACKENDS: Tuple[str, ...] = (\n    &quot;zproject.backends.ZulipLDAPAuthBackend&quot;,  # LDAP, setup below\n)\n\nimport ldap\nfrom django_auth_ldap.config import GroupOfNamesType, LDAPGroupQuery, LDAPSearch  # noqa: F401\n\nAUTH_LDAP_SERVER_URI = &quot;ldap://___IP_ADDRESS&quot;\n\nAUTH_LDAP_BIND_DN = &quot;cn=Manager,dc=___IP_ADDRESS&quot;\nAUTH_LDAP_USER_SEARCH = LDAPSearch(&quot;ou=users,dc=___IP_ADDRESS&quot;, ldap.SCOPE_SUBTREE, &quot;(uid=%(user)s)&quot;)\n\nLDAP_EMAIL_ATTR = &quot;mail&quot;\n\nAUTH_LDAP_REVERSE_EMAIL_SEARCH = LDAPSearch(\n    &quot;ou=users,dc=___IP_ADDRESS&quot;,\n    ldap.SCOPE_SUBTREE, &quot;(mail=%(email)s)&quot;\n)\n\nAUTH_LDAP_USERNAME_ATTR = &quot;uid&quot;\n\nAUTH_LDAP_USER_ATTR_MAP = {\n    &quot;full_name&quot;: &quot;cn&quot;,\n    &quot;uid&quot;: &quot;uid&quot;,\n    &quot;first_name&quot;: &quot;givenName&quot;,\n    &quot;last_name&quot;: &quot;sn&quot;,\n    &quot;email&quot;: &quot;mail&quot;\n}\n</code></pre></div>",
        "id": 1574180,
        "sender_full_name": "Ritesh Shakya",
        "timestamp": 1684779285
    }
]