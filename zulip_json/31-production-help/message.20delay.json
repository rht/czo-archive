[
    {
        "content": "<p>When a user enters a message, it sometimes takes a few seconds to send it, and sometimes it is over 10 seconds.<br>\nWhere can I find more information?<br>\nCan you give me a hint about the solution?</p>",
        "id": 671703,
        "sender_full_name": "YI Jeong",
        "timestamp": 1544752330
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>2018-12-14 01:41:26.624 INFO [zr] 123.456.789.123    SOCKET  200   0ms /socket/open [transport=websocket] (unknown via ?)\n2018-12-14 01:41:27.327 INFO [zr] 123.456.789.123    GET     200   7ms (lp: 473ms) /json/events [1544302822:51/1/message] (id@domain via ZulipElectron)\n2018-12-14 01:41:27.330 INFO [zr] 123.456.789.123    SOCKET  200   1ms (lp: 540ms) /socket/service_request [transport=websocket, queue_delay: 29ms/462ms, service_time: 47ms] (id@domain via ?)\n2018-12-14 01:41:27.593 INFO [zr] 123.456.789.123    SOCKET  200   0ms (db: 1ms/1q) /socket/close [transport=websocket] (id@domain via ?)\n2018-12-14 01:41:27.598 INFO [zr] 123.456.789.123    SOCKET  200  12ms (db: 1ms/1q) /socket/auth [transport=websocket] (id@domain via ?)\n2018-12-14 01:41:27.620 INFO [zr] 123.456.789.123    POST    200   9ms /json/report/send_times [4624ms/4356ms/(unknown)ms/echo:True/diff:False] (id@domain via ZulipElectron)\n2018-12-14 01:41:28.144 INFO [zr] 123.456.789.123    GET     200   6ms (lp: 220ms) /json/events [1544302822:51/1/message] (id@domain via ZulipElectron)\n2018-12-14 01:41:28.147 INFO [zr] 123.456.789.123    SOCKET  200   1ms (lp: 730ms) /socket/service_request [transport=websocket, queue_delay: 170ms/495ms, service_time: 64ms] (id@domain via ?)\n2018-12-14 01:41:28.161 INFO [zr] 123.456.789.123    POST    200   8ms /json/report/send_times [4105ms/4106ms/(unknown)ms/echo:True/diff:False] (id@domain via ZulipElectron)\n</pre></div>",
        "id": 671704,
        "sender_full_name": "YI Jeong",
        "timestamp": 1544752335
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"3667\">@YI Jeong</span> so, the <code>send_times</code> report has the end-to-end time from when the user hit send to when they receive the message back, which includes RTTs.</p>",
        "id": 671713,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1544763534
    },
    {
        "content": "<p>So if you have a really slow network, that could be what's going on.</p>",
        "id": 671714,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1544763548
    },
    {
        "content": "<p>The actual backend send time is logged in <code>/var/log/zulip/events_message_sender.log</code>, and on our servers is generally in the ~20ms range.</p>",
        "id": 671715,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1544763584
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span> !!</p>\n<p>I tested sending messages from a client located in the same network band as the Zulip server.<br>\nBelow is a ping test result from Zulip server to client.</p>\n<div class=\"codehilite\"><pre><span></span>PING 123.123.123.123 (123.123.123.123) 56(84) bytes of data.\n64 bytes from 123.123.123.123: icmp_seq=1 ttl=128 time=0.538 ms\n64 bytes from 123.123.123.123: icmp_seq=2 ttl=128 time=0.613 ms\n64 bytes from 123.123.123.123: icmp_seq=3 ttl=128 time=0.651 ms\n64 bytes from 123.123.123.123: icmp_seq=4 ttl=128 time=0.573 ms\n64 bytes from 123.123.123.123: icmp_seq=5 ttl=128 time=0.520 ms\n--- 123.123.123.123 ping statistics ---\n5 packets transmitted, 5 received, 0% packet loss, time 3998ms\nrtt min/avg/max/mdev = 0.520/0.579/0.651/0.048 ms\n</pre></div>\n\n\n<p>The logs in the 'events_message_sender.log' file are not fast, but they do not seem to be slow either.</p>\n<div class=\"codehilite\"><pre><span></span>2018-12-14 05:22:13.350 INFO [zr] 123.123.123.123    SOCKET  200  62ms (mem: 10ms/9) (db: 13ms/10q) /json/messages (id@domain via website)\n2018-12-14 05:22:13.357 INFO [zr] 123.123.123.123    SOCKET  200  62ms (mem: 7ms/8) (md: 10ms/1) (db: 9ms/9q) /json/messages (id@domain via website)\n2018-12-14 05:22:13.358 INFO [zr] 123.123.123.123    SOCKET  200  60ms (md: 7ms/1) (db: 10ms/9q) (+start: 5ms) /json/messages (id@domain via website)\n2018-12-14 05:22:13.383 INFO [zr] 123.123.123.123    SOCKET  200  86ms (mem: 12ms/8) (db: 17ms/9q) /json/messages (id@domain via website)\n2018-12-14 05:22:13.401 INFO [zr] 123.123.123.123    SOCKET  200  45ms (db: 8ms/9q) /json/messages (id@domain via website)\n2018-12-14 05:22:13.430 INFO [zr] 123.123.123.123    SOCKET  200  39ms (db: 9ms/9q) /json/messages (id@domain via website)\n</pre></div>\n\n\n<p>However, the final result in the 'server.log' file takes more than 14 seconds. Where do you think there might be a problem?</p>\n<div class=\"codehilite\"><pre><span></span>2018-12-14 05:22:06.895 INFO [zr] 123.123.123.123    SOCKET  200   5ms (db: 1ms/1q) /socket/auth [transport=websocket] (id@domain via ?)\n2018-12-14 05:22:12.934 INFO [zr] 123.123.123.123    SOCKET  200   0ms /socket/open [transport=websocket] (unknown via ?)\n2018-12-14 05:22:13.242 INFO [zr] 123.123.123.123    GET     200   5ms (lp: 3.0s) /json/events [1544302822:27767/1] (id@domain via website)\n2018-12-14 05:22:13.244 INFO [zr] 123.123.123.123    SOCKET  200   0ms /socket/close [transport=websocket] (id@domain via ?)\n2018-12-14 05:22:13.272 INFO [zr] 123.123.123.123    SOCKET  200   5ms (db: 1ms/1q) /socket/auth [transport=websocket] (id@domain via ?)\n2018-12-14 05:22:13.365 INFO [zr] 123.123.123.123    GET     200   8ms (lp: 129ms) /json/events [1544302822:27767/1/message] (id@domain via website)\n2018-12-14 05:22:13.368 INFO [zr] 123.123.123.123    SOCKET  200   1ms (lp: 85ms) /socket/service_request [transport=websocket, queue_delay: 4ms/16ms, service_time: 64ms] (id@domain via ?)\n2018-12-14 05:22:13.371 INFO [zr] 123.123.123.123    SOCKET  200   1ms (lp: 83ms) /socket/service_request [transport=websocket, queue_delay: 6ms/14ms, service_time: 62ms] (id@domain via ?)\n2018-12-14 05:22:13.372 INFO [zr] 123.123.123.123    SOCKET  200   1ms (lp: 85ms) /socket/service_request [transport=websocket, queue_delay: 11ms/13ms, service_time: 60ms] (id@domain via ?)\n2018-12-14 05:22:13.391 INFO [zr] 123.123.123.123    SOCKET  200   1ms (lp: 106ms) /socket/service_request [transport=websocket, queue_delay: 11ms/8ms, service_time: 87ms] (id@domain via ?)\n2018-12-14 05:22:13.406 INFO [zr] 123.123.123.123    SOCKET  200   2ms (lp: 75ms) /socket/service_request [transport=websocket, queue_delay: 23ms/3ms, service_time: 47ms] (id@domain via ?)\n2018-12-14 05:22:13.439 INFO [zr] 123.123.123.123    SOCKET  200   1ms (lp: 103ms) /socket/service_request [transport=websocket, queue_delay: 54ms/8ms, service_time: 40ms] (id@domain via ?)\n2018-12-14 05:22:13.442 INFO [zr] 123.123.123.123    POST    200   9ms /json/report/send_times [14364ms/14306ms/(unknown)ms/echo:True/diff:False] (id@domain via website)\n2018-12-14 05:22:13.476 INFO [zr] 123.123.123.123    GET     200  12ms (+start: 5ms) /json/events [1544302822:27767/5] (id@domain via website)\n2018-12-14 05:22:13.861 INFO [zr] 123.123.123.123    POST    200  18ms /json/report/send_times [13468ms/13859ms/(unknown)ms/echo:True/diff:False] (id@domain via website)\n2018-12-14 05:22:13.880 INFO [zr] 123.123.123.123    POST    200  16ms /json/report/send_times [14071ms/14463ms/(unknown)ms/echo:True/diff:False] (id@domain via website)\n2018-12-14 05:22:13.889 INFO [zr] 123.123.123.123    POST    200  23ms /json/report/send_times [12872ms/13256ms/(unknown)ms/echo:False/diff:False] (id@domain via website)\n2018-12-14 05:22:13.892 INFO [zr] 123.123.123.123    POST    200   8ms /json/report/send_times [13753ms/14144ms/(unknown)ms/echo:True/diff:False] (id@domain via website)\n2018-12-14 05:22:13.911 INFO [zr] 123.123.123.123    POST    200  31ms (mem: 13ms/1) (+start: 8ms) /json/report/send_times [13147ms/13540ms/(unknown)ms/echo:True/diff:False] (id@domain via website)\n2018-12-14 05:22:16.954 INFO [zr] 123.123.123.123    GET     200   7ms (lp: 2.9s) /json/events [1544302822:27767/1/presence] (id@domain via website)\n</pre></div>",
        "id": 671722,
        "sender_full_name": "YI Jeong",
        "timestamp": 1544766017
    },
    {
        "content": "<p>And we have bot participating in almost all streams.<br>\nIn the 'events_slow_queries.log' file, only the bot related logs are recorded as shown below.<br>\nDo you think removing this bot and creating a new one will help improve performance?</p>\n<div class=\"codehilite\"><pre><span></span>2018-12-14 05:57:30.234 INFO [] Slow query: 123.123.123.111    POST    200  4.5s (db: 1ms/1q) /api/v1/register (chat-bot@domain via ZulipPython) (chat-bot@domain)\n2018-12-14 05:57:30.234 INFO [] Slow query: 123.123.123.111    POST    200  1.5s (mem: 7ms/1) (db: 2ms/1q) /api/v1/register (chat-bot@domain via ZulipPython) (chat-bot@domain)\n2018-12-14 05:58:30.299 INFO [] Slow query: 123.123.123.111    POST    200  1.3s (db: 1ms/1q) /api/v1/register (chat-bot@domain via ZulipPython) (chat-bot@domain)\n2018-12-14 05:58:30.299 INFO [] Slow query: 123.123.123.111    POST    200  1.2s (db: 1ms/1q) /api/v1/register (chat-bot@domain via ZulipPython) (chat-bot@domain)\n2018-12-14 05:58:30.300 INFO [] Slow query: 123.123.123.111    POST    200  1.3s (db: 1ms/1q) /api/v1/register (chat-bot@domain via ZulipPython) (chat-bot@domain)\n2018-12-14 05:59:30.369 INFO [] Slow query: 123.123.123.111    POST    200  1.6s (db: 1ms/1q) /api/v1/register (chat-bot@domain via ZulipPython) (chat-bot@domain)\n2018-12-14 05:59:30.369 INFO [] Slow query: 123.123.123.111    POST    200  5.0s (db: 1ms/1q) /api/v1/register (chat-bot@domain via ZulipPython) (chat-bot@domain)\n</pre></div>",
        "id": 671729,
        "sender_full_name": "YI Jeong",
        "timestamp": 1544767332
    },
    {
        "content": "<p>Woah, those numbers <code> 5.0s (db: 1ms/1q)</code> are crazy.  Most of the work of the <code>/register</code> endpoint is supposed to in the database.</p>",
        "id": 671736,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1544770959
    },
    {
        "content": "<p>Can you talk about the rest of your configuration?  E.g. are all the Zulip services on the same machine?</p>",
        "id": 671737,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1544770987
    },
    {
        "content": "<p>I could imagine an issue with e.g. a remote memcached or redis server causing this, though it doesn't seem super plausible.</p>",
        "id": 671738,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1544770996
    },
    {
        "content": "<p>We set up all the Zulip related services on one server, and in order to improve the DB performance, we use only the Postgresql service to migrate to the SSD-based server (same network subnet).</p>",
        "id": 671778,
        "sender_full_name": "YI Jeong",
        "timestamp": 1544773744
    },
    {
        "content": "<p>Huh, I don't have obvious guesses, may be worth some print debugging. Heading to sleep now</p>",
        "id": 671781,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1544774196
    },
    {
        "content": "<p>Hello :) I want to ask again the question that I asked a few days ago. Please help me.<br>\nBelow is the log of only one user in the log file recorded today.</p>\n<p><code>server.log</code></p>\n<div class=\"codehilite\"><pre><span></span>2018-12-21 08:00:28.029 INFO [zr] 123.123.123.22    POST    200  42ms (db: 8ms/2q) /json/users/me/pointer [3530269] (userA@domain via website)\n2018-12-21 08:00:28.177 INFO [zr] 123.123.123.22    GET     200   5ms (lp: 2.9s) /json/events [1544907622:30225/1/pointer] (userA@domain via website)\n2018-12-21 08:00:30.733 INFO [zr] 123.123.123.22    GET     200  14ms (lp: 2.2s) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:00:40.193 INFO [zr] 123.123.123.22    POST    200  12ms /json/typing (userA@domain via website)\n2018-12-21 08:00:40.194 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 8.8s) /json/events [1544907622:30225/1/typing] (userA@domain via website)\n2018-12-21 08:00:42.017 INFO [zr] 123.123.123.22    GET     200   7ms (lp: 1.8s) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:00:42.919 INFO [zr] 123.123.123.22    POST    200  11ms /json/typing (userA@domain via website)\n2018-12-21 08:00:45.183 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 2.5s) /json/events [1544907622:30225/1/typing] (userA@domain via website)\n2018-12-21 08:00:46.142 INFO [zr] 123.123.123.22    GET     200   6ms /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:00:46.731 INFO [zr] 123.123.123.22    POST    200  44ms (db: 8ms/3q) /json/users/me/presence (userA@domain via website)\n2018-12-21 08:00:47.483 INFO [zr] 123.123.123.22    SOCKET  200   0ms /socket/open [transport=websocket] (unknown via ?)\n2018-12-21 08:00:49.250 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 2.5s) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:00:49.946 INFO [zr] 123.123.123.22    GET     200   5ms /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:00:51.645 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 463ms) /json/events [1544907622:30225/1/message] (userA@domain via website)\n2018-12-21 08:00:51.647 INFO [zr] 123.123.123.22    SOCKET  200   1ms (lp: 1.2s) /socket/service_request [transport=websocket, queue_delay: 326ms/800ms, service_time: 86ms] (userA@domain via ?)\n2018-12-21 08:00:54.209 INFO [zr] 123.123.123.22    SOCKET  200   0ms (db: 1ms/1q) /socket/close [transport=websocket] (userA@domain via ?)\n2018-12-21 08:00:54.210 INFO [zr] 123.123.123.22    SOCKET  200   6ms (db: 1ms/1q) /socket/auth [transport=websocket] (userA@domain via ?)\n2018-12-21 08:00:54.391 INFO [zr] 123.123.123.22    GET     200   7ms /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:00:57.502 INFO [zr] 123.123.123.22    SOCKET  200   0ms /socket/open [transport=websocket] (unknown via ?)\n2018-12-21 08:00:57.616 INFO [zr] 123.123.123.22    GET     200   6ms /json/events [1544907622:30225/3] (userA@domain via website)\n2018-12-21 08:01:00.180 INFO [zr] 123.123.123.22    GET     200   6ms /json/events [1544907622:30225/3] (userA@domain via website)\n2018-12-21 08:01:00.676 INFO [zr] 123.123.123.22    SOCKET  200   0ms /socket/close [transport=websocket] (userA@domain via ?)\n2018-12-21 08:01:03.792 INFO [zr] 123.123.123.22    GET     200  12ms /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:01:06.896 INFO [zr] 123.123.123.22    SOCKET  200   0ms /socket/open [transport=websocket] (unknown via ?)\n2018-12-21 08:01:07.056 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 894ms) /json/events [1544907622:30225/1] (userA@domain via website)\n2018-12-21 08:01:07.057 INFO [] Disconnected handler for queue 1544907622:30225 (userA@domain/website)\n2018-12-21 08:01:07.285 INFO [zr] 123.123.123.22    SOCKET  200   4ms (db: 1ms/1q) /socket/auth [transport=websocket] (userA@domain via ?)\n2018-12-21 08:01:07.471 INFO [zr] 123.123.123.22    SOCKET  200   0ms (db: 2ms/2q) /socket/close [transport=websocket] (userA@domain via ?)\n2018-12-21 08:01:07.476 INFO [zr] 123.123.123.22    SOCKET  200   5ms (db: 3ms/3q) /socket/auth [transport=websocket] (userA@domain via ?)\n2018-12-21 08:01:07.501 INFO [zr] 123.123.123.22    POST    200   9ms /json/report/send_times [24580ms/8754ms/(unknown)ms/echo:True/diff:False] (userA@domain via website)\n2018-12-21 08:01:18.126 INFO [zr] 123.123.123.22    GET     200   8ms (lp: 11.1s) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:01:23.073 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 4.3s) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:01:26.292 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 2.6s) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:01:29.916 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 2.0s) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:01:36.727 INFO [zr] 123.123.123.22    POST    200  39ms (db: 6ms/3q) /json/users/me/presence (userA@domain via website)\n2018-12-21 08:01:38.057 INFO [zr] 123.123.123.22    GET     200   5ms (lp: 6.4s) /json/events [1544907622:30225/1/message] (userA@domain via website)\n2018-12-21 08:01:38.161 INFO [zr] 123.123.123.22    POST    200  29ms (db: 6ms/3q) /json/messages/flags [add read/1] actually 1 (userA@domain via website)\n2018-12-21 08:01:38.291 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 79ms) /json/events [1544907622:30225/1/update_message_flags] (userA@domain via website)\n2018-12-21 08:01:44.921 INFO [zr] 123.123.123.22    GET     200   7ms (lp: 6.5s) (+start: 6ms) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n2018-12-21 08:01:56.308 INFO [zr] 123.123.123.22    GET     200   6ms (lp: 10.8s) /json/events [1544907622:30225/1/presence] (userA@domain via website)\n</pre></div>\n\n\n<p><code>events_message_sender.log</code></p>\n<div class=\"codehilite\"><pre><span></span>2018-12-21 08:00:50.847 INFO [zr] 123.123.123.22    SOCKET  200  86ms (mem: 6ms/9) (md: 15ms/1) (db: 18ms/7q) /json/messages (userA@domain via website)\n</pre></div>\n\n\n<p>The values of send_times in <code>server.log</code> and <code>events_message_sender.log</code> are very different, where can I find a log of what happened between them?</p>",
        "id": 674765,
        "sender_full_name": "YI Jeong",
        "timestamp": 1545381193
    },
    {
        "content": "<p><code>memcached stat</code></p>\n<div class=\"codehilite\"><pre><span></span>admin@Zulip:/etc$ echo stats | nc localhost 11211\nSTAT pid 805\nSTAT uptime 1525931\nSTAT time 1545378938\nSTAT version 1.4.25 Ubuntu\nSTAT libevent 2.0.21-stable\nSTAT pointer_size 64\nSTAT rusage_user 3465.080000\nSTAT rusage_system 9988.944000\nSTAT curr_connections 16\nSTAT total_connections 25920020\nSTAT rejected_connections 0\nSTAT connection_structures 23\nSTAT reserved_fds 20\nSTAT cmd_get 132493555\nSTAT cmd_set 935626\nSTAT cmd_flush 0\nSTAT cmd_touch 0\nSTAT get_hits 131225223\nSTAT get_misses 1268332\nSTAT delete_misses 105911\nSTAT delete_hits 53844\nSTAT incr_misses 0\nSTAT incr_hits 0\nSTAT decr_misses 0\nSTAT decr_hits 0\nSTAT cas_misses 0\nSTAT cas_hits 0\nSTAT cas_badval 0\nSTAT touch_hits 0\nSTAT touch_misses 0\nSTAT auth_cmds 0\nSTAT auth_errors 0\nSTAT bytes_read 9241037025\nSTAT bytes_written 224160169312\nSTAT limit_maxbytes 1044381696\nSTAT accepting_conns 1\nSTAT listen_disabled_num 0\nSTAT time_in_listen_disabled_us 0\nSTAT threads 4\nSTAT conn_yields 0\nSTAT hash_power_level 19\nSTAT hash_bytes 4194304\nSTAT hash_is_expanding 0\nSTAT slab_reassign_rescues 6983\nSTAT slab_reassign_evictions_nomem 0\nSTAT slab_reassign_inline_reclaim 44\nSTAT slab_reassign_busy_items 0\nSTAT slab_reassign_running 0\nSTAT slabs_moved 5\nSTAT lru_crawler_running 0\nSTAT lru_crawler_starts 10172\nSTAT lru_maintainer_juggles 5913272\nSTAT malloc_fails 0\nSTAT bytes 374604208\nSTAT curr_items 697773\nSTAT total_items 942609\nSTAT slab_global_page_pool 0\nSTAT expired_unfetched 1597\nSTAT evicted_unfetched 0\nSTAT evictions 0\nSTAT reclaimed 1401\nSTAT crawler_reclaimed 112587\nSTAT crawler_items_checked 258386241\nSTAT lrutail_reflocked 201\nSTAT moves_to_cold 481364\nSTAT moves_to_warm 17513\nSTAT moves_within_lru 629696\nSTAT direct_reclaims 0\nEND\n</pre></div>\n\n\n<p><code>redis stat</code></p>\n<div class=\"codehilite\"><pre><span></span>127.0.0.1:6379&gt; info\n# Server\nredis_version:3.0.6\nredis_git_sha1:00000000\nredis_git_dirty:0\nredis_build_id:687a2a319020fa42\nredis_mode:standalone\nos:Linux 4.4.0-116-generic x86_64\narch_bits:64\nmultiplexing_api:epoll\ngcc_version:5.3.1\nprocess_id:991\nrun_id:5139c0428d9f937fabeadec8798e7882e2ebcd0a\ntcp_port:6379\nuptime_in_seconds:1526204\nuptime_in_days:17\nhz:10\nlru_clock:1875341\nconfig_file:/etc/redis/redis.conf\n\n# Clients\nconnected_clients:17\nclient_longest_output_list:0\nclient_biggest_input_buf:0\nblocked_clients:0\n\n# Memory\nused_memory:11688288\nused_memory_human:11.15M\nused_memory_rss:27496448\nused_memory_peak:14781552\nused_memory_peak_human:14.10M\nused_memory_lua:36864\nmem_fragmentation_ratio:2.35\nmem_allocator:jemalloc-3.6.0\n\n# Persistence\nloading:0\nrdb_changes_since_last_save:180193213\nrdb_bgsave_in_progress:0\nrdb_last_save_time:1543853009\nrdb_last_bgsave_status:ok\nrdb_last_bgsave_time_sec:-1\nrdb_current_bgsave_time_sec:-1\naof_enabled:0\naof_rewrite_in_progress:0\naof_rewrite_scheduled:0\naof_last_rewrite_time_sec:-1\naof_current_rewrite_time_sec:-1\naof_last_bgrewrite_status:ok\naof_last_write_status:ok\n\n# Stats\ntotal_connections_received:50\ntotal_commands_processed:516661516\ninstantaneous_ops_per_sec:2014\ntotal_net_input_bytes:39828915094\ntotal_net_output_bytes:6459607860\ninstantaneous_input_kbps:151.79\ninstantaneous_output_kbps:24.75\nrejected_connections:0\nsync_full:0\nsync_partial_ok:0\nsync_partial_err:0\nexpired_keys:145594\nevicted_keys:0\nkeyspace_hits:155236891\nkeyspace_misses:51690466\npubsub_channels:0\npubsub_patterns:0\nlatest_fork_usec:0\nmigrate_cached_sockets:0\n\n# Replication\nrole:master\nconnected_slaves:0\nmaster_repl_offset:0\nrepl_backlog_active:0\nrepl_backlog_size:1048576\nrepl_backlog_first_byte_offset:0\nrepl_backlog_histlen:0\n\n# CPU\nused_cpu_sys:12843.21\nused_cpu_user:9016.87\nused_cpu_sys_children:0.00\nused_cpu_user_children:0.00\n\n# Cluster\ncluster_enabled:0\n\n# Keyspace\ndb0:keys=9210,expires=9210,avg_ttl=41622136\n</pre></div>\n\n\n<p>If you have any additional information you need, please let me know.</p>",
        "id": 674769,
        "sender_full_name": "YI Jeong",
        "timestamp": 1545381467
    },
    {
        "content": "<p>Oh, and Merry Christmas!</p>",
        "id": 674774,
        "sender_full_name": "YI Jeong",
        "timestamp": 1545384434
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"3667\">@YI Jeong</span> so, looking at those logs, I believe the Zulip backend is behaving completely correctly; the <code> 86ms </code> in <code>events_message_sender.log</code> is showing that the backend spent a total of 86ms processing your request.</p>",
        "id": 675489,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1545567445
    },
    {
        "content": "<p>(I also don't see anything in those logs suggestive of the 5s result you showed for <code>/register</code> in the previous logs you posted)</p>",
        "id": 675490,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1545567594
    },
    {
        "content": "<p>One thing I do notice from <a href=\"#narrow/stream/31-production-help/subject/message.20delay/near/671729\" title=\"#narrow/stream/31-production-help/subject/message.20delay/near/671729\">https://chat.zulip.org/#narrow/stream/31-production-help/subject/message.20delay/near/671729</a> is that it appears your chat bot is hitting the /register API many times a second, which no correctly implemented client should be doing.  So if your server has low resources, it's possible your chat bot was mis-implemented and accidentally trying to DoS the server, and isn't anymore.</p>",
        "id": 675491,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1545567742
    },
    {
        "content": "<p>Given what you've said, this seems likely an issue with the specifics of your testing procedure/environment; I encourage you to contact <a href=\"mailto:support@zulipchat.com\" title=\"mailto:support@zulipchat.com\">support@zulipchat.com</a> to get a support contract if you need further help .</p>",
        "id": 675492,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1545567843
    }
]