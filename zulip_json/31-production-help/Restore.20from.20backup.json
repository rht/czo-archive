[
    {
        "content": "<p>Hello,<br>\nI am doing a restore from one machine to another. I was able to successfully do that on my test set up, but now when I try to run the restore-backup script. I am getting <code>PermissionError: [Errno 1] Operation not permitted</code>. Would you be able to tell from the error what permissions am I missing?</p>\n<div class=\"codehilite\"><pre><span></span><code>Traceback (most recent call last):\n  File &quot;/home/zulip/deployments/current/scripts/setup/restore-backup&quot;, line 152, in &lt;module&gt;\n    restore_backup(tarball_file)\n  File &quot;/home/zulip/deployments/current/scripts/setup/restore-backup&quot;, line 63, in restore_backup\n    os.setresuid(0, 0, 0)\nPermissionError: [Errno 1] Operation not permitted\n</code></pre></div>\n\n\n<p>OS Info:</p>\n<div class=\"codehilite\"><pre><span></span><code>DISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=18.04\nDISTRIB_CODENAME=bionic\nDISTRIB_DESCRIPTION=&quot;Ubuntu 18.04.4 LTS&quot;\nNAME=&quot;Ubuntu&quot;\nVERSION=&quot;18.04.4 LTS (Bionic Beaver)&quot;\nID=ubuntu\nID_LIKE=debian\nPRETTY_NAME=&quot;Ubuntu 18.04.4 LTS&quot;\nVERSION_ID=&quot;18.04&quot;\nHOME_URL=&quot;https://www.ubuntu.com/&quot;\nSUPPORT_URL=&quot;https://help.ubuntu.com/&quot;\nBUG_REPORT_URL=&quot;https://bugs.launchpad.net/ubuntu/&quot;\nPRIVACY_POLICY_URL=&quot;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&quot;\nVERSION_CODENAME=bionic\nUBUNTU_CODENAME=bionic\n</code></pre></div>\n\n\n<p>Thanks</p>",
        "id": 978280,
        "sender_full_name": "Tej Gill",
        "timestamp": 1596857955
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"13286\">Tej Gill</span> <a href=\"#narrow/stream/31-production-help/topic/Restore.20from.20backup/near/978280\">said</a>:</p>\n<blockquote>\n<p>Hello,<br>\nI am doing a restore from one machine to another. I was able to successfully do that on my test set up, but now when I try to run the restore-backup script. I am getting <code>PermissionError: [Errno 1] Operation not permitted</code>. Would you be able to tell from the error what permissions am I missing?</p>\n<div class=\"codehilite\"><pre><span></span><code>Traceback (most recent call last):\n  File &quot;/home/zulip/deployments/current/scripts/setup/restore-backup&quot;, line 152, in &lt;module&gt;\n    restore_backup(tarball_file)\n  File &quot;/home/zulip/deployments/current/scripts/setup/restore-backup&quot;, line 63, in restore_backup\n    os.setresuid(0, 0, 0)\nPermissionError: [Errno 1] Operation not permitted\n</code></pre></div>\n\n\n<p>OS Info:</p>\n<div class=\"codehilite\"><pre><span></span><code>DISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=18.04\nDISTRIB_CODENAME=bionic\nDISTRIB_DESCRIPTION=&quot;Ubuntu 18.04.4 LTS&quot;\nNAME=&quot;Ubuntu&quot;\nVERSION=&quot;18.04.4 LTS (Bionic Beaver)&quot;\nID=ubuntu\nID_LIKE=debian\nPRETTY_NAME=&quot;Ubuntu 18.04.4 LTS&quot;\nVERSION_ID=&quot;18.04&quot;\nHOME_URL=&quot;https://www.ubuntu.com/&quot;\nSUPPORT_URL=&quot;https://help.ubuntu.com/&quot;\nBUG_REPORT_URL=&quot;https://bugs.launchpad.net/ubuntu/&quot;\nPRIVACY_POLICY_URL=&quot;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&quot;\nVERSION_CODENAME=bionic\nUBUNTU_CODENAME=bionic\n</code></pre></div>\n\n\n<p>Thanks</p>\n</blockquote>\n<p>I figured out the issue. it might have skipped my mind to run the retore-backup script as root. Instead I was trying to run it as the zulip user. Hope this would help someone who might run into something like this.</p>",
        "id": 978304,
        "sender_full_name": "Tej Gill",
        "timestamp": 1596862722
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"699\">@Anders Kaseorg</span> I imagine we should make this give a better error message when run as not root?</p>",
        "id": 979555,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1597017489
    }
]