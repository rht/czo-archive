[
    {
        "content": "<p>Dear all,</p>\n<p>on my clean Ubuntu VM (OpenVZ), Zulip install fails because it can't install and/or start RabbitMQ Server. Here is from Zulips install log, <a href=\"https://pastebin.com/dMfLzk5M\" target=\"_blank\" title=\"https://pastebin.com/dMfLzk5M\">full log here</a>:</p>\n<div class=\"codehilite\"><pre><span></span>Setting up rabbitmq-server <span class=\"o\">(</span><span class=\"m\">3</span>.6.10-1<span class=\"o\">)</span> ...\nJob <span class=\"k\">for</span> rabbitmq-server.service failed because the control process exited with error code.\ninvoke-rc.d: initscript rabbitmq-server, action <span class=\"s2\">&quot;start&quot;</span> failed.\n‚óè rabbitmq-server.service - RabbitMQ Messaging Server\n   Loaded: loaded <span class=\"o\">(</span>/lib/systemd/system/rabbitmq-server.service<span class=\"p\">;</span> enabled<span class=\"p\">;</span> vendor preset: enabled<span class=\"o\">)</span>\n   Active: failed <span class=\"o\">(</span>Result: exit-code<span class=\"o\">)</span> since Fri <span class=\"m\">2020</span>-03-06 <span class=\"m\">20</span>:49:24 CET<span class=\"p\">;</span> 9ms ago\n  Process: <span class=\"m\">16748</span> <span class=\"nv\">ExecStartPost</span><span class=\"o\">=</span>/usr/lib/rabbitmq/bin/rabbitmq-server-wait <span class=\"o\">(</span><span class=\"nv\">code</span><span class=\"o\">=</span>exited, <span class=\"nv\">status</span><span class=\"o\">=</span><span class=\"m\">134</span><span class=\"o\">)</span>\n  Process: <span class=\"m\">16747</span> <span class=\"nv\">ExecStart</span><span class=\"o\">=</span>/usr/sbin/rabbitmq-server <span class=\"o\">(</span><span class=\"nv\">code</span><span class=\"o\">=</span>exited, <span class=\"nv\">status</span><span class=\"o\">=</span><span class=\"m\">134</span><span class=\"o\">)</span>\n Main PID: <span class=\"m\">16747</span> <span class=\"o\">(</span><span class=\"nv\">code</span><span class=\"o\">=</span>exited, <span class=\"nv\">status</span><span class=\"o\">=</span><span class=\"m\">134</span><span class=\"o\">)</span>\n\nMar <span class=\"m\">06</span> <span class=\"m\">20</span>:49:24 h08150821.stratoserver.net systemd<span class=\"o\">[</span><span class=\"m\">1</span><span class=\"o\">]</span>: Starting RabbitMQ Messaging Server...\nMar <span class=\"m\">06</span> <span class=\"m\">20</span>:49:24 h08150821.stratoserver.net systemd<span class=\"o\">[</span><span class=\"m\">1</span><span class=\"o\">]</span>: rabbitmq-server.service: Main process exited, <span class=\"nv\">code</span><span class=\"o\">=</span>exited, <span class=\"nv\">status</span><span class=\"o\">=</span><span class=\"m\">134</span>/n/a\nMar <span class=\"m\">06</span> <span class=\"m\">20</span>:49:24 h08150821.stratoserver.net rabbitmq<span class=\"o\">[</span><span class=\"m\">16748</span><span class=\"o\">]</span>: Failed to create dirty cpu scheduler thread <span class=\"m\">13</span>, <span class=\"nv\">error</span> <span class=\"o\">=</span> <span class=\"m\">11</span>\nMar <span class=\"m\">06</span> <span class=\"m\">20</span>:49:24 h08150821.stratoserver.net rabbitmq<span class=\"o\">[</span><span class=\"m\">16748</span><span class=\"o\">]</span>: Aborted\nMar <span class=\"m\">06</span> <span class=\"m\">20</span>:49:24 h08150821.stratoserver.net systemd<span class=\"o\">[</span><span class=\"m\">1</span><span class=\"o\">]</span>: rabbitmq-server.service: Control process exited, <span class=\"nv\">code</span><span class=\"o\">=</span>exited <span class=\"nv\">status</span><span class=\"o\">=</span><span class=\"m\">134</span>\nMar <span class=\"m\">06</span> <span class=\"m\">20</span>:49:24 h08150821.stratoserver.net systemd<span class=\"o\">[</span><span class=\"m\">1</span><span class=\"o\">]</span>: rabbitmq-server.service: Failed with result <span class=\"s1\">&#39;exit-code&#39;</span>.\nMar <span class=\"m\">06</span> <span class=\"m\">20</span>:49:24 h08150821.stratoserver.net systemd<span class=\"o\">[</span><span class=\"m\">1</span><span class=\"o\">]</span>: Failed to start RabbitMQ Messaging Server.\ndpkg: error processing package rabbitmq-server <span class=\"o\">(</span>--configure<span class=\"o\">)</span>:\n installed rabbitmq-server package post-installation script subprocess returned error <span class=\"nb\">exit</span> status <span class=\"m\">1</span>\nErrors were encountered <span class=\"k\">while</span> processing:\n rabbitmq-server\nE: Sub-process /usr/bin/dpkg returned an error code <span class=\"o\">(</span><span class=\"m\">1</span><span class=\"o\">)</span>\n\nZulip installation failed <span class=\"o\">(</span><span class=\"nb\">exit</span> code <span class=\"m\">100</span><span class=\"o\">)</span>!\n</pre></div>\n\n\n<p>RabbitMQ-Server can not be installed/started manually, either (basically, same log output as above).</p>\n<p>After a lot of research I somewhere read that this is some OpenVZ issue. But is it?</p>\n<p>What I want to find out is whether I can get this running somehow on the current VM without changing providers, tariffs etc., or what the problem really is in the first place.</p>\n<p>Any info/input appreciated!</p>",
        "id": 827357,
        "sender_full_name": "Roman Bannack",
        "timestamp": 1583525566
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"14475\">@Roman Bannack</span> I'd certainly believe that OpenVZ doesn't support RabbitMQ; it has a bunch of limits on what one is allowed to do.</p>",
        "id": 827385,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1583527045
    },
    {
        "content": "<p>This thread seems to suggest rabbitmq is just not supported there, and you'll need to use another hosting environment:</p>\n<p><a href=\"https://groups.google.com/forum/#!topic/rabbitmq-users/l1DLd8-VTPc\" target=\"_blank\" title=\"https://groups.google.com/forum/#!topic/rabbitmq-users/l1DLd8-VTPc\">https://groups.google.com/forum/#!topic/rabbitmq-users/l1DLd8-VTPc</a></p>",
        "id": 827387,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1583527114
    },
    {
        "content": "<p>Thank you for this feedback. It's a pity, but now, at least, it's clear.</p>",
        "id": 827455,
        "sender_full_name": "Roman Bannack",
        "timestamp": 1583537382
    },
    {
        "content": "<p>there are lots of good providers using KVM virtualization which is better. you can try/take a look at: Scaleway, Digital Ocean, OVH, Vpsag.. I've been in all of them and never had issues :)</p>",
        "id": 828016,
        "sender_full_name": "PeGaSuS",
        "timestamp": 1583594673
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"14475\">Roman Bannack</span> <a href=\"#narrow/stream/31-production-help/topic/Install.20fails.20w.2F.20RabbitMQ.20on.20OpenVZ.20VM/near/827357\" title=\"#narrow/stream/31-production-help/topic/Install.20fails.20w.2F.20RabbitMQ.20on.20OpenVZ.20VM/near/827357\">said</a>:</p>\n<blockquote>\n<p>on my clean Ubuntu VM (OpenVZ), Zulip install fails because it can't install and/or start RabbitMQ Server. Here is from Zulips install log, <a href=\"https://pastebin.com/dMfLzk5M\" target=\"_blank\" title=\"https://pastebin.com/dMfLzk5M\">full log here</a>:</p>\n<p>Any info/input appreciated!</p>\n</blockquote>\n<p>I've seem similar with LXC on ProxMox, but recalled it's the <code>redis</code>that failed. Using the LXC I had to enable nested settings, as the \"problems\" is that <code>redis</code> (and then <code>rabbitmq</code> too I guess) makes use of certain lowlevel kernel/devices that is not exported in the usual or un-privileged cases, so yes, to run inside the Linux based containers, you'll need much more permissive stuff ;( time for VMs or run those only in VMs and the rest in LXC/OpenVZs <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 830009,
        "sender_full_name": "Hendrik Visage",
        "timestamp": 1583939953
    }
]