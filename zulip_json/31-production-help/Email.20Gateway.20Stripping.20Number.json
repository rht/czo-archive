[
    {
        "content": "<p>I am testing Zulip and one of things I wanted is to use the email gateway as a way to receive metrics from our internal Metabase server (which calles them pulses). An email looks like this:<br>\n<a href=\"/user_uploads/2/88/NWLmWKj4f1jT0awTKw281Hy9/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/88/NWLmWKj4f1jT0awTKw281Hy9/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img data-src-fullsize=\"/thumbnail?url=user_uploads%2F2%2F88%2FNWLmWKj4f1jT0awTKw281Hy9%2Fpasted_image.png&amp;size=full\" src=\"/thumbnail?url=user_uploads%2F2%2F88%2FNWLmWKj4f1jT0awTKw281Hy9%2Fpasted_image.png&amp;size=thumbnail\"></a></div><p>When I look at the email in Zulip, the number is stripped:<br>\n<a href=\"/user_uploads/2/61/oUIV0tarS960W4oW3lvlu1ra/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/61/oUIV0tarS960W4oW3lvlu1ra/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img data-src-fullsize=\"/thumbnail?url=user_uploads%2F2%2F61%2FoUIV0tarS960W4oW3lvlu1ra%2Fpasted_image.png&amp;size=full\" src=\"/thumbnail?url=user_uploads%2F2%2F61%2FoUIV0tarS960W4oW3lvlu1ra%2Fpasted_image.png&amp;size=thumbnail\"></a></div><p>Interestingly, when I forward the email with some light editing (in initial testing), the number did show (notice that FWD is in the topic):<br>\n<a href=\"/user_uploads/2/9d/g8z2GWtFtIUw1HEowbLNW5DN/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/9d/g8z2GWtFtIUw1HEowbLNW5DN/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img data-src-fullsize=\"/thumbnail?url=user_uploads%2F2%2F9d%2Fg8z2GWtFtIUw1HEowbLNW5DN%2Fpasted_image.png&amp;size=full\" src=\"/thumbnail?url=user_uploads%2F2%2F9d%2Fg8z2GWtFtIUw1HEowbLNW5DN%2Fpasted_image.png&amp;size=thumbnail\"></a></div><p>I don't want to go mucking around with the format as it's \"prebaked\" into our metrics tool, but I thought I would share as I got the idea to the email gateway from other user requests.  (LOVE Zulip BTW - fits my brain better than Slack and other tools!)</p>",
        "id": 666642,
        "sender_full_name": "Landon",
        "timestamp": 1543593307
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"7107\">@Landon</span> so, we do have logic using this library called <code>talon</code> to strip quoted parts, signature blocks, etc. from emails.  It's possible that is interacting badly with the emails generated by Metabase.</p>",
        "id": 666695,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1543598814
    },
    {
        "content": "<p>If you can post the content from \"Show original\" in an email client of what the actual raw text/HTML in the email is, that'd be helpful for investigating this.</p>",
        "id": 666697,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1543598839
    },
    {
        "content": "<blockquote>\n<p>(LOVE Zulip BTW - fits my brain better than Slack and other tools!)</p>\n</blockquote>\n<p>And thanks for the kind words!  I feel the same way <span class=\"emoji emoji-1f642\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 666698,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1543598856
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span> I DM'ed you the original contents.  Thanks for taking a look though I understand that this might not be a priority!</p>",
        "id": 666723,
        "sender_full_name": "Landon",
        "timestamp": 1543600711
    }
]