[
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-email=\"zulip@feorlen.org\" data-user-id=\"397\">@Andrea  Longo</span> , <span class=\"user-mention\" data-user-email=\"*\" data-user-id=\"*\">@all</span> </p>\n<p>I can not make Zulip work, I fall into the registration process.</p>\n<p>The error I have is that at the time of placing the organization in zulip, I get the mail (smtp is ok), but when I click on the link that arrives in the mail zulip falls and will not let me continue the process of registry.</p>\n<p>Error:<br>\nWell oops. This one's probably our fault. Sorry about that!</p>\n<p>If you'd like, you can drop us a line to let us know what happened.</p>\n<p>The step-by-step are:</p>\n<p>#Installation of Zulip 08/07<br>\nhostname: comunicaciones </p>\n<p>sudo apt-get update -y<br>\nsudo apt-get upgrade -y<br>\nsudo shutdown -r now<br>\nsudo apt-get install python-dev python-pip openssl nano vim wget -y<br>\nsudo apt-get install openssl -y<br>\nsudo openssl genrsa -des3 -passout pass:x -out zulip.pass.key 4096<br>\nsudo openssl rsa -passin pass:x -in zulip.pass.key -out /etc/ssl/private/zulip.key<br>\nsudo rm -rf zulip.pass.key<br>\nsudo openssl req -new -key /etc/ssl/private/zulip.key -out zulip.csr<br>\nsudo openssl x509 -req -days 365 -in zulip.csr -signkey /etc/ssl/private/zulip.key -out /etc/ssl/certs/zulip.combined-chain.crt<br>\nsudo shutdown -r now<br>\nwget <a href=\"https://www.zulip.org/dist/releases/zulip-server-latest.tar.gz\" target=\"_blank\" title=\"https://www.zulip.org/dist/releases/zulip-server-latest.tar.gz\">https://www.zulip.org/dist/releases/zulip-server-latest.tar.gz</a><br>\ntar -xvzf zulip-server-latest.tar.gz<br>\ncd zulip-server-1.6.0<br>\nsudo ./scripts/setup/install<br>\nvi /etc/zulip/settings.py (Smtp gmail test set up)<br>\nvi /etc/zulip/zulip-secrets.conf <br>\n    email_password = xxxxxx<br>\n    email_host_password = xxxxxx<br>\nsu zulip -c /home/zulip/deployments/current/scripts/setup/initialize-database<br>\nsu zulip -c /home/zulip/deployments/current/scripts/restart-server<br>\nsu zulip<br>\n/home/zulip/deployments/current/manage.py generate_realm_creation_link</p>\n<p>background:</p>\n<p>process-fts-updates                           RUNNING   pid 45296, uptime 0:17:38<br>\nzulip-django                                  RUNNING   pid 46294, uptime 0:14:46<br>\nzulip-senders:zulip_events_message_sender-0   RUNNING   pid 46303, uptime 0:14:45<br>\nzulip-senders:zulip_events_message_sender-1   RUNNING   pid 46304, uptime 0:14:45<br>\nzulip-senders:zulip_events_message_sender-2   RUNNING   pid 46305, uptime 0:14:45<br>\nzulip-senders:zulip_events_message_sender-3   RUNNING   pid 46306, uptime 0:14:45<br>\nzulip-senders:zulip_events_message_sender-4   RUNNING   pid 46307, uptime 0:14:45<br>\nzulip-tornado                                 RUNNING   pid 46287, uptime 0:14:48<br>\nzulip-workers:zulip_deliver_enqueued_emails   RUNNING   pid 46336, uptime 0:14:43<br>\nzulip-workers:zulip_events                    RUNNING   pid 46335, uptime 0:14:43</p>\n<p>LogServer</p>\n<p>/var/log/zulip/server.log</p>\n<p>2017-07-08 15:40:24,881 INFO     Tornado loaded 0 event queues in 0.000s<br>\n2017-07-08 15:40:24,881 INFO     Tornado   0.0% busy over the past  0.0 seconds<br>\n2017-07-08 15:40:30,356 INFO     Tornado   0.2% busy over the past  5.5 seconds<br>\n2017-07-08 15:40:35,357 INFO     Tornado   0.1% busy over the past 10.5 seconds<br>\n2017-07-08 15:40:40,357 INFO     Tornado   0.1% busy over the past 15.5 seconds<br>\n2017-07-08 15:40:44,251 INFO     Succesfully populated huddle cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:40:44,254 INFO     Succesfully populated stream cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:40:44,255 INFO     Succesfully populated client cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:40:44,261 INFO     Succesfully populated session cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:40:44,271 INFO     Succesfully populated user cache!  Consumed 1 remote cache queries (0.01 time)<br>\n2017-07-08 15:40:44,275 INFO     Succesfully populated recipient cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:40:46,356 INFO     Tornado   0.1% busy over the past 21.5 seconds<br>\n2017-07-08 15:40:47,369 INFO     Tornado dumped 0 event queues in 0.000s<br>\n2017-07-08 15:40:48,498 INFO     Tornado loaded 0 event queues in 0.000s<br>\n2017-07-08 15:40:48,499 INFO     Tornado   0.0% busy over the past  0.0 seconds<br>\n2017-07-08 15:40:54,276 INFO     Tornado   0.1% busy over the past  5.8 seconds<br>\n2017-07-08 15:41:00,276 INFO     Tornado   0.0% busy over the past 11.8 seconds<br>\n2017-07-08 15:41:05,276 INFO     Tornado   0.0% busy over the past 16.8 seconds<br>\n2017-07-08 15:41:11,275 INFO     Tornado   0.1% busy over the past 22.8 seconds<br>\n2017-07-08 15:41:16,276 INFO     Tornado   0.0% busy over the past 27.8 seconds<br>\n2017-07-08 15:41:22,276 INFO     Tornado   0.1% busy over the past 33.8 seconds<br>\n2017-07-08 15:41:27,276 INFO     Tornado   0.0% busy over the past 38.8 seconds<br>\n2017-07-08 15:41:32,276 INFO     Tornado   0.1% busy over the past 43.8 seconds<br>\n2017-07-08 15:41:38,276 INFO     Tornado   0.1% busy over the past 49.8 seconds<br>\n2017-07-08 15:41:44,276 INFO     Tornado   0.1% busy over the past 55.8 seconds<br>\n2017-07-08 15:41:49,276 INFO     Tornado   0.0% busy over the past 59.0 seconds<br>\n2017-07-08 15:41:54,276 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:00,276 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:05,276 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:11,276 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:17,276 INFO     Tornado   0.0% busy over the past 59.0 seconds<br>\n2017-07-08 15:42:23,276 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:29,275 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:34,275 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:39,277 INFO     Tornado   0.0% busy over the past 59.0 seconds<br>\n2017-07-08 15:42:45,276 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:51,276 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:42:57,276 INFO     Tornado   0.0% busy over the past 60.0 seconds<br>\n2017-07-08 15:43:02,276 INFO     Tornado   0.0% busy over the past 59.0 seconds<br>\n2017-07-08 15:43:08,277 INFO     Tornado   0.0% busy over the past 59.0 seconds<br>\n2017-07-08 15:43:08,576 INFO     Succesfully populated huddle cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:43:08,579 INFO     Succesfully populated stream cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:43:08,580 INFO     Succesfully populated client cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:43:08,581 INFO     Succesfully populated session cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:43:08,591 INFO     Succesfully populated user cache!  Consumed 1 remote cache queries (0.01 time)<br>\n2017-07-08 15:43:08,594 INFO     Succesfully populated recipient cache!  Consumed 1 remote cache queries (0.0 time)<br>\n2017-07-08 15:43:11,959 INFO     Tornado dumped 0 event queues in 0.000s<br>\n2017-07-08 15:43:13,077 INFO     Tornado loaded 0 event queues in 0.000s<br>\n2017-07-08 15:43:13,077 INFO     Tornado   0.0% busy over the past  0.0 seconds</p>",
        "id": 246334,
        "sender_full_name": "Manuel",
        "timestamp": 1499529917
    },
    {
        "content": "<p>More:</p>\n<p>Error generated by Anonymous user (not logged in) on comunicaciones deployment</p>\n<p>Traceback (most recent call last):<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django/core/handlers/exception.py\", line 42, in inner<br>\n    response = get_response(request)<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py\", line 249, in _legacy_get_response<br>\n    response = self._get_response(request)<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py\", line 187, in _get_response<br>\n    response = self.process_exception_by_middleware(e, request)<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py\", line 185, in _get_response<br>\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)<br>\n  File \"./zerver/decorator.py\", line 118, in wrapper<br>\n    return func(request, *args, **kwargs)<br>\n  File \"./zerver/views/registration.py\", line 143, in accounts_register<br>\n    ldap_attrs = _LDAPUser(backend, backend.django_to_ldap_username(email)).attrs<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py\", line 423, in _get_user_attrs<br>\n    self._load_user_attrs()<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py\", line 463, in _load_user_attrs<br>\n    if self.dn is not None:<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py\", line 416, in _get_user_dn<br>\n    self._load_user_dn()<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py\", line 479, in _load_user_dn<br>\n    self._search_for_user_dn()<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py\", line 499, in _search_for_user_dn<br>\n    results = search.execute(self.connection, {'user': self._username})<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py\", line 438, in _get_bound_connection<br>\n    self._bind()<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py\", line 723, in _bind<br>\n    sticky=True)<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py\", line 735, in _bind_as<br>\n    force_str(bind_password))<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/ldap/ldapobject.py\", line 222, in simple_bind_s<br>\n    msgid = self.simple_bind(who,cred,serverctrls,clientctrls)<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/ldap/ldapobject.py\", line 216, in simple_bind<br>\n    return self._ldap_call(self._l.simple_bind,who,cred,RequestControlTuples(serverctrls),RequestControlTuples(clientctrls))<br>\n  File \"/home/zulip/deployments/2017-07-08-11-31-43/zulip-venv/lib/python2.7/site-packages/ldap/ldapobject.py\", line 106, in _ldap_call<br>\n    result = func(<em>args,</em>*kwargs)<br>\nSERVER_DOWN: {'desc': \"Can't contact LDAP server\"}</p>\n<p>Request info:<br>\n- path: /accounts/register/<br>\n- POST: {u'full_name': [u''], u'csrfmiddlewaretoken': [u'<strong>*</strong><strong>*</strong>'], u'from_confirmation': [u'1'], u'key': [u'<strong>*</strong><strong>*</strong>']}<br>\n- REMOTE_ADDR: \"[u'192.168.80.1']\"<br>\n- QUERY_STRING: \"[u'']\"<br>\n- SERVER_NAME: \"[u'']\"</p>",
        "id": 246335,
        "sender_full_name": "Manuel",
        "timestamp": 1499529961
    },
    {
        "content": "<p><a href=\"/user_uploads/2/26/sm2dz05kpmo88AG6vl85mhXs/Error_zulip2.png\" target=\"_blank\" title=\"Error_zulip2.png\">Error_zulip2.png</a> <a href=\"/user_uploads/2/37/mpFQKAepx5MS0vJaE9WP1ydB/Error_zulip1.png\" target=\"_blank\" title=\"Error_zulip1.png\">Error_zulip1.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/26/sm2dz05kpmo88AG6vl85mhXs/Error_zulip2.png\" target=\"_blank\" title=\"Error_zulip2.png\"><img src=\"/user_uploads/2/26/sm2dz05kpmo88AG6vl85mhXs/Error_zulip2.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/37/mpFQKAepx5MS0vJaE9WP1ydB/Error_zulip1.png\" target=\"_blank\" title=\"Error_zulip1.png\"><img src=\"/user_uploads/2/37/mpFQKAepx5MS0vJaE9WP1ydB/Error_zulip1.png\"></a></div>",
        "id": 246338,
        "sender_full_name": "Manuel",
        "timestamp": 1499530231
    },
    {
        "content": "<blockquote>\n<p>SERVER_DOWN: {'desc': \"Can't contact LDAP server\"}</p>\n</blockquote>\n<p>It looks like you have <code>zproject.backends.ZulipLDAPAuthBackend</code> enabled. If you haven't set this up yet, you can comment it out, with <code>zproject.backends.EmailAuthBackend</code> remaining.</p>",
        "id": 246339,
        "sender_full_name": "Rein Zustand",
        "timestamp": 1499530388
    },
    {
        "content": "<blockquote>\n<blockquote>\n<p>SERVER_DOWN: {'desc': \"Can't contact LDAP server\"}</p>\n</blockquote>\n<p>It looks like you have <code>zproject.backends.ZulipLDAPAuthBackend</code> enabled. If you haven't set this up yet, you can comment it out, with <code>zproject.backends.EmailAuthBackend</code> remaining.</p>\n</blockquote>\n<p>Thank you, I will review</p>",
        "id": 246355,
        "sender_full_name": "Manuel",
        "timestamp": 1499531903
    }
]