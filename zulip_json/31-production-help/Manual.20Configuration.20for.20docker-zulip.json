[
    {
        "content": "<p>Trying to configure docker-zulip to use manual configuration.</p>\n<p>I set the following in the docker-compose.yml</p>\n<div class=\"codehilite\"><pre><span></span><code>  zulip:\n    image: &quot;zulip/docker-zulip:4.10-0&quot;\n    build:\n      context: .\n      args:\n        # Change these if you want to build zulip from a different repo/branch\n        ZULIP_GIT_URL: https://github.com/zulip/zulip.git\n        ZULIP_GIT_REF: &quot;4.10&quot;\n        # Set this up if you plan to use your own CA certificate bundle for building\n        # CUSTOM_CA_CERTIFICATES:\n    ports:\n      - &quot;80:80&quot;\n      - &quot;443:443&quot;\n    environment:\n      MANUAL_CONFIGURATION: &quot;True&quot;\n      LINK_SETTINGS_TO_DATA: &quot;True&quot;\n</code></pre></div>\n<p>I copied/updated the settings.py and zulip-secrets.conf to /opt/docker/zulip/zulip/settings/etc-zulip/</p>\n<p>docker-compose logs zulip reveals:</p>\n<div class=\"codehilite\"><pre><span></span><code>zulip_1_6c2f527e69bd | === Begin Initial Configuration Phase ===\nzulip_1_6c2f527e69bd | Preparing and linking the uploads folder ...\nzulip_1_6c2f527e69bd | Prepared and linked the uploads directory.\nzulip_1_6c2f527e69bd | Executing nginx configuration ...\nzulip_1_6c2f527e69bd | Nginx configuration succeeded.\nzulip_1_6c2f527e69bd | Not requesting auto-generated self-signed certs.\nzulip_1_6c2f527e69bd | Certificates configuration succeeded.\nzulip_1_6c2f527e69bd | Executing additional puppet configuration ...\nzulip_1_6c2f527e69bd | No additional puppet configuration executed.\nzulip_1_6c2f527e69bd | Auto backup enabled.\nzulip_1_6c2f527e69bd | === End Initial Configuration Phase ===\nzulip_1_6c2f527e69bd | === Begin Bootstrap Phase ===\nzulip_1_6c2f527e69bd | Waiting for database server to allow connections ...\nzulip_1_6c2f527e69bd | /sbin/entrypoint.sh: line 331: SECRETS_postgres_password: parameter not set\n</code></pre></div>\n<p>Thanks!</p>",
        "id": 1346330,
        "sender_full_name": "Geoff Wild",
        "timestamp": 1647457612
    },
    {
        "content": "<p>Is there something I missed setting?  Was following the readme from <a href=\"https://github.com/zulip/docker-zulip#running-a-zulip-server-with-docker-compose\">https://github.com/zulip/docker-zulip#running-a-zulip-server-with-docker-compose</a> </p>\n<div class=\"codehilite\"><pre><span></span><code>Manual configuration\n\nThe way the environment variables configuration process described in the last section works is that the entrypoint.sh script that runs when the Docker image starts up will generate a Zulip settings.py file file based on your settings every time you boot the container. This is convenient, in that you only need to edit the docker-compose.yml file to configure your Zulip server&#39;s settings.\n\nAn alternative approach is to set MANUAL_CONFIGURATION: &quot;True&quot; and LINK_SETTINGS_TO_DATA: &quot;True&quot; in docker-compose.yml. If you do that, you can provide a settings.py file and a zulip-secrets.conf file in /opt/docker/zulip/zulip/settings/etc-zulip/, and the container will use those.\n</code></pre></div>",
        "id": 1346470,
        "sender_full_name": "Geoff Wild",
        "timestamp": 1647463901
    }
]