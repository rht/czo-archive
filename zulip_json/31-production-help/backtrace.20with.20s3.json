[
    {
        "content": "<p>Hi,</p>\n<p>I received a backtrace when someone was trying to login. I'm unclear what the problem is. Should I report the backtrace here on on github ?</p>",
        "id": 745161,
        "sender_full_name": "Anand Kumria",
        "timestamp": 1558626295
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"12314\">@Anand Kumria</span> you can start here and we can move to github if needed</p>",
        "id": 745162,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1558627856
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>Logger django.request, from module django.core.handlers.exception line 135:\nError generated by Anonymous user (not logged in) on zulip.in.here.com deployment\n\nTraceback (most recent call last):\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/core/handlers/exception.py&quot;, line 41, in inner\n    response = get_response(request)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/core/handlers/base.py&quot;, line 187, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/core/handlers/base.py&quot;, line 185, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File &quot;./zerver/views/auth.py&quot;, line 647, in login_page\n    extra_context=extra_context, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/contrib/auth/views.py&quot;, line 54, in inner\n    return func(*args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/contrib/auth/views.py&quot;, line 150, in login\n    )(request)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/views/generic/base.py&quot;, line 68, in view\n    return self.dispatch(request, *args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/utils/decorators.py&quot;, line 67, in _wrapper\n    return bound_func(*args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/views/decorators/debug.py&quot;, line 76, in sensitive_post_parameters_wrapper\n    return view(request, *args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/utils/decorators.py&quot;, line 63, in bound_func\n    return func.__get__(self, type(self))(*args2, **kwargs2)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/utils/decorators.py&quot;, line 67, in _wrapper\n    return bound_func(*args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/utils/decorators.py&quot;, line 149, in _wrapped_view\n    response = view_func(request, *args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/utils/decorators.py&quot;, line 63, in bound_func\n    return func.__get__(self, type(self))(*args2, **kwargs2)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/utils/decorators.py&quot;, line 67, in _wrapper\n    return bound_func(*args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/views/decorators/cache.py&quot;, line 57, in _wrapped_view_func\n    response = view_func(request, *args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/utils/decorators.py&quot;, line 63, in bound_func\n    return func.__get__(self, type(self))(*args2, **kwargs2)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/contrib/auth/views.py&quot;, line 90, in dispatch\n    return super(LoginView, self).dispatch(request, *args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/views/generic/base.py&quot;, line 88, in dispatch\n    return handler(request, *args, **kwargs)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/views/generic/edit.py&quot;, line 182, in post\n    if form.is_valid():\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/forms/forms.py&quot;, line 183, in is_valid\n    return self.is_bound and not self.errors\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/forms/forms.py&quot;, line 175, in errors\n    self.full_clean()\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/forms/forms.py&quot;, line 385, in full_clean\n    self._clean_form()\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/forms/forms.py&quot;, line 412, in _clean_form\n    cleaned_data = self.clean()\n  File &quot;./zerver/forms.py&quot;, line 283, in clean\n    realm=realm, return_data=return_data)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/contrib/auth/__init__.py&quot;, line 70, in authenticate\n    user = _authenticate_with_backend(backend, backend_path, request, credentials)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django/contrib/auth/__init__.py&quot;, line 116, in _authenticate_with_backend\n    return backend.authenticate(*args, **credentials)\n  File &quot;./zproject/backends.py&quot;, line 431, in authenticate\n    password=password)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django_auth_ldap/backend.py&quot;, line 150, in authenticate\n    user = self.authenticate_ldap_user(ldap_user, password)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django_auth_ldap/backend.py&quot;, line 210, in authenticate_ldap_user\n    return ldap_user.authenticate(password)\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django_auth_ldap/backend.py&quot;, line 350, in authenticate\n    self._get_or_create_user()\n  File &quot;/home/zulip/deployments/2019-05-20-11-38-33/zulip-py3-venv/lib/python3.6/site-packages/django_auth_ldap/backend.py&quot;, line 591, in _get_or_create_user\n    self._user, built = self.backend.get_or_build_user(username, self)\n  File &quot;./zproject/backends.py&quot;, line 500, in get_or_build_user\n    self.sync_avatar_from_ldap(user_profile, ldap_user)\n  File &quot;./zproject/backends.py&quot;, line 307, in sync_avatar_from_ldap\n    upload_avatar_image(BytesIO(ldap_user.attrs[avatar_attr_name][0]), user, user)\n  File &quot;./zerver/lib/upload.py&quot;, line 769, in upload_avatar_image\n    upload_backend.upload_avatar_image(user_file, acting_user_profile, target_user_profile)\n  File &quot;./zerver/lib/upload.py&quot;, line 402, in upload_avatar_image\n    content_type = guess_type(user_file.name)[0]\nAttributeError: &#39;_io.BytesIO&#39; object has no attribute &#39;name&#39;\n\n\nDeployed code:\n- ZULIP_VERSION: 2.0.3\n- version: 2.0.3\n\n\nRequest info:\n- path: /accounts/login/\n- POST: {&#39;csrfmiddlewaretoken&#39;: [&#39;**********&#39;], &#39;username&#39;: [&#39;********************&#39;], &#39;password&#39;: [&#39;**********&#39;], &#39;button&#39;: [&#39;********************&#39;]}\n- REMOTE_ADDR: &quot;[&#39;10.176.38.126&#39;]&quot;\n- QUERY_STRING: &quot;[&#39;next=******&quot;\n- SERVER_NAME: &quot;[&#39;&#39;]&quot;\n</pre></div>",
        "id": 745164,
        "sender_full_name": "Anand Kumria",
        "timestamp": 1558628102
    },
    {
        "content": "<p>I recently migrated this deployment from local upload to uploads via S3 (this morning if that is a problem).</p>",
        "id": 745165,
        "sender_full_name": "Anand Kumria",
        "timestamp": 1558628152
    },
    {
        "content": "<p>I am trying to use the LDAP attribute 'thumbnailPhoto' but not all users have that available on their profile.</p>",
        "id": 745166,
        "sender_full_name": "Anand Kumria",
        "timestamp": 1558628182
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"12314\">@Anand Kumria</span> interesting, thanks for the report!  You can open a GitHub issue for this; I think we haven't tested the S3 backend with the new <code>thumbnailPhoto</code> integration, and it just doesn't work in that way.  <span class=\"user-mention\" data-user-id=\"907\">@Harshit Bansal</span> <span class=\"user-mention\" data-user-id=\"5263\">@Shubham Padia</span> FYI, I think this should be a pretty quick fix.</p>",
        "id": 745310,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1558658052
    },
    {
        "content": "<p>done. <a href=\"https://github.com/zulip/zulip/issues/12411\" target=\"_blank\" title=\"https://github.com/zulip/zulip/issues/12411\">https://github.com/zulip/zulip/issues/12411</a></p>",
        "id": 745972,
        "sender_full_name": "Anand Kumria",
        "timestamp": 1558942461
    },
    {
        "content": "<p>Cool, replied on the issue and mentioned people who might work on it.</p>",
        "id": 746174,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1558999882
    }
]