[
    {
        "content": "<p>I have been working on <a href=\"https://github.com/zulip/zulip/pull/11915\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11915\">#11915</a> for a couple of days now and have somewhat completed the bulk of the issue.<br>\nThis is what the menu looks like right now:<br>\n<a href=\"/user_uploads/2/87/sqh9xZUMXzYDIt-sQcFwk_D3/text_option_popover_general.gif\" target=\"_blank\" title=\"text_option_popover_general.gif\">text_option_popover_general.gif</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/87/sqh9xZUMXzYDIt-sQcFwk_D3/text_option_popover_general.gif\" target=\"_blank\" title=\"text_option_popover_general.gif\"><img src=\"/user_uploads/2/87/sqh9xZUMXzYDIt-sQcFwk_D3/text_option_popover_general.gif\"></a></div><p>The quoting option:<br>\n<a href=\"/user_uploads/2/31/utTGWJPC1ydnnzIW_GfvImZZ/text_option_popover_quote.gif\" target=\"_blank\" title=\"text_option_popover_quote.gif\">text_option_popover_quote.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/31/utTGWJPC1ydnnzIW_GfvImZZ/text_option_popover_quote.gif\" target=\"_blank\" title=\"text_option_popover_quote.gif\"><img src=\"/user_uploads/2/31/utTGWJPC1ydnnzIW_GfvImZZ/text_option_popover_quote.gif\"></a></div><p>The copy option:<br>\n<a href=\"/user_uploads/2/3/X6ccf3tDHlHY7ZKtT4Ag5FEc/text_option_popover_copy.gif\" target=\"_blank\" title=\"text_option_popover_copy.gif\">text_option_popover_copy.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/3/X6ccf3tDHlHY7ZKtT4Ag5FEc/text_option_popover_copy.gif\" target=\"_blank\" title=\"text_option_popover_copy.gif\"><img src=\"/user_uploads/2/3/X6ccf3tDHlHY7ZKtT4Ag5FEc/text_option_popover_copy.gif\"></a></div>",
        "id": 720606,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552932334
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131\">@Rishi Gupta</span>  Please let me know if any changes are needed.</p>",
        "id": 720608,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552932375
    },
    {
        "content": "<p>looks great! Could you show examples of quoting and pasting when the selection spans more than one message?</p>",
        "id": 720643,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1552934307
    },
    {
        "content": "<p>I just realized that selecting text on Firefox (which I used for testing) and Chrome (which I use for these gifs) is different. <br>\nOn firefox, it doesn't select user names when selecting text from several messages. On chrome, the user names do get selected. This is a weird behavior that I didn't account for.</p>",
        "id": 720662,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552935241
    },
    {
        "content": "<p>I'll fix this and post the example</p>",
        "id": 720663,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552935309
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131\">@Rishi Gupta</span> where do we handle the normal ctrl+c behavior?</p>",
        "id": 720678,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552936898
    },
    {
        "content": "<p>good question. I actually don't know, but maybe someone else will.</p>",
        "id": 720681,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1552937421
    },
    {
        "content": "<p>Okay, no worries. I'll look around and see if I can find it while I wait for an answer.</p>",
        "id": 720682,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552937560
    },
    {
        "content": "<p>Could you please review <a href=\"https://github.com/zulip/zulip/pull/11882\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11882\">#11882</a> btw? It has been done for a while now and I guess Tim and Steve have been busy with other things.</p>",
        "id": 720683,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552937609
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> Is <code>static/js/copy_paste.js</code> what you are looking for?</p>",
        "id": 720684,
        "sender_full_name": "Harshit Bansal",
        "timestamp": 1552937819
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"907\">@Harshit Bansal</span> Yes, that is what I was looking for. Thank you!</p>",
        "id": 720685,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552937937
    },
    {
        "content": "<p>For <a href=\"https://github.com/zulip/zulip/pull/11882\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11882\">#11882</a>, Tim or Steve will have to review, but one thing I noticed is that we probably want the text to be left justified.</p>",
        "id": 720686,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1552937947
    },
    {
        "content": "<blockquote>\n<p>For <a href=\"https://github.com/zulip/zulip/pull/11882\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11882\">#11882</a>, Tim or Steve will have to review, but one thing I noticed is that we probably want the text to be left justified.</p>\n</blockquote>\n<p>Okay, I'll make that change. Thanks <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 720687,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1552938031
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131\">@Rishi Gupta</span>  I made a WIP PR <a href=\"https://github.com/zulip/zulip/pull/11949\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11949\">#11949</a> for this issue.<br>\nThere are a few small issues that I need to fix with this. This overall look, tolltips, etc are all done though. Please let me know if anything needs to be changes. Especially the hover text and the button icons.</p>",
        "id": 721611,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553082882
    },
    {
        "content": "<p>Thanks! Is there any way for the popup to appear at the end of the text selection, i.e. where the mouse is?</p>\n<p>Also I think we can just remove the down triangle from the popup, though if we keep it it'd be ideal if there were no line between it and the icons above (not sure if that makes sense).</p>",
        "id": 721640,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553098554
    },
    {
        "content": "<blockquote>\n<p>Thanks! Is there any way for the popup to appear at the end of the text selection, i.e. where the mouse is?</p>\n</blockquote>\n<p>That is what I was actually aiming for. The only way this can be done though  (from my research so far) is by adding some css via that specific javascript function.  I can do this if you want.<br>\n(Though I could be wrong here, I'll check again and see if I can dig up something).</p>",
        "id": 721746,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553106237
    },
    {
        "content": "<blockquote>\n<p>Also I think we can just remove the down triangle from the popup, though if we keep it it'd be ideal if there were no line between it and the icons above (not sure if that makes sense).</p>\n</blockquote>\n<p>Do you mean this line ?<br>\n<a href=\"/user_uploads/2/7f/VXgi2J6nEha53_6cPUflkxhg/popover-line.jpg\" target=\"_blank\" title=\"popover-line.jpg\">popover-line.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/7f/VXgi2J6nEha53_6cPUflkxhg/popover-line.jpg\" target=\"_blank\" title=\"popover-line.jpg\"><img src=\"/user_uploads/2/7f/VXgi2J6nEha53_6cPUflkxhg/popover-line.jpg\"></a></div>",
        "id": 721752,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553106388
    },
    {
        "content": "<p>yeah</p>",
        "id": 721756,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553106541
    },
    {
        "content": "<p>I think it looks good, i.e., more directional. I think I should be able to remove that line.</p>",
        "id": 721758,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553106680
    },
    {
        "content": "<blockquote>\n<p>The only way this can be done though (from my research so far) is by adding some css via that specific javascript function</p>\n</blockquote>\n<p>Is this acceptable? I did find a few places in the code that added styling this way but this one would be relatively bigger.</p>",
        "id": 721760,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553106742
    },
    {
        "content": "<p>btw, the reason to remove it is that it reduces the travel distance from the mouse. You can see how dropbox paper does this, which I think is pretty nice</p>",
        "id": 721762,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553106820
    },
    {
        "content": "<p>Also, are the js tooltips fine? I had a little trouble with the html titles, plus we are moving away from them anyways so I thought I'd just go with this.</p>",
        "id": 721763,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553106857
    },
    {
        "content": "<p>definitely js tooltips.</p>\n<p>I guess medium does have the arrow, but solves the mouse travel distance by overlapping the text:<br>\n<a href=\"/user_uploads/2/52/xiy2WkO8O1CNnBQFTrgsHHTA/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/52/xiy2WkO8O1CNnBQFTrgsHHTA/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/2/52/xiy2WkO8O1CNnBQFTrgsHHTA/pasted_image.png\"></a></div>",
        "id": 721765,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553106903
    },
    {
        "content": "<blockquote>\n<p>btw, the reason to remove it is that it reduces the travel distance from the mouse. You can see how dropbox paper does this, which I think is pretty nice</p>\n</blockquote>\n<p>Yeah, it intuitively felt like the ideal design to me but I guess I was preoccupied with the functionality. I'll try my best to fix this as well.</p>",
        "id": 721766,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553106918
    },
    {
        "content": "<p>Are the 3 options fine, btw? I tried to figure out the most useful ones (things that I usually need the most while using Zulip).</p>",
        "id": 721767,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553106996
    },
    {
        "content": "<blockquote>\n<p>I guess medium does have the arrow, but solves the mouse travel distance by overlapping the text:</p>\n</blockquote>\n<p>I think I have an idea how to do this. I'll get to work.</p>",
        "id": 721769,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553107035
    },
    {
        "content": "<p>yeah, the three are quote and reply, copy text, and copy messages, right?</p>",
        "id": 721773,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553107181
    },
    {
        "content": "<p>The options are: </p>\n<ul>\n<li>Quote selected text</li>\n<li>Quote Entire Message</li>\n<li>Copy Selected Text/Copy all Messages Selected (This works the same as Ctrl + C)</li>\n</ul>\n<p>I felt like having both quote options was a good idea.<br>\nI held back on the \"copy text\" option because of two things:<br>\n 1. The current copy options the same thing if 1 message is selected<br>\n 2. If more than 1 message is selected, the browser's default copying looks relatively ugly.</p>",
        "id": 721774,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553107350
    },
    {
        "content": "<blockquote>\n<p>12:07 AM   <br>\nI guess medium does have the arrow, but solves the mouse travel distance by overlapping the text:<br>\nI think I have an idea how to do this. I'll get to work.</p>\n<p>12:09 AM   <br>\nyeah, the three are quote and reply, copy text, and copy messages, right?</p>\n</blockquote>\n<p>Somthing like this but more whitespace</p>",
        "id": 721775,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553107398
    },
    {
        "content": "<p>The \"quote selected text\" option handles this by also quoting the same text making it a little more presentable with the quoting.</p>",
        "id": 721776,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553107450
    },
    {
        "content": "<p>We can either</p>\n<ul>\n<li>Replace the <code>Quote selected text</code> option with <code>Copy Selected Text</code></li>\n<li>Keep the quoting and add a 4th button.</li>\n</ul>",
        "id": 721777,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553107517
    },
    {
        "content": "<p>Interesting. We already have a Quote and Reply in the message actions menu, so I'm tempted to go with my original suggestion. Would be interested in other opinions though. </p>\n<p>(and the broken copy text we should just fix)</p>",
        "id": 721780,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553108224
    },
    {
        "content": "<blockquote>\n<p>1. The current copy options the same thing if 1 message is selected</p>\n</blockquote>\n<p>hm, it shouldn't be. One should copy just the text, and the other should copy the name, timestamp, etc.</p>",
        "id": 721781,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553108281
    },
    {
        "content": "<p>I am not sure I clearly understand what we want the buttons to do here.<br>\nI tested Ctrl + C here and replicated the same (basically triggering ctrl+c when the copy button is clicked).</p>",
        "id": 721784,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553108461
    },
    {
        "content": "<p>Is the idea to make it easier for the user to quote, copy text or to mostly have new options when directly selecting text?</p>",
        "id": 721785,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553108497
    },
    {
        "content": "<p>This shouldn't change a lot of the code, but if you could give examples for what you want the buttons to do it'd clear the confusion.</p>",
        "id": 721786,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553108539
    },
    {
        "content": "<p>sure. I'll use the following selection as an example: <a href=\"/user_uploads/2/35/E6Z1dEnFNCaZ_b40f5q1giaz/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\"></a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/35/E6Z1dEnFNCaZ_b40f5q1giaz/pasted_image.png\" target=\"_blank\" title=\"\"><img src=\"/user_uploads/2/35/E6Z1dEnFNCaZ_b40f5q1giaz/pasted_image.png\"></a></div><ul>\n<li>Quote and reply should add </li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>```quote\ning text?\n\nThis shouldn&#39;t change a lot of the code, but if\n```\n</pre></div>\n\n\n<p>to the compose box.</p>\n<ul>\n<li>Copy text should copy</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>ing text?\n\nThis shouldn&#39;t change a lot of the code, but if\n</pre></div>\n\n\n<p>to the clipboard.</p>\n<ul>\n<li>Copy messages should copy</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>Vinit Singh: Is the idea to make it easier for the user to quote, copy text or to mostly have new options when directly selecting text?\n\nVinit Singh: This shouldn&#39;t change a lot of the code, but if you could give examples for what you want the buttons to do it&#39;d clear the confusion.\n</pre></div>\n\n\n<p>to the clipboard.<br>\n(I didn't realize we currently don't include timestamps with Ctrl+c but eventually we may want to add timestamps here as well)</p>",
        "id": 721788,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553108927
    },
    {
        "content": "<p>one confusion that I think I missed earlier is that Ctrl+c currently has the \"Copy text\" behavior when you select within 1 message, and the \"Copy messages\" behavior when you select over multiple messages. So I guess neither of the new buttons will match the current Ctrl+c behavior exactly.</p>\n<p>(And probably as followup we should change the Ctrl+c behavior to match the new \"copy text\" button, since we've gotten a few complaints about the current behavior in the past)</p>",
        "id": 721789,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553109040
    },
    {
        "content": "<p>Ctrl+C's behavior was recently modified actually. Relevant discussion: <a href=\"#narrow/stream/6-frontend/topic/copy.2Fpaste/near/721333\" title=\"#narrow/stream/6-frontend/topic/copy.2Fpaste/near/721333\">https://chat.zulip.org/#narrow/stream/6-frontend/topic/copy.2Fpaste/near/721333</a></p>",
        "id": 721806,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553109294
    },
    {
        "content": "<p>I'll fix the options in the meantime.</p>",
        "id": 721809,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553109395
    },
    {
        "content": "<blockquote>\n<p>(And probably as followup we should change the Ctrl+c behavior to match the new \"copy text\" button, since we've gotten a few complaints about the current behavior in the past)</p>\n</blockquote>\n<p>I think the alternative behavior is a lot more annoying -- you're trying to select all of a block of messages and it becomes super important that you actually catch the start/end of the them to do so.</p>",
        "id": 721888,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1553112425
    },
    {
        "content": "<p>hm. I guess one anecdotal counterpoint is that I haven't yet wanted to do that since we introduced this feature, whereas several times I've copy, pasted, and then manually deleted a bunch of stuff. We've also had at least 1 (maybe 2?) people complain about our current behavior.</p>",
        "id": 721943,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553115273
    },
    {
        "content": "<p>I think if we were to offer this feature, the way I would want it to work is that if you select all but the first few (or last few) letters of a paragraph, we snap to selecting the whole paragraph</p>",
        "id": 721944,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553115332
    },
    {
        "content": "<p>I'll also note though that the Zulip UI already makes it pretty easy to select all of a message. <br>\nThe times where it's been a problem on other websites for me is when moving the mouse 10px past the end of the last letter of the paragraph selects the whole page or something funny like that.<br>\n(e.g. if we didn't have a noselect on the avatar I could imagine trying to select a message being frustrating)</p>",
        "id": 721945,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553115627
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131\">@Rishi Gupta</span> the main use case for copy-paste of a group of messages is for teams that want to export a log of a conversation for postmortems, sharing, etc., and you rarely want cut-off messages for that.  I could imagine changing our model to only switch modes at 3 messages rather than 2.</p>",
        "id": 721962,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1553117136
    },
    {
        "content": "<p>But for that we're now providing a \"Copy messages\" button (which I agree should copy all of each message)</p>",
        "id": 721963,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553117172
    },
    {
        "content": "<p>(I think a lot of people chat by putting one sentence in each message, for N messages in a row. So I don't think copying content from several messages for \"within zulip\" copy and paste use is that uncommon.)</p>",
        "id": 721966,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1553117357
    },
    {
        "content": "<p>I think we should probably table this until we have the menu, because that's going to materially impact how this feels.</p>",
        "id": 721975,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1553117704
    },
    {
        "content": "<p>I made some positioning changes and a little change to the css to remove the gap/line between the arrow and the actual popover.<br>\n<a href=\"/user_uploads/2/c5/w4QvSsKXlugIto-X6mSAYTH0/popover_positioning.gif\" target=\"_blank\" title=\"popover_positioning.gif\">popover_positioning.gif</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/c5/w4QvSsKXlugIto-X6mSAYTH0/popover_positioning.gif\" target=\"_blank\" title=\"popover_positioning.gif\"><img src=\"/user_uploads/2/c5/w4QvSsKXlugIto-X6mSAYTH0/popover_positioning.gif\"></a></div><ul>\n<li>The popover is positioned at the location of the mouseup event after text selection.</li>\n<li>The removal of the line/gap is done with just changing the arrow's <code>bottom: -10px</code> to <code>bottom: -9.7px</code>. There is choice to be made with this though. I could add it to that specific event in JS or to the <code>popovers.scss</code> file. Doing the latter affects and can affect other popovers a tiny bit. Please let me know which one we want to go with.</li>\n</ul>",
        "id": 722174,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553161941
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> I liked the styling <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 722175,
        "sender_full_name": "Abhinav Singh",
        "timestamp": 1553162048
    },
    {
        "content": "<p>Any thoughts on the exact positioning of the popover? (A little higher/lower, etc)</p>",
        "id": 722176,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553162108
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> I observed that the gap between the popover tip and the text selected is not constant.</p>",
        "id": 722178,
        "sender_full_name": "Abhinav Singh",
        "timestamp": 1553162450
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"9753\">@Abhinav Singh</span> It is, yes. This is because the position of the popover is based off of the point at which the <code>mouseup</code> event occurs. <br>\nThe popover would be relatively higher if you were to release your mouse towards the top end of the selected text. <br>\nSimilarly, it'd be relatively lower if you released it towards the bottom end of the selected text.</p>",
        "id": 722179,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553162712
    },
    {
        "content": "<p>I can actually push this up to my WIP PR if you'd like to try it out on your own.</p>",
        "id": 722180,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553162760
    },
    {
        "content": "<p>Zooming into the browser actually makes this easier to understand</p>",
        "id": 722181,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553162783
    },
    {
        "content": "<blockquote>\n<p>I can actually push this up to my WIP PR if you'd like to try it out on your own.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"9753\">Abhinav Singh</span> It is, yes. This is because the position of the popover is based off of the point at which the <code>mouseup</code> event occurs. <br>\nThe popover would be relatively higher if you were to release your mouse towards the top end of the selected text. <br>\nSimilarly, it'd be relatively lower if you released it towards the bottom end of the selected text.</p>\n</blockquote>\n<p>Okay, now I understand.</p>",
        "id": 722182,
        "sender_full_name": "Abhinav Singh",
        "timestamp": 1553162783
    },
    {
        "content": "<blockquote>\n<p>I can actually push this up to my WIP PR if you'd like to try it out on your own.</p>\n</blockquote>\n<p>Sure I would love to try</p>",
        "id": 722183,
        "sender_full_name": "Abhinav Singh",
        "timestamp": 1553162800
    },
    {
        "content": "<p>Which browser do you use?  There are a <em>few</em> kinks on chrome that I need to fix. FF works great for this though</p>",
        "id": 722185,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553163349
    },
    {
        "content": "<p>PR <a href=\"https://github.com/zulip/zulip/pull/11949\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11949\">#11949</a> for anyone willing to test this out. <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 722187,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553163598
    },
    {
        "content": "<p>I will use FF to test it :)</p>",
        "id": 722188,
        "sender_full_name": "Abhinav Singh",
        "timestamp": 1553163823
    },
    {
        "content": "<p>Cool, this is looking promising!</p>",
        "id": 722457,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1553196104
    },
    {
        "content": "<p>This should be done soon hopefully. I am using js tooltips here though that share some code with <a href=\"https://github.com/zulip/zulip/pull/11882\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11882\">#11882</a> which is yet to be reviewed.<br>\nIt'd be great if someone could review that. It would help avoid some duplication that can be avoided easily.</p>",
        "id": 722998,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1553279165
    },
    {
        "content": "<p>Continuing the discussion from <a href=\"https://github.com/zulip/zulip/pull/11949#discussion_r285863378\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11949#discussion_r285863378\">here</a>.</p>\n<p>The current options in the menu are:</p>\n<ul>\n<li>Quote selected text</li>\n<li>Copy selected text</li>\n<li>Copy all Messages Selected</li>\n</ul>\n<p>The Ctrl+C behavior with this is to copy complete messages regardless of how much text is selected. (Sender's name is not copied if all selected messages are from a single sender)</p>\n<p>Proposal in the comment linked above: </p>\n<ul>\n<li>Selection selects name and text. It does not select timestamp, anything in the recipient bar, or date changes</li>\n<li>\"Copy text\" copies just the text</li>\n<li>\"Copy messages\" does a \"full\" copy</li>\n<li>\"Quote and reply\" I could go either way on, though my instinct is to include just the text.</li>\n<li>Ctrl+C is not that important anymore, but I guess it would copy name and text</li>\n</ul>\n<p><span class=\"user-mention\" data-user-id=\"131\">@Rishi Gupta</span>  Can you please give an example of what we want each button to do (like you did before in this topic)? <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>\n<p>Thanks!</p>",
        "id": 748322,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559349144
    },
    {
        "content": "<p>Sorry for the delay here. As per the rest of the discussion on that thread I think lets change it so that stream and topic names on recipient bars are also selected. In that case, for the following: <a href=\"/user_uploads/2/64/gq4M31z6rS0YZ0hmMcO6Ozl1/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\"></a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/64/gq4M31z6rS0YZ0hmMcO6Ozl1/pasted_image.png\" target=\"_blank\" title=\"\"><img src=\"/user_uploads/2/64/gq4M31z6rS0YZ0hmMcO6Ozl1/pasted_image.png\"></a></div><ul>\n<li>Selection looks like the above</li>\n<li>Copy text would give</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>ssage 2\n\nmessage 3 line 1\nmessage 3 line 2\n\nmessa\n</pre></div>\n\n\n<ul>\n<li>Copy messages would give</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>#test here &gt; topic A\nRishi Gupta (6:42 pm): message 2\n\n#test here &gt; topic B\nRishi Gupta (6:42 pm): message 3 line 1\nmessage 3 line 2\n\nRishi Gupta (6:43 pm): message 4\n</pre></div>\n\n\n<ul>\n<li>\n<p>Quote and reply would just quote what \"Copy text\" copies</p>\n</li>\n<li>\n<p>Ctrl+C would give</p>\n</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>ssage 2\n\n#test here &gt; topic B\nRishi Gupta: message 3 line 1\nmessage 3 line 2\n\nmessa\n</pre></div>",
        "id": 750420,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559788804
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> FYI</p>",
        "id": 750901,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559861430
    },
    {
        "content": "<p>Thanks, I'll get back to this as well. <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 751047,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559883153
    },
    {
        "content": "<ul>\n<li>Copy text would give</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span>ssage 2\n\nmessage 3 line 1\nmessage 3 line 2\n\nmessa\n</pre></div>\n\n\n<p>This can, as per my experience with this, can only be achieved if the Names, headers, etc are set to <code>no-select</code>. Otherwise all of the highlighted text gets copied to clipboard in each instance unless we use a regex to get rid of the unwanted parts (which is highly unreliable).</p>",
        "id": 751108,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559892046
    },
    {
        "content": "<p>The result of this would be the same as what you want for Ctrl+C.</p>",
        "id": 751109,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559892092
    },
    {
        "content": "<p>If we want partial text anywhere, then we need to work with the highlighted text as is. That means a sort of uniformity has to be there in what the functions of the buttons do with the selected text.</p>",
        "id": 751111,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559892510
    },
    {
        "content": "<p>Could we maybe implement this feature on czo and see if people are happy with the options that are currently pushed to <a href=\"https://github.com/zulip/zulip/pull/11949\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/11949\">#11949</a>?</p>",
        "id": 751113,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559892619
    },
    {
        "content": "<p>hm. We need the separation into stream/topic, name, and text anyway to format something like Ctrl+C, right?</p>",
        "id": 751219,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559916803
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> couldn't we use the same type of algorithm we use for \"copy messages\"?  I think the intent is that this would be \"copy message body text\", not \"copy selected text\"</p>",
        "id": 751278,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559926501
    },
    {
        "content": "<p>The option that I quoted selects and quotes only a part of the message (1st and last message are not complete). <br>\nWhile, the 2nd button in the PR, is very close to what Rishi shared and, does use the existing ctrl+c algorithm to copy fully messages and user names (only).</p>\n<p>Doing the 2nd option in Rishi's example, i.e., select full message, is easy since all we would have to do there is simply append the data that is already attached to that message id.</p>\n<p>The problem though, would be with Ctrl+C, I think. It partially copies messages, but also copies elements that a user selection highlights (<span class=\"user-mention\" data-user-id=\"131\">@Rishi Gupta</span> please correct me if you were going with something else with this one).<br>\nThese elements like the names, dates, topics, etc need to be set to <code>no-select</code> for the 1st <code>Copy text</code> button to work accurately. Thus, they won't be highlighted/selected no matter what the user tries.</p>",
        "id": 751293,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559927610
    },
    {
        "content": "<p>Could we do something sneaky like temporarily switching elements to <code>no-select</code> just before doing the copy?  Not sure if this is a good idea, but curious if it works.</p>",
        "id": 751298,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928178
    },
    {
        "content": "<p>There's the problem that we do want to allow users to select and copy-paste someone's name.</p>",
        "id": 751300,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928203
    },
    {
        "content": "<p>Back to this PR -- I feel like there's 3 things that this PR is doing, and only one of them involves tweaking this no-select stuff.  Can we get the other pieces (like the menu) ready for merge and merge them with this extra option not added yet?</p>",
        "id": 751301,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928256
    },
    {
        "content": "<blockquote>\n<p>There's the problem that we do want to allow users to select and copy-paste someone's name.</p>\n</blockquote>\n<p>Yeah, that is mostly what I was talking about in my initial message after I read your comments on the PR again. It would be almost impossible to remove names from selected text for a number of reasons.</p>",
        "id": 751303,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928319
    },
    {
        "content": "<p>OK, let's table \"copy text\" for the moment and try to get the other pieces of this PR clean and merged, and then we can spend some more time trying to figure out a good way to do \"copy text\".</p>",
        "id": 751304,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928384
    },
    {
        "content": "<p>I suspect there will be something we can figure out for that, but I'm not excited about trying a series of experiments stacked on top of the UI change to add a copy menu from a review perspective.</p>",
        "id": 751305,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928418
    },
    {
        "content": "<blockquote>\n<p>Back to this PR -- I feel like there's 3 things that this PR is doing, and only one of them involves tweaking this no-select stuff.  Can we get the other pieces (like the menu) ready for merge and merge them with this extra option not added yet?</p>\n</blockquote>\n<p>2 of the options use it actually. The <code>quote&amp;reply</code> option has the same partial text as shown in Rishi's first example.</p>",
        "id": 751306,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928425
    },
    {
        "content": "<p>There is only one option that can be added without the <code>no-select</code> changes. I already broke the PR into smaller commits a while ago so getting it ready for merging won't take long.</p>",
        "id": 751307,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928515
    },
    {
        "content": "<p>Do both of those options require adding no-select to sender names specifically?</p>",
        "id": 751308,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928553
    },
    {
        "content": "<p>(Or other changes to what is selectable)</p>",
        "id": 751309,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928559
    },
    {
        "content": "<p>Yeah. To be able to get the message text we need to set every other element in the message view to no-select</p>",
        "id": 751311,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928598
    },
    {
        "content": "<p>I could add another option which could do the same thing as the Quote&amp;reply in the actions popover (i.e., for whole messages). That way we can have two options for this that can be merged without these problematic changes.</p>",
        "id": 751313,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928678
    },
    {
        "content": "<p>What if we tried using <code>user-select: contain</code> on the sender names?<br>\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/user-select\" target=\"_blank\" title=\"https://developer.mozilla.org/en-US/docs/Web/CSS/user-select\">https://developer.mozilla.org/en-US/docs/Web/CSS/user-select</a></p>",
        "id": 751314,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928711
    },
    {
        "content": "<p>(That would mean you can only select within names, not across them)</p>",
        "id": 751315,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928724
    },
    {
        "content": "<p>Hmm, I guess that isn't available in all browsers, sigh.</p>",
        "id": 751316,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928765
    },
    {
        "content": "<p><code>Supported only in Internet Explorer.</code></p>",
        "id": 751317,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928785
    },
    {
        "content": "<p>Yeah.</p>",
        "id": 751318,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928786
    },
    {
        "content": "<p>But I think that's the feature we actually want here.</p>",
        "id": 751322,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928853
    },
    {
        "content": "<p>On a side note: Although a little more work, a user could select names by clicking on names and copying from the profile. (personally I haven't copied names either way since it's just easier to use the @ feature with the autocomplete.)</p>",
        "id": 751323,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928871
    },
    {
        "content": "<p>I suppose we can try just not allowing selecting users' names and just have the only way to access it be through the profile.</p>",
        "id": 751324,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559928886
    },
    {
        "content": "<blockquote>\n<p>But I think that's the feature we actually want here.</p>\n</blockquote>\n<p>Yeah. that is exactly what the request was in the issue</p>",
        "id": 751325,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559928903
    },
    {
        "content": "<p>My guess is that we'll get complains from folks about being unable to select sender names (in part because I think that will look broken), but given there is a reasonable workaround (click the name and then select), I'm fine with doing the experiment.  It seems plausible that having the right copy/paste options is more important than being able to select sender names.</p>",
        "id": 751326,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559929003
    },
    {
        "content": "<p>So at the very least we should do a <a href=\"http://chat.zulip.org\" target=\"_blank\" title=\"http://chat.zulip.org\">chat.zulip.org</a> deploy test of this with the sender names non-selectable.</p>",
        "id": 751327,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559929018
    },
    {
        "content": "<p>That would be great. It would help us get feedback on all the \"what-if\" scenarios.</p>",
        "id": 751328,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559929049
    },
    {
        "content": "<p>If we are okay with this, I only have to make a few changes to the no-select commit and it can be merged for testing on czo</p>",
        "id": 751329,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559929075
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> yeah, go ahead and do that and ping me when done.</p>",
        "id": 751330,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559929163
    },
    {
        "content": "<p>Okay, will do.</p>",
        "id": 751331,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559929175
    },
    {
        "content": "<p>I guess the other thing which is potentially non-ideal about this is that we're removing the ability to directly copy the timestamp from a message, for the same reason.</p>",
        "id": 751332,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559929221
    },
    {
        "content": "<p>And that information we don't have duplicated anywhere else, so folks will have to use \"copy selected messages\" to copy timestamps.</p>",
        "id": 751333,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559929245
    },
    {
        "content": "<blockquote>\n<p>And that information we don't have duplicated anywhere else, so folks will have to use \"copy selected messages\" to copy timestamps.</p>\n</blockquote>\n<p>The current version of this does not include time stamps though, only names. Just like out Ctrl+C and the quote and reply option work right now</p>",
        "id": 751335,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559929341
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span> There is another thing that is very problematic. I mentioned it a while ago but then we got caught up in this discussion. <code>no-select</code> doesn't work in Chrome when copying to clipboard. <br>\nThe elements aren't visually selected (as expected), but they do end up getting copied.</p>",
        "id": 751340,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559930111
    },
    {
        "content": "<p>On Firefox:<br>\n<a href=\"/user_uploads/2/d0/iiKeeqvjViUezYiLknlEJPgK/mozilla-text-options-no-select.gif\" target=\"_blank\" title=\"mozilla-text-options-no-select.gif\">mozilla-text-options-no-select.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/d0/iiKeeqvjViUezYiLknlEJPgK/mozilla-text-options-no-select.gif\" target=\"_blank\" title=\"mozilla-text-options-no-select.gif\"><img src=\"/user_uploads/2/d0/iiKeeqvjViUezYiLknlEJPgK/mozilla-text-options-no-select.gif\"></a></div>",
        "id": 751343,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559930320
    },
    {
        "content": "<p>On chrome:<br>\n<a href=\"/user_uploads/2/c9/GBnNQWhQRhPShsZqd2KoL68b/chome-text-options-no-select.gif\" target=\"_blank\" title=\"chome-text-options-no-select.gif\">chome-text-options-no-select.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/c9/GBnNQWhQRhPShsZqd2KoL68b/chome-text-options-no-select.gif\" target=\"_blank\" title=\"chome-text-options-no-select.gif\"><img src=\"/user_uploads/2/c9/GBnNQWhQRhPShsZqd2KoL68b/chome-text-options-no-select.gif\"></a></div>",
        "id": 751346,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559930446
    },
    {
        "content": "<p>I think we definitely want one of the options to include timestamps; it's a very important use case for folks writing postmortems to be able to get a block of messages complete with timestamps.  I think \"copy selected messages\" is the version that's intended to include them, if I recall correctly, since it's the most expansive.</p>",
        "id": 751351,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559930530
    },
    {
        "content": "<p>(Though I suppose we could add an additional option \"copy selected messages with timestamps\" if we really needed to if we thought that was clutter for most people?)</p>",
        "id": 751353,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559930579
    },
    {
        "content": "<p>We should make sure it's not just our no-select CSS that's the problem with Chrome.</p>",
        "id": 751356,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559930700
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> oh, one thing to be careful about; you should disable the Zulip paste handler when testing:<br>\n<code>static/js/copy_and_paste.js:        if (paste_html &amp;&amp; page_params.development_environment) {</code></p>\n<p>to make sure you're not getting the <code>text/html</code> version of the copy turned into text using <code>to-markdown</code>.</p>",
        "id": 751360,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559931087
    },
    {
        "content": "<p>A few other notes from testing this PR:</p>\n<ul>\n<li>One downside of the aggressive use of <code>no-select</code> is that you can't start dragging to select when your cursor is over the recipient bar because that area is unselectable; this is actually pretty annoying.</li>\n<li>This is the Chrome bug for <code>user-select: none</code> not working: <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=850685\" target=\"_blank\" title=\"https://bugs.chromium.org/p/chromium/issues/detail?id=850685\">https://bugs.chromium.org/p/chromium/issues/detail?id=850685</a></li>\n</ul>",
        "id": 751364,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559931711
    },
    {
        "content": "<p>What should we do here then? Try a different approach, if any, to get the same functionalities?</p>",
        "id": 751365,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559931840
    },
    {
        "content": "<p>Electron uses Chromium as well if I'm not wrong. So this could very much become an issue in the desktop app as well.</p>",
        "id": 751367,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559931897
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"131\">@Rishi Gupta</span> you should catch up on this thread.  It seems like what we actually want may be impossible with current browsers:</p>\n<ul>\n<li>We can't support both (1) you can manually select the sender name or timestamp to copy just that and (2) the \"copy selected text\" feature not including sender names.</li>\n<li>Chrome <a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=850685\" target=\"_blank\" title=\"https://bugs.chromium.org/p/chromium/issues/detail?id=850685\">doesn't respect</a> the standard CSS rule that should cause things covered by your mouse selection to not be included in the selection.  Or more correctly, it lets you not select them, but it includes them in \"copy\" anyway.  So in Chrome, we possibly just can't implement (2) in the last bullet in a way based on the actual selection.  (We can do much more when ignoring the selection and just processing messages, since then we're just doing selection)</li>\n</ul>",
        "id": 751368,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559931954
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> we should investigate if there's anything clever we can do to work around these issues.  I think there are a few things we can look into:</p>\n<ul>\n<li>We should look into whether we can do anything sneaky to work around the Chrome issue like temporarily doing a <code>.hide()</code> on all sender names in the selection just before having the browser process the copy, and then re-<code>show()</code>ing them.  My guess is that won't work because the <code>.hide()</code> will break the selection (it seems likely to at least lead to an awkward flash), but it's worth a try if it'll allow \"copy selected text\" to work.  If it does work, the advantage is we wouldn't need to do the <code>no-select</code> hacks that regress the actual selection experience and copying things like timestamps.</li>\n<li>We can try having the browser copy the HTML from the selection and then processing that HTML to remove e.g. <code>.message_sender</code> elements as a workaround.</li>\n</ul>",
        "id": 751369,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559932161
    },
    {
        "content": "<p>I think if either of those options end up working, they could be attractive; I probably prefer the first one just because the HTML-editing thing is likely going to have some pain involved.</p>",
        "id": 751370,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559932197
    },
    {
        "content": "<p>The 2nd option may also break the feature if changes are made to the message view HTML. I'll work on the 1st option after I've wrapped up the issues I am working on right now, and see if that gives us the expected result.</p>",
        "id": 751376,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559932420
    },
    {
        "content": "<p>hm, I read this but I guess I still don't have quite the right model for how this feature works technically. I'm not worried about <code>Ctrl+C</code>; if it's badly formatted or has different behaviors on different browsers that's fine.</p>\n<p>For the other options, I thought the way it worked is the js would be able to extract a list of message ids + the selected text, and then could send whatever it wanted to the clipboard. Is that correct?</p>",
        "id": 751381,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559932933
    },
    {
        "content": "<p>Somewhat, yes. The selected text though isn't just parts of/entire selected messages, it also includes other text like user names and time stamps. <br>\nThe <code>no-select</code> property helped with disabling the selection of these elements on Firefox, but it doesn't work the same way on Chrome.<br>\nThis means no matter what (while using no select), achieving Option 1 (select text) from your list won't be possible on Chrome.</p>",
        "id": 751386,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559933174
    },
    {
        "content": "<p>But it would be possible to have a button that does the following, right?</p>\n<div class=\"codehilite\"><pre><span></span>message 2\n\nmessage 3 line 1\nmessage 3 line 2\n\nmessage 4\n</pre></div>",
        "id": 751390,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559933421
    },
    {
        "content": "<p>That would just be the current CTRL+C functionality, i.e., complete messages without the names, right?</p>",
        "id": 751391,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559933535
    },
    {
        "content": "<p>right. Maybe one question is how does that work :)</p>",
        "id": 751392,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559933568
    },
    {
        "content": "<p>Copying complete messages is very easy since we also have the message IDs. That is what the last button in the current PR does, so I'd just have to tweak it a little bit</p>",
        "id": 751393,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559933590
    },
    {
        "content": "<p>do we know where messages begin and end in the selected text?</p>",
        "id": 751395,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559933703
    },
    {
        "content": "<p>No.</p>",
        "id": 751397,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559933800
    },
    {
        "content": "<blockquote>\n<p>right. Maybe one question is how does that work <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>\n</blockquote>\n<p>That uses the CTRL+C algorithm. It is a bit hacky(?) I guess.</p>",
        "id": 751399,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559933810
    },
    {
        "content": "<p>would it be practical to do some sort of string matching to find where in the message the selection begins?</p>",
        "id": 751400,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559933864
    },
    {
        "content": "<p>That was the method I thought of trying. But there are too many things that could mess it up. Maybe some writes a message with a phrase repeated in multiple places, or just words repeated or something like that.</p>",
        "id": 751402,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559933948
    },
    {
        "content": "<p>There is no sure shot way to get it to work the way we want every single time.</p>",
        "id": 751403,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559933963
    },
    {
        "content": "<p>I think if we could get something that works ~99% of the time that could still be worth it.</p>",
        "id": 751408,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559934289
    },
    {
        "content": "<p>do you have some samples for what the javascript gets?</p>",
        "id": 751409,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559934410
    },
    {
        "content": "<p>I'll find and share that in just a moment.</p>",
        "id": 751411,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559934606
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>onvallis at erat ac vestibulum. Sed in gravida est. Cras suscipit eu tellus quis scelerisque. Phasellus viverra magna a tortor mollis, eu feugiat purus venenatis.\n\naaron 11:18 PM (EDITED)\nCurabitur condimentum ultricies orci, vel molestie diam vestibulum at. Nulla in libero id nibh volutpat dignissim. Nulla efficitur metus eget egestas tristique. Sed gravida in ex a hendrerit. Morbi volutpat ac elit suscipit vestibulum.\n\ndevel &gt; Topic 2\nIago 11:19 PM (EDITED)\nMauris mollis magna arcu, eget malesuada erat pharetra ac. Ut scelerisque lectus magna, sit amet blandit lorem consequat bibendum..\n</pre></div>",
        "id": 751422,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559935180
    },
    {
        "content": "<p>For:<br>\n<a href=\"/user_uploads/2/55/8OFjH7n84PAXozb9z8YKpisc/Screenshot-from-2019-06-08-00-49-15.png\" target=\"_blank\" title=\"Screenshot-from-2019-06-08-00-49-15.png\">Screenshot-from-2019-06-08-00-49-15.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/55/8OFjH7n84PAXozb9z8YKpisc/Screenshot-from-2019-06-08-00-49-15.png\" target=\"_blank\" title=\"Screenshot-from-2019-06-08-00-49-15.png\"><img src=\"/user_uploads/2/55/8OFjH7n84PAXozb9z8YKpisc/Screenshot-from-2019-06-08-00-49-15.png\"></a></div>",
        "id": 751423,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559935191
    },
    {
        "content": "<p>it seems like the message content always starts/end on a newline boundary?</p>",
        "id": 751428,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559935582
    },
    {
        "content": "<p>Hi, sorry I took a small break. <br>\nYeah, it does.</p>",
        "id": 751453,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559937387
    },
    {
        "content": "<p>no worries, it must also be pretty late in India, so feel free to go to bed :).</p>\n<p>This does seem like we mainly need to solve the problem of figuring out how many of the lines at the beginning and end of the selection correspond to the first and last message respectively, which seems doable?</p>",
        "id": 751458,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1559937895
    },
    {
        "content": "<p>I'm not sure if that is exactly what you want, but we do something like this in <code>copy_and_paste.js</code>. <br>\nWhat do you suggest we do with this? Maybe I can try to make some changes today/tomorrow as per your plan, and see if that can be done and/or what challenges we'll face.</p>",
        "id": 751470,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559938523
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11190\">@Vinit Singh</span> I think you should investigate the two ideas I proposed earlier, and in addition the idea of using the selection to try to extract just the subset of messages that's selected for the \"copy selected text\" feature.</p>",
        "id": 751474,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559938749
    },
    {
        "content": "<p>We'll probably end up wanting to test all 3 approaches, and then run with the one that works the best.</p>",
        "id": 751475,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1559938771
    },
    {
        "content": "<p>Okay, will do. <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 751479,
        "sender_full_name": "Vinit Singh",
        "timestamp": 1559938858
    }
]