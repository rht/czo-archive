[
    {
        "content": "<p>I test-deployed a new favicon concept based on canvas (not merged into master yet).  Feedback welcome here!</p>",
        "id": 212058,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1495750184
    },
    {
        "content": "<p>I seem to no longer have a favicon displayed, even after reloading.</p>",
        "id": 212060,
        "sender_full_name": "Alex Dehnert",
        "timestamp": 1495750390
    },
    {
        "content": "<p>I did see it. From an accessibility standpoint, I can see the unread count better.</p>",
        "id": 212067,
        "sender_full_name": "Rein Zustand",
        "timestamp": 1495750683
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-email=\"alex-net.url.net.tabbott.zulip@dehnerts.com\" data-user-id=\"591\">@Alex Dehnert</span> Brock is debugging now.</p>",
        "id": 212101,
        "sender_full_name": "Sumana Harihareswara",
        "timestamp": 1495751651
    },
    {
        "content": "<p>I think I'll undeploy this for now.</p>",
        "id": 212103,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1495751700
    },
    {
        "content": "<p>I've test-deployed here <a href=\"https://github.com/zulip/zulip/pull/12549\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/12549\">#12549</a>, which replaces the system through which our favicons are managed from a directory of icons to using the HTML5 Canvas feature.  In theory, the visual appearance of Zulip's favicon should be essentially unchanged.</p>",
        "id": 777230,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1565223115
    },
    {
        "content": "<p>I haven't gotten any feedback on this change -- does that mean folks experience it as behaving the same as before and we should merge the change?</p>",
        "id": 781616,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1566423032
    },
    {
        "content": "<p>one big change for me is that the favicon now flashes whenever I have a PM. Is that intentional?</p>",
        "id": 781617,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1566423169
    },
    {
        "content": "<p>(I personally prefer it not to flash, but I can see arguments on both sides.)</p>",
        "id": 781618,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1566423238
    },
    {
        "content": "<p>though thinking about it more, I think the flashing is probably not ideal. Other products that flash give more information (e.g. the name of the person PM'ing you), which allows you to make a decision about how urgent the notification is. Just flashing without that additional information I think is too noisy.</p>\n<p>I wouldn't be opposed to a non-flashing indictator (e.g. a red dot) that indicated whether you had unread PMs or not.</p>",
        "id": 781620,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1566423580
    },
    {
        "content": "<p>I think the previous code was supposed to flash which was why <span class=\"user-mention\" data-user-id=\"9808\">@Yash RE</span> ported it in; it seems possible that feature didn't work before though <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span>.</p>",
        "id": 781628,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1566428286
    },
    {
        "content": "<p>I think the flashing indicator might be useful for some folks but probably belongs in the category of \"optional things you can specify\".</p>",
        "id": 781629,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1566428309
    },
    {
        "content": "<p>(There is a commit that would add a red dot for mentions if we want to try that; it's just not in this deployment)</p>",
        "id": 781630,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1566428322
    },
    {
        "content": "<p>We can change this, if we spec out what we want.. do we want a setting that could change the flashing in it off or would we want a red dot that appears if you have PMs (in which case we never show the PM count and always the total unread count)</p>",
        "id": 781758,
        "sender_full_name": "Yash RE",
        "timestamp": 1566445608
    },
    {
        "content": "<p>Hmm... If we want to present more info, we probably could. We could display something on the canvas instead of changing the background to the default \"user\" image</p>",
        "id": 781759,
        "sender_full_name": "Yash RE",
        "timestamp": 1566445736
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"9808\">@Yash RE</span> does your red dot version replace the flash, or add to it?  I think next we should try test-deploying a version with just a red dot to indicate there are some PMs.</p>",
        "id": 781761,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1566447301
    },
    {
        "content": "<p>Not as is, but I could change it to be like that,</p>",
        "id": 781763,
        "sender_full_name": "Yash RE",
        "timestamp": 1566447366
    },
    {
        "content": "<p>Can you add a commit to make that possible that we can test?</p>",
        "id": 781773,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1566447814
    },
    {
        "content": "<p>Sure</p>",
        "id": 782102,
        "sender_full_name": "Yash RE",
        "timestamp": 1566575892
    },
    {
        "content": "<p>I'm kind of stuck on an assignment from college, but I'll try to get it done soon.</p>",
        "id": 782103,
        "sender_full_name": "Yash RE",
        "timestamp": 1566575935
    },
    {
        "content": "<p><a href=\"/user_uploads/2/83/WwhC-VtPz0Ix4R8abfygLJ4-/Screen-Shot-2020-06-23-at-16.26.20.png\">Screen-Shot-2020-06-23-at-16.26.20.png</a> <a href=\"/user_uploads/2/7/K20xxlxQPirzw2ghbpIeP_ZC/Screen-Shot-2020-06-24-at-15.58.04.png\">Screen-Shot-2020-06-24-at-15.58.04.png</a>  When there are notifications, the favicon's resolution drops significantly.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/83/WwhC-VtPz0Ix4R8abfygLJ4-/Screen-Shot-2020-06-23-at-16.26.20.png\" title=\"Screen-Shot-2020-06-23-at-16.26.20.png\"><img src=\"/user_uploads/2/83/WwhC-VtPz0Ix4R8abfygLJ4-/Screen-Shot-2020-06-23-at-16.26.20.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/7/K20xxlxQPirzw2ghbpIeP_ZC/Screen-Shot-2020-06-24-at-15.58.04.png\" title=\"Screen-Shot-2020-06-24-at-15.58.04.png\"><img src=\"/user_uploads/2/7/K20xxlxQPirzw2ghbpIeP_ZC/Screen-Shot-2020-06-24-at-15.58.04.png\"></a></div>",
        "id": 912680,
        "sender_full_name": "Onur Temiz",
        "timestamp": 1593003630
    },
    {
        "content": "<p>Interesting!  Thanks for the report <span class=\"user-mention\" data-user-id=\"16298\">@Onur Temiz</span>.</p>",
        "id": 912831,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1593018940
    },
    {
        "content": "<p>I suspect that this will end up being fixed eventually when we switch to HTML canvas for the favicons, but there's likely a shorter-term fix that involves improving how those are generated (via <code>static/assets/favicon/generate</code>).</p>",
        "id": 912832,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1593018974
    },
    {
        "content": "<p>Anyone have time to play with that and see why it's generating such low-resolution images?</p>",
        "id": 912833,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1593018987
    },
    {
        "content": "<p>I think it generates faviconx16.png level resolution images. If the screen has more pixels faviconx32.png or even faviconx128.png is needed.</p>",
        "id": 913907,
        "sender_full_name": "Onur Temiz",
        "timestamp": 1593059966
    },
    {
        "content": "<p>Yeah, but I don't see where we actually declare the 16x16 size in the code that generates them.</p>",
        "id": 914968,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1593107950
    },
    {
        "content": "<p>I just merged <a href=\"https://github.com/zulip/zulip/pull/16582\">#16582</a>, which rewrite our favicon system to use a single SVG (controlled by code) rather than a library of 100 generated image files.  This is a big infrastructure improvement because it gives us much more convenient control over how we display the favicon state than we had before.</p>\n<p>Here's what it looks like:</p>\n<p><a href=\"user_uploads/2/7b/a6ZcWNZACVyZaVPb1-XQKD0o/screenshot.png\">https://chat.zulip.org/user_uploads/2/7b/a6ZcWNZACVyZaVPb1-XQKD0o/screenshot.png</a></p>\n<div class=\"message_inline_image\"><a href=\"user_uploads/2/7b/a6ZcWNZACVyZaVPb1-XQKD0o/screenshot.png\" title=\"https://chat.zulip.org/user_uploads/2/7b/a6ZcWNZACVyZaVPb1-XQKD0o/screenshot.png\"><img src=\"user_uploads/2/7b/a6ZcWNZACVyZaVPb1-XQKD0o/screenshot.png\"></a></div><p>For context the old styling had these two states:</p>\n<ul>\n<li><a href=\"/user_uploads/2/54/3KWPhrjyJob8VJGn7df3RSuG/image.png\">unread count</a> <div class=\"message_inline_image\"><a href=\"/user_uploads/2/54/3KWPhrjyJob8VJGn7df3RSuG/image.png\" title=\"unread count\"><img src=\"/user_uploads/2/54/3KWPhrjyJob8VJGn7df3RSuG/image.png\"></a></div></li>\n<li><a href=\"/user_uploads/2/bd/1JijOXmSYq1_gLDAzr4dC4oG/image.png\">flashes to red dot if there are PMs</a><div class=\"message_inline_image\"><a href=\"/user_uploads/2/bd/1JijOXmSYq1_gLDAzr4dC4oG/image.png\" title=\"flashes to red dot if there are PMs\"><img src=\"/user_uploads/2/bd/1JijOXmSYq1_gLDAzr4dC4oG/image.png\"></a></div></li>\n</ul>",
        "id": 1043478,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1603291834
    },
    {
        "content": "<p>I think the main potential concern with the change is whether the unread counts are sufficiently readable in the favicon, which is really only possible to determine while looking at an actual favicon.  I'm deploying the PR here so that folks can look at it.</p>",
        "id": 1043493,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1603292080
    },
    {
        "content": "<p>It is not super readable for me but as readable as it should be.</p>",
        "id": 1043544,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1603293442
    },
    {
        "content": "<p>I just noticed that mine says \"4K\" - it may just be compared to the previous version, but it looked like a muddied version of the earlier infinity symbol. Maybe the text is too dark/thick/dense?</p>",
        "id": 1043599,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1603295765
    },
    {
        "content": "<p>For posterity, here's a similarly sized screenshot of the new version:<br>\n<a href=\"/user_uploads/2/80/2RX0MpIuotJWbbmCXeIWuPQj/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/80/2RX0MpIuotJWbbmCXeIWuPQj/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/80/2RX0MpIuotJWbbmCXeIWuPQj/image.png\"></a></div>",
        "id": 1043830,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1603304202
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"2406\">@Neil Pilgrim</span> can you post a screenshot?</p>",
        "id": 1043831,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1603304226
    },
    {
        "content": "<p>It's possible that we just want to make the numbers a bit larger, just from comparing with Gmail:</p>\n<p><a href=\"/user_uploads/2/3/nPaVJg3xv6hbeddMmv_xbASb/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/3/nPaVJg3xv6hbeddMmv_xbASb/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/3/nPaVJg3xv6hbeddMmv_xbASb/image.png\"></a></div>",
        "id": 1043832,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1603304293
    },
    {
        "content": "<p>(Not that I think Gmail's digits look great, but they look to me like 30% taller)</p>",
        "id": 1043833,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1603304312
    },
    {
        "content": "<p><a href=\"/user_uploads/2/c0/a137nA_Dm1XnEIF8YJMgGvLo/zulip_favicon_2020_10_21.png\">zulip_favicon_2020_10_21.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/c0/a137nA_Dm1XnEIF8YJMgGvLo/zulip_favicon_2020_10_21.png\" title=\"zulip_favicon_2020_10_21.png\"><img src=\"/user_uploads/2/c0/a137nA_Dm1XnEIF8YJMgGvLo/zulip_favicon_2020_10_21.png\"></a></div>",
        "id": 1043839,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1603304637
    },
    {
        "content": "<p>Hmm, yeah, the <code>4</code> in the <code>4K</code> feels pretty hard to read at that size.  Which argues for looking at using a different size (and/or maybe font-weight?) to try to optimize a bit.</p>",
        "id": 1043933,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1603311890
    },
    {
        "content": "<p>Sure, there’s room to bump the size a little for short numbers: <a href=\"https://github.com/zulip/zulip/pull/16588\">#16588</a>.</p>",
        "id": 1044316,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1603332835
    },
    {
        "content": "<p>Is the large gap below my attachment an issue? I see at least the height of the image again below it before Tim's message.</p>",
        "id": 1044317,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1603333033
    },
    {
        "content": "<p>In terms of the text, it looks too bold in that rendering - zooming in, the pixels seem to indicate that?</p>",
        "id": 1044319,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1603333202
    },
    {
        "content": "<blockquote>\n<p>Is the large gap below my attachment an issue?</p>\n</blockquote>\n<p>Well it’s not ideal, but it’s a known side effect of setting the fixed 100px height on images.</p>",
        "id": 1044320,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1603333219
    },
    {
        "content": "<p>Going down even just to semibold makes it really hard to balance the distraction of the white halo with the interference from the background.</p>",
        "id": 1044323,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1603333415
    },
    {
        "content": "<p>(I assume the fixed height is required for other desired behavior - could we vertically center or style it slightly differently like a colored background, so it doesn't look like a gap between messages?)</p>",
        "id": 1044324,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1603333483
    },
    {
        "content": "<p>The plan (or at least my version of it) is to allow variable height images when we re-enable the standard <code>![]()</code> syntax.</p>",
        "id": 1044328,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1603333581
    },
    {
        "content": "<p><a href=\"/user_uploads/2/7a/at0cKg9-eNzIrPTceANVLLBh/Screenshot-2020-10-22-at-10.06.29-AM.png\">Screenshot-2020-10-22-at-10.06.29-AM.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/7a/at0cKg9-eNzIrPTceANVLLBh/Screenshot-2020-10-22-at-10.06.29-AM.png\" title=\"Screenshot-2020-10-22-at-10.06.29-AM.png\"><img src=\"/user_uploads/2/7a/at0cKg9-eNzIrPTceANVLLBh/Screenshot-2020-10-22-at-10.06.29-AM.png\"></a></div><p>Some issue with favicon not updating properly. I have no unread counts but favicon shows 1 unread.</p>",
        "id": 1044363,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1603341450
    },
    {
        "content": "<p>(on chrome)</p>",
        "id": 1044364,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1603341482
    },
    {
        "content": "<p>Reloading fixes it.</p>",
        "id": 1044365,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1603341642
    },
    {
        "content": "<p>Oh, my Chrome workaround in <a href=\"https://github.com/zulip/zulip/pull/16582\">#16582</a> has a race condition. Let me fix that.</p>",
        "id": 1044366,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1603341960
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/pull/16591\">#16591</a>.</p>",
        "id": 1044376,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1603343303
    }
]