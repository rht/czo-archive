[
    {
        "content": "<p>I'm working on <a href=\"https://github.com/zulip/zulip/pull/21716\">#21716</a> and would love to work off a design. I have most of the functionality and have not worked at all on design yet ehe :)</p>\n<p><a href=\"/user_uploads/2/6a/6DmL64Du8nsPN7z40ZHSS1Lx/image.png\">what I have right now:</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/6a/6DmL64Du8nsPN7z40ZHSS1Lx/image.png\" title=\"what I have right now:\"><img src=\"/user_uploads/2/6a/6DmL64Du8nsPN7z40ZHSS1Lx/image.png\"></a></div>",
        "id": 1381401,
        "sender_full_name": "Evy",
        "timestamp": 1652750863
    },
    {
        "content": "<p>Presumably they'll be in separate tabs that you can only view one of at a time. Vlad do you have bandwidth to draw up something? I can also try something out myself and iterate from there.</p>",
        "id": 1381402,
        "sender_full_name": "Evy",
        "timestamp": 1652750907
    },
    {
        "content": "<p>I wouldn't separate those to tabs actually, decrease the size of those headers, start from capital a and decrease space between items:<br>\n<a href=\"/user_uploads/2/c3/Ui9s0EgTQDML5NRg6iy_ljvb/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/c3/Ui9s0EgTQDML5NRg6iy_ljvb/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/c3/Ui9s0EgTQDML5NRg6iy_ljvb/image.png\"></a></div>",
        "id": 1381421,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1652753088
    },
    {
        "content": "<p>I mean, this is just a rough proposal within the current design</p>",
        "id": 1381422,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1652753125
    },
    {
        "content": "<p>Starting from capital a as an ordering for messages?</p>",
        "id": 1381430,
        "sender_full_name": "Evy",
        "timestamp": 1652759208
    },
    {
        "content": "<p>I think descending by timestamp (most recent at the top) is most useful</p>",
        "id": 1381431,
        "sender_full_name": "Evy",
        "timestamp": 1652759231
    },
    {
        "content": "<p>Is \"drafts from this narrow\" good copy?</p>",
        "id": 1381432,
        "sender_full_name": "Evy",
        "timestamp": 1652759260
    },
    {
        "content": "<p>The benefit of not having tabs is it's clearer what it looks like when there are no drafts in something like All Messages, so that's cool.</p>",
        "id": 1381433,
        "sender_full_name": "Evy",
        "timestamp": 1652759300
    },
    {
        "content": "<p>Should the second list instead be the rest of the drafts instead of a total list of all drafts? (i.e. don't include the drafts from the narrow)</p>",
        "id": 1381434,
        "sender_full_name": "Evy",
        "timestamp": 1652759358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy Kassirer</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1381430\">said</a>:</p>\n<blockquote>\n<p>Starting from capital a as an ordering for messages?</p>\n</blockquote>\n<p>Sorry for the confusion I suggested to have <strong>D</strong>rafts from this narrow</p>",
        "id": 1381435,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1652759387
    },
    {
        "content": "<p>I like the decrease space, that looks really nice :)</p>",
        "id": 1381436,
        "sender_full_name": "Evy",
        "timestamp": 1652759394
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy Kassirer</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1381432\">said</a>:</p>\n<blockquote>\n<p>Is \"drafts from this narrow\" good copy?</p>\n</blockquote>\n<p>I'm not sure, <span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span>  would be a better person to suggest here</p>",
        "id": 1381437,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1652759418
    },
    {
        "content": "<p>Starting at capital A for what then? I think I'm confused.</p>",
        "id": 1381438,
        "sender_full_name": "Evy",
        "timestamp": 1652759444
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy Kassirer</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1381434\">said</a>:</p>\n<blockquote>\n<p>Should the second list instead be the rest of the drafts instead of a total list of all drafts? (i.e. don't include the drafts from the narrow)</p>\n</blockquote>\n<p>We could have \"Relevant drafts\" and \"Another drafts\"</p>",
        "id": 1381439,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1652759462
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy Kassirer</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1381438\">said</a>:</p>\n<blockquote>\n<p>Starting at capital A for what then? I think I'm confused.</p>\n</blockquote>\n<p>Ignore A... just starting from capital letter</p>",
        "id": 1381440,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1652759486
    },
    {
        "content": "<p>Oh!! I see :) yes I can do that</p>",
        "id": 1381442,
        "sender_full_name": "Evy",
        "timestamp": 1652759532
    },
    {
        "content": "<p>\"Drafts from this narrow\" and \"Other drafts\" then maybe</p>",
        "id": 1381443,
        "sender_full_name": "Evy",
        "timestamp": 1652759570
    },
    {
        "content": "<p>Heheh, yes, our standard is to use sentence case throughout.</p>\n<p>Mm, I agree that the two sections might work better than tabs. With that approach, excluding drafts that appear in the first section from the second section makes sense to me. I guess if a section is empty, we should probably still show the heading with <em>None</em> underneath it to keep the structure consistent.</p>\n<p>I think \"Drafts from this conversation\" and \"Other drafts\" would work well as the two headings. While I think we do allow the noun \"narrow\" as a user-facing term, I'm not a big fan of it. Also, I think \"conversation\" would be more correct in this case -- \"narrow\" refers more to the messages you're <em>viewing</em>, but the drafts would depend on the specific conversation (topic or PM thread) you're composing to.</p>",
        "id": 1381575,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652812747
    },
    {
        "content": "<p>I do like conversation better!</p>",
        "id": 1381842,
        "sender_full_name": "Evy",
        "timestamp": 1652835746
    },
    {
        "content": "<p>Do we want it to also show all drafts for a stream when opened in interleaved stream view? Right now I have that working for streams but not interleaved PMs.</p>\n<p>Do we want to include the first section in \"All messages\"? My guess was to remove the section all-together for any view outside of stream/topic/PM.</p>",
        "id": 1381844,
        "sender_full_name": "Evy",
        "timestamp": 1652835828
    },
    {
        "content": "<p>Oh, hm, good questions! Showing that section only if you have specified a recipient (i.e. stream or specific recipients for a PM) seems reasonable to me...</p>\n<p>I guess the same rule should apply if the drafts are being shown based on the state of an open compose box. So if you have specified a stream but no topic we'd show the drafts for that stream. But if you have a topic but no stream, or a PM compose box with no recipients, the section would not be shown.</p>",
        "id": 1382212,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652916655
    },
    {
        "content": "<p>Great, sounds good to me!</p>",
        "id": 1382258,
        "sender_full_name": "Evy",
        "timestamp": 1652928487
    },
    {
        "content": "<p><a href=\"/user_uploads/2/30/eqxWu6Ez-QWosKWxZcbd3Kr1/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/30/eqxWu6Ez-QWosKWxZcbd3Kr1/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/30/eqxWu6Ez-QWosKWxZcbd3Kr1/image.png\"></a></div><p><a href=\"/user_uploads/2/84/-cCaOtOk_aZDI4vd-kpIXq2c/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/84/-cCaOtOk_aZDI4vd-kpIXq2c/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/84/-cCaOtOk_aZDI4vd-kpIXq2c/image.png\"></a></div>",
        "id": 1382387,
        "sender_full_name": "Evy",
        "timestamp": 1652982938
    },
    {
        "content": "<blockquote>\n<p>I guess the same rule should apply if the drafts are being shown based on the state of an open compose box. So if you have specified a stream but no topic we'd show the drafts for that stream. But if you have a topic but no stream, or a PM compose box with no recipients, the section would not be shown.</p>\n</blockquote>\n<p>This actually doesn't work like this for open compose box -- because of the blue box, there's always some conversation selected. I'm currently looking for ways to tell if you're in an interleaved narrow instead of a specific conversation.</p>",
        "id": 1382388,
        "sender_full_name": "Evy",
        "timestamp": 1652983095
    },
    {
        "content": "<p>Does \"None.\" look okay as is, or should we add some styling to it?</p>",
        "id": 1382429,
        "sender_full_name": "Evy",
        "timestamp": 1652989260
    },
    {
        "content": "<p>In case of None, I would just hide that section</p>",
        "id": 1382505,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1653007819
    },
    {
        "content": "<p>Okay cool, I think that's actually cleaner in the code also</p>",
        "id": 1382508,
        "sender_full_name": "Evy",
        "timestamp": 1653009935
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy Kassirer</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1382388\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>I guess the same rule should apply if the drafts are being shown based on the state of an open compose box. So if you have specified a stream but no topic we'd show the drafts for that stream. But if you have a topic but no stream, or a PM compose box with no recipients, the section would not be shown.</p>\n</blockquote>\n<p>This actually doesn't work like this for open compose box -- because of the blue box, there's always some conversation selected. I'm currently looking for ways to tell if you're in an interleaved narrow instead of a specific conversation.</p>\n</blockquote>\n<p>Ah, hm, I meant something a bit different here. As the issue describes, if you have the compose box open, I was thinking it should override the message view info. So it wouldn't matter if you're viewing an interleaved narrow, as long as stream/topic are specified in the compose box.</p>",
        "id": 1382929,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1653079388
    },
    {
        "content": "<p>Ohh this is the case for specifically when the compose box is open. Yeah that totally makes sense. I can add that!</p>",
        "id": 1382930,
        "sender_full_name": "Evy",
        "timestamp": 1653079532
    },
    {
        "content": "<p>Hmm, one potential concern with the stacking \"Drafts from this conversation\" approach on top of all drafts, is that you could be in a situation where you have a bunch of drafts from the current conversation that are old, and then a draft PM, say, that you're trying to get back to you, and you end up needing to scroll through all the current conversation ones in order to find that.</p>",
        "id": 1385188,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1653607195
    },
    {
        "content": "<p>I think this is not super likely to be a significant problem in practice, in that it's probably fairly rare that you have more than 2 drafts matching the current conversation if you're looking at a PM or topic view. But I'm not entirely sure how drafts will be filtered -- you can open drafts from any view (including, say, Recent topics) -- I imagine in those views we'd just have one section?</p>",
        "id": 1385189,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1653607256
    },
    {
        "content": "<p>Could a user then leave that narrow if they end up in that situation? e.g. go to the PMs narrow instead, since they're trying to get to a draft there anyways.</p>",
        "id": 1385190,
        "sender_full_name": "Evy",
        "timestamp": 1653607271
    },
    {
        "content": "<p>The PR has it such that you can only filter by stream, stream+topic, or PM recipient.</p>",
        "id": 1385191,
        "sender_full_name": "Evy",
        "timestamp": 1653607297
    },
    {
        "content": "<p>They could -- but that's a lot of steps. It's worth noting that \"Return to the last draft that you were working on before closing compose\" is currently viable via the \"D\", \"Enter\" keyboard sequence, and we'd be potentially breaking that pattern by having non-recent drafts that match your current view appear above the thing you were just working on 3 minutes ago.</p>",
        "id": 1385196,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1653607372
    },
    {
        "content": "<p>Right now I imagine many users can end up with a lot of drafts in a conversation, if they're not great at using the drafts section to return to drafts they've written before. I remember in past experiences with Zulip having several drafts floating around and there were too many to really find the Drafts view useful. I think auto-restoring the last draft is the biggest thing that will help with this, but we wanted to add this feature as a way to help users who see the auto-restored draft and want to see other drafts that they had composed for that narrow to use instead.</p>",
        "id": 1385197,
        "sender_full_name": "Evy",
        "timestamp": 1653607401
    },
    {
        "content": "<p>Yeah. As a quick data point, I have ~25 drafts in <a href=\"http://chat.zulip.org\">chat.zulip.org</a>, but I think no more than ~2 in any individual conversation. I've also been relatively inactive over the last month; I remember having ~50 at various points in the past.</p>",
        "id": 1385198,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1653607495
    },
    {
        "content": "<p>So I imagine it might be helpful to instead of search through drafts for one matching a conversation, to instead go to that conversation and see drafts from that conversation. We were considering having \"All drafts\" and \"Drafts from this conversation\" as separate tabs, which would preserve old behaviour, but Vlad suggested we put it all in one place which is what I have in the PR right now.</p>",
        "id": 1385201,
        "sender_full_name": "Evy",
        "timestamp": 1653607556
    },
    {
        "content": "<p>I think the alternative high-level design would be to have tabs -- like this widget:</p>\n<p><a href=\"/user_uploads/2/2e/rYplRwfb0L-BLjCYNJNUm6B_/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/2e/rYplRwfb0L-BLjCYNJNUm6B_/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/2e/rYplRwfb0L-BLjCYNJNUm6B_/image.png\"></a></div><p>I'm not sure I see an easy answer to which tab to select by default that would address the problem statement I noted above well either.</p>",
        "id": 1385202,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1653607588
    },
    {
        "content": "<p>We were originally thinking of having tabs, as we discussed earlier in this topic.</p>",
        "id": 1385207,
        "sender_full_name": "Evy",
        "timestamp": 1653607710
    },
    {
        "content": "<p>But yeah, I can see how that has the same issue you mentioned.</p>",
        "id": 1385209,
        "sender_full_name": "Evy",
        "timestamp": 1653607741
    },
    {
        "content": "<p>We could always default to \"All drafts\", but I think that I'd rather creating a more usable experience for the average user over making a very fast experience for keyboard shortcut users. Definitely I'd prefer to do both, but I'd pick the average user if I was forced to pick one.</p>",
        "id": 1385216,
        "sender_full_name": "Evy",
        "timestamp": 1653607827
    },
    {
        "content": "<blockquote>\n<p>situation where you have a bunch of drafts from the current conversation that are old, and then a draft PM, say, that you're trying to get back to <br>\nWell, that is a case when a user is trying to find something in a wrong place. The solution would be a search input. But even if a user has 10 drafts in that topic, scrolling would be used in 90% of time</p>\n</blockquote>\n<p>No tabs makes experience better in average. Having tabs covers the edge case but at a price of extra click. I guess I would need to propose a redesigned version of that...</p>",
        "id": 1385366,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1653618690
    },
    {
        "content": "<p>Yeah, I think we should continue with the sections approach as discussed above, since it will probably be more convenient in the great majority of cases.</p>",
        "id": 1385586,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1653677972
    },
    {
        "content": "<p>Playing around with the PR (<a href=\"https://github.com/zulip/zulip/pull/22127\">#22127</a>), I'm thinking it would be better to be specific rather than saying \"this stream\" or \"this conversation\", since it can be confusing what \"this\" refers to in some cases.</p>\n<p>Could we instead have the section title be <code>Drafts from #stream name</code> or <code>Drafts from #stream name &gt; topic name</code> as appropriate?</p>",
        "id": 1385599,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1653678738
    },
    {
        "content": "<p>I guess for PMs we could list the recipient names.</p>",
        "id": 1385605,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1653679068
    },
    {
        "content": "<p>Yup! I can add that :)</p>",
        "id": 1385773,
        "sender_full_name": "Evy",
        "timestamp": 1653692118
    },
    {
        "content": "<p>Great idea</p>",
        "id": 1385774,
        "sender_full_name": "Evy",
        "timestamp": 1653692121
    },
    {
        "content": "<p>I merged a few of the prep commits for <a href=\"https://github.com/zulip/zulip/pull/22127\">#22127</a> today and posted a few other comments; no function changes yet other than removing the \"pro tip\" about keyboard shortcuts.</p>",
        "id": 1387910,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1654217564
    },
    {
        "content": "<p>This was deployed to CZO today! Feedback welcome :)</p>",
        "id": 1418708,
        "sender_full_name": "Evy",
        "timestamp": 1660279644
    },
    {
        "content": "<blockquote>\n<p>The main concern I have about this design change is that it makes the UI workflow of \"D, Enter\" no longer guaranteed to restore the last draft that you'd had. (It'll now only work if that last draft matches the current conversation and you don't have a 3 week old draft that does match).</p>\n<p>It's possible that corner case will be rare enough that it doesn't matter, but I do remember us considering documenting \"D, Enter\" as a keyboard shortcut for getting the last draft, since we didn't want to add an independent shortcut just for that.</p>\n</blockquote>\n<p>My opinion on this is still approximately what I said in the above conversation:</p>\n<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1385216\">said</a>:</p>\n<blockquote>\n<p>We could always default to \"All drafts\", but I think that I'd rather creating a more usable experience for the average user over making a very fast experience for keyboard shortcut users. Definitely I'd prefer to do both, but I'd pick the average user if I was forced to pick one.</p>\n</blockquote>\n<p>In that keeping the keyboard shortcut would be nice, but considering it's not officially documented and many users are mouse users or end up with a lot of drafts, I would rather add this feature and lose the keyboard shortcut than keep the keyboard shortcut and not get this feature.</p>",
        "id": 1418709,
        "sender_full_name": "Evy",
        "timestamp": 1660280090
    },
    {
        "content": "<p>Well, I think it's better to actually analyze the circumstances where the change would be annoying. I think <code>D, Enter</code> will only do the wrong thing in this new world if:<br>\n(1) You have at least one draft for the recipient of the view you're currently looking at.<br>\n(2) The draft you'd been working on most recently was for a different recipient.</p>\n<p>I think probably that's rare enough that it's OK; worst case, you hit <code>Down</code> a few times to get to the right draft.</p>",
        "id": 1418732,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660282100
    },
    {
        "content": "<p>Well, except there's a bug: the keyboard interaction is broken if you hit <code>d</code>; nothing starts out focused at all, and hitting \"Down\" doesn't let you navigate to drafts in the second section at all.</p>",
        "id": 1418733,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660282144
    },
    {
        "content": "<p>But assuming we fix that, I think it's probably going to be rare enough that users actually experience the potential regression when using the \"D, Enter\" keyboard sequence that we can move forward with this plan.</p>",
        "id": 1418734,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660282192
    },
    {
        "content": "<p>Ok cool, updating that keyboard interaction sounds good!</p>",
        "id": 1418746,
        "sender_full_name": "Evy",
        "timestamp": 1660282615
    },
    {
        "content": "<p>This looks like a nice filter over the previous design <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>\n<p>Have you considered showing the next-outer narrow below that (if applicable), or is date a more notable factor after just the current narrow?</p>",
        "id": 1419111,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1660350933
    },
    {
        "content": "<p>What do you mean by \"next-outer narrow\"?</p>",
        "id": 1419127,
        "sender_full_name": "Evy",
        "timestamp": 1660356918
    },
    {
        "content": "<p>This is based on this approximate ordering:</p>\n<ul>\n<li>All messages &gt; stream &gt; topic-in-stream</li>\n<li>All messages &gt; all-PMs &gt; conversation</li>\n</ul>\n<p>So if in a topic, one might show</p>\n<ol>\n<li>drafts in topic</li>\n<li>drafts in rest of stream</li>\n<li>drafts in rest of messages (ie. all messages)</li>\n</ol>\n<p>Similarly for PMs.</p>",
        "id": 1419129,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1660358717
    },
    {
        "content": "<p>It's very possible we want to do that. The concern would be that doing so increases the probability that you have your your 22-day old drafts ; which eventually might feel annoying when those rank above one from 2 minutes ago in a different conversation.</p>",
        "id": 1419254,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660369049
    },
    {
        "content": "<p>Right, and I think that's the concern I raised above - whether date is a more notable factor to consider after the current narrow.</p>\n<p>Possibly if one has such old drafts though, is it not already challenging to scroll to them? When you have so many (meaningful) drafts, how do you pick the one you want to work on right now? I assume these will also jump up/down if temporarily editing one, or adding another draft to the stack, in any case. Maybe we just want a sticky contextual vs recent selector to quickly switch search styles?</p>\n<p>...Or a tree of drafts under topics under streams (similarly PMs)? Or starred/priority drafts?<br>\nI know far fewer messages are involved, and the above is rather hyperbolic, but this does lead me to wonder whether some ideal structure might end up just being a mirror of the Zulip UI but just for drafts. Currently drafts are essentially all-messages in reverse (time feed); the new design will have a subset showing the current narrow prioritized (and incidentally others below). So going too far down this path feels like it would be too much duplication, that we might remove somehow (eg. reusing layout/client UI code) or consider if drafts belong instead/alternatively somehow integrated in the rest of the message/narrow UI.</p>\n<p>Anyhow, not to digress too far before bed:</p>\n<ol>\n<li>New design looks useful <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></li>\n<li>Maybe consider a contextual selector? (new vs old, ie. contextual vs recent)</li>\n<li>Consider extending the new contextual design to show more context? (as I indicated above)</li>\n<li>Discuss alternative speculative drafts designs longer term, as needed :)</li>\n</ol>",
        "id": 1419266,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1660374091
    },
    {
        "content": "<blockquote>\n<p>consider if drafts belong instead/alternatively somehow integrated in the rest of the message/narrow UI.</p>\n</blockquote>\n<p>Hmm, interesting! This makes me wonder if we should add something like a \"Continue draft\" option to the three-dot topic menu, which could open the draft you have in the compose box (if there's just one), or open the drafts menu with just the drafts for that topic section.</p>",
        "id": 1422897,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661187611
    },
    {
        "content": "<p>I have a bit of visual feedback, which is that the vertical spacing doesn't feel quite right to me. In particular, the section headings feel like they are spaced too far from the drafts in that section. Maybe the heading -&gt; first draft in the section spacing should be the same as the draft -&gt; draft spacing?</p>\n<p><a href=\"/user_uploads/2/6b/ztmJ5i9UsrDlSWLkeUBJMvfM/Screen-Shot-2022-08-22-at-10.29.26-AM.png\">Screen-Shot-2022-08-22-at-10.29.26-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/6b/ztmJ5i9UsrDlSWLkeUBJMvfM/Screen-Shot-2022-08-22-at-10.29.26-AM.png\" title=\"Screen-Shot-2022-08-22-at-10.29.26-AM.png\"><img src=\"/user_uploads/2/6b/ztmJ5i9UsrDlSWLkeUBJMvfM/Screen-Shot-2022-08-22-at-10.29.26-AM.png\"></a></div>",
        "id": 1422906,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661189427
    },
    {
        "content": "<p>I can update that :)</p>",
        "id": 1422918,
        "sender_full_name": "Evy",
        "timestamp": 1661190135
    },
    {
        "content": "<p>Re continue-draft being more integrated, <span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> did you mean the left panel topic 3-dot menu?</p>\n<p>I'd use drafts more (or remember I typed something but didn't send!) if there was an indicator of existing drafts visually, such as:</p>\n<ul>\n<li>extra box among the 3 at the bottom to start compose, which could indicate number/any drafts to this narrow (or selection?); if only 1, click resumes that draft, if more show a dropdown (up) of draft summaries, or simply enter drafts popup</li>\n<li>marker next to or adjusting style of unread counts, indicating drafts in that stream/topic/all-PMs/PM-conversation, possibly then a quick link to a single or general drafts as above (or via 3-dot menu like Alya suggested)</li>\n<li>if entering compose/reply, have some way of indicating and being able to cycle through (and delete) existing message and drafts in that topic/PM?</li>\n</ul>\n<p>I think visibility would really help, though it could lead to visual clutter if they're barely-started or left-over drafts - though possibly this would make it easier to keep such drafts cleanly dealt with.</p>",
        "id": 1423269,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1661213267
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"2406\">Neil Pilgrim (neiljp)</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1423269\">said</a>:</p>\n<blockquote>\n<p>Re continue-draft being more integrated, <span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> did you mean the left panel topic 3-dot menu?</p>\n</blockquote>\n<p>Yeah, that's what I had in mind.</p>",
        "id": 1423276,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661213544
    },
    {
        "content": "<p>In general, for draft visibility, our vision has been to auto-restore drafts (<a href=\"https://github.com/zulip/zulip/pull/18555\">#18555</a> / <a href=\"https://github.com/zulip/zulip/pull/22104\">#22104</a>). <span class=\"user-mention silent\" data-user-id=\"21453\">Evy</span> could you remind me of the status of that work?</p>",
        "id": 1423280,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661213692
    },
    {
        "content": "<p>Great! So that issue/PR looks like a little like my last bullet <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> \"Save and clear\" seems like it'd be sort of a limited version of the cycling I had in mind, though one-way, ie. to resume that draft one would need to go back to the drafts popup? My first bullet is more of a 'no surprise' version, but if there's any type of cycling then it avoids some of the need for that.</p>\n<p>I know there's been discussion of quite a few icons next to unreads (mute? mentions?) but I'm not sure if drafts have come up (middle bullet).</p>",
        "id": 1423305,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1661214719
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1423280\">said</a>:</p>\n<blockquote>\n<p>In general, for draft visibility, our vision has been to auto-restore drafts (<a href=\"https://github.com/zulip/zulip/pull/18555\">#18555</a> / <a href=\"https://github.com/zulip/zulip/pull/22104\">#22104</a>). <span class=\"user-mention silent\" data-user-id=\"21453\">Evy</span> could you remind me of the status of that work?</p>\n</blockquote>\n<p>There's only one small piece of it left, that will be much easier to do if we merge the draft tabs change first</p>",
        "id": 1423353,
        "sender_full_name": "Evy",
        "timestamp": 1661217625
    },
    {
        "content": "<p>I'd love to get this merged soon -- I'll make the CSS change, but maybe Tim can look at <a href=\"https://github.com/zulip/zulip/pull/22127\">#22127</a> again soon. He asked me to let him know when some things had been fixed, but those were already fixed and ready to go :)</p>",
        "id": 1423354,
        "sender_full_name": "Evy",
        "timestamp": 1661217701
    },
    {
        "content": "<p>It's a fairly simple solution to the issue -- auto-loads most recent draft, and you can view existing drafts for the narrow when you open the drafts page, and you can start a new draft from the drafts page if needed (which I'm hoping to discourage a bit, since I think multiple drafts per narrow happens by accident way more often than on purpose these days).</p>",
        "id": 1423355,
        "sender_full_name": "Evy",
        "timestamp": 1661217802
    },
    {
        "content": "<p>If people express an active desire to have more visible controls to move through drafts or create new ones, I think we can add that afterwards</p>",
        "id": 1423356,
        "sender_full_name": "Evy",
        "timestamp": 1661217997
    },
    {
        "content": "<p>Sounds good, thank you for the update!</p>",
        "id": 1423405,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661230948
    },
    {
        "content": "<p>Does this look right? I think it's the same padding, but the styles are a bit weird here so I can't tell for sure. <a href=\"/user_uploads/2/b4/2EvZovG-BpDJTuTw11D5md8l/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/b4/2EvZovG-BpDJTuTw11D5md8l/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/b4/2EvZovG-BpDJTuTw11D5md8l/image.png\"></a></div>",
        "id": 1423669,
        "sender_full_name": "Evy",
        "timestamp": 1661277037
    },
    {
        "content": "<p>That looks better to me, though how's the spacing to the next section for comparison?</p>",
        "id": 1423671,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1661277195
    },
    {
        "content": "<p>The same, though it's using the same styling :)</p>\n<p><a href=\"/user_uploads/2/a1/QCd_6ZVjdVaLywm7Gn2TZQGj/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/a1/QCd_6ZVjdVaLywm7Gn2TZQGj/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/a1/QCd_6ZVjdVaLywm7Gn2TZQGj/image.png\"></a></div>",
        "id": 1423674,
        "sender_full_name": "Evy",
        "timestamp": 1661277223
    },
    {
        "content": "<p>I've pushed the commit with the styling changes. Would love to get it merged soon so I can keep working on restoring drafts! :)</p>",
        "id": 1423675,
        "sender_full_name": "Evy",
        "timestamp": 1661277249
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1423674\">said</a>:</p>\n<blockquote>\n<p>The same, though it's using the same styling :)</p>\n</blockquote>\n<p>To clarify, I meant space above the next title being more than underneath it, to ensure that the next title looks more connected to the elements below it than simply interspersed between them. Previously and now these separations seem very similar.</p>\n<p>Happy to defer to Alya on this and get it merged :)</p>",
        "id": 1423691,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1661278653
    },
    {
        "content": "<p>Ah yes I only changed the bottom margin! But good call. I'll also defer to Alya or <span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span> .</p>",
        "id": 1423693,
        "sender_full_name": "Evy",
        "timestamp": 1661278870
    },
    {
        "content": "<p>Yeah, putting the section heading more clearly closer to the section below than above would be good.</p>",
        "id": 1423803,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661290330
    },
    {
        "content": "<p>If we want the space between it and the message to be consistent with between messages, that would mean adding a bit more spacing above the header, yeah?</p>",
        "id": 1423804,
        "sender_full_name": "Evy",
        "timestamp": 1661290569
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1423693\">said</a>:</p>\n<blockquote>\n<p>Ah yes I only changed the bottom margin! But good call. I'll also defer to Alya or <span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> .</p>\n</blockquote>\n<p>For now I'm a bit detached from that topic. Once I start designing it I'll get back to it.</p>",
        "id": 1424023,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1661310512
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy</span> <a href=\"#narrow/stream/101-design/topic/draft.20tabs/near/1423804\">said</a>:</p>\n<blockquote>\n<p>If we want the space between it and the message to be consistent with between messages, that would mean adding a bit more spacing above the header, yeah?</p>\n</blockquote>\n<p>Yeah, I guess we should try that.</p>",
        "id": 1424066,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661316320
    },
    {
        "content": "<p><a href=\"/user_uploads/2/5/sYvHKC278OWRHWr1wxgIft4i/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/5/sYvHKC278OWRHWr1wxgIft4i/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/5/sYvHKC278OWRHWr1wxgIft4i/image.png\"></a></div>",
        "id": 1424307,
        "sender_full_name": "Evy",
        "timestamp": 1661365257
    },
    {
        "content": "<p>I actually prefer the equal distancing</p>",
        "id": 1424308,
        "sender_full_name": "Evy",
        "timestamp": 1661365272
    },
    {
        "content": "<p>that or making the headers have less padding below them</p>",
        "id": 1424310,
        "sender_full_name": "Evy",
        "timestamp": 1661365303
    },
    {
        "content": "<p><a href=\"/user_uploads/2/9a/EYQ7DcGe0QohtaAQsmJLdfBY/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/9a/EYQ7DcGe0QohtaAQsmJLdfBY/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/9a/EYQ7DcGe0QohtaAQsmJLdfBY/image.png\"></a></div>",
        "id": 1424311,
        "sender_full_name": "Evy",
        "timestamp": 1661365327
    },
    {
        "content": "<p>^ okay I think that's my fave so far</p>",
        "id": 1424312,
        "sender_full_name": "Evy",
        "timestamp": 1661365334
    },
    {
        "content": "<p>That last screenshot looks reasonable to me.</p>",
        "id": 1424327,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661366367
    },
    {
        "content": "<p>Thanks for playing with this!</p>",
        "id": 1424328,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661366370
    },
    {
        "content": "<p>Ok the PR should be up to date with that fix now!</p>",
        "id": 1424719,
        "sender_full_name": "Evy",
        "timestamp": 1661382691
    },
    {
        "content": "<p>I'll try to deploy the updated version today.</p>",
        "id": 1424727,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1661382955
    }
]