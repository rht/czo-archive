[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> <a href=\"#narrow/stream/101-design/topic/server.20upgrade.20notice/near/1389459\">said</a>:</p>\n<blockquote>\n<p>I didn't design desktop app yet. But I suggest to show server upgrade to all of the users, so there would be a pressure to ask admins to update it. </p>\n<p>Desktop app update can be highlighted in the app settings</p>\n</blockquote>\n<p><a href=\"/user_uploads/2/37/_jM-JkTii9mU6C0jbGgiETBZ/selfhosted-upgrade.png\">selfhosted-upgrade.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/37/_jM-JkTii9mU6C0jbGgiETBZ/selfhosted-upgrade.png\" title=\"selfhosted-upgrade.png\"><img src=\"/user_uploads/2/37/_jM-JkTii9mU6C0jbGgiETBZ/selfhosted-upgrade.png\"></a></div><p>Splitting off a separate topic, it would be great to discuss the proposed icons in the gear menu prototype above. (Let's set aside the question of whether to reorder or renane any of the menu options for now.) I'll kick it off with my thoughts on the major (not purely stylistic) changes from the current icons. In current menu order:</p>\n<ol>\n<li>Manage streams: Changing this to a hash makes sense to me!</li>\n<li>Personal settings: I'm not sure whether the person icon says \"personal settings\" to me; elsewhere in the app, similar icons refer to (PMs with) other users. This also reminds me that I believe we've had some discussions about pulling out personal settings into an avatar menu, though I'm not finding the issue for it if there is one. <span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span> do you have more context?</li>\n<li>Manage organization: I'm also not sure about the house icon for this one, though I have no attachment to the lightning icon. Something that says \"tweak a bunch of knobs\" is more the direction that would feel intuitive for me here.</li>\n<li>Search operators: I'm not sure about using a label icon here. Do we have analogs from other apps?</li>\n<li>About Zulip: Changing Z -&gt; i makes sense to me here.</li>\n<li>Contact support: I like the idea of making the icon channel-independent, as we describe multiple channels (not just email) on the <a href=\"http://zulip.com/help/contact-support\">linked page</a>. The proposed icon makes sense to me; curios to hear what others think.</li>\n<li>Integrations: <span aria-label=\"100\" class=\"emoji emoji-1f4af\" role=\"img\" title=\"100\">:100:</span> on replacing the GitHub icon. (By the way, I'd love for us to fix <a href=\"https://github.com/zulip/zulip/pull/19797\">#19797</a> as well!) I'd be curious for engineers' perspective as to whether the proposal feels intuitive as an integrations icon.</li>\n<li>API documentation: I guess the proposed change is from an API-ish icon to a documentation-ish icon? Seems reasonable to me...</li>\n<li>Plans and pricing: <span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span> let's make sure we have a proposal for a <strong>Plans and pricing</strong> icon. (Easy to miss, as only organization owners are shown this option.)</li>\n</ol>",
        "id": 1395291,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1655937013
    },
    {
        "content": "<blockquote>\n<p>I'm not sure whether the person icon says \"personal settings\"</p>\n</blockquote>\n<p>The user icons is trying to say <em>personal</em>. Until you decide that it should be a separate avatar like icon (it actually could be a user avatar anyway) I put user in a circle</p>\n<ul>\n<li>Search operators - Updated</li>\n<li>Manage organization - Updated</li>\n</ul>\n<blockquote>\n<p>Plans and pricing</p>\n</blockquote>\n<p>The whole top section of this menu is one big button to Plans and Pricing</p>\n<p><a href=\"/user_uploads/2/4a/o7HUjyYK_vXoycR6M-imMzzw/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/4a/o7HUjyYK_vXoycR6M-imMzzw/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/4a/o7HUjyYK_vXoycR6M-imMzzw/image.png\"></a></div>",
        "id": 1399756,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1656967992
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20gear.20menu/near/1399756\">said</a>:</p>\n<blockquote>\n<p>The whole top section of this menu is one big button to Plans and Pricing</p>\n</blockquote>\n<p>Ah, makes sense!</p>",
        "id": 1400014,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1657044311
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20gear.20menu/near/1399756\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>I'm not sure whether the person icon says \"personal settings\"</p>\n</blockquote>\n<p>The user icons is trying to say <em>personal</em>. Until you decide that it should be a separate avatar like icon (it actually could be a user avatar anyway) I put user in a circle</p>\n</blockquote>\n<p>Hm, I just posted on <a class=\"stream-topic\" data-stream-id=\"101\" href=\"/#narrow/stream/101-design/topic/UI.20redesign.3A.20popover.20menu\">#design &gt; UI redesign: popover menu</a> ; I guess we might want to leave the gear menu items as they are in any case.</p>",
        "id": 1400016,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1657044422
    },
    {
        "content": "<p>Do we want to file an issue writeup for creating that special section at the top of the gear menu? I think it'd be fairly orthogonal to other work, and it might be nice to get that implemented.</p>",
        "id": 1415366,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659653720
    },
    {
        "content": "<p>I believe that's <a href=\"https://github.com/zulip/zulip/pull/22205\">#22205</a>.</p>",
        "id": 1422030,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1660945050
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span>  Posting here the screenshots of the gear menu redesign.</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>For 10px font size</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p><a href=\"/user_uploads/2/a/FX0ezJsz-b1ZLKMYdwIrNQYO/image.png\">image.png</a><br>\n<a href=\"/user_uploads/2/fe/jF0jOLDQHVqkP50YaEbon7y-/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/a/FX0ezJsz-b1ZLKMYdwIrNQYO/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/a/FX0ezJsz-b1ZLKMYdwIrNQYO/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/fe/jF0jOLDQHVqkP50YaEbon7y-/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/fe/jF0jOLDQHVqkP50YaEbon7y-/image.png\"></a></div></div></div>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>For 12px font size</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p><a href=\"/user_uploads/2/5/2bqkmzCR_2CarQFkuI_w7nig/image.png\">image.png</a><br>\n<a href=\"/user_uploads/2/62/ZCNVQG78uOxUVuQc-GycAL2E/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/5/2bqkmzCR_2CarQFkuI_w7nig/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/5/2bqkmzCR_2CarQFkuI_w7nig/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/62/ZCNVQG78uOxUVuQc-GycAL2E/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/62/ZCNVQG78uOxUVuQc-GycAL2E/image.png\"></a></div></div></div>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>For 14px font size</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p><a href=\"/user_uploads/2/bf/SPelaiDTd4fTf9bfoaIq6SMa/image.png\">image.png</a><br>\n<a href=\"/user_uploads/2/a9/ykuJmfMwUtOmEpN54Hfr0ufA/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/bf/SPelaiDTd4fTf9bfoaIq6SMa/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/bf/SPelaiDTd4fTf9bfoaIq6SMa/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/a9/ykuJmfMwUtOmEpN54Hfr0ufA/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/a9/ykuJmfMwUtOmEpN54Hfr0ufA/image.png\"></a></div></div></div>",
        "id": 1443522,
        "sender_full_name": "Ganesh Pawar (ganpa3)",
        "timestamp": 1664608132
    },
    {
        "content": "<p>12 px here looks ok<br>\nI would do spacing between lines for the server version too. <br>\nI suggest to make Upgrade colored as a link</p>",
        "id": 1443632,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1664657376
    },
    {
        "content": "<p>Sure, let's try those ideas. :) Thanks, <span class=\"user-mention silent\" data-user-id=\"17967\">Ganesh Pawar (ganpa3)</span> and <span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> !</p>\n<p>I wonder if we should try making just the server version for self-hosters 10px, while the \"Upgrade\" link and everything on Zulip Cloud is 12px? It can be a bit long for folks running something other than an X.Y release (e.g. <code>6.0-dev-1631-g015bb07c13</code> is the current version on Zulip Cloud), and it would be great to avoid line-wrapping.</p>",
        "id": 1444002,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664815231
    },
    {
        "content": "<p>I guess about the blue link, it's a bit inconsistent, since other external links in that menu (of which there are many) are <em>not</em> blue. <span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> do you still think we should color it?</p>",
        "id": 1444003,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664815285
    },
    {
        "content": "<p>Yes, since it doesnâ€™t look like a menu item</p>",
        "id": 1444033,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1664819624
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"17967\">@Ganesh Pawar (ganpa3)</span> Will you be able to address the feedback above on this release goal issue in the next couple of days, or should someone else jump in to help?</p>",
        "id": 1446450,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665184474
    },
    {
        "content": "<p>Changed everything to 12px, except the version string which is 10px</p>\n<p><a href=\"/user_uploads/2/55/kQ-n38KKxz1rDBDgMHEy0vSN/image.png\">image.png</a><br>\n<a href=\"/user_uploads/2/da/9MHaW2VgbK5P_UqlOUV28QB-/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/55/kQ-n38KKxz1rDBDgMHEy0vSN/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/55/kQ-n38KKxz1rDBDgMHEy0vSN/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/da/9MHaW2VgbK5P_UqlOUV28QB-/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/da/9MHaW2VgbK5P_UqlOUV28QB-/image.png\"></a></div>",
        "id": 1446680,
        "sender_full_name": "Ganesh Pawar (ganpa3)",
        "timestamp": 1665233951
    },
    {
        "content": "<p>Dark mode:<br>\n<a href=\"/user_uploads/2/cb/MU0iKEEkeMoN4AIk0b0eMHTG/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/2/d0/tVxkZk7nlwZ1Hoa80r--YU5e/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/cb/MU0iKEEkeMoN4AIk0b0eMHTG/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/cb/MU0iKEEkeMoN4AIk0b0eMHTG/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/d0/tVxkZk7nlwZ1Hoa80r--YU5e/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/d0/tVxkZk7nlwZ1Hoa80r--YU5e/image.png\"></a></div>",
        "id": 1446682,
        "sender_full_name": "Ganesh Pawar (ganpa3)",
        "timestamp": 1665234035
    },
    {
        "content": "<p>Nice! Those screenshots look good to me.</p>",
        "id": 1447871,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665502222
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"17967\">@Ganesh Pawar (ganpa3)</span>  Can you push those changes to <a href=\"https://github.com/zulip/zulip/pull/22637\">#22637</a>?</p>",
        "id": 1447872,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665502263
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20gear.20menu/near/1447872\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"17967\">Ganesh Pawar (ganpa3)</span>  Can you push those changes to <a href=\"https://github.com/zulip/zulip/pull/22637\">#22637</a>?</p>\n</blockquote>\n<p>Done.</p>",
        "id": 1447915,
        "sender_full_name": "Ganesh Pawar (ganpa3)",
        "timestamp": 1665505774
    },
    {
        "content": "<p>Here's how this menu looks on <a href=\"http://chat.zulip.org\">chat.zulip.org</a>, since I've just test-deployed that PR here.</p>\n<p><a href=\"/user_uploads/2/9f/eQflYzQEytHbz_WDMAsBtaYh/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/9f/eQflYzQEytHbz_WDMAsBtaYh/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/9f/eQflYzQEytHbz_WDMAsBtaYh/image.png\"></a></div>",
        "id": 1448135,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665524154
    },
    {
        "content": "<p>I feel like the version number line at 10px is hard to read; it's not necessarily important that it be super readable, but I wonder if it'd be better to do something that doesn't display the full version number inline when one is running a fork.</p>",
        "id": 1448136,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665524253
    },
    {
        "content": "<p>You can get the full version number via the \"About Zulip\" link in that menu: <a href=\"/user_uploads/2/aa/WNmzTdnAS1J6wzGsG1h0or8e/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/aa/WNmzTdnAS1J6wzGsG1h0or8e/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/aa/WNmzTdnAS1J6wzGsG1h0or8e/image.png\"></a></div>",
        "id": 1448137,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665524275
    },
    {
        "content": "<p>Clicking on the version number closes the menu, which makes it difficult to copy. The menu should stay open when you click on it. <span class=\"user-mention\" data-user-id=\"17967\">@Ganesh Pawar (ganpa3)</span> FYI</p>",
        "id": 1448138,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665524275
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20gear.20menu/near/1448136\">said</a>:</p>\n<blockquote>\n<p>I feel like the version number line at 10px is hard to read; it's not necessarily important that it be super readable, but I wonder if it'd be better to do something that doesn't display the full version number inline when one is running a fork.</p>\n</blockquote>\n<p>Yeah, it's pretty tiny... Can we make the font size depend on how long the version name is, or is that silly?</p>",
        "id": 1448139,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665524335
    },
    {
        "content": "<p>So I think a better design might be for forks to be displayed as <code>Fork of Zulip server 6.0-dev</code> with that line being an \"About Zulip\" link instead, or something like that.</p>",
        "id": 1448140,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665524338
    },
    {
        "content": "<p>If it's an official release, \"Zulip server 6.2\" fits great.</p>",
        "id": 1448141,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665524413
    },
    {
        "content": "<p>This is a great improvement <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 1448142,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1665524708
    },
    {
        "content": "<p>Just to lay out the full set of situations we may have in that slot:</p>\n<ul>\n<li>Zulip Cloud standard [All Zulip Cloud pages just show the plan type right now; you can get the precise merge-base from \"About Zulip\"].</li>\n<li>Zulip server 5.6 [Running an official release]</li>\n<li>Zulip server 6.0-dev-1976-g4bb381fc80 [Running a version from <code>main</code>]</li>\n<li>Zulip server 6.0-dev-1994-g93730766b0 [Running a fork with 18 additional commits on top of <code>main</code>, as <a href=\"http://chat.zulip.org\">chat.zulip.org</a> is usually when we have experiments we're testing]. See the \"About Zulip\" item in the gear menu for details; there we show both the official version the server is forked off as well as the commit ID that it's actually running.</li>\n<li>Zulip server 5.6+git-4-g385a408be5 [Running a version from the <code>5.x</code> branch with 4 additional commits on top of the Zulip 5.6 official release]</li>\n<li>Zulip server 5.6+git-7-abcda409a34 [Like with forks off main, you can have a fork off 5.x / off a release, but the current gear menu prototype doesn't display that any differently from an official Git version like the <code>5.x</code> branch itself].</li>\n</ul>",
        "id": 1448147,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665525161
    },
    {
        "content": "<p>So one proposal would be for the Git versions to be, for example, \"Fork of Zulip server 6.0-dev\" or \"Zulip server 6.0-dev\" and clicking on them open the \"About Zulip\" page that has the full (uglier and longer, but precise) version strings.</p>",
        "id": 1448148,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665525328
    },
    {
        "content": "<p>That seems reasonable...</p>\n<p>What about \"Zulip server 6.0\"? Would that be a link too?</p>",
        "id": 1448149,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665525358
    },
    {
        "content": "<p>Sure, that can link to the \"About Zulip\" details too.</p>",
        "id": 1448150,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665525388
    },
    {
        "content": "<p>I think we should iterate a bit more on the abbreviated text for development versions / <code>main</code> branches. We should keep it mind that the current plan it so show this to all users, so it would be nice if it wasn't too complicated / confusing for non-technical users.</p>",
        "id": 1448152,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665525814
    },
    {
        "content": "<p>(They generally won't need to know the version number, but it's nice not to have bits of the UI that make no sense to you.)</p>",
        "id": 1448153,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665525857
    },
    {
        "content": "<p>Do we know whether a server is running their own custom version, or some version of <code>main</code>?</p>",
        "id": 1448159,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665526324
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20gear.20menu/near/1448159\">said</a>:</p>\n<blockquote>\n<p>Do we know whether a server is running their own custom version, or some version of <code>main</code>?</p>\n</blockquote>\n<p>Yes, the 2 examples above that include the word \"fork\" appears in my explanation of what it means are ones where there is at least one commit not on <code>main</code>. Note that this describes <code>chat.zulip.org</code> whenever we have at least one experiment test-deployed here.</p>",
        "id": 1448663,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665604537
    },
    {
        "content": "<p>So we could have the ones that are an official branch say something like \"Zulip server development branch\"/\"Zulip server 5.x maintenance branch\", and the ones that are a fork say something like \"Fork of Zulip server development branch\" or \"Fork of Zulip server 5.6\" as human-readable summaries.</p>",
        "id": 1448664,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665604683
    },
    {
        "content": "<p>Yeah, I don't think it's clear to a lay person what a development branch is, but there's probably no good way to make it more clear.</p>",
        "id": 1448681,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665607854
    },
    {
        "content": "<p>I don't think think we need the \"maintenance branch\" phrase in there?</p>",
        "id": 1448682,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665607900
    },
    {
        "content": "<p>So to sum up the proposed changes for self-hosted Zulip servers:</p>\n<ol>\n<li>Make the version number link to \"About Zulip\"</li>\n<li>Bump up the version number font size to 12</li>\n<li>\n<p>And then in terms of versions:</p>\n<ul>\n<li>For official releases, give the official release (Zulip Server X.Y)</li>\n<li>For forks from an official release: \"Fork of Zulip Server X.Y\"</li>\n<li>For a development branch version: \"Zulip Server development branch\"</li>\n<li>For forks from a development branch: \"Fork of Zulip Server development branch\"<br>\nAnd then any additional details will be in \"About Zulip\".</li>\n</ul>\n</li>\n</ol>",
        "id": 1448683,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665608102
    },
    {
        "content": "<p>Does that sound right? <span class=\"user-mention\" data-user-id=\"17967\">@Ganesh Pawar (ganpa3)</span> would you be up for making those changes?</p>",
        "id": 1448684,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665608146
    },
    {
        "content": "<p>Those sound good to me.</p>\n<p>A nit: I would capitalize \"Zulip Server\" in each of those, so that \"Zulip Server\" is a proper name for the thing we develop and release for the server and web app, and run in Zulip Cloud. That's what we've been doing in recent release announcements, saying e.g. \"Zulip Server 5.0\".</p>",
        "id": 1448723,
        "sender_full_name": "Greg Price",
        "timestamp": 1665610189
    },
    {
        "content": "<p>Yeah, that sounds good to me.</p>",
        "id": 1448724,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665610203
    },
    {
        "content": "<p>The logic may be a bit tricky to get right; but should be very doable. (It'll need to inspect both <code>zulip_version</code> and <code>zulip_merge_base</code> , just like the \"About Zulip\" modal does, and also do some slightly messy string parsing).</p>\n<p>What this means in practice is we should write a function that accepts those two values as parameters (and maybe also <code>corporate_enabled</code> or something) and include a set of Node tests for them.</p>",
        "id": 1448728,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665610234
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"2187\">Greg Price</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20gear.20menu/near/1448723\">said</a>:</p>\n<blockquote>\n<p>A nit: I would capitalize \"Zulip Server\" in each of those, so that \"Zulip Server\" is a proper name for the thing we develop and release for the server and web app, and run in Zulip Cloud. That's what we've been doing in recent release announcements, saying e.g. \"Zulip Server 5.0\".</p>\n</blockquote>\n<p>Sounds good, I updated the description in my message above to make it easier to see what we're implementing.</p>",
        "id": 1448737,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665610635
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20gear.20menu/near/1448684\">said</a>:</p>\n<blockquote>\n<p>Does that sound right? <span class=\"user-mention silent\" data-user-id=\"17967\">Ganesh Pawar (ganpa3)</span> would you be up for making those changes?</p>\n</blockquote>\n<p><a href=\"/user_uploads/2/5f/YO2EsYa1rnoPkLUN8l9Gu-si/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/2/1a/dNZZxPeDGatRL_yL_urhQe2t/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/2/87/JDYHp4l0VbvtzRIytjIEI8zT/image.png\">image.png</a><br>\n<a href=\"/user_uploads/2/d5/01ZugLcsbWgZAw3lfQkN1pSe/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/5f/YO2EsYa1rnoPkLUN8l9Gu-si/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/5f/YO2EsYa1rnoPkLUN8l9Gu-si/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/1a/dNZZxPeDGatRL_yL_urhQe2t/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/1a/dNZZxPeDGatRL_yL_urhQe2t/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/87/JDYHp4l0VbvtzRIytjIEI8zT/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/87/JDYHp4l0VbvtzRIytjIEI8zT/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/d5/01ZugLcsbWgZAw3lfQkN1pSe/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/d5/01ZugLcsbWgZAw3lfQkN1pSe/image.png\"></a></div><p>Updated the PR.</p>",
        "id": 1449204,
        "sender_full_name": "Ganesh Pawar (ganpa3)",
        "timestamp": 1665671739
    },
    {
        "content": "<p>Hmm, it's too bad that \"Fork of Zulip Server development branch\" doesn't fit on a line.</p>",
        "id": 1449220,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665673687
    },
    {
        "content": "<p>I wonder if we should make the font size a bit smaller just for that one.</p>",
        "id": 1449225,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665673750
    },
    {
        "content": "<p>Alya and I ended up rethinking the labels in an in-person conversation today, trying to avoid anything that feels too technical for normal end users. Here's what I currently have in the test suite with the full set of like 10 possible situations:</p>\n<div class=\"codehilite\"><pre><span></span><code>// An official release\npage_params.zulip_version = &quot;5.6&quot;;\npage_params.zulip_merge_base = &quot;5.6&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server 5.6&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n\n// An official beta\npage_params.zulip_version = &quot;6.0-beta1&quot;;\npage_params.zulip_merge_base = &quot;6.0-beta1&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server 6.0-beta1&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n\n// An official release candidate\npage_params.zulip_version = &quot;6.0-rc1&quot;;\npage_params.zulip_merge_base = &quot;6.0-rc1&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server 6.0-rc1&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n\n// The Zulip development environment\npage_params.zulip_version = &quot;6.0-dev+git&quot;;\npage_params.zulip_merge_base = &quot;6.0-dev+git&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server dev environment&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n\n// A commit on Zulip&#39;s main branch.\npage_params.zulip_version = &quot;6.0-dev-1976-g4bb381fc80&quot;;\npage_params.zulip_merge_base = &quot;6.0-dev-1976-g4bb381fc80&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server 6.0-dev&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n\n// A fork with 18 commits beyond Zulip&#39;s main branch.\npage_params.zulip_version = &quot;6.0-dev-1994-g93730766b0&quot;;\npage_params.zulip_merge_base = &quot;6.0-dev-1976-g4bb381fc80&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server 6.0-dev (modified)&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n\n// A commit from the Zulip 5.x branch\npage_params.zulip_version = &quot;5.6+git-4-g385a408be5&quot;;\npage_params.zulip_merge_base = &quot;5.6+git-4-g385a408be5&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server 5.6 (patched)&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n\n// A fork with 3 commits beyond the Zulip 5.x branch.\npage_params.zulip_version = &quot;5.6+git-4-g385a408be5&quot;;\npage_params.zulip_merge_base = &quot;5.6+git-7-abcda4235c2&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server 5.6 (modified)&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n\n// A fork of a Zulip release commit, not on 5.x branch.\npage_params.zulip_version = &quot;5.3-1-g7ed896c0db&quot;;\npage_params.zulip_merge_base = &quot;5.3&quot;;\nexpected_version_display_string = &quot;translated: Zulip Server 5.3 (modified)&quot;;\nassert.equal(gear_menu.version_display_string(), expected_version_display_string);\n</code></pre></div>",
        "id": 1449494,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665706306
    },
    {
        "content": "<p>Reasonable!</p>\n<p>What's the intended distinction between \"modified\" and \"patched\"? Those sound like synonyms to me.</p>",
        "id": 1449544,
        "sender_full_name": "Greg Price",
        "timestamp": 1665717957
    },
    {
        "content": "<p>Also I think \"Zulip Server 6.0-dev\" seems likely to be misleading. That will mean that in a few weeks -- that is, shortly after the 6.0 release -- a server running a version from <code>main</code> will show \"Zulip Server 7.0-dev\".</p>\n<p>Which sounds a lot like it should be associated with a Zulip Server 7.0, but in fact there is no Zulip Server 7.0 and won't be for some months later. I think it's probably best to avoid showing the \"-dev\" tags in this context (or basically any context where the reader isn't expected to be asking Git about the tags in our repo.)</p>",
        "id": 1449545,
        "sender_full_name": "Greg Price",
        "timestamp": 1665718444
    },
    {
        "content": "<p>Or for another angle on that: comparing \"Zulip Server development branch\" to \"Zulip Server 7.0-dev\", the \"-dev\" in the latter seems like it's saying the same thing as the \"development branch\" in the former, only in an abbreviated and more technical-looking way.</p>",
        "id": 1449546,
        "sender_full_name": "Greg Price",
        "timestamp": 1665718595
    },
    {
        "content": "<p>So \"patched\" is likely to be quite rare in practice, which is why I'm not worried about the similarity. But \"modified\" will appear for any unofficial fork, whereas \"patched\" will appear if they're running an official maintenance branch like <code>5.x</code>, which will be effectively \"5.6 plus a few patches\".</p>",
        "id": 1449547,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665720873
    },
    {
        "content": "<p>The concern with the \"Zulip Server development branch\" option is that it kinda suggests you're on a recent/current version of that branch; whereas in fact you may be running a random commit from the development branch from 4 releases ago.</p>",
        "id": 1449548,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665720942
    },
    {
        "content": "<p>If we can come up with a better way to distinguish those two situations, I'd be very happy to avoid the \"7.0-dev\" type version numbers.</p>",
        "id": 1449563,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665724857
    },
    {
        "content": "<p>Or I guess we can decide that 7.0-dev is so confusing that it's not worth it.</p>",
        "id": 1449582,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665726430
    },
    {
        "content": "<p>On a technical level, the main things we can do to distinguish the \"ancient development branch commit\" from \"current development branch commit\" clearly are (1) including a version number and (2) using the commit date for the <code>merge-base</code> commit, which we don't currently expose but could figure out a way to if we wanted to. \"Zulip development branch from Aug 2020\".</p>",
        "id": 1450146,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665789467
    },
    {
        "content": "<p>For the case of doing a version number, we have the option of replacing \"7.0-dev\" with \"6.0 + development branch\" or something; but that can itself be pretty misleading, since it then sounds like you can upgrade to 6.5 from that branch, when in fact 6.5 would upgrade to what you're running.</p>",
        "id": 1450147,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665789532
    },
    {
        "content": "<p>So I don't think the direction of showing a number that is not \"7.0-dev\" or similar (one can play with the words) is likely to be a better option.</p>",
        "id": 1450148,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665789576
    },
    {
        "content": "<p>Hm, I'm not sure how to make a date-based description fit:</p>\n<p><a href=\"/user_uploads/2/a/XjyRILUm9DbZdEgFdqhu2uKG/Screen-Shot-2022-10-14-at-4.43.19-PM.png\">Screen-Shot-2022-10-14-at-4.43.19-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/a/XjyRILUm9DbZdEgFdqhu2uKG/Screen-Shot-2022-10-14-at-4.43.19-PM.png\" title=\"Screen-Shot-2022-10-14-at-4.43.19-PM.png\"><img src=\"/user_uploads/2/a/XjyRILUm9DbZdEgFdqhu2uKG/Screen-Shot-2022-10-14-at-4.43.19-PM.png\"></a></div>",
        "id": 1450170,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665791042
    },
    {
        "content": "<p>I dunno if something like this would be appropriate?</p>\n<p><a href=\"/user_uploads/2/8a/AFB-nNXMGVBbVR9YEW3mcOwS/Screen-Shot-2022-10-14-at-4.45.13-PM.png\">Screen-Shot-2022-10-14-at-4.45.13-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/8a/AFB-nNXMGVBbVR9YEW3mcOwS/Screen-Shot-2022-10-14-at-4.45.13-PM.png\" title=\"Screen-Shot-2022-10-14-at-4.45.13-PM.png\"><img src=\"/user_uploads/2/8a/AFB-nNXMGVBbVR9YEW3mcOwS/Screen-Shot-2022-10-14-at-4.45.13-PM.png\"></a></div>",
        "id": 1450171,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665791136
    },
    {
        "content": "<p><a href=\"/user_uploads/2/db/AGeQucqwUPdhcK-xZ03cn1H9/Screen-Shot-2022-10-14-at-4.46.18-PM.png\">Screen-Shot-2022-10-14-at-4.46.18-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/db/AGeQucqwUPdhcK-xZ03cn1H9/Screen-Shot-2022-10-14-at-4.46.18-PM.png\" title=\"Screen-Shot-2022-10-14-at-4.46.18-PM.png\"><img src=\"/user_uploads/2/db/AGeQucqwUPdhcK-xZ03cn1H9/Screen-Shot-2022-10-14-at-4.46.18-PM.png\"></a></div>",
        "id": 1450172,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665791188
    },
    {
        "content": "<p>Hmm, this does not look great:</p>\n<p><a href=\"/user_uploads/2/16/pKReydkkfbZPc04_RmdhrgEz/Screen-Shot-2022-11-01-at-10.10.47-AM.png\">Screen-Shot-2022-11-01-at-10.10.47-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/16/pKReydkkfbZPc04_RmdhrgEz/Screen-Shot-2022-11-01-at-10.10.47-AM.png\" title=\"Screen-Shot-2022-11-01-at-10.10.47-AM.png\"><img src=\"/user_uploads/2/16/pKReydkkfbZPc04_RmdhrgEz/Screen-Shot-2022-11-01-at-10.10.47-AM.png\"></a></div>",
        "id": 1457940,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1667322736
    },
    {
        "content": "<p>We should figure out a way to avoid the awkward line break.</p>\n<p>I noticed that if the organization name is long, the menu is wider, and so the phrase fits. So one solution is to widen the menu.</p>",
        "id": 1457941,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1667322881
    },
    {
        "content": "<p>I also wonder if we should just shorten it though; e.g., \"(sponsored)\" seems fine.</p>",
        "id": 1457942,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1667322913
    },
    {
        "content": "<p>I had actually thought we decided not to include \"for free\" in any case when discussing the PR, though maybe I'm misremembering.</p>",
        "id": 1457944,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1667322952
    },
    {
        "content": "<p>Yeah, (sponsored) seems like a good solution.</p>",
        "id": 1457964,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1667324506
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"17967\">@Ganesh Pawar (ganpa3)</span> Would you have time this week to implement this tweak?</p>",
        "id": 1458035,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1667339759
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20gear.20menu/near/1458035\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"17967\">Ganesh Pawar (ganpa3)</span> Would you have time this week to implement this tweak?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span> <a href=\"https://github.com/zulip/zulip/pull/23415\">#23415</a></p>",
        "id": 1458261,
        "sender_full_name": "Ganesh Pawar (ganpa3)",
        "timestamp": 1667396103
    },
    {
        "content": "<p>lgtm; I'll wait to merge until <span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> has had a chance to look and think about whether we want italics or something on the text.</p>",
        "id": 1458308,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1667407664
    },
    {
        "content": "<p>Merged!</p>",
        "id": 1458347,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1667411494
    }
]