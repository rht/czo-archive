[
    {
        "content": "<p>I'd like to start a conversation about the user experience we want for <a href=\"https://github.com/zulip/zulip/pull/2517\">#2517</a> (the ability to unmute a topic in a muted stream).</p>",
        "id": 1232339,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1626395046
    },
    {
        "content": "<p>The core UI question is how to display the information.</p>\n<p>For context, we currently display muted streams in the right sidebar with both the stream name and the total number of unread messages in the stream faded, like so: <a href=\"/user_uploads/2/80/snnNg7iHhYtHAwh5d09aWBC-/image.png\">image.png</a>.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/80/snnNg7iHhYtHAwh5d09aWBC-/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/80/snnNg7iHhYtHAwh5d09aWBC-/image.png\"></a></div>",
        "id": 1232341,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1626395157
    },
    {
        "content": "<p>Here's a potential visual/UI design for what happens in the left sidebar with one of these topics:</p>\n<ul>\n<li>If there are any unmuted topics in the stream with unread messages, then we display using the normal styling the \"unmuted unreads\" count, and don't display the grand total at all.</li>\n<li>Unmuted topics within a stream are shown with priority over all muted topics, i.e. you'll see them at the top regardless of age in the default view before you click \"more topics\", even if muted topics have unreads.  This would match what happens if you have some muted topics in a stream where topics are by default \"not muted\", and thus seems like the right design.</li>\n<li>We do something to address the overkill fading of everything we have when clicked into a muted stream right now.  Presumably these unmuted topics would display with normal styling.  It's probably worth forking a thread on preparatory changes we want to make to the \"muted stream/topic\" styling after this.</li>\n</ul>\n<p>Presumably we'd also override all the special logic for muted streams for messages in such topics, both in the server and apps, but those are all invisible and probably not worth a discussion in this stream.</p>",
        "id": 1232343,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1626395617
    },
    {
        "content": "<p>I hinted at this a bit in <a class=\"stream-topic\" data-stream-id=\"3\" href=\"/#narrow/stream/3-backend/topic/MutedTopic.20table\">#backend &gt; MutedTopic table</a>, but longer term we may feel the need to let you pick one of ~4 options for how to handle a topic:</p>\n<ul>\n<li>\"topic is explicitly muted\": Treat the message as muted: Doesn't count in unread counts, etc.  Note that you can mute a topic within a muted stream, and it does something.</li>\n<li>\"topic has no special configuration\": The current behavior for a non-muted topic.</li>\n<li>\"default notifications\": Treat the topic as not muted even if the stream is muted.</li>\n<li>\"followed topic\": Trigger notifications on all new messages, aka the \"<a href=\"https://github.com/zulip/zulip/issues/12309\">Follow topic</a>\" feature.  It'd treat any message to the topic as notifiable like the \"always notify on messages in this stream\" setting, and use new notification settings for \"topics I follow\" to decide what types of notifications to send.</li>\n</ul>\n<p>The \"no special configuration\" value would likely only need to appear in the UI in weird scenarios (E.g. when you have an explicitly muted topic in a muted stream, and you want to make it just a topic in a muted stream).</p>",
        "id": 1232349,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1626396841
    },
    {
        "content": "<p>That potential visual/UI design sounds good. The one wrinkle I'd be a bit concerned about is: if you have 3000 or whatever unreads in the muted stream, it feels a little odd for <em>un</em>muting a piece of that stream to cause that information to go away.</p>\n<p>Hmm, and a variation on that: when you're caught up, and then a new message arrives in the unmuted topic, the big wide grayed-out \"3000\" will go away, replaced by a small \"1\".</p>\n<p>Then you go read that message, and the unread indicator gets bigger again: a grayed-out \"3000\".</p>",
        "id": 1235254,
        "sender_full_name": "Greg Price",
        "timestamp": 1626830369
    },
    {
        "content": "<p>Yes, but it will change from the \"unmuted style\" to the \"muted style\", so it's at least clear what happened.  I'm not sure we can really do better in a way that's visually appearing, but there is the option of showing 2 numbers.</p>",
        "id": 1236946,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1626997475
    },
    {
        "content": "<p>The design plan above sounds cool.<br>\nOne more thing, what will be ordering for streams? currently, we show muted streams at last.</p>",
        "id": 1537167,
        "sender_full_name": "Brijmohan Siyag",
        "timestamp": 1680164600
    },
    {
        "content": "<p>I don't think we should change the stream ordering.</p>",
        "id": 1537289,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1680182327
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a> is the current plan for the UI. I had totally forgotten about this thread when I was writing up the issue a year and a half later, but it seems to be in line with what was discussed.</p>",
        "id": 1537291,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1680182415
    },
    {
        "content": "<p>There are a couple of points that aren't addressed in the issue, though:</p>\n<ol>\n<li>\n<p>Unmuted topics within a stream are shown with priority over all muted topics, i.e. you'll see them at the top regardless of age in the default view before you click \"more topics\", even if muted topics have unreads. This would match what happens if you have some muted topics in a stream where topics are by default \"not muted\", and thus seems like the right design.</p>\n</li>\n<li>\n<p>We do something to address the overkill fading of everything we have when clicked into a muted stream right now. Presumably these unmuted topics would display with normal styling. It's probably worth forking a thread on preparatory changes we want to make to the \"muted stream/topic\" styling after this.</p>\n</li>\n</ol>\n<p>Should we add these to the issue? (2) definitely seems right -- do we need to do work to make that happen?</p>",
        "id": 1537293,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1680182659
    },
    {
        "content": "<p>Sounds like a great plan, and maybe it should be included in the issue description. Since these two points are not too different from the issue, and they are easy to implement while implementing the UI for unmuted topics.</p>",
        "id": 1537317,
        "sender_full_name": "Palash Baderia",
        "timestamp": 1680185138
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1537293\">said</a>:</p>\n<blockquote>\n<p>Should we add these to the issue?</p>\n</blockquote>\n<p>It would be helpful to list down tasks at one place.</p>",
        "id": 1537971,
        "sender_full_name": "Brijmohan Siyag",
        "timestamp": 1680219038
    },
    {
        "content": "<p>Yes, of course, in terms of the logistics, we'll keep track of everything in that issue. My questions here are:</p>\n<ul>\n<li>Do we still like the idea of implementing (1)?</li>\n<li>Is work required to make (2) happen, or have there, e.g., been changes in the code since the prior discussion that would make it happen without us doing anything?</li>\n</ul>",
        "id": 1538009,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1680224776
    },
    {
        "content": "<p>This reasoning for (1) seems compelling to me:</p>\n<blockquote>\n<p>This would match what happens if you have some muted topics in a stream where topics are by default \"not muted\", and thus seems like the right design.</p>\n</blockquote>",
        "id": 1538011,
        "sender_full_name": "Greg Price",
        "timestamp": 1680224931
    },
    {
        "content": "<p>I would like to append another discussion point to the above list by Prakhar:</p>\n<ol start=\"7\">\n<li>for the New topic sidebar action sheet should we add a new SVG icon for unmute topics something similar to <a href=\"https://commons.wikimedia.org/wiki/File:Speaker_Icon.svg\">this SVG</a>?</li>\n</ol>\n<p><a href=\"/user_uploads/2/15/MAxELBOhoaPj0VMjQo1ox0Nk/image.png\">New topic sidebar action sheet</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/15/MAxELBOhoaPj0VMjQo1ox0Nk/image.png\" title=\"New topic sidebar action sheet\"><img src=\"/user_uploads/2/15/MAxELBOhoaPj0VMjQo1ox0Nk/image.png\"></a></div>",
        "id": 1542061,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1680724819
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"26051\">@Hardik Dharmani</span> for that last point, I think the intent would be that we only ever display one of those two items directly in the popover, depending on whether the topic is currently in a muted stream (or itself muted) or not.</p>",
        "id": 1543230,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1680890970
    },
    {
        "content": "<p>For the settings panels, I'm not really sure what the best plan is; <span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> gets back from her trip Monday, so maybe it's best to wait for her input.</p>",
        "id": 1543231,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1680891069
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1543230\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"26051\">Hardik Dharmani</span> for that last point, I think the intent would be that we only ever display one of those two items directly in the popover, depending on whether the topic is currently in a muted stream (or itself muted) or not.</p>\n</blockquote>\n<p>is this the expected behavior:<br>\ninherit topic in unmuted stream -&gt; show mute topic option.<br>\nmuted topic in unmuted stream -&gt; show inherit(remove mute) topic option.<br>\ninherit topic in muted stream -&gt; show unmute topic option.<br>\nunmuted topic in muted stream -&gt; show inherit(remove unmute) topic option.</p>\n<p>Then what if for an inherited topic in a muted stream, the user wants to explicitly mute the topic within the stream?</p>",
        "id": 1543336,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1680900017
    },
    {
        "content": "<p>I think the possible solution is what's implemented in <a href=\"https://github.com/zulip/zulip/pull/24989\">#24989</a>, which shows only one option in an unmuted stream. However, for a muted stream, both the \"Unmute Topic\" option and the \"Mute Topic\" option should be shown for an topic in a muted stream.</p>",
        "id": 1543337,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1680900136
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"26051\">Hardik Dharmani</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1543337\">said</a>:</p>\n<blockquote>\n<p>I think the possible solution is what's implemented in <a href=\"https://github.com/zulip/zulip/pull/24989\">#24989</a>, which shows only one option in an unmuted stream. However, for a muted stream, both the \"Unmute Topic\" option and the \"Mute Topic\" option should be shown for an topic in a muted stream.</p>\n</blockquote>\n<p>There's already an answer to this question in the spec in <a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a>:</p>\n<blockquote>\n<p>For topics in muted streams, replace the \"Mute topic\" option in the three-dot topic menu with an \"Unmute topic\" option, which should make the topic unmuted. For <strong>unmuted</strong> topics in muted streams, show the regular \"Mute topic\" option, which should specifically mark the topic as muted, as usual.</p>\n</blockquote>",
        "id": 1543359,
        "sender_full_name": "Greg Price",
        "timestamp": 1680903133
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"26051\">Hardik Dharmani</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1543336\">said</a>:</p>\n<blockquote>\n<p>Then what if for an inherited topic in a muted stream, the user wants to explicitly mute the topic within the stream?</p>\n</blockquote>\n<p>I think this is likely to be an uncommon desire. The only effect of that muting would be on what happens when you're reading specifically through the stream.</p>",
        "id": 1543360,
        "sender_full_name": "Greg Price",
        "timestamp": 1680903168
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"2187\">Greg Price</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1543359\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"26051\">Hardik Dharmani</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1543337\">said</a>:<br>\nThere's already an answer to this question in the spec in <a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a>:</p>\n</blockquote>\n<p>In general, it's very helpful if folks take the time to carefully read the spec before asking questions like this -- it's pretty distracting to reopen a discussion that was already had.</p>",
        "id": 1543443,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1680910798
    },
    {
        "content": "<p>I was clear about the spec in <a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a> and have gone through the previous discussions on this topic. However, I was uncertain about the case of muting a topic in a stream that is already muted and wanted to clarify it before proceeding. I apologize for reopening this discussion if this case was already addressed and I missed it. <br>\nIn the future, I will take greater care to ensure that I have thoroughly reviewed all relevant information before initiating a new discussion. :)</p>",
        "id": 1543529,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1680929271
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"2187\">Greg Price</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1543359\">said</a>:</p>\n<blockquote>\n<p>For topics in muted streams, replace the \"Mute topic\" option in the three-dot topic menu with an \"Unmute topic\" option, which should make the topic unmuted. For <strong>unmuted</strong> topics in muted streams, show the regular \"Mute topic\" option, which should specifically mark the topic as muted, as usual.</p>\n</blockquote>\n<p>I will implement this as the first PR for <a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a> once <a href=\"https://github.com/zulip/zulip/pull/24989\">#24989</a> gets merged.</p>",
        "id": 1543530,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1680929409
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/pull/24989\">#24989</a> got merged <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> Here is the First PR for <a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a>: <a href=\"https://github.com/zulip/zulip/pull/25082\">#25082</a>.<br>\nNeed feedback on the naming of new options:</p>\n<ul>\n<li>Option 1:<code>Mute topic&lt;-&gt;Remove mute</code> for topics in <code>Unmuted stream</code> and <code>Unmute Topic&lt;-&gt;Remove Unmute</code> for topics in the <code>Muted stream</code>.</li>\n<li>Option 2: Use the same option <code>Mute topic&lt;-&gt;Unmute topic</code> for all topics irrespective of the stream and explain the behavior in Unmuted and Muted streams respectively in some way(Maybe in the documentation).</li>\n</ul>\n<p>Any other feedback or suggestions are much appreciated.</p>",
        "id": 1545512,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1681239750
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"26051\">Hardik Dharmani</span> Unless there is specific cause for concern, you should just follow the issue description,  which answers this question.</p>",
        "id": 1545547,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681241717
    },
    {
        "content": "<p>I apologize for the confusion on my side<span aria-label=\"pensive\" class=\"emoji emoji-1f614\" role=\"img\" title=\"pensive\">:pensive:</span> . Here is the updated PR: <a href=\"https://github.com/zulip/zulip/pull/25082\">#25082</a>.</p>",
        "id": 1545584,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1681243193
    },
    {
        "content": "<p>While working on <a href=\"https://github.com/zulip/zulip/pull/24246\">#24246</a>, I noticed that the <code>mute_or_unmute_topic</code> altered in PR <a href=\"https://github.com/zulip/zulip/pull/24989\">#24989</a>, does not unmute a topic in a muted stream, it only works for specifically muted topics in unmuted streams. I haven't been keeping up with the conversation in this thread but I think this is a bug?</p>",
        "id": 1546911,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1681404471
    },
    {
        "content": "<p>Currently, it is only for muting or inheriting a topic. But, As commented <a href=\"https://github.com/zulip/zulip/pull/24989/files#r1158536846\">here</a>. It should be generalized in a follow-up PR. I will create a follow-up PR for this soon.</p>",
        "id": 1546932,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1681405435
    },
    {
        "content": "<p>Currently, <code>the mute_or_unmute_topic</code> function is used to mute/inherit a topic by clicking on the mute icon in <br>\n<a href=\"/user_uploads/2/e/qgsCwQZqFgi4RWT6o7nKaOfS/image.png\"> recent conversations</a> and <a href=\"/user_uploads/2/2d/W0Ct4t8S6APIm53zA6i8r6lK/image.png\">recipient rows</a>. <br>\nWhat should we do with this icon once <a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a> is resolved, as we won't have an option to mute a topic in a muted stream, but this icon will still be visible for a topic in a muted stream?</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/e/qgsCwQZqFgi4RWT6o7nKaOfS/image.png\" title=\" recent conversations\"><img src=\"/user_uploads/2/e/qgsCwQZqFgi4RWT6o7nKaOfS/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/2d/W0Ct4t8S6APIm53zA6i8r6lK/image.png\" title=\"recipient rows\"><img src=\"/user_uploads/2/2d/W0Ct4t8S6APIm53zA6i8r6lK/image.png\"></a></div>",
        "id": 1547037,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1681408576
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"26051\">Hardik Dharmani</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1547037\">said</a>:</p>\n<blockquote>\n<p>Currently, <code>the mute_or_unmute_topic</code> function is used to mute/inherit a topic by clicking on the mute icon in <br>\n<a href=\"/user_uploads/2/e/qgsCwQZqFgi4RWT6o7nKaOfS/image.png\"> recent conversations</a> and <a href=\"/user_uploads/2/2d/W0Ct4t8S6APIm53zA6i8r6lK/image.png\">recipient rows</a>. <br>\nWhat should we do with this icon once <a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a> is resolved, as we won't have an option to mute a topic in a muted stream, but this icon will still be visible for a topic in a muted stream?</p>\n</blockquote>\n<p>We should probably show an \"unmute\" icon instead of a \"mute\" icon on topics in muted streams, and have clicking on it unmute the topic. <span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span> would you be up for providing one?</p>",
        "id": 1547553,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681427200
    },
    {
        "content": "<p><a href=\"/user_uploads/2/22/nqTfxhCCQBfURpWmpy6VO5p7/unmute.svg\">unmute.svg</a><br>\nhere you go</p>",
        "id": 1547615,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1681429459
    },
    {
        "content": "<p>Filed release goal issue: <strong>Unmute topic from Recent conversations</strong> <a href=\"https://github.com/zulip/zulip/pull/25124\">#25124</a>.</p>",
        "id": 1548003,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681488262
    },
    {
        "content": "<p>Updated the issue to cover the topic header bar as well, which requires the same changes.</p>",
        "id": 1548010,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681490239
    },
    {
        "content": "<p>Here is the PR for <a href=\"https://github.com/zulip/zulip/pull/25124\">#25124</a>: <a href=\"https://github.com/zulip/zulip/pull/25140\">#25140</a>. I have seen that for SVGs used in Zulip, we mention the copyright and source of the icon. where can I find these for unmute.svg?</p>",
        "id": 1549451,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1681763127
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"26051\">Hardik Dharmani</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1549451\">said</a>:</p>\n<blockquote>\n<p>Here is the PR for <a href=\"https://github.com/zulip/zulip/pull/25124\">#25124</a>: <a href=\"https://github.com/zulip/zulip/pull/25140\">#25140</a>. I have seen that for SVGs used in Zulip, we mention the copyright and source of the icon. where can I find these for unmute.svg?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span></p>",
        "id": 1549490,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681765007
    },
    {
        "content": "<p>unmute/mute is a Google Icons icon</p>",
        "id": 1550122,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1681830261
    },
    {
        "content": "<p>I've been working through integrating all the changes in <a href=\"https://github.com/zulip/zulip/pull/24243\">#24243</a>; all of the individual changes have proven more subtle/complicated than one might hope, but once we've gotten more of the parts integrated, we'll be able to test-deploy the full feature here.</p>",
        "id": 1553046,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682109062
    },
    {
        "content": "<p>So I think here's the status of this project:</p>\n<ul>\n<li>Display logic for showing unmuted topics when not including muted stuff in Recent Conversations, with live update, is merging shortly. (<a href=\"https://github.com/zulip/zulip/pull/25151\">#25151</a>)</li>\n<li>Display logic for including unmuted topics in \"All messages\", with live update, is merged. (<a href=\"https://github.com/zulip/zulip/pull/25120\">#25120</a>)</li>\n<li>Display logic for whether to include unmuted topics in the left sidebar is merged. (<a href=\"https://github.com/zulip/zulip/pull/25105\">#25105</a>)</li>\n</ul>\n<p>Changes to have Unmuted topics work as expected:</p>\n<ul>\n<li><a href=\"https://github.com/zulip/zulip/pull/25103\">#25103</a> is display logic for the fading in the left sidebar, awaiting an update from <span class=\"user-mention\" data-user-id=\"26051\">@Hardik Dharmani</span>, but I think I've given it a direction that should make it fairly readable and not too messy to merge once he does that.</li>\n</ul>\n<p>Once the above , I think that will complete support for unmuted topics actually working, and can start merging the pieces that let you make them:</p>\n<ul>\n<li><a href=\"https://github.com/zulip/zulip/pull/25082\">#25082</a> (final left sidebar menu labels).</li>\n<li><a href=\"https://github.com/zulip/zulip/pull/25140\">#25140</a> adds UI in recipient bars and message feed recipient bars for being able to control this state. It has a lot of code bugs I just commented on but probably mostly works.</li>\n<li><a href=\"https://github.com/zulip/zulip/pull/25127\">#25127</a> updates the \"Muted topics\" settings UI to support unmuted topics.</li>\n</ul>\n<p>And then we can integrate the follow-up PRs:</p>\n<ul>\n<li><a href=\"https://github.com/zulip/zulip/pull/24246\">#24246</a> (compose banners advertising unmute topic)</li>\n<li><a href=\"https://github.com/zulip/zulip/pull/25216\">#25216</a> (documentation)</li>\n</ul>\n<p>I think that's everything?</p>",
        "id": 1553245,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682122136
    },
    {
        "content": "<p>I updated my main with upstream today, and now the function <code>is_topic_unmuted</code> returns true for a (default) topic inside a muted stream. 95 commits back, it returned false in this case... Is this a regression or intentional?</p>",
        "id": 1554415,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682369971
    },
    {
        "content": "<p>Also, I no longer get the option to unmute a topic in a muted stream in the left sidebar UI. Here's how the menu looks instead:<br>\n<a href=\"/user_uploads/2/4/TwjyDYtobjY4nA17GwVWTgQ0/image.png\">default topic in muted stream</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/4/TwjyDYtobjY4nA17GwVWTgQ0/image.png\" title=\"default topic in muted stream\"><img src=\"/user_uploads/2/4/TwjyDYtobjY4nA17GwVWTgQ0/image.png\"></a></div>",
        "id": 1554418,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682370071
    },
    {
        "content": "<blockquote>\n<p>Also, I no longer get the option to unmute a topic in a muted stream in the left sidebar UI. Here's how the menu looks instead:</p>\n</blockquote>\n<p>For this part, note that this is just the dev environment UI, not something end users will see.</p>",
        "id": 1554434,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682370557
    },
    {
        "content": "<p>Gotcha. But that makes me wonder how exactly a user will unmute a topic within a muted stream? And for now, (if and) how can I take this action?</p>\n<p>Also I dug around the codebase and realise that the change in how topic visibility policy works (and hence in the function mentioned) is intentional(?) and was made in this PR: <a href=\"https://github.com/zulip/zulip/pull/25128\">#25128</a></p>",
        "id": 1554436,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682370721
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"26051\">@Hardik Dharmani</span> FYI (bringing to your notice that <code>is_topic_unmuted</code> works differently now)</p>",
        "id": 1554437,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682370816
    },
    {
        "content": "<blockquote>\n<p>Gotcha. But that makes me wonder how exactly a user will unmute a topic within a muted stream? And for now, (if and) how can I take this action?</p>\n</blockquote>\n<p>Your screenshot looks like the topic is already unmuted.</p>",
        "id": 1554440,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682370934
    },
    {
        "content": "<p>Yeah, that's what looks wrong to me. I get this UI on only muting the stream and not fiddling with it's topics at all</p>",
        "id": 1554442,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682371057
    },
    {
        "content": "<p>For what we'll have in production:</p>\n<blockquote>\n<p>For topics in muted streams, replace the \"Mute topic\" option in the three-dot topic menu with an \"Unmute topic\" option, which should make the topic unmuted. For unmuted topics in muted streams, show the regular \"Mute topic\" option, which should specifically mark the topic as muted, as usual.</p>\n</blockquote>\n<p><a href=\"https://github.com/zulip/zulip/pull/25082\">#25082</a></p>",
        "id": 1554444,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682371069
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"18948\">Nehal Sharma</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1554442\">said</a>:</p>\n<blockquote>\n<p>Yeah, that's what looks wrong to me. I get this UI on only muting the stream and not fiddling with it's topics at all</p>\n</blockquote>\n<p>I am fairly confident this is an unintended side effect (bug) from <a href=\"https://github.com/zulip/zulip/pull/25083\">#25083</a></p>",
        "id": 1554447,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682371169
    },
    {
        "content": "<p>I'm speculating, but the issue might be that we are not clear on the semantics of <code>is_topic_muted</code> and <code>is_topic_unmuted</code>. Do they tell the overall state of a topic (bconsidering it's stream state as well), or do they tell if a topic individually has been explicitly muted / unmuted?</p>\n<p>Before <a href=\"https://github.com/zulip/zulip/pull/25083\">#25083</a>, it was the latter, but now it seems to be the former <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 1554452,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682371601
    },
    {
        "content": "<p><code>is_topic_muted</code> and <code>is_topic_unmuted</code> function only check topic's visibility_policy and do not consider its stream. so it's the latter case.</p>\n<blockquote>\n<p>Before <a href=\"https://github.com/zulip/zulip/pull/25083\">#25083</a>, it was the latter, but now it seems to be the former</p>\n</blockquote>\n<p><a href=\"https://github.com/zulip/zulip/pull/25082\">#25082</a> is not merged yet, and it is the latter case since the \"Unmute\" option was introduced in the development environment in <a href=\"https://github.com/zulip/zulip/pull/24989\">#24989</a>.</p>",
        "id": 1554458,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1682372741
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"18948\">Nehal Sharma</span> <a href=\"#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams/near/1554447\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>Yeah, that's what looks wrong to me. I get this UI on only muting the stream and not fiddling with it's topics at all</p>\n</blockquote>\n<p>I am fairly confident this is an unintended side effect (bug) from <a href=\"https://github.com/zulip/zulip/pull/25083\">#25083</a></p>\n</blockquote>\n<p>It is possible to get this UI (i.e., the topic being unmuted when only muting the stream and not fiddling with it's topics at all). In your case, this might have happened because the topic was unmuted before muting the stream.</p>\n<p>After <a href=\"https://github.com/zulip/zulip/pull/25082\">#25082</a>, A muted stream can have muted topic or an unmuted stream can have unmuted topic although we don't have the option to do so. Steps to reproduce this behavior: mute a topic in unmuted stream -&gt; mute the stream, and the topic will stay muted in a muted stream.</p>\n<p>And this behavior is intended and is kept as is after discussing with <span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span> .</p>",
        "id": 1554459,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1682372794
    },
    {
        "content": "<p>That UI was for topics that hadn't been muted prior to muting the stream though <span aria-label=\"confused\" class=\"emoji emoji-1f615\" role=\"img\" title=\"confused\">:confused:</span></p>",
        "id": 1554471,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682373572
    },
    {
        "content": "<p>huh, now when I tried to replicate this with another stream, it works as expected</p>",
        "id": 1554493,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682373654
    },
    {
        "content": "<p>Okay, so I tried with multiple streams, and the bug only seems to be occuring with #core team</p>",
        "id": 1554496,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682373826
    },
    {
        "content": "<p>The only thing that jumps out at me, differentiating it from the other streams, is that it is a private stream</p>",
        "id": 1554498,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682373923
    },
    {
        "content": "<p>I tried creating new public and private streams, but both their behavior is fine, it is only #core team that has this bug</p>",
        "id": 1554504,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682374342
    },
    {
        "content": "<p>And so sorry, all along I've been meaning PR <a href=\"https://github.com/zulip/zulip/pull/25128\">#25128</a> not <a href=\"https://github.com/zulip/zulip/pull/25083\">#25083</a> <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 1554505,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682374442
    },
    {
        "content": "<p>Oh I think I know what happened here, I had unmuted all the topics in core team last week, and that state persisted till now through all the updates and provisioning... Sorry for the false alarm!</p>",
        "id": 1554512,
        "sender_full_name": "Nehal Sharma",
        "timestamp": 1682374821
    },
    {
        "content": "<p>No problem. Even I got confused when I started working on the unmute topic feature and initiated two bad discussions. That reminds me, <span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span> , there are only three PRs left to be merged in the unmute topic project, which should be done soon. should we start working on the documentation of this new feature to prevent confusion to users.</p>",
        "id": 1554528,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1682375744
    },
    {
        "content": "<p>We have -- that's <a href=\"https://github.com/zulip/zulip/pull/25242\">#25242</a>.</p>",
        "id": 1554529,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682375817
    },
    {
        "content": "<p>OK, the full unmute topic feature for the web app at least is now merged; I expect it to be available here later today when I next do a <a href=\"http://chat.zulip.org\">chat.zulip.org</a> deployment.</p>",
        "id": 1555713,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682460987
    },
    {
        "content": "<p>There's some details that will probably need feedback or adjustment, but it should work as advertised, live-update properly, etc.</p>",
        "id": 1555715,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682461046
    },
    {
        "content": "<p>This is now deployed here for folks to test.</p>\n<p>I added <a href=\"https://github.com/zulip/zulip/commit/5c528f164c364369943fa1f929dba2a5a429e42b\">5c528f164c364369943fa1f929dba2a5a429e42b</a> and <a href=\"https://github.com/zulip/zulip/commit/9886cd1488c0476f04c4b01573afa8409fd771a5\">9886cd1488c0476f04c4b01573afa8409fd771a5</a> just now, but those tweaks were not included in this deployment.</p>",
        "id": 1555830,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682470928
    },
    {
        "content": "<p>UNMUTED topics in muted streams obey stream-specific notification settings and global notification settings<br>\nas fallback.</p>\n<p>A user receives or not receives, email or push notifications for messages in UNMUTED topics if the muted stream has email or push stream-specific settings configured or global notification settings configured as a fallback.</p>\n<p>But we don't receive desktop notifications (visual/audible) on a similar basis. -- This is a bug, right?</p>",
        "id": 1556846,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1682592970
    },
    {
        "content": "<p>Working on it!</p>",
        "id": 1556847,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1682593713
    },
    {
        "content": "<p>Mute and unmute topic tooltip should be corrected <br>\n<a href=\"/user_uploads/2/94/xjVk2D8n1mlApa4oVKBXRmUd/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/94/xjVk2D8n1mlApa4oVKBXRmUd/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/94/xjVk2D8n1mlApa4oVKBXRmUd/image.png\"></a></div>",
        "id": 1556848,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1682593723
    },
    {
        "content": "<p>Here's PR <a href=\"https://github.com/zulip/zulip/pull/25308\">#25308</a> to fix the desktop notifications bug.</p>",
        "id": 1556873,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1682603892
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span> It looks to me like that's an unmuted topic in a muted stream, so clicking that button will mute it again.</p>",
        "id": 1556922,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682610716
    },
    {
        "content": "<p>But in another icon the tooltip is the same</p>",
        "id": 1557104,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1682619192
    },
    {
        "content": "<p>Yes, the current logic for those icons is:</p>\n<ul>\n<li>The icon represents the non-default configuration for the stream, so \"mute\" icon in unmuted streams, and \"unmute\" icon in muted streams.</li>\n<li>If a topic is configured to be in the non-default state, the icon is highlighted.</li>\n</ul>\n<p>The tooltip just tells you what clicking the button will actually do given the current stream &amp; topic configuration.</p>",
        "id": 1557114,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682619317
    },
    {
        "content": "<p>Should we show the icons as per their actions? (i.e. for normal topics in unmuted streams show a mute icon that has a tooltip that reads \" Mute topic\"(same behavior as before) but for a muted topic in an unmuted stream we show unmute icon(different behavior)) and do the same for a muted stream? </p>\n<p>This is already done for the 3-dot topic sidebar menu by <span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span>  in <a href=\"https://github.com/zulip/zulip/commit/9886cd1488c0476f04c4b01573afa8409fd771a5\">9886cd1488c0476f04c4b01573afa8409fd771a5</a></p>",
        "id": 1557159,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1682621479
    },
    {
        "content": "<p>The 3-dot menu context is a bit different, because it doesn't attempt to display the current state of the topic -- it just shows an icon for what you can change it to.</p>",
        "id": 1557163,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682621602
    },
    {
        "content": "<p>The recipient bars and recent topic rows have the extra design challenge that they want to kinda both indicate the current state and offer a way to change it.</p>",
        "id": 1557164,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682621628
    },
    {
        "content": "<p>I think in practice this will be a temporary state; when we add follow topic, I think both the recipient bar and recent topics locations will move to just having an icon showing the current state, and clicking it will give you a little menu to pick one of the 3-4 available options. </p>\n<p>But right now I don't think it'd feel nice to move to such a UI, since there are only 3 options but usually only 2 that are of any interest to the user, and so a toggle feels much more natural.</p>",
        "id": 1557166,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682621697
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"22341\">Prakhar Pratyush</span> mentioned this topic in <strong><a href=\"#narrow/stream/101-design/topic/Follow.20Topics.20UI/near/1614769\">#design &gt; Follow Topics UI</a></strong>.</p>",
        "id": 1614770,
        "sender_full_name": "Topic Bridge Bot",
        "timestamp": 1690215591
    }
]