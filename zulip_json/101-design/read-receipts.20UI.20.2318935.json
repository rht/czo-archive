[
    {
        "content": "<p>I had a discussion with <span class=\"user-mention\" data-user-id=\"5593\">@Vaibhav Rabber</span> about the read receipts UI. I was trying to do a scrollable tooltip but he suggested that it'd be nice to have a modal.  It would look something like how facebook shows reactions data i.e show user names list on hover and show a modal on click that you can interact with. (As a first version, I think we could just do the hover model)<br>\nHere are some screenshots I got from Vaibhav:<br>\n<a href=\"/user_uploads/2/65/agc68NrLMY9TUYK27RJl3tSB/Screenshot-2021-06-30-at-11.25.40-PM.png\">hover</a> <a href=\"/user_uploads/2/97/wjUF-S_CUPb5eQSb7E6ywYh8/Screenshot-2021-06-30-at-11.25.47-PM.png\">click</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/65/agc68NrLMY9TUYK27RJl3tSB/Screenshot-2021-06-30-at-11.25.40-PM.png\" title=\"hover\"><img src=\"/user_uploads/2/65/agc68NrLMY9TUYK27RJl3tSB/Screenshot-2021-06-30-at-11.25.40-PM.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/97/wjUF-S_CUPb5eQSb7E6ywYh8/Screenshot-2021-06-30-at-11.25.47-PM.png\" title=\"click\"><img src=\"/user_uploads/2/97/wjUF-S_CUPb5eQSb7E6ywYh8/Screenshot-2021-06-30-at-11.25.47-PM.png\"></a></div><p>Can we do something like that with a button to show the user profile or start PM or anything that would be helpful there?</p>\n<p>(<span class=\"user-mention\" data-user-id=\"5593\">@Vaibhav Rabber</span> , you might want to add something here :)</p>",
        "id": 1223643,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1625157195
    },
    {
        "content": "<p>That combination of tooltip plus modal sounds useful to me.</p>",
        "id": 1223900,
        "sender_full_name": "Greg Price",
        "timestamp": 1625182787
    },
    {
        "content": "<p>I think that's a reasonable plan, yeah.</p>",
        "id": 1224216,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1625258674
    },
    {
        "content": "<p>I've started working on this again. As an initial draft, this is how the modal looks: <a href=\"/user_uploads/2/b3/E9GjqfIvpq6-M42iHnIEG559/image.png\">image.png</a> and when no one has read any messages it shows: <a href=\"/user_uploads/2/96/rKLBRZv3g5T8D31gHyxks10_/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/b3/E9GjqfIvpq6-M42iHnIEG559/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/b3/E9GjqfIvpq6-M42iHnIEG559/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/96/rKLBRZv3g5T8D31gHyxks10_/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/96/rKLBRZv3g5T8D31gHyxks10_/image.png\"></a></div><p>Any thoughts on how we want this to be styled and what else needs to be added?</p>",
        "id": 1338960,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646396919
    },
    {
        "content": "<p>(There's also some discussion and feedback about this feature at <a class=\"stream-topic\" data-stream-id=\"101\" href=\"/#narrow/stream/101-design/topic/typing.20indicators.20and.20read.20receipts\">#design &gt; typing indicators and read receipts</a> )</p>",
        "id": 1338961,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646397048
    },
    {
        "content": "<p>Nice! A few thoughts:</p>\n<ol>\n<li>I wonder if we should just use regular font for the first line. I definitely think that would look better in the \"No one..\" case.</li>\n<li>I would add <code>:</code> to the first line in the left screenshot, and a <code>.</code> in the second. Also, I think we should change \"was read by\" -&gt; \"has been read by\".</li>\n<li>Can we try left-aligning the list of names with the heading?</li>\n<li>I think the names should be ordered alphabetically. Otherwise, it's hard to check whether a particular person you care about had read your message.</li>\n</ol>",
        "id": 1339108,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646420464
    },
    {
        "content": "<p>I agree with all those feedback notes.</p>",
        "id": 1339418,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1646436022
    },
    {
        "content": "<p>How are these? <a href=\"/user_uploads/2/5e/t_6MWmHuajLnmxlWPF7wUP0X/image.png\">image.png</a> ; <a href=\"/user_uploads/2/5/vYGpr7D9MvvH67jqOygDRhDM/image.png\">max-height with scroll bar</a> ; <a href=\"/user_uploads/2/9/R764Lro3LSuvLJp3GswyZkRa/image.png\">min-height only one reader</a>; <a href=\"/user_uploads/2/9f/qERZdJalZiO4vRiAD4f251OJ/image.png\">no reader</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/5e/t_6MWmHuajLnmxlWPF7wUP0X/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/5e/t_6MWmHuajLnmxlWPF7wUP0X/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/5/vYGpr7D9MvvH67jqOygDRhDM/image.png\" title=\"max-height with scroll bar\"><img src=\"/user_uploads/2/5/vYGpr7D9MvvH67jqOygDRhDM/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/9/R764Lro3LSuvLJp3GswyZkRa/image.png\" title=\"min-height only one reader\"><img src=\"/user_uploads/2/9/R764Lro3LSuvLJp3GswyZkRa/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/9f/qERZdJalZiO4vRiAD4f251OJ/image.png\" title=\"no reader\"><img src=\"/user_uploads/2/9f/qERZdJalZiO4vRiAD4f251OJ/image.png\"></a></div>",
        "id": 1339720,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646547595
    },
    {
        "content": "<p>The scroll bar looks odd. Trying to figure out how to get the fancy ones in the users list, and streams list...</p>",
        "id": 1339721,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646547713
    },
    {
        "content": "<p>I've pushed these changes to PR <a href=\"https://github.com/zulip/zulip/pull/18935\">#18935</a> if <span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> or anyone wants to try. It isn't ready for a code review yet but will fix it once we're happy with UI.</p>\n<p>(Also, just fixed the list to filter out bot users)</p>",
        "id": 1339725,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646548916
    },
    {
        "content": "<p>Cool, thanks! I took a quick look at the PR.</p>\n<p>I think we should change the headings to be the same size &amp; font as the names.</p>",
        "id": 1340180,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646690850
    },
    {
        "content": "<p>For the scroll bar, yeah, we should definitely change it to a simplebar.</p>",
        "id": 1340182,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646690897
    },
    {
        "content": "<p>I also noticed that the position of the <code>x</code> looks off, especially if the heading goes to two lines:</p>\n<p><a href=\"/user_uploads/2/f8/merKiyboP26BkL6I5-7hBfhL/Screen-Shot-2022-03-07-at-2.09.09-PM.png\">Screen-Shot-2022-03-07-at-2.09.09-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/f8/merKiyboP26BkL6I5-7hBfhL/Screen-Shot-2022-03-07-at-2.09.09-PM.png\" title=\"Screen-Shot-2022-03-07-at-2.09.09-PM.png\"><img src=\"/user_uploads/2/f8/merKiyboP26BkL6I5-7hBfhL/Screen-Shot-2022-03-07-at-2.09.09-PM.png\"></a></div>",
        "id": 1340183,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646690993
    },
    {
        "content": "<p>I have some recollection of a long discussion about how to make this feature discoverable (so that people aren't surprised about the information they are sharing with others), but in any case having 4 icons in the upper message area feels like too much to me:</p>\n<p><a href=\"/user_uploads/2/51/GbwO6fAd5sYORXSUMEKjvAeb/Screen-Shot-2022-03-07-at-2.11.42-PM.png\">Screen-Shot-2022-03-07-at-2.11.42-PM.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/51/GbwO6fAd5sYORXSUMEKjvAeb/Screen-Shot-2022-03-07-at-2.11.42-PM.png\" title=\"Screen-Shot-2022-03-07-at-2.11.42-PM.png\"><img src=\"/user_uploads/2/51/GbwO6fAd5sYORXSUMEKjvAeb/Screen-Shot-2022-03-07-at-2.11.42-PM.png\"></a></div><p>Unless we think that viewing read receipts is more commonly useful than the other actions we show (which seems unlikely?), we probably need to put it inside the three-dot message menu, or else find another way to display it.</p>",
        "id": 1340185,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646691315
    },
    {
        "content": "<p>With font size changed to match the names list, they look like <a href=\"/user_uploads/2/82/g74CM-FnTZNPF_iAsX2uWrX6/image.png\">image.png</a> <a href=\"/user_uploads/2/be/6gsdx7olrWzA9l0eee8J52NN/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/82/g74CM-FnTZNPF_iAsX2uWrX6/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/82/g74CM-FnTZNPF_iAsX2uWrX6/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/be/6gsdx7olrWzA9l0eee8J52NN/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/be/6gsdx7olrWzA9l0eee8J52NN/image.png\"></a></div>",
        "id": 1340478,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646717855
    },
    {
        "content": "<p>Fixed the position of icon with <code>align-items: start</code> for <code>.modal__header</code>: <a href=\"/user_uploads/2/af/LqW6Wscnkfbtnso7WM1CnKUk/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/af/LqW6Wscnkfbtnso7WM1CnKUk/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/af/LqW6Wscnkfbtnso7WM1CnKUk/image.png\"></a></div><p>Should we make this change for all modals? Doing that may make the <code>x</code> look slightly top aligned wrt the heading text. As an example see: <a href=\"/user_uploads/2/ab/o7j0K-QebyeGzPqOSPD2xZf0/image.png\">actual</a>; <a href=\"/user_uploads/2/40/RaChAhATH6EhDkWUQBWIpGfO/image.png\">changed</a>. We might also have to consider that most other modals have shorter heading.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/ab/o7j0K-QebyeGzPqOSPD2xZf0/image.png\" title=\"actual\"><img src=\"/user_uploads/2/ab/o7j0K-QebyeGzPqOSPD2xZf0/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/40/RaChAhATH6EhDkWUQBWIpGfO/image.png\" title=\"changed\"><img src=\"/user_uploads/2/40/RaChAhATH6EhDkWUQBWIpGfO/image.png\"></a></div>",
        "id": 1340479,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646718118
    },
    {
        "content": "<p>I agree that 4 icons seem like too many. Also, just noticed that it overlaps with message content when a long second message is sent by the same user(can try fixing it).</p>\n<p>But we were really concerned about its discoverability and ended up deciding (<a href=\"#narrow/stream/101-design/topic/typing.20indicators.20and.20read.20receipts/near/1207523\">around here</a>) that it's best to show it on hover.</p>",
        "id": 1340509,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646719663
    },
    {
        "content": "<p>I agree the X looks too small in those other modals that have a different heading style.</p>",
        "id": 1340511,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1646719721
    },
    {
        "content": "<p>We should consider whether we want to have a title like \"Read receipts\" above the \"This message has been ready by\" rather than creating a new modal design for consistency reasons. Though thinking about this a bit more ... I think our problem might actually be that this component should be done using a popover, not a modal. <code>static/js/popover_menus.js</code> is the modern library we've been playing with for those.</p>",
        "id": 1340512,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1646719815
    },
    {
        "content": "<p>Do you mean something like our <a href=\"user_uploads/2/e4/OoLG211_OJxVHO_Cx-rLjwRX/image.png\">previous model</a> but a better UI that supports both themes with the help of a popover?</p>\n<div class=\"message_inline_image\"><a href=\"user_uploads/2/e4/OoLG211_OJxVHO_Cx-rLjwRX/image.png\" title=\"previous model\"><img src=\"user_uploads/2/e4/OoLG211_OJxVHO_Cx-rLjwRX/image.png\"></a></div>",
        "id": 1340517,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646720710
    },
    {
        "content": "<p>I think that will be better, especially because it'll be clear which message's read receipts you're seeing. And we can also add any interactability in the future if needed.  Shall we make it a popover then?</p>",
        "id": 1340521,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646721605
    },
    {
        "content": "<p>The only downside is that we'll probably have to show <code>...</code> for longer names and show fullnames on hover. Or split them into two lines but that might look odd.</p>",
        "id": 1340523,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646722153
    },
    {
        "content": "<div class=\"message_inline_image\"><a href=\"https://media1.giphy.com/media/3oqigXeLEXr5whkvzn/giphy.gif?cid=c623cb35jarqs3knkubfddju4bmux63aw0fvv9ybzvsa322s&amp;rid=giphy.gif&amp;ct=g\"><img src=\"/external_content/f7406ba39996c6232f2475263ca87fce7dd3f16c/68747470733a2f2f6d65646961312e67697068792e636f6d2f6d656469612f336f71696758654c4558723577686b767a6e2f67697068792e6769663f6369643d63363233636233356a61727173336b6e6b75626664646a7534626d757836336177306676763979627a76736133323273267269643d67697068792e6769662663743d67\"></a></div>",
        "id": 1340659,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1646751001
    },
    {
        "content": "<p>Hm, <span class=\"user-mention silent\" data-user-id=\"13362\">Dinesh Ch</span> , I think that previous model is tooltip, and maybe <span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> is thinking something more like the Drafts UI?</p>",
        "id": 1340712,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646757122
    },
    {
        "content": "<p>No the drafts UI is an overlay.</p>",
        "id": 1340827,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1646764092
    },
    {
        "content": "<p>I meant a popover, like this or the emoji picker:</p>\n<p><a href=\"/user_uploads/2/9d/HIjC--nQ-Bu8__pyZFE-WEJv/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/9d/HIjC--nQ-Bu8__pyZFE-WEJv/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/9d/HIjC--nQ-Bu8__pyZFE-WEJv/image.png\"></a></div>",
        "id": 1340829,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1646764123
    },
    {
        "content": "<p>For terminology context there are 4 types of things that can appear over content in Zulip:</p>\n<ul>\n<li>A tooltip; which is a small item that usually appears on hovering over something.</li>\n<li>A popover, which includes all of our actions menus indicated by <code>\\vdots</code>, the user popover when clicking on a user, the emoji and Giphy pickers, the popover when clicking on a user group, etc. These usually point to the thing you clicked but don't have to, and are generally small so as to not completely occlude content.</li>\n<li>An modal, which fills the center of the screen, and we primarily use for yes/no questions or other simple dialogs.</li>\n<li>An overlay, like \"Settings\", which fills the vast majority of the screen, modifies the URL hash/fragment (and thus can be reached via the back button in the browser), etc.</li>\n</ul>",
        "id": 1340838,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1646764259
    },
    {
        "content": "<p>Ah, heh, I'm the one who was confused. :)</p>",
        "id": 1340865,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646765042
    },
    {
        "content": "<p>I guess whether a popover is viable will depend on how people access the option.</p>",
        "id": 1340868,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646765085
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span> I don't know if you have thoughts on this one, both how to access it and what to use to display the names?</p>\n<p>To summarize the concerns discussed in the thread <span class=\"user-mention silent\" data-user-id=\"13362\">Dinesh Ch</span> linked, we wanted to make it easy to discover the read receipts feature to minimize the chance that users would feel watched without their knowledge. But that said, actually making use of this feature is probably not a super-frequent need.</p>",
        "id": 1340877,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646765262
    },
    {
        "content": "<p>Good feature. I guess I would place it for now as an item in the context menu if its not that frequent.</p>",
        "id": 1341307,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1646791427
    },
    {
        "content": "<p>If we are going with placing it in the message actions menu, we might have to stick to modal. I think it might look odd to open a popover from another popover.</p>",
        "id": 1341527,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1646842755
    },
    {
        "content": "<p>Yeah, that's exactly what I was thinking.</p>",
        "id": 1341629,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1646852156
    },
    {
        "content": "<p>Okay, then I'll just move the button to <code>Message actions(i)</code> menu for now.</p>",
        "id": 1343549,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1647081432
    },
    {
        "content": "<p>On a related note, I think we should have a way to advertise new features for regular users in the app itself with new releases. To give an example, github shows this dot: <a href=\"/user_uploads/2/49/P8_VZGlaAvHzzBCarkYeOYYM/image.png\">image.png</a> <a href=\"/user_uploads/2/41/BHRf77jqFp9AcJcw9g70-mEC/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/49/P8_VZGlaAvHzzBCarkYeOYYM/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/49/P8_VZGlaAvHzzBCarkYeOYYM/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/41/BHRf77jqFp9AcJcw9g70-mEC/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/41/BHRf77jqFp9AcJcw9g70-mEC/image.png\"></a></div><p>This won't solve the possible issue with discoverability for read receipts for new users. But just a thought I wanted to share.</p>",
        "id": 1343552,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1647081881
    },
    {
        "content": "<p>Moved it to the actions menu and also updated the modal UI to have a header <code>Read receipts</code><br>\n<a href=\"/user_uploads/2/af/6FLwGdl6_3IB_KIpxfC7qQoG/image.png\">image.png</a> <a href=\"/user_uploads/2/d4/Ckf_pjMui03yjMC5F-Yp7IjO/image.png\">image.png</a> <a href=\"/user_uploads/2/2c/isC2YbpnYu_oSHkk0eJ-aRC9/image.png\">image.png</a>; <a href=\"/user_uploads/2/bf/vyOe67Bc7cs0lhfh42q19KXP/image.png\">in menu</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/af/6FLwGdl6_3IB_KIpxfC7qQoG/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/af/6FLwGdl6_3IB_KIpxfC7qQoG/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/d4/Ckf_pjMui03yjMC5F-Yp7IjO/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/d4/Ckf_pjMui03yjMC5F-Yp7IjO/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/2c/isC2YbpnYu_oSHkk0eJ-aRC9/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/2c/isC2YbpnYu_oSHkk0eJ-aRC9/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/bf/vyOe67Bc7cs0lhfh42q19KXP/image.png\" title=\"in menu\"><img src=\"/user_uploads/2/bf/vyOe67Bc7cs0lhfh42q19KXP/image.png\"></a></div>",
        "id": 1343738,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1647157267
    },
    {
        "content": "<p>Nice! Maybe it should be \"View read receipts\", to match \"View source\"?</p>",
        "id": 1343997,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1647275487
    },
    {
        "content": "<p>Yes, that'll be good I guess. Will change it.</p>\n<p>Also, need to change the scroll bar to a simplebar. Will ping you once it's done.</p>",
        "id": 1344026,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1647278862
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/pull/18935/commits/d1ce9a2460585f57c6aab38475160229442e0a72\">Done</a>: <a href=\"/user_uploads/2/d8/UEccomjQEjvPpMmWM8NwhuBK/image.png\">image.png</a> Does this look good?</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/d8/UEccomjQEjvPpMmWM8NwhuBK/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/d8/UEccomjQEjvPpMmWM8NwhuBK/image.png\"></a></div>",
        "id": 1350795,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648052994
    },
    {
        "content": "<p>Something feels off about the way the scrollable region interacts with the heading above it.</p>",
        "id": 1350949,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1648061274
    },
    {
        "content": "<p>The closest way to fix suggestion: make a header line to have some light background from edge to edge or at least a bottom border + width of the scrollable container goes edge to edge</p>",
        "id": 1351239,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1648075842
    },
    {
        "content": "<p>Do you mean something like this? <a href=\"/user_uploads/2/cb/LIphnj9ooWCjkWNTqsTV4bu-/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/cb/LIphnj9ooWCjkWNTqsTV4bu-/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/cb/LIphnj9ooWCjkWNTqsTV4bu-/image.png\"></a></div>",
        "id": 1351579,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648110080
    },
    {
        "content": "<p>(reduced the height of modal here for the scrollbar to appear. Previous image is the height at which we'd render a scrollbar)</p>",
        "id": 1351581,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648110175
    },
    {
        "content": "<p>Yeah, I think that works.</p>",
        "id": 1351984,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1648148286
    },
    {
        "content": "<p>Looks good to me.</p>",
        "id": 1352349,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1648163858
    },
    {
        "content": "<p><a href=\"/user_uploads/2/39/lNCsKQX_V5SQW20Ae71keIFY/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/39/lNCsKQX_V5SQW20Ae71keIFY/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/39/lNCsKQX_V5SQW20Ae71keIFY/image.png\"></a></div>",
        "id": 1352492,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1648175961
    },
    {
        "content": "<p>Oh, should we include 'The message has been read by:' line in the scrollable region?</p>",
        "id": 1352645,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648191290
    },
    {
        "content": "<p>I think that's a very reasonable thing to try, certainly.</p>",
        "id": 1352939,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1648232555
    },
    {
        "content": "<p>with that being scrollable, it'd look like <a href=\"/user_uploads/2/54/qRztPhyjhMBZd4rbY1Mrq18H/image.png\">image.png</a> <a href=\"/user_uploads/2/99/XOn6W-qEbiK6Jyv_MxyOlxZE/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/54/qRztPhyjhMBZd4rbY1Mrq18H/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/54/qRztPhyjhMBZd4rbY1Mrq18H/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/99/XOn6W-qEbiK6Jyv_MxyOlxZE/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/99/XOn6W-qEbiK6Jyv_MxyOlxZE/image.png\"></a></div><p>The same with a <code>hr</code> as <span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span>  suggested: <a href=\"/user_uploads/2/15/RO0j9br4CV6uOMCFm1GMuz8q/image.png\">image.png</a> (for my ref: <code>hr</code> margin set to 10px) <a href=\"/user_uploads/2/ef/jnMsChQ5wT3q4EaPgjuWhYF9/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/15/RO0j9br4CV6uOMCFm1GMuz8q/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/15/RO0j9br4CV6uOMCFm1GMuz8q/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/ef/jnMsChQ5wT3q4EaPgjuWhYF9/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/ef/jnMsChQ5wT3q4EaPgjuWhYF9/image.png\"></a></div>",
        "id": 1353904,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648461376
    },
    {
        "content": "<p>I think the <code>hr</code> is an improvement when you're scrolled down.</p>",
        "id": 1354350,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1648502068
    },
    {
        "content": "<p>Yeah, I think my favorite is probably the version with the <code>hr</code> and the whole region scrollable.</p>",
        "id": 1354732,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1648534254
    },
    {
        "content": "<p>That said, one thing to note is that I could imagine adding a <code>filter</code> component here, basically to help answer the question of \"Has Tim read this?\".</p>",
        "id": 1354733,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1648534277
    },
    {
        "content": "<p>Okay, I've cleaned up the PR. I think it is ready for review. <a href=\"https://github.com/zulip/zulip/pull/18935\">#18935</a></p>",
        "id": 1355012,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648563541
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1354733\">said</a>:</p>\n<blockquote>\n<p>That said, one thing to note is that I could imagine adding a <code>filter</code> component here, basically to help answer the question of \"Has Tim read this?\".</p>\n</blockquote>\n<p>Sure, can we do this as a follow-up? It'd be easier to manage smaller PRs for me.</p>",
        "id": 1355013,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648563619
    },
    {
        "content": "<p>I've also just added code to make the privacy setting of whether to share read receipts functional.</p>",
        "id": 1355014,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648563708
    },
    {
        "content": "<p>There's one question about the read receipts list: Do we want to include the logged in user? </p>\n<p>The current version includes it. I think that's better considering that it'll make it clear to users what others see and also check whether their <code>send_read_receipts</code> privacy setting is functioning as intended. Let me know if you think otherwise, will change.</p>",
        "id": 1355019,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648563998
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"13362\">Dinesh Ch</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1355019\">said</a>:</p>\n<blockquote>\n<p>There's one question about the read receipts list: Do we want to include the logged in user? </p>\n</blockquote>\n<p>Hm, not sure. We might get a better feel for it when we try it on CZO.</p>",
        "id": 1355286,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1648576262
    },
    {
        "content": "<p>Okay, It's ready for a review (<a href=\"https://github.com/zulip/zulip/pull/18935\">#18935</a>) and a test deployment if everything seems OK. Just fixed some CI failures.</p>",
        "id": 1359186,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1648987607
    },
    {
        "content": "<p>Nice! I left some feedback on the PR.</p>",
        "id": 1359758,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1649100322
    },
    {
        "content": "<p>Continuing that here since it involves UI changes: It looks as follows with the line below the heading matching the text margins <a href=\"/user_uploads/2/da/iXC6U2g0jkSrTm9cn4ZpRiLn/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/da/iXC6U2g0jkSrTm9cn4ZpRiLn/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/da/iXC6U2g0jkSrTm9cn4ZpRiLn/image.png\"></a></div><p>Alternatively, we can extend it end to end: <a href=\"/user_uploads/2/df/siXQP1H-suS2TikMy2qaSBO5/image.png\">image.png</a> (I think <span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1352492\">suggested</a> this previously)</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/df/siXQP1H-suS2TikMy2qaSBO5/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/df/siXQP1H-suS2TikMy2qaSBO5/image.png\"></a></div>",
        "id": 1360267,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1649140490
    },
    {
        "content": "<p>Hmm, I like either of those better than the intermediate state; maybe the end-to-end version is good. What do folks think?</p>",
        "id": 1360763,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1649199308
    },
    {
        "content": "<p>I agree; end-to-end looks more organized</p>",
        "id": 1362366,
        "sender_full_name": "Emily Burda",
        "timestamp": 1649376911
    },
    {
        "content": "<p>The last</p>",
        "id": 1362526,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1649415046
    },
    {
        "content": "<p>Cool, <span class=\"user-mention\" data-user-id=\"13362\">@Dinesh Ch</span> let's go with the end-to-end line approach.</p>",
        "id": 1362664,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1649433689
    },
    {
        "content": "<p>Done, updated the PR. Thanks for the feedback <span class=\"user-mention silent\" data-user-id=\"23827\">Emily Burda</span> and <span class=\"user-mention silent\" data-user-id=\"10544\">Andrea Soc 🏂</span> !</p>",
        "id": 1363873,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1649571341
    },
    {
        "content": "<p>top</p>",
        "id": 1366801,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1649941165
    },
    {
        "content": "<p>This is test-deployed on <a href=\"http://chat.zulip.org\">chat.zulip.org</a>!  Feedback appreciated.</p>",
        "id": 1369525,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650321202
    },
    {
        "content": "<p>Large public streams in an organization like <a href=\"http://chat.zulip.org\">chat.zulip.org</a> are not the primary intended use case for this feature (I think of it as mainly for smaller groups), but hopefully one can get something out of testing it.</p>\n<p>Also, as a note, there's a new privacy setting to disable sharing read receipt information with other users.</p>",
        "id": 1369527,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650321290
    },
    {
        "content": "<p>great news!</p>",
        "id": 1369788,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1650361645
    },
    {
        "content": "<p>Hey guys, so how can I check that reed receipts window? What should I click?</p>",
        "id": 1369900,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1650386182
    },
    {
        "content": "<p>It is one of the option in the menu opened from <code>three-dot</code> button of the message on the right.</p>",
        "id": 1369901,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1650386382
    },
    {
        "content": "<p>It would be cool if the read receipts said how many people read the message. E.g.  \"This message has been read by:\" -&gt; \"This message has been read by 23 people:\".</p>",
        "id": 1369908,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650387167
    },
    {
        "content": "<p>Are we intentionally not linking the names/avatars to their profiles?  That seems like a good refinement.</p>",
        "id": 1369960,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1650389939
    },
    {
        "content": "<p>I'm a little conflicted as to if my own name should show up in the read receipts.</p>",
        "id": 1369962,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1650390053
    },
    {
        "content": "<p>It doesn't currently.</p>",
        "id": 1369963,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1650390064
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"12178\">Alex Vandiver</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1369963\">said</a>:</p>\n<blockquote>\n<p>It doesn't currently.</p>\n</blockquote>\n<p>It does (unless you turned the setting off); the sender's name does not.</p>",
        "id": 1369966,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650390162
    },
    {
        "content": "<p>Ah, sorry.  I meant for messages I sent, specifically.</p>",
        "id": 1369968,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1650390199
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"12178\">Alex Vandiver</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1369960\">said</a>:</p>\n<blockquote>\n<p>Are we intentionally not linking the names/avatars to their profiles?  That seems like a good refinement.</p>\n</blockquote>\n<p>Not intentional afaik; that sounds like a good idea.</p>",
        "id": 1369969,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650390201
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"12178\">Alex Vandiver</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1369968\">said</a>:</p>\n<blockquote>\n<p>Ah, sorry.  I meant for messages I sent, specifically.</p>\n</blockquote>\n<p>Got it. Yeah, the rule is unrelated to whether it's you or not, but we don't show the sender's name.</p>",
        "id": 1369970,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650390238
    },
    {
        "content": "<p>Yeah <span class=\"user-mention\" data-user-id=\"13362\">@Dinesh Ch</span> can you try extending the UI to link users to their profile (i.e. the popover that you get when clicking their 3-dots menu in the right sidebar?).  I think that probably feels more correct than the \"full profile\" to me.</p>",
        "id": 1370352,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650417040
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1369908\">said</a>:</p>\n<blockquote>\n<p>It would be cool if the read receipts said how many people read the message. E.g.  \"This message has been read by:\" -&gt; \"This message has been read by 23 people:\".</p>\n</blockquote>\n<p>the top would be, \"the message ha been read by 23 out of 1000 people (1000 is the total users of Stream)\"</p>",
        "id": 1370511,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1650443606
    },
    {
        "content": "<p>We'd need to be careful with such a message to deal with the fact that the sender isn't counted; I guess it could be \"This message has been read by 23 out of 1024 recipients\" if the stream has 1025 subscribers (including the sender).</p>",
        "id": 1370652,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650471257
    },
    {
        "content": "<p>If someone reads the message without subscribing to the stream, do they get listed in the read receipt?</p>",
        "id": 1370709,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650475568
    },
    {
        "content": "<p>No, but if they react with an emoji or do something that creates a <code>UserMessage</code>(not sure what the other things are), the current version would list them. It would change in my next revision to the PR as <a href=\"https://github.com/zulip/zulip/pull/18935#discussion_r852371746\">we want to exclude <code>UserMessage</code> rows with <code>historical</code> flag.</a></p>",
        "id": 1371089,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650536983
    },
    {
        "content": "<p>We're also making it possible to send messages to an unsubscribed stream (<a href=\"https://github.com/zulip/zulip/pull/21433\">#21433</a>). Would the users that do so be excluded as well in the next revision?</p>",
        "id": 1371217,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650561775
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"13362\">Dinesh Ch</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1371089\">said</a>:</p>\n<blockquote>\n<p>....</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"13362\">@Dinesh Ch</span> I found this weird quirk looking at read receipts on the message quoted here.</p>\n<p><a href=\"/user_uploads/2/4f/69G6alQ0s2j8lmitLQbtdTeX/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/4f/69G6alQ0s2j8lmitLQbtdTeX/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/4f/69G6alQ0s2j8lmitLQbtdTeX/image.png\"></a></div>",
        "id": 1371411,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650572234
    },
    {
        "content": "<p>Ok, after chatting with <span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> to understand the point about the <code>historical</code> flag, etc., better, I think we should:</p>\n<ol>\n<li>Show the users who read the message and interacted with it even though they weren't subscribed at the time. It seems counter-intuitive no to show someone on that list who, e.g., reacted to the message. So listing anyone who has a <code>UserMessage</code> who has read the message is good.</li>\n<li>Add \"This message has been read by 23 people:\", but not say out of how many. With the fact that people can unsubscribe/resubscribe to streams, in addition to the wrinkles discussed above, it seems very difficult to define an N for \"out of N recipients\" that (a) is intuitive to the user, and (b) will never produce a confusing situation like \"7 out of 5 recipients read this\".</li>\n</ol>",
        "id": 1371461,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650575659
    },
    {
        "content": "<p>I've pulled this experiment off because it had merge conflicts and I figure we'll want to make these changes before the next deployment. <span class=\"user-mention\" data-user-id=\"13362\">@Dinesh Ch</span> FYI.</p>",
        "id": 1372100,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650668730
    },
    {
        "content": "<p>Okay, pushed these changes to <a href=\"/user_uploads/2/63/69iK9SATa57BCjyh-L1MHSoQ/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/63/69iK9SATa57BCjyh-L1MHSoQ/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/63/69iK9SATa57BCjyh-L1MHSoQ/image.png\"></a></div><p>The user names in the list might need some styling on hover/clicks.</p>",
        "id": 1372610,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650829504
    },
    {
        "content": "<p>Yeah, I think we need hover and click highlighting, and a hand mouse cursor.</p>",
        "id": 1372970,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650907169
    },
    {
        "content": "<p>Playing with the PR, I think we can make the avatar clickable too?</p>",
        "id": 1372971,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650907184
    },
    {
        "content": "<p>I also saw that bots showed up in the read receipts -- I thought we had planned not to show them? Am I misremembering?</p>",
        "id": 1372973,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650907227
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI.20.2318935/near/1372973\">said</a>:</p>\n<blockquote>\n<p>I also saw that bots showed up in the read receipts -- I thought we had planned not to show them? Am I misremembering?</p>\n</blockquote>\n<p>Bots should likely appear in read receipts if they have marked a message as read, which is likely to only happen because a bot is doing something specific there (E.g. indicating which messages it has processed). There's a bug in how <code>populate_db</code> manages the development database that makes it appear for all messages incorrectly.</p>",
        "id": 1372979,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650907535
    },
    {
        "content": "<p>OK, so with the current implementation bots wouldn't normally be listed? That seems fine, then.</p>",
        "id": 1372981,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650907592
    },
    {
        "content": "<p>Right; let me fix that <code>populate_db</code> bug.</p>",
        "id": 1372982,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650907683
    },
    {
        "content": "<p>when clicked: <a href=\"/user_uploads/2/71/hctQtrdof3rG2E6wa20-sv2t/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/2/6c/GXv95VkX38ICHeND3qAVRPlh/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/71/hctQtrdof3rG2E6wa20-sv2t/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/71/hctQtrdof3rG2E6wa20-sv2t/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/6c/GXv95VkX38ICHeND3qAVRPlh/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/6c/GXv95VkX38ICHeND3qAVRPlh/image.png\"></a></div><p>I tried to match this behavior with the names in messages view.</p>",
        "id": 1373590,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650951477
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI.20.2318935/near/1371411\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"13362\">Dinesh Ch</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI/near/1371089\">said</a>:</p>\n<blockquote>\n<p>....</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"13362\">Dinesh Ch</span> I found this weird quirk looking at read receipts on the message quoted here.</p>\n<p><a href=\"/user_uploads/2/4f/69G6alQ0s2j8lmitLQbtdTeX/image.png\">image.png</a></p>\n</blockquote>\n<p>I think something was wrong with line-height property being small. The borders around names (first SS in the above images) were also not visible until I've set <code>line-height:26</code> upon some trial and error.  This might also fix that weird scroll.</p>",
        "id": 1373591,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650951764
    },
    {
        "content": "<p>Hm, I'm not a fan of how that blue box looks. I guess we leave it on for the name in the message feed, but not for the compose box buttons that open something up (time picker, GIF)...</p>",
        "id": 1373598,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650952485
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span> what would you suggest for the hover/click effects in the read receipts modal?</p>",
        "id": 1373599,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650952513
    },
    {
        "content": "<p>Pushing those changes to PR after a rebase... Will change it once we have other ideas.</p>",
        "id": 1373605,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650953412
    },
    {
        "content": "<p>I suggest to highlight the while line with 5% black on hover and 10% black on click. For the dark theme the logic is the same, just use white</p>",
        "id": 1373652,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1650975294
    },
    {
        "content": "<p>sorry, I didn't get you. Is there some typo around \"while line\"? What do you mean by 5% &amp; 10% black? Should I look at setting some opacity?</p>",
        "id": 1373661,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650979970
    },
    {
        "content": "<p><a href=\"/user_uploads/2/dc/oWoaMwloG6u-sQzNCH7kHD5c/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/dc/oWoaMwloG6u-sQzNCH7kHD5c/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/dc/oWoaMwloG6u-sQzNCH7kHD5c/image.png\"></a></div>",
        "id": 1373681,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1650986430
    },
    {
        "content": "<p>Light theme:</p>\n<div class=\"codehilite\"><pre><span></span><code>.button:hover{\nbackground-color: hsla(0, 0%, 0%, 0.05)\n}\n\n.button:active{\nbackground-color: hsla(0, 0%, 0%, 0.1)\n}\n</code></pre></div>\n<p>Dark theme:</p>\n<div class=\"codehilite\"><pre><span></span><code>.button:hover{\nbackground-color: hsla(0, 0%, 100%, 0.05)\n}\n\n.button:active{\nbackground-color: hsla(0, 0%, 100%, 0.1)\n}\n</code></pre></div>",
        "id": 1373682,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1650986540
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"13362\">@Dinesh Ch</span> do you have time to put in that CSS?</p>",
        "id": 1373715,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1650992977
    },
    {
        "content": "<p>Yes, working on it. What do we want for <code>:focus</code>? It'll appear when we are showing the user profile card after clicking user name. 5% black: <a href=\"/user_uploads/2/f7/dZJIXK2jtqsM-TfqE-PnWoF3/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/f7/dZJIXK2jtqsM-TfqE-PnWoF3/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/f7/dZJIXK2jtqsM-TfqE-PnWoF3/image.png\"></a></div>",
        "id": 1373736,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650995146
    },
    {
        "content": "<p>Keyboard navigation is giving this outline by default <a href=\"/user_uploads/2/a1/-ZOiqaStAkbop52kaZiQit_e/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/a1/-ZOiqaStAkbop52kaZiQit_e/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/a1/-ZOiqaStAkbop52kaZiQit_e/image.png\"></a></div><p>Does it look good?</p>\n<p>If we decide to set <code>:focus</code> too, with 5% black it looks like <a href=\"/user_uploads/2/2d/OnCzo389pZCVGZpsmhN_gk24/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/2d/OnCzo389pZCVGZpsmhN_gk24/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/2d/OnCzo389pZCVGZpsmhN_gk24/image.png\"></a></div>",
        "id": 1373741,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650995657
    },
    {
        "content": "<p>(Thanks, <span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> for clarifying with CSS and the screenshot. It looks cool now!)</p>",
        "id": 1373742,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650995698
    },
    {
        "content": "<p>For <code>:focus</code>, would it make sense to leave it in the <code>button:active</code> state?</p>",
        "id": 1373764,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650997184
    },
    {
        "content": "<p>I don't think it should need a border.</p>",
        "id": 1373765,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1650997194
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI.20.2318935/near/1373764\">said</a>:</p>\n<blockquote>\n<p>For <code>:focus</code>, would it make sense to leave it in the <code>button:active</code> state?</p>\n</blockquote>\n<p>Yeah, I think it makes sense to keep it same as <code>:active</code>so it stands out when we are hovering other elements in that state.</p>",
        "id": 1373785,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650997691
    },
    {
        "content": "<p>Pushed these changes to the PR. A screenshot: <a href=\"/user_uploads/2/2c/KeFdEu5_9OVUIJ0-Dj9z5cDH/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/2c/KeFdEu5_9OVUIJ0-Dj9z5cDH/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/2c/KeFdEu5_9OVUIJ0-Dj9z5cDH/image.png\"></a></div><p>(removed that border too)</p>",
        "id": 1373791,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1650997893
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"13362\">@Dinesh Ch</span> I found a bug when playing with the PR (posted a comment on it). I think the visuals are looking good!</p>",
        "id": 1373969,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1651012052
    },
    {
        "content": "<p>I don't recommend to define focus</p>",
        "id": 1374179,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1651021917
    },
    {
        "content": "<p>focus will be browser based</p>",
        "id": 1374180,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1651021930
    },
    {
        "content": "<p>But keep in mind that we want to display focus only when TAB key is used. Illustrated here <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible\">https://developer.mozilla.org/en-US/docs/Web/CSS/:focus-visible</a></p>",
        "id": 1374187,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1651022069
    },
    {
        "content": "<p>so probably using <code>&lt;button&gt;</code> would be the easiest way</p>",
        "id": 1374189,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1651022139
    },
    {
        "content": "<p>So after far too much delay, I've had a chance today to do an extended pass on <a href=\"https://github.com/zulip/zulip/pull/18935\">#18935</a> and get it ready to integrate. A few notes:</p>\n<ul>\n<li>I was able to implement our preferred UI for clicking on users and then being able to open their profile; some technical discussion in <a class=\"stream-topic\" data-stream-id=\"49\" href=\"/#narrow/stream/49-development-help/topic/close.20and.20open.20another.20modal.20immediately\">#development help &gt; close and open another modal immediately</a>.</li>\n<li>I wrote an extended comment in <code>zerver/views/read_receipts.py</code> documenting all the design decisions made above, and the reasoning behind them. <span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span> I expect you'll want to use that as a resource when preparing documentation for the feature.</li>\n<li>Once we have a /help/ article for the feature, we'll want to consider linking to it from potentially both the read receipts UI and the privacy settings page.</li>\n<li>It's easy to hold the feature back from Zulip Cloud after merging if that's desired, but for the moment I'm not merging it.</li>\n</ul>",
        "id": 1413539,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659298189
    },
    {
        "content": "<p>The one open question I remember is we should decide whether we want some set of \"Disable read receipts for this organization\" type global options, for use by organizations that have a preference for this feature to not affect the social conventions in their community. If we want to do that sort of thing, we may want to think a bit about whether it's binary (or, say, an organization disable it for streams but not PMs).</p>\n<p>To make sure it's clear to others: As currently implemented, individual users can control whether they share read receipts, and organization administrators can set the default for the setting -- but that only affects new users; they can't force this (or any other setting) for existing users.</p>",
        "id": 1413540,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659298424
    },
    {
        "content": "<p>I'm of the view that it's probably most polite to organizations to offer at least a global \"disable read receipts\" option when rolling this out; that would allow any communities who might have concerns about this feature to turn it off while they discuss what they want to do, if different members have different perspectives on the topic.</p>",
        "id": 1413541,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659298504
    },
    {
        "content": "<p>But if we're going to build that, I want to know if it's a dropdown or a checkbox setting, since it's annoying to switch from one to the other.</p>",
        "id": 1413542,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659298533
    },
    {
        "content": "<p>A checkbox org-wide setting seems like enough to me, given all the other management capabilities we've got. I think it's more likely that we would want to extend the personal setting to have multiple options then that we'd need that capability for the org setting.</p>",
        "id": 1414615,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659557070
    },
    {
        "content": "<p>I can write up an issue with the details.</p>",
        "id": 1414616,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659557084
    },
    {
        "content": "<p>Separately, I was surprised by the wording of the personal setting option:</p>\n<blockquote>\n<p>Let participants see when I've read messages</p>\n</blockquote>\n<p>Why does it say \"participants\"? Could it just be \"Let others see...\"?</p>",
        "id": 1414617,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659557203
    },
    {
        "content": "<p>Issue for the org setting; feedback on strings, etc. is welcome: <a href=\"https://github.com/zulip/zulip/pull/22657\">#22657</a>. Not marking it as \"help wanted\", because I think we want to get it done quickly. <span class=\"user-mention\" data-user-id=\"10242\">@Sahil Batra</span> would you be up for taking it on?</p>",
        "id": 1414621,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659558508
    },
    {
        "content": "<p>Yeah, given that Dinesh is pretty busy these days, I think it makes a lot of sense for Sahil to do the finishing work on it.</p>",
        "id": 1414663,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659564978
    },
    {
        "content": "<p>I have a few thoughts on the wording the wording:</p>\n<ul>\n<li>\"read receipts\" is a somewhat technical term. It live-displays the information, whereas we've, at present, gone with a design that lets people ask, but doesn't constantly display the information like many consumer messengers do. (Something that one doesn't want to do in large streams since that creates quadratic work for each message, since N people having read it needs to go to N others, but is fine for groups of &lt;25 or so people, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>N</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">N^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> is still a plausibly acceptable amount of work). I guess that's totally fine if we have a little <code>help_settings_link</code> ? link to the Help Center, and we can look at other apps -- it's possible that everyone uses that term and we're fine.</li>\n<li>AFAIK neither Slack nor Discord has Read Receipts at all. Facebook Messenger seems to have them but no way to disable them. <a href=\"https://github.com/vector-im/element-web/issues/2527\">https://github.com/vector-im/element-web/issues/2527</a> is interesting context -- an indication that at least for them, people are unhappy at always-visible read receipts (Both seeing them and sending them) not being configurable, so I'm glad we'll have such a control from the beginning.</li>\n<li>It's not totally clear from that label whether it's about whether it controls whether you see them or others see them with the \"Enable read receipts\" wording. Seems possible we could go with that wording plus a <code>?</code> thingy.</li>\n</ul>",
        "id": 1414666,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659565540
    },
    {
        "content": "<p>Sure, I would start working on it.</p>",
        "id": 1414885,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1659591647
    },
    {
        "content": "<p>I have started working on it, but have a few questions.</p>\n<ul>\n<li>What should be the default of this setting? I have kept it <code>True</code> for now since default of user setting is also <code>True</code>.</li>\n<li>\n<p>Issue mentions about writing <code>Users can always disable their personal read receipts.</code> text possibly on next line. I tried both keeping it on the same line and on next line. I think keeping on same line is fine if we are not keeping the label long. Attaching the screenshots for both -<br>\n<a href=\"/user_uploads/2/20/OBEhLKtaS5swYdGiUOiF30Im/Screenshot-from-2022-08-04-17-17-32.png\">Screenshot-from-2022-08-04-17-17-32.png</a> <a href=\"/user_uploads/2/d7/LUWN6X_YTLgBynCgao3QlAzz/Screenshot-from-2022-08-04-15-36-28.png\">Screenshot-from-2022-08-04-15-36-28.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/20/OBEhLKtaS5swYdGiUOiF30Im/Screenshot-from-2022-08-04-17-17-32.png\" title=\"Screenshot-from-2022-08-04-17-17-32.png\"><img src=\"/user_uploads/2/20/OBEhLKtaS5swYdGiUOiF30Im/Screenshot-from-2022-08-04-17-17-32.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/d7/LUWN6X_YTLgBynCgao3QlAzz/Screenshot-from-2022-08-04-15-36-28.png\" title=\"Screenshot-from-2022-08-04-15-36-28.png\"><img src=\"/user_uploads/2/d7/LUWN6X_YTLgBynCgao3QlAzz/Screenshot-from-2022-08-04-15-36-28.png\"></a></div></li>\n<li>\n<p>We also want a text for the personal setting option when organization disables read receipts. Do we want that text as it is, or can we use a <code>i</code> or <code>?</code> icon with a tooltip which will be shown when org setting is disabled. We use the <code>?</code> icon when organization disables email/name changes.</p>\n</li>\n<li>In case when the org setting is disabled, do we want to uncheck the personal setting also if user had enabled the setting before the org setting was disabled?</li>\n</ul>",
        "id": 1415027,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1659615897
    },
    {
        "content": "<p>Also, I thought of other options for the label but cannot think of any. Using <code>?</code> to point to a help center article with <code>Enable send receipts</code> sounds good.</p>",
        "id": 1415028,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1659615956
    },
    {
        "content": "<blockquote>\n<p>whether you see them or others see them with the \"Enable read receipts\" wording</p>\n</blockquote>\n<p>This is an org setting, so I thought it should be clear from context that it impacts everyone in the organization. The personal setting I'm proposing is:</p>\n<blockquote>\n<p>Let others see when I've read messages</p>\n</blockquote>",
        "id": 1415170,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659636503
    },
    {
        "content": "<blockquote>\n<p>What should be the default of this setting? I have kept it True for now since default of user setting is also True.</p>\n</blockquote>\n<p>Good question! I guess we need to decide how we're rolling this out both for new and existing orgs:</p>\n<ol>\n<li>I think for discoverability in existing orgs, we probably need to either have it turned on, or else proactively ask admins whether they want to turn in on? Thoughts?</li>\n<li>For new orgs, we could either default to \"on\", or perhaps customize it by org type? </li>\n</ol>\n<p>I can potentially ping a few folks in open orgs to get a sense of whether or not they'd be concerned about the feature rolling out as default \"on\", if we aren't sure.</p>",
        "id": 1415177,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659636816
    },
    {
        "content": "<blockquote>\n<p>I think keeping on same line is fine if we are not keeping the label long. </p>\n</blockquote>\n<p>Maybe try it on the same line but with italics on the part in parens?</p>",
        "id": 1415184,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659636958
    },
    {
        "content": "<blockquote>\n<p>In case when the org setting is disabled, do we want to uncheck the personal setting also if user had enabled the setting before the org setting was disabled?</p>\n</blockquote>\n<p>I was thinking the user should still be able to control the setting, regardless of whether the org-wide setting is enabled or not. That would allow the type of workflow <span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> suggested above, where people can pre-set their individual setting while the org-wide setting is turned off. We would never modify the individual setting on the user's behalf.</p>",
        "id": 1415186,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659637094
    },
    {
        "content": "<blockquote>\n<p>Do we want that text as it is, or can we use a i or ? icon with a tooltip which will be shown when org setting is disabled. </p>\n</blockquote>\n<p>An <code>i</code> would probably work. Our current pattern is to use <code>i</code> for info tooltips, and <code>?</code> for help center links.</p>",
        "id": 1415187,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659637178
    },
    {
        "content": "<p>I agree with all those proposals. <span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span> I think it'd be well worth asking a few open organizations about the default; I think the simplest option is \"enabled at the organization level for everyone by default\", but I could also see our initializing it for existing organizations to be on only for organizations where anyone on the Internet cannot join.</p>\n<p>I'd prefer not to block this on building some way to notify everyone about new features, though of course we can plan to highlight it in our next newsletter.</p>",
        "id": 1415267,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659641586
    },
    {
        "content": "<p>Posted the question here:</p>\n<p><a href=\"https://rust-lang.zulipchat.com/#narrow/stream/122653-zulip/topic/read.20receipts\">https://rust-lang.zulipchat.com/#narrow/stream/122653-zulip/topic/read.20receipts</a><br>\n<a href=\"https://leanprover.zulipchat.com/#narrow/stream/236604-Zulip-meta/topic/read.20receipts\">https://leanprover.zulipchat.com/#narrow/stream/236604-Zulip-meta/topic/read.20receipts</a></p>",
        "id": 1415270,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659642767
    },
    {
        "content": "<p>Changed the text in the parens to be in italics<br>\n<a href=\"/user_uploads/2/53/-bwQ1VAOxiNnp-2y_hzmyhkv/Screenshot-from-2022-08-05-20-15-15.png\">Screenshot-from-2022-08-05-20-15-15.png</a><br>\nTooltip shown when real setting is disabled<br>\n<a href=\"/user_uploads/2/d9/lXCBQ5VXet__15-SBtCZqz5h/Screenshot-from-2022-08-05-20-15-30.png\">Screenshot-from-2022-08-05-20-15-30.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/53/-bwQ1VAOxiNnp-2y_hzmyhkv/Screenshot-from-2022-08-05-20-15-15.png\" title=\"Screenshot-from-2022-08-05-20-15-15.png\"><img src=\"/user_uploads/2/53/-bwQ1VAOxiNnp-2y_hzmyhkv/Screenshot-from-2022-08-05-20-15-15.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/d9/lXCBQ5VXet__15-SBtCZqz5h/Screenshot-from-2022-08-05-20-15-30.png\" title=\"Screenshot-from-2022-08-05-20-15-30.png\"><img src=\"/user_uploads/2/d9/lXCBQ5VXet__15-SBtCZqz5h/Screenshot-from-2022-08-05-20-15-30.png\"></a></div>",
        "id": 1415615,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1659710923
    },
    {
        "content": "<p>Let's change \"Let participants see when I've read messages\" -&gt; \"Let others see when I've read messages\", but otherwise looks good to me!</p>",
        "id": 1415713,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659728254
    },
    {
        "content": "<p>To summarize the feedback in open communities so far, folks are generally opposed to having the feature on by default. There is also some interest in just having the feature in PMs/private streams, so I was probably incorrect about that not being super useful. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 1415756,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1659730142
    },
    {
        "content": "<p>I'm generally thinking a good default for existing organizations would be to have it default to on only if an organization isn't open. I'm not sure what makes sense for creating a new organization -- that's a setting folks often change while setting up their organization.</p>",
        "id": 1415917,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659747465
    },
    {
        "content": "<p>Keeping default to on only for organizations that aren't open sounds correct.</p>\n<p>New organizations are not open by default, not sure whether we want to keep the setting on by default considering this. Maybe adding a note to <a href=\"https://zulip.com/help/getting-your-organization-started-with-zulip\">https://zulip.com/help/getting-your-organization-started-with-zulip</a> would  also help. </p>\n<p>Also, currently the default for user setting is True, we may also want to set its default to False (at DB-level in models.py) and then we can maybe set it while creating the user depending upon the org setting or whether the organization is open or not.</p>",
        "id": 1416908,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1659970407
    },
    {
        "content": "<p>Yeah, I think a note in the onboarding guide (as well as perhaps the data import guides!) is probably fine for that new organization detail.</p>",
        "id": 1417182,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660000251
    },
    {
        "content": "<p>I think the user-level setting should use our standard RealmUserDefaults system, but I think <code>True</code> is the correct default. If an organization has the feature enabled, it'd be pretty annoying if you then needed to do a campaign to bug every user to enable it personally as well.</p>",
        "id": 1417183,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660000338
    },
    {
        "content": "<p>Ok, will open a PR today.</p>\n<p>We currently do not show the read-receipts setting in \"Default user settings\" UI, so wanted to ask what should be the label there. We have different labels for the \"display to others when online\" setting in the user and defaults sections . We can have something like \"Let others see when user has read messages\".</p>",
        "id": 1417324,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1660030740
    },
    {
        "content": "<p>I think it's appropriate to appear in \"Default user settings\", and yeah that revised label sounds right.</p>",
        "id": 1417649,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660081839
    },
    {
        "content": "<p>We've merged the organization setting designed above, with read receipts enabled in an organization by default if and only if the organization was closed to the public (i.e. it required an email domain or invitations to join). </p>\n<p>There will be some corporate organizations that will end up defaulting with read receipts not enabled, even though they don't allow the public to join, because we don't have an easy way to check whether \"the only authentication backend enabled is our corporate SAML/LDAP setup\".</p>\n<p>Newly created organizations will have read receipts enabled, though we can customize that based on <code>org_type</code>.</p>",
        "id": 1419110,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660350593
    },
    {
        "content": "<p>This is (or will be) presumably disabled on czo due to this default setting? (at least by default)<br>\nI know we don't see every feature here, but I'd be interested to explore this here if we can, once it's deployed.</p>\n<p>I definitely have an instinct to explore this in smaller groups like PMs and private streams first (and decide if I'd want it more visible).</p>\n<p>I assume read-receipts data isn't exposed on web-public streams (externally)?</p>\n<p>Lastly, I assume this depends on clients sending mark-as-read to the server, so has it yet been discussed how this interacts with mark-unread, as well as 'explore-mode' (as in ZT, or named differently in mobile?) where messages don't get marked as read on browsing?</p>",
        "id": 1419121,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1660352258
    },
    {
        "content": "<p>It's merged to <code>main</code> but not deployed to <a href=\"http://chat.zulip.org\">chat.zulip.org</a> yet; I'll plan to do a deployment sometime today.</p>",
        "id": 1419394,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660434886
    },
    {
        "content": "<p>This was deployed to <a href=\"http://chat.zulip.org\">chat.zulip.org</a> yesterday, and I've turned it on for this organization for testing. It's worth noting that read receipts will be disabled by default at the organization level for open organizations like <a href=\"http://chat.zulip.org\">chat.zulip.org</a>. In addition, individual users can toggle whether their reading information is available to others.</p>",
        "id": 1421250,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660847672
    },
    {
        "content": "<blockquote>\n<p>I assume read-receipts data isn't exposed on web-public streams (externally)?</p>\n</blockquote>\n<p>That's right; it'll be good to document that!</p>",
        "id": 1421454,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1660862593
    },
    {
        "content": "<p>Since this uses pre-existing data, if this gets toggled at an organization level, it seems to expose past interactions. I'm not sure if I would expect that, or only during periods where the organization/user settings were set?</p>",
        "id": 1421455,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1660863061
    },
    {
        "content": "<p>In exploring this, I also just noticed some older messages which have empty user profile pictures. I'm not sure if those are eg. gravatar users, or there's something else going on.</p>",
        "id": 1421456,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1660863117
    },
    {
        "content": "<blockquote>\n<p>Lastly, I assume this depends on clients sending mark-as-read to the server, so has it yet been discussed how this interacts with mark-unread, as well as 'explore-mode' (as in ZT, or named differently in mobile?) where messages don't get marked as read on browsing?</p>\n</blockquote>\n<p>It matches the user's read/unread state, regardless of how it was reached.</p>",
        "id": 1421459,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1660863353
    },
    {
        "content": "<p>The default user settings string feels hard to understand to me:</p>\n<blockquote>\n<p>Let others see when user has read messages</p>\n</blockquote>\n<p>I'm not sure how best to word it. Note that the setting just about it is:</p>\n<blockquote>\n<p>Display availability to other users when online </p>\n</blockquote>\n<p>Maybe something like one of the following would work better?</p>\n<ol>\n<li>Let other users see when the user has read messages</li>\n<li>Allow other users to view read receipts</li>\n</ol>\n<p>Note that we currently use the term \"read receipts\" in the org-wide setting, but not the personal setting.</p>",
        "id": 1421464,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1660863702
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"2406\">Neil Pilgrim (neiljp)</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI.20.2318935/near/1421456\">said</a>:</p>\n<blockquote>\n<p>In exploring this, I also just noticed some older messages which have empty user profile pictures. I'm not sure if those are eg. gravatar users, or there's something else going on.</p>\n</blockquote>\n<p>Whoa, that looks bad! I'm also seeing little scroll bars next to those users:</p>\n<p><a href=\"/user_uploads/2/68/mtsBG2NNK75YGJhJCfHESK_y/Screen-Shot-2022-08-18-at-4.02.21-PM.png\">Screen-Shot-2022-08-18-at-4.02.21-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/68/mtsBG2NNK75YGJhJCfHESK_y/Screen-Shot-2022-08-18-at-4.02.21-PM.png\" title=\"Screen-Shot-2022-08-18-at-4.02.21-PM.png\"><img src=\"/user_uploads/2/68/mtsBG2NNK75YGJhJCfHESK_y/Screen-Shot-2022-08-18-at-4.02.21-PM.png\"></a></div>",
        "id": 1421466,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1660863794
    },
    {
        "content": "<p>Would someone be up for investigating? Perhaps <span class=\"user-mention\" data-user-id=\"17964\">@Riken Shah (Riken-Shah)</span> ?</p>",
        "id": 1421467,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1660863820
    },
    {
        "content": "<p>Yeah \"Allow other users to view read receipts\" seems fine, and we can do a little help link to point to the Help Center article to make it super clear for anyone curious.</p>",
        "id": 1421478,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660864340
    },
    {
        "content": "<p>Re the empty-user issue, I don't see scrollbars, and it's not gravatar-related - or at least I see some images that look like that in the lists.</p>",
        "id": 1421479,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1660864482
    },
    {
        "content": "<p>(I just filed <a href=\"https://github.com/zulip/zulip-terminal/pull/1247\">#T1247</a> while I remembered)</p>",
        "id": 1421480,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1660864585
    },
    {
        "content": "<p>I think the bug is we're not calling <code>small_avatar_url_for_person</code> to get the avatar URLs.</p>",
        "id": 1421522,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660869050
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/pull/22751\">https://github.com/zulip/zulip/pull/22751</a></p>",
        "id": 1421525,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660869311
    },
    {
        "content": "<p>Test-deploying that commit to confirm the fix.</p>",
        "id": 1421528,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660869363
    },
    {
        "content": "<p>Yep, that fixes it. Thanks for catching this <span class=\"user-mention\" data-user-id=\"2406\">@Neil Pilgrim (neiljp)</span>!</p>",
        "id": 1421534,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1660869637
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/read-receipts.20UI.20.2318935/near/1421478\">said</a>:</p>\n<blockquote>\n<p>Yeah \"Allow other users to view read receipts\" seems fine, and we can do a little help link to point to the Help Center article to make it super clear for anyone curious.</p>\n</blockquote>\n<p>Cool, <span class=\"user-mention silent\" data-user-id=\"10242\">Sahil Batra</span> could you make that small update?</p>",
        "id": 1422017,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1660943948
    },
    {
        "content": "<p>Opened <a href=\"https://github.com/zulip/zulip/pull/22761\">#22761</a>.</p>",
        "id": 1422300,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1660981283
    },
    {
        "content": "<p>Thanks for taking this forward, Tim and others! Excited seeing it deployed on czo  <img alt=\":animatedoctopus:\" class=\"emoji\" src=\"/user_avatars/2/emoji/images/68.gif\" title=\"animatedoctopus\"></p>",
        "id": 1422510,
        "sender_full_name": "Dinesh Ch",
        "timestamp": 1661080048
    },
    {
        "content": "<p>I think this is a good core feature, though I think I miss seeing more information in PMs at a glance rather than on-demand - I think we're less concerned of the overhead of that?</p>\n<p>Initially I thought something like a fixed-width bar that fills depending on (other) users in PM who have read it would be interesting, with a hover-over to show the user list as-now, perhaps under the time? Or maybe even the opposite - who <em>hasn't</em> read messages, a little like our unread marker, but on the opposite side for 'others unread'? I know that dual-side markers were discussed at some point; were they ruled out in general or just for alternative designs?</p>",
        "id": 1422663,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1661117877
    },
    {
        "content": "<p>Hm, does anyone have a link to the prior discussion mentioned by <span class=\"user-mention silent\" data-user-id=\"2406\">Neil Pilgrim (neiljp)</span> handy?</p>",
        "id": 1422873,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661183508
    },
    {
        "content": "<p>I don't. I'd kinda prefer to keep this conversation on polishing the feature we have; it'd be a completely different API design etc. to do live-updating read receipts for PMs or similar.</p>",
        "id": 1423219,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1661211196
    },
    {
        "content": "<p>It's totally doable for limited-size recipient groups and can reuse the data format (etc.), and privacy settings, but that's more or less a completely different feature at the implementation level, since it'd use a different API and a different visual design.</p>",
        "id": 1423220,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1661211287
    },
    {
        "content": "<p>i'm very happy for this feature! Compliments guys! <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span> <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span></p>",
        "id": 1424123,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1661333547
    },
    {
        "content": "<p>We got the exception in <a href=\"https://github.com/zulip/zulip/pull/22826\">#22826</a> in our server logs, so this probably has a (possibly subtle) bug. I haven't done any debugging.</p>",
        "id": 1428357,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1661907397
    },
    {
        "content": "<p>I just filed an issue for a quick thing we should fix before read receipts are deployed to Zulip Cloud: <strong>Read receipts should use correct grammar when message has been read by 1 person</strong> <a href=\"https://github.com/zulip/zulip/pull/22830\">#22830</a>.</p>",
        "id": 1428494,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661931621
    },
    {
        "content": "<p>By the way, do we still need to make changes so that these strings are handled correctly for internationalization? (cf. <a class=\"stream-topic\" data-stream-id=\"58\" href=\"/#narrow/stream/58-translation/topic/optional.20plural.20in.20translation\">#translation &gt; optional plural in translation</a> ; <a class=\"stream-topic\" data-stream-id=\"58\" href=\"/#narrow/stream/58-translation/topic/Russian.20time.20period.20translations\">#translation &gt; Russian time period translations</a> )</p>",
        "id": 1428498,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661931883
    },
    {
        "content": "<p><a class=\"stream-topic\" data-stream-id=\"58\" href=\"/#narrow/stream/58-translation/topic/ICU.20Message.20syntax\">#translation &gt; ICU Message syntax</a> is a more recent conversation that you might have in mind. There, I think we <a href=\"#narrow/stream/58-translation/topic/ICU.20Message.20syntax/near/1422020\">noticed</a> at least as good results from using the fancy plural-handling feature of ICU syntax as without using it. This sounds to me like a good place to use it, if we aren’t already (I’m on mobile so I haven’t checked, sorry 🙂).</p>",
        "id": 1428516,
        "sender_full_name": "Chris Bobbe",
        "timestamp": 1661932915
    },
    {
        "content": "<p>Ah, yes, thanks! I don't think it's tagged correctly?</p>\n<p><code>This message has been read by {num_of_people} people:</code></p>\n<p>I'll add a note to the above issue.</p>",
        "id": 1428523,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661933585
    },
    {
        "content": "<p>Would someone be up for updating <a href=\"https://zulip.readthedocs.io/en/latest/translating/internationalization.html\">https://zulip.readthedocs.io/en/latest/translating/internationalization.html</a> with instructions on how to do the tagging properly?</p>",
        "id": 1428525,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661933781
    },
    {
        "content": "<p>Heh, I guess <span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/58-translation/topic/ICU.20Message.20syntax/near/1422060\">made the same request</a> in the linked thread. :)</p>",
        "id": 1428527,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661933901
    },
    {
        "content": "<p>Opened <a href=\"https://github.com/zulip/zulip/pull/22837\">#22837</a> for handling pluralization.</p>",
        "id": 1428826,
        "sender_full_name": "Zixuan James Li",
        "timestamp": 1661981838
    },
    {
        "content": "<p>Just want to highlight a thing which I think is a bug here in this feature --<br>\nI just tried to take a look at read-receipts of a notification <a href=\"#narrow/stream/101-design/topic/.E2.9C.94.20unread.20pills.20in.20dark.20theme.20.2321374/near/1429350\">message</a> from bot and it showed me - 618 people have read it -- which is obviously not possible within a second right now.</p>\n<p><a href=\"/user_uploads/2/86/NGiuyGqVdJxv6XQ7oSEgB3pH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/86/NGiuyGqVdJxv6XQ7oSEgB3pH/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/86/NGiuyGqVdJxv6XQ7oSEgB3pH/image.png\"></a></div>",
        "id": 1429360,
        "sender_full_name": "Jai soni",
        "timestamp": 1662066679
    },
    {
        "content": "<p>Yes, given that only 5 people have read the following message, which you posted a couple of minutes later, something is definitely going wrong there!</p>",
        "id": 1429446,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1662071506
    },
    {
        "content": "<p>Ohh, this is because those notification messages are immediately marked as read for anyone who has not participated in the topic.</p>",
        "id": 1429447,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1662071634
    },
    {
        "content": "<p>Ahh got it, I'm not sure but -- do we want to treat this notification messages's read receipts some other way or is it fine to show always this huge number of participants in the list of who've read the message.</p>",
        "id": 1429558,
        "sender_full_name": "Jai soni",
        "timestamp": 1662109432
    },
    {
        "content": "<p>I don't think there's anything easy we can do to change that behavior other than disabling the feature. </p>\n<p>The simplest thing to do would be to just give a \"Read receipts are not available for this message\" notice for all messages sent by Notification Bot. In the future we could tighten the logic to only apply to classes of messages that are marked as read automatically for most recipients.</p>",
        "id": 1429793,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1662150367
    },
    {
        "content": "<p>(Our data model does not have a way to distinguish users who actually read such a message from those who had it marked as read automatically).</p>",
        "id": 1429794,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1662150421
    },
    {
        "content": "<p>That approach sounds reasonable to me, to avoid users feeling like there's a bug in read receipts.</p>",
        "id": 1429806,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1662151342
    },
    {
        "content": "<p>Is there a technical reason for this two-stage approach, rather than implementing the desired logic in the first place? Is it tricky to do so?</p>",
        "id": 1429808,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1662151465
    },
    {
        "content": "<p>(<span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> told me off-thread that the second approach would require adding a new database field for message type. So yes, there's a reason. :))</p>",
        "id": 1433044,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1662742901
    },
    {
        "content": "<p>Filed <strong>Do not show read receipts for Notification Bot messages</strong> <a href=\"https://github.com/zulip/zulip/pull/22905\">#22905</a>.</p>",
        "id": 1433060,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1662743431
    },
    {
        "content": "<p>Added <a href=\"https://github.com/zulip/zulip/pull/22908\">#22908</a>.</p>\n<p>Instead of only applying the disable logic for the notification bot I have applied the logic for all the bots.</p>\n<p>Is it fine or should I update the logic to only disable for notification bot?</p>",
        "id": 1433111,
        "sender_full_name": "Riken Shah (Riken-Shah)",
        "timestamp": 1662748261
    },
    {
        "content": "<p>Posted on the PR -- I think just Notification Bot is better, because we don't automatically mark messages as read for other bots.</p>",
        "id": 1433139,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1662753693
    }
]