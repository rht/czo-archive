[
    {
        "content": "<p>While designing mobile flows I realized that I want a feature... So I'll start from the far. </p>\n<p><strong>I'm on web desktop and I want to mark a topic as read without actually reading it.</strong> <br>\nWhy? Because I have to follow that stream to communicate with people inside it or there might be an actual topic I'm interested in. (I know that <strong>follow a topic</strong> feature request is already in the github) </p>\n<p><strong>I have 2 options</strong></p>\n<ol>\n<li>\n<p>Click more button and pick <code>Mark all messages as read</code>. But it is not easy, it requires aiming to <em>more</em> button and aiming to menu item, and I don't want to do that 5-10 times in a row.<br>\n<a href=\"/user_uploads/2/25/k6oC3qvUw1O3qDUF-Wm84OtH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/25/k6oC3qvUw1O3qDUF-Wm84OtH/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/25/k6oC3qvUw1O3qDUF-Wm84OtH/image.png\"></a></div></li>\n<li>\n<p>Scroll down with <code>scroll down arrow</code>. But it placed on the very right corner, so moving from the left side where I pick topic to the right bottom corner isn't great.<br>\n<a href=\"/user_uploads/2/cc/PZxM77wm5_jrYqyrNIhkcGSR/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/cc/PZxM77wm5_jrYqyrNIhkcGSR/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/cc/PZxM77wm5_jrYqyrNIhkcGSR/image.png\"></a></div></li>\n</ol>\n<p><strong><em>3. I wish there would be a hot key to <code>mark all as read</code></em></strong> – This is a feature request.</p>\n<p>But there is more to it. On mobile Zulip I have a great mode which doesn't mark messages as read when I scroll - that is very helpful. We don't have such feature on web and I wish we do. <strong>– This is another feature request.</strong></p>\n<p>The current redesigned <code>mark all as read</code> in mobile looks like this: Scroll (you can do it with the arrow) and mark all as read:<br>\n<a href=\"/user_uploads/2/bd/E2VROcA6U2724yW9y78bmWyn/image.png\">image.png</a> <a href=\"/user_uploads/2/26/qdgi9ImD5wVZb5MFpLIgFmKu/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/bd/E2VROcA6U2724yW9y78bmWyn/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/bd/E2VROcA6U2724yW9y78bmWyn/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/26/qdgi9ImD5wVZb5MFpLIgFmKu/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/26/qdgi9ImD5wVZb5MFpLIgFmKu/image.png\"></a></div><p>So I thought we could have a special mode switch in settings <code>Don't mark as read with scroll</code> and we could have the same flow on desktop.<br>\nAnd here is a weird question... What if we move the scroll down button to the left side on desktop web?<br>\n<a href=\"/user_uploads/2/9b/CUboDmW01Hx22o3akmDuxcKP/image.png\">image.png</a><br>\n<a href=\"/user_uploads/2/e6/OpopuSjdfDo2vz8ed5_L-rIN/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/9b/CUboDmW01Hx22o3akmDuxcKP/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/9b/CUboDmW01Hx22o3akmDuxcKP/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/e6/OpopuSjdfDo2vz8ed5_L-rIN/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/e6/OpopuSjdfDo2vz8ed5_L-rIN/image.png\"></a></div>",
        "id": 1409796,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1658717330
    },
    {
        "content": "<blockquote>\n<p>I wish there would be a hot key to mark all as read – This is a feature request.</p>\n</blockquote>\n<p>You can press <code>G</code> or <code>End</code> key if you are already narrowed inside the topic.<br>\n<a href=\"/user_uploads/2/ff/dADZE6HHuzfhe30IFH8jHuHU/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/ff/dADZE6HHuzfhe30IFH8jHuHU/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/ff/dADZE6HHuzfhe30IFH8jHuHU/image.png\"></a></div>",
        "id": 1409821,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1658721890
    },
    {
        "content": "<p>The button in the first screenshot of the suggested design is not visible.</p>",
        "id": 1409823,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1658721981
    },
    {
        "content": "<p>Oh, I see now, that is very helpful</p>",
        "id": 1409832,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1658724241
    },
    {
        "content": "<blockquote>\n<p>And here is a weird question... What if we move the scroll down button to the left side on desktop web?</p>\n</blockquote>\n<p>Hm, I guess it trades off covering up avatars vs. timestamps...</p>",
        "id": 1410718,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658858142
    },
    {
        "content": "<p>well the distance from the stream selection is also a factor</p>",
        "id": 1411144,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1658892265
    },
    {
        "content": "<p>We could also look at a different shape for it, like a thin horizontal bar; one would probably have a smaller click target vertically, but it might solve that problem. I'm not sure whether at the top or bottom of the view would be visually better.</p>",
        "id": 1415337,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1659649070
    },
    {
        "content": "<p>I filed <strong>Add option not to mark messages as read on scroll</strong> <a href=\"https://github.com/zulip/zulip/pull/22804\">#22804</a> following up on <span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> 's proposal above.</p>",
        "id": 1426840,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1661746528
    },
    {
        "content": "<p>Would be interesting at least to try</p>",
        "id": 1426843,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1661747131
    },
    {
        "content": "<p>Yeah, I'd like to see us add this; it's likely not a lot of work. Should we add labels to make it more likely to be worked on?</p>",
        "id": 1437081,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1663371935
    },
    {
        "content": "<p>Sure, marked as \"priority: high\".</p>",
        "id": 1437169,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1663390269
    },
    {
        "content": "<p>I've been working on this issue in <a href=\"https://github.com/zulip/zulip/pull/24309\">#24309</a></p>\n<p>It's been reviewed by <span class=\"user-mention\" data-user-id=\"10242\">@Sahil Batra</span> and he pointed out one interaction that requires a discussion</p>\n<blockquote>\n<p>One doubt I am having is what do when the user marked some messages as unread using the message popover and then changed the setting to mark messages read as scroll. Do we want the messages to be marked as read on scrolling in that case? I don't think this will occur frequently but just thought of mentioning it once that this is the current behavior.</p>\n</blockquote>\n<div class=\"message_inline_image\"><a href=\"https://user-images.githubusercontent.com/35494118/219107243-84008fc9-353a-47a7-8e10-47600c18ce90.gif\"><img src=\"/external_content/aaba7313bee089e17bd867db82931f3abf75474a/68747470733a2f2f757365722d696d616765732e67697468756275736572636f6e74656e742e636f6d2f33353439343131382f3231393130373234332d38343030386663392d333533612d343761372d386531302d3437363030633138636539302e676966\"></a></div>",
        "id": 1510186,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1676921593
    },
    {
        "content": "<p>When I was designing and testing this, if you had the setting set to do not mark messages as read, the compose banner should continue to display. Hence, I decided to hide the banner and resume reading when the user set the setting to mark messages as read. I also thought that when a user decides to turn the setting to mark messages as read, they understand that messages will begin to be marked as read and they're fully commiting to it.</p>",
        "id": 1510188,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1676921764
    },
    {
        "content": "<p>I do see how the user may also want to mark messages as unread and wanting to preserve the unread state before hand. Ensuring that the messages are unread after the user set the setting to mark messages as read.</p>",
        "id": 1510189,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1676922110
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"24937\">Joseph Ho</span> <a href=\"#narrow/stream/101-design/topic/UI.20redesign.3A.20scroll.20down.20and.20unread/near/1510186\">said</a>:</p>\n<blockquote>\n<p>I've been working on this issue in <a href=\"https://github.com/zulip/zulip/pull/24309\">#24309</a></p>\n<p>It's been reviewed by <span class=\"user-mention silent\" data-user-id=\"10242\">Sahil Batra</span> and he pointed out one interaction that requires a discussion</p>\n<blockquote>\n<p>One doubt I am having is what do when the user marked some messages as unread using the message popover and then changed the setting to mark messages read as scroll. Do we want the messages to be marked as read on scrolling in that case? I don't think this will occur frequently but just thought of mentioning it once that this is the current behavior.</p>\n</blockquote>\n<p><a href=\"https://user-images.githubusercontent.com/35494118/219107243-84008fc9-353a-47a7-8e10-47600c18ce90.gif\">https://user-images.githubusercontent.com/35494118/219107243-84008fc9-353a-47a7-8e10-47600c18ce90.gif</a></p>\n</blockquote>\n<p>I think the special not marking unread state on the current view should be preserved. That is, it should be the same as if the setting had been that messages normally get marked read on scroll in the first place.</p>",
        "id": 1510895,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1677013244
    },
    {
        "content": "<p>It shouldn't matter that you switched over to that setting recently vs. it's always been that way.</p>",
        "id": 1510896,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1677013340
    },
    {
        "content": "<p>Just making sure, <br>\n<strong>In the case where the user is browsing around normally with setting set to don't mark messages as read:</strong></p>\n<ul>\n<li>We want to show the preserved messsage state banner.</li>\n<li>When the user switches over the setting, the message state banner should hide and resume reading.</li>\n</ul>\n<p><strong>In the case where the user just marked messages as unread with settings set to don't mark messages as read:</strong></p>\n<ul>\n<li>We want to perserve that state if they're still on the same view.</li>\n<li>When the user switches over the settings, the message state banner should still show and paused reading.</li>\n</ul>\n<p>Is that correct or am I missing something?</p>",
        "id": 1511213,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1677044718
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span> Just want a confirmation on this ^^</p>",
        "id": 1511868,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1677117187
    },
    {
        "content": "<p>Yep, that sounds right to me -- thanks!</p>",
        "id": 1511877,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1677117570
    },
    {
        "content": "<p>Since the last time we talked about this, <span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span> decided it was best to create a new custom unread banner that will provide the users with more information about why messages are remaining unread.</p>\n<p>Now, I've designed the logic in <a href=\"https://github.com/zulip/zulip/pull/24309\">#24309</a> so that when the user has their Zulip app configured to not mark messages as read and there are unread messages in their message view, the new custom unread banner will appear, which is fine.</p>\n<p>But I've also preserved the conditions in when the default unread banner appears. (E.g. marking messages as unread, in a near message view, in search view). The default banner will replace the custom unread banner if it is shown. They are not stacked together as shown below: </p>\n<p><a href=\"/user_uploads/2/17/fDoJR7-GJDEvslT6mmHM3l_e/be49a8ad55a9b04268c4a91968dbcc23.gif\">marking messages as read</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/17/fDoJR7-GJDEvslT6mmHM3l_e/be49a8ad55a9b04268c4a91968dbcc23.gif\" title=\"marking messages as read\"><img src=\"/user_uploads/2/17/fDoJR7-GJDEvslT6mmHM3l_e/be49a8ad55a9b04268c4a91968dbcc23.gif\"></a></div><p><a href=\"/user_uploads/2/b1/Xuw2f-XyM3zaCvlTSp0Iq2-i/4ddcc5ba5f371984961bd4ab5ffb57af.gif\">entering near message view</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/b1/Xuw2f-XyM3zaCvlTSp0Iq2-i/4ddcc5ba5f371984961bd4ab5ffb57af.gif\" title=\"entering near message view\"><img src=\"/user_uploads/2/b1/Xuw2f-XyM3zaCvlTSp0Iq2-i/4ddcc5ba5f371984961bd4ab5ffb57af.gif\"></a></div><p>Wondering if we should try and keep this logic or would it make more sense to only display the custom unread banner when the Zulip app is configured to not mark messages as read and only display the other one when it is configured to automatically marked as read.</p>",
        "id": 1521810,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1678399143
    },
    {
        "content": "<p>^^ Bumping this up since it's been some time. Any feedback or suggestions are welcomed!</p>",
        "id": 1524560,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1678826575
    },
    {
        "content": "<p>I was thinking we should probably just show the banner about the configuration, since from the user's perspective, that's a simple, consistent reason why messages aren't getting marked as read. But open to other suggestions.</p>",
        "id": 1524743,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1678840065
    },
    {
        "content": "<p>I also want to add that Alya's idea is probably easier and cleaner to implement</p>",
        "id": 1524932,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1678855580
    },
    {
        "content": "<p>Hmm there hasn't been any opinions on this. Should I just continue with your suggestion?</p>",
        "id": 1528050,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1679260043
    },
    {
        "content": "<p>Sounds good, thanks!</p>",
        "id": 1528404,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1679329675
    },
    {
        "content": "<p>Updated <a href=\"https://github.com/zulip/zulip/pull/24309\">#24309</a> and it's ready for another round of manual review</p>",
        "id": 1528734,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1679349725
    },
    {
        "content": "<p>After <a href=\"https://github.com/zulip/zulip/pull/24309\">#24309</a> was merged, I am working towards the final piece, only mark messages as read in conversational views. This means that messages will be marked as read only in topic view and messages in any other views will remain unread until the user mnaually marks them as read. </p>\n<p>Since a user is able to read messages in the topic view, I'm wondering if it's better to show the \"preserved reading state banner\" when a user marks a message as unread in the topic view and show the other unread banner when the message is marked as unread in any other views. Or should we keep it simple and just display the \"settings set to not mark as read\" banner all around?</p>",
        "id": 1550957,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1681880373
    },
    {
        "content": "<p>I've opened <a href=\"https://github.com/zulip/zulip/pull/25180\">#25180</a> for folks who would like to play around with it and give their feedback from there. I've kept it simple and only display the \"settings set to not mark as read\" banner all around in the new option.</p>",
        "id": 1550986,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1681881336
    },
    {
        "content": "<p>We should report accurately to the user why their messages aren't being marked as read, as otherwise we'll be causing confusion about what the setting they selected does. So we need to do this:</p>\n<blockquote>\n<p>Since a user is able to read messages in the topic view, I'm wondering if it's better to show the \"preserved reading state banner\" when a user marks a message as unread in the topic view and show the other unread banner when the message is marked as unread in any other views.</p>\n</blockquote>",
        "id": 1551241,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681921349
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"24937\">@Joseph Ho</span> let me know when you've gotten that banner working; I think that's going to be the main remaining work for this.</p>",
        "id": 1552936,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1682104284
    },
    {
        "content": "<p>Yeah it's already working. I've added the <code>update_unread_banner()</code> into <code>narrow.js</code>where we call whenever we are changing views. Thus, the banner is updated every single time we are changing the view and accurately display to the user why their messages aren't being marked as read. I've also addressed the suggestions you've left in the PR. Should be good now <span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span></p>",
        "id": 1553062,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1682109402
    },
    {
        "content": "<p>I'll do some manual testing, but looks like it's failing a test.</p>",
        "id": 1553068,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682109571
    },
    {
        "content": "<p>Ah I ran <code>./tools/lint</code> but forgot to run <code>./tools/lint --fix</code> <span aria-label=\"face palm\" class=\"emoji emoji-1f926\" role=\"img\" title=\"face palm\">:face_palm:</span></p>",
        "id": 1553069,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1682109659
    },
    {
        "content": "<p>Currently just trying to get some recordings in, going to push another commit really quickly.</p>",
        "id": 1553070,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1682109726
    },
    {
        "content": "<p>Since we want to clearly state in the banner the setting, I wonder if we could reword the phrasing a bit to fit the two settings into one single template.</p>\n<blockquote>\n<p>Your Zulip app is configured to mark messages as read on scroll: Only in conversation views.<br>\nYour Zulip app is configured to mark messages as read on scroll: Never.</p>\n</blockquote>\n<p>Or should we keep these in two seperate template?</p>\n<blockquote>\n<p>Your Zulip app is configured to mark messages as read on scroll only in conversation views.<br>\nYour Zulip app is configured to not mark messages as read on scroll.</p>\n</blockquote>",
        "id": 1553103,
        "sender_full_name": "Joseph Ho",
        "timestamp": 1682112307
    },
    {
        "content": "<p>I definitely vote for two separate templates. There are probably small wording improvements that could be made to the latter messages.</p>",
        "id": 1553104,
        "sender_full_name": "Steve Howell",
        "timestamp": 1682112913
    },
    {
        "content": "<p>\"read on scroll\" is a bit tough to parse, partly due to the English anomaly that \"read\" is either past tense or present</p>",
        "id": 1553105,
        "sender_full_name": "Steve Howell",
        "timestamp": 1682113005
    },
    {
        "content": "<p>Hmm, yeah... If we do decide to change that phrasing, we'll want to update it everywhere for consistency, including the setting:</p>\n<p><a href=\"/user_uploads/2/6/tHe3BMabhpE6H0GdY8CEfnQ4/Screen-Shot-2023-04-21-at-2.41.14-PM.png\">Screen-Shot-2023-04-21-at-2.41.14-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/6/tHe3BMabhpE6H0GdY8CEfnQ4/Screen-Shot-2023-04-21-at-2.41.14-PM.png\" title=\"Screen-Shot-2023-04-21-at-2.41.14-PM.png\"><img src=\"/user_uploads/2/6/tHe3BMabhpE6H0GdY8CEfnQ4/Screen-Shot-2023-04-21-at-2.41.14-PM.png\"></a></div><p>Plus the mobile apps (see <a href=\"https://zulip.com/help/marking-messages-as-read#configure-whether-messages-are-automatically-marked-as-read\">help center</a>).</p>",
        "id": 1553106,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682113345
    },
    {
        "content": "<blockquote>\n<p>I definitely vote for two separate templates. </p>\n</blockquote>\n<p>Yes, we should aim to make the banner easy to read.</p>",
        "id": 1553107,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1682113461
    }
]