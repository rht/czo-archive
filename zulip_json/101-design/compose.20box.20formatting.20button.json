[
    {
        "content": "<p>Does a popover like formatting buttons makes sense?<br>\n<a href=\"/user_uploads/2/25/1lSC3IHSNp-1Iq3YE4wCkdA-/Screenshot-2021-06-14-at-9.14.24-AM.png\">Screenshot-2021-06-14-at-9.14.24-AM.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/25/1lSC3IHSNp-1Iq3YE4wCkdA-/Screenshot-2021-06-14-at-9.14.24-AM.png\" title=\"Screenshot-2021-06-14-at-9.14.24-AM.png\"><img src=\"/user_uploads/2/25/1lSC3IHSNp-1Iq3YE4wCkdA-/Screenshot-2021-06-14-at-9.14.24-AM.png\"></a></div><p>We basically show a popover of formatting buttons when the user selects a range of text.</p>",
        "id": 1208306,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1623642407
    },
    {
        "content": "<p>Oh, hm, that could work. It's how Discord does it: <a href=\"/user_uploads/2/dd/O8SUyl-VYN8GyEn5PcyygP32/cows_-_Discord.png\">cows_-_Discord.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/dd/O8SUyl-VYN8GyEn5PcyygP32/cows_-_Discord.png\" title=\"cows_-_Discord.png\"><img src=\"/user_uploads/2/dd/O8SUyl-VYN8GyEn5PcyygP32/cows_-_Discord.png\"></a></div>",
        "id": 1208743,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1623689995
    },
    {
        "content": "<p>Cool. Then I will work on it first. The search pills work is rather confusing. I also don't like the input pills in search box.</p>",
        "id": 1208822,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1623691858
    },
    {
        "content": "<p>I feel like each time, I need to select some text to get this popover. What if I'm starting with an empty compose box?<br>\nIf I want to add bullet points/link, I'd definitely not like to first select some message then add the formatting.</p>\n<p>While composing a message in Outlook, they provide both options -- buttons and popovers.<br>\n<a href=\"/user_uploads/2/5e/s5eJzm3Ozzhuv1TTbOCvVoQS/Screenshot-from-2021-06-14-23-59-07.png\">Outlook.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/5e/s5eJzm3Ozzhuv1TTbOCvVoQS/Screenshot-from-2021-06-14-23-59-07.png\" title=\"Outlook.png\"><img src=\"/user_uploads/2/5e/s5eJzm3Ozzhuv1TTbOCvVoQS/Screenshot-from-2021-06-14-23-59-07.png\"></a></div>",
        "id": 1208877,
        "sender_full_name": "Akshat",
        "timestamp": 1623695463
    },
    {
        "content": "<p>I think it's pretty natural to start bulleted and numbered lists by formatting first, and adding text later. It could be good to have buttons for inserting those.</p>\n<p>For links, a pretty natural flow is to type the name, and then highlight it to add a link. I'm not sure inserting the formatting first is going to be a good experience -- <code>[](url)</code> is not super easy to interpret.</p>",
        "id": 1208888,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1623695921
    },
    {
        "content": "<p>Somewhere I've seen that after inserting the format for the link first: <code>[|]()</code> if I then add the text: <code>[link|]()</code> now if I'll press the tab, then the cursor will shift to <code>[link](|)</code> then I can easily do -&gt; <code>[link](url)</code>. This one was easier than the normal hardcoding one.<br>\n(<code>|</code> represents the cursor.)</p>",
        "id": 1208892,
        "sender_full_name": "Akshat",
        "timestamp": 1623696317
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"17026\">Akshat (akshatdalton)</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1208892\">said</a>:</p>\n<blockquote>\n<p>Somewhere I've seen that after inserting the format for the link first: <code>[|]()</code> if I then add the text: <code>[link|]()</code> now if I'll press the tab, then the cursor will shift to <code>[link](|)</code> then I can easily do -&gt; <code>[link](url)</code>. This one was easier than the normal hardcoding one.<br>\n(<code>|</code> represents the cursor.)</p>\n</blockquote>\n<p>That's an interesting way to do it, but I think it would not be very discoverable -- I think very few users would figure out what's up with hitting tab there and get in the habit of doing it that way.</p>",
        "id": 1208895,
        "sender_full_name": "Greg Price",
        "timestamp": 1623696791
    },
    {
        "content": "<p>I personally am not a fan of popover formatting buttons, since they're pretty tricky to implement in a way that isn't annoying, and are less discoverable than always-visible buttons. Is there a reason to prefer them?</p>",
        "id": 1208981,
        "sender_full_name": "Wesley Aptekar-Cassels",
        "timestamp": 1623701737
    },
    {
        "content": "<p>We actually don't have any horizontal space in the compose box. And adding another layer of buttons on top of the existing ones at bottom will look like just a lot of icons for user to comprehend.</p>",
        "id": 1209254,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1623715958
    },
    {
        "content": "<p>I was just concerned about that, so I suggested we follow a popover type approach which is widely used and doesn't clutter our compose box with a lot of icons.</p>",
        "id": 1209257,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1623716036
    },
    {
        "content": "<p>PS great work on this!</p>",
        "id": 1209386,
        "sender_full_name": "Jore",
        "timestamp": 1623732428
    },
    {
        "content": "<blockquote>\n<p>I think it's pretty natural to start bulleted and numbered lists by formatting first, and adding text later. It could be good to have buttons for inserting those.</p>\n</blockquote>\n<p>I will simply add a button at the bottom of the compose box which opens the same formatting popover.</p>",
        "id": 1209518,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1623748478
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span> waiting to hear from you before moving firmly on this.</p>\n<p>The current idea is to show a popover of formatting buttons when user selects a range of text like discord or dropbox paper. We will also show the same popover via a button at the bottom of the compose box so that folks can start a bulleted list etc easily.</p>",
        "id": 1209519,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1623748624
    },
    {
        "content": "<p>ping.</p>",
        "id": 1212431,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1623950683
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"5140\">@Aman Agrawal (amanagr)</span> I think that popover plan is pretty reasonable, and I think addresses some of the problems we'd have with alternative implementations (e.g. persistent buttons are not very natural as the design if you have to select text for them to do something useful).</p>",
        "id": 1212439,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1623951871
    },
    {
        "content": "<p>I'd be happy to see a popover as an experiment in this direction. But just on this point:</p>\n<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1212439\">said</a>:</p>\n<blockquote>\n<p>(e.g. persistent buttons are not very natural as the design if you have to select text for them to do something useful).</p>\n</blockquote>\n<p>I don't think this is a good reason to prefer a popover.</p>\n<p>The standard way that a WYSIWYG text editor UI works, going back to word processors in the '90s, is that there's a persistent toolbar with a bunch of icons. Many of them do something usefully different if you've selected text, but they do something reasonable if you haven't, too.</p>\n<p>Here's GitHub's, for example:<br>\n<a href=\"/user_uploads/2/f2/WvckByLWSECDjKNDbhlc5Zb9/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/f2/WvckByLWSECDjKNDbhlc5Zb9/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/f2/WvckByLWSECDjKNDbhlc5Zb9/image.png\"></a></div><p>If you hit the \"bold\" icon with nothing selected, it sets up the bold markup and puts the cursor in the middle: <code>**|**</code></p>\n<p>If you hit the \"link\" icon with nothing selected, it sets up the link markup, puts the cursor in the spot for the link text, and puts a placeholder in the spot for the URL: <code>[|](url)</code></p>\n<p>Etc.</p>",
        "id": 1213876,
        "sender_full_name": "Greg Price",
        "timestamp": 1624039449
    },
    {
        "content": "<p>Yeah, that's a good point.  And there's certainly an argument for trying the non-popover version first (since it's less technically complex).</p>",
        "id": 1214343,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1624059207
    },
    {
        "content": "<p>We can add button in the compose box which opens this popover. That will solve the persistent toolbar problem.</p>",
        "id": 1214344,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1624059402
    },
    {
        "content": "<p>We can then use this popover easily in places like org description, user description etc.</p>",
        "id": 1214345,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1624059450
    },
    {
        "content": "<p>I can experiment in getting this to work for stream description too.</p>",
        "id": 1214348,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1624059641
    },
    {
        "content": "<p><a href=\"/user_uploads/2/ad/6CGuylSIMAWymAOs9OhOJHDT/Peek-2021-06-20-03-58.gif\">formatting text</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/ad/6CGuylSIMAWymAOs9OhOJHDT/Peek-2021-06-20-03-58.gif\" title=\"formatting text\"><img src=\"/user_uploads/2/ad/6CGuylSIMAWymAOs9OhOJHDT/Peek-2021-06-20-03-58.gif\"></a></div>",
        "id": 1214705,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1624141795
    },
    {
        "content": "<p>Finally made some progress on it.</p>",
        "id": 1214707,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1624141821
    },
    {
        "content": "<p>This is great! Can't wait to see it on CZO! <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 1241508,
        "sender_full_name": "Jore",
        "timestamp": 1627775391
    },
    {
        "content": "<p>Yeah, I'd like to see this too.  <span class=\"user-mention\" data-user-id=\"5140\">@Aman Agrawal (amanagr)</span> is this prototype ready to deploy here?</p>",
        "id": 1241854,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1627863237
    },
    {
        "content": "<p>Yeah, it was.</p>",
        "id": 1242026,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1627884225
    },
    {
        "content": "<p>Let me just rebase.</p>",
        "id": 1242027,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1627884266
    },
    {
        "content": "<p>I'm deploying <a href=\"https://github.com/zulip/zulip/pull/18922\">#18922</a> here, which implements this compose formatting buttons UI: There are several changes:</p>\n<ul>\n<li>Several changes, already merged, to the behavior of the toggling bold/italics with the <code>Ctrl+B/Ctrl+I</code> keyboard shortcuts.  (Previously, those just let you add the syntax).  I think we might need to do a small PR to the in-app and /help/ documentation for these keys to document the new behavior.</li>\n<li>Most importantly, fi you select text, you now get a formatting popover as shown in the screenshot above.</li>\n</ul>\n<p>Feedback is much appreciated!  It's certainly valid to discuss high-level questions like whether we want this as a popover or as persistent buttons in the UI, in addition to reporting bugs and the like.</p>",
        "id": 1261952,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1633133736
    },
    {
        "content": "<p>I guess those documentation details are these:</p>\n<p><a href=\"/user_uploads/2/39/GXT-UlBsJRXdyQEV57WCsyYA/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/39/GXT-UlBsJRXdyQEV57WCsyYA/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/39/GXT-UlBsJRXdyQEV57WCsyYA/image.png\"></a></div><p><a href=\"/user_uploads/2/f9/R45P7K3Z_yEFjTRrc-Aqchg6/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/f9/R45P7K3Z_yEFjTRrc-Aqchg6/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/f9/R45P7K3Z_yEFjTRrc-Aqchg6/image.png\"></a></div>",
        "id": 1261953,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1633133844
    },
    {
        "content": "<p>I think the in-app thing doesn't require changes, but the <a href=\"https://zulip.com/help/keyboard-shortcuts#in-the-compose-box\">/help/ section</a> should probably change to \"Toggle bold\"?</p>",
        "id": 1261954,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1633133887
    },
    {
        "content": "<p>The popup isn't very legible in dark mode, particularly on mouseover:<br>\n<a href=\"/user_uploads/2/16/czau2NR_vtTxfgST6gTb72FP/Screen-Shot-2021-10-01-at-5.38.23-PM.png\">Screen-Shot-2021-10-01-at-5.38.23-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/16/czau2NR_vtTxfgST6gTb72FP/Screen-Shot-2021-10-01-at-5.38.23-PM.png\" title=\"Screen-Shot-2021-10-01-at-5.38.23-PM.png\"><img src=\"/user_uploads/2/16/czau2NR_vtTxfgST6gTb72FP/Screen-Shot-2021-10-01-at-5.38.23-PM.png\"></a></div>",
        "id": 1261964,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1633135116
    },
    {
        "content": "<p>And <code>Cmd-B</code> doesn't toggle bold if you <em>don't</em> have text selected:</p>\n<p><code>foo</code> -&gt; <code>Cmd-B</code> -&gt; <code>bar</code> -&gt; <code>Cmd-B</code> results in:</p>\n<div class=\"codehilite\"><pre><span></span><code>foo**bar******\n</code></pre></div>",
        "id": 1261966,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1633135182
    },
    {
        "content": "<p>OK, fixing the dark mode, I got excited to use zulip-icons that I forgot about testing it.</p>",
        "id": 1261973,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633135556
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"12178\">Alex Vandiver</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1261966\">said</a>:</p>\n<blockquote>\n<p>And <code>Cmd-B</code> doesn't toggle bold if you <em>don't</em> have text selected:</p>\n<p><code>foo</code> -&gt; <code>Cmd-B</code> -&gt; <code>bar</code> -&gt; <code>Cmd-B</code> results in:</p>\n<p><div class=\"codehilite\"><pre><span></span><code>foo**bar******\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I can reproduce.  I'll admit this isn't something I'd have thought to do, and that test case does something random in GitHub's version of this too, so I'm not sure it's worth fixing if it'll add 30 lines of complexity, but it seems worth fixing if we can do so without that cost.</p>",
        "id": 1261974,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1633135679
    },
    {
        "content": "<p>Popover stays after you select text and press esc to close compose box or message edit box. I thought I fixed that one before but seems to have resurfaced.</p>",
        "id": 1261987,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633136401
    },
    {
        "content": "<p>Yeah, I am not sure what is a good solution to the no text selected problem.</p>",
        "id": 1261997,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633139721
    },
    {
        "content": "<p>I fixed the rest in the PR.</p>",
        "id": 1261998,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633139733
    },
    {
        "content": "<p>I've been finding the popup kinda annoying with my pattern of selecting the last word of text to delete when fixing typos using <code>Ctrl+Shift+Left</code>, which I apparently do a lot.  I'm not sure whether the right solution for that problem is to delay a bit before showing the popup, only show it for mouse selections, or something different.  </p>\n<p>Testing Dropbox Paper, they seem to just not display their popup at all when you select text with the keyboard, requiring mouse motion to trigger it.</p>",
        "id": 1262195,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1633314866
    },
    {
        "content": "<p>I just tried this out and the popover was sticky.  Also, I tried to use keyboard with up arrow to navigate popup, which seemed intuitive to me but failed</p>",
        "id": 1262244,
        "sender_full_name": "Steve Howell",
        "timestamp": 1633351313
    },
    {
        "content": "<p>We can disable the popup on selection via keyboard. I guess it is reasonable for keyboard heavy users to know these common shortcuts for text formatting.</p>",
        "id": 1262266,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633355749
    },
    {
        "content": "<p>Is there a reason we can't enable the up arrow?</p>",
        "id": 1262269,
        "sender_full_name": "Steve Howell",
        "timestamp": 1633356282
    },
    {
        "content": "<p>It is used for message navigation too in single line messages.</p>",
        "id": 1262270,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633356356
    },
    {
        "content": "<p>We could be intelligent about it though. So we can have keyboard navigation in the popover.</p>",
        "id": 1262271,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633356393
    },
    {
        "content": "<p>is the issue usability?  or just makes docs hard?</p>",
        "id": 1262272,
        "sender_full_name": "Steve Howell",
        "timestamp": 1633356411
    },
    {
        "content": "<p>How about using tab for it?</p>",
        "id": 1262273,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633356462
    },
    {
        "content": "<p>up arrow feels more guessable</p>",
        "id": 1262274,
        "sender_full_name": "Steve Howell",
        "timestamp": 1633356477
    },
    {
        "content": "<p>fwiw my bias is that I never use up arrow in compose box</p>",
        "id": 1262275,
        "sender_full_name": "Steve Howell",
        "timestamp": 1633356500
    },
    {
        "content": "<p>I don't actually see how it couldn't be up arrow when our code presumably knows popup is open???</p>",
        "id": 1262276,
        "sender_full_name": "Steve Howell",
        "timestamp": 1633356549
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"5140\">Aman Agrawal (amanagr)</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1262271\">said</a>:</p>\n<blockquote>\n<p>We could be intelligent about it though. So we can have keyboard navigation in the popover.</p>\n</blockquote>\n<p>Yeah, I said we could do that.</p>",
        "id": 1262277,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633356651
    },
    {
        "content": "<p>Disabling the popover for keyboard selection seems reasonable to me.</p>",
        "id": 1262291,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1633363911
    },
    {
        "content": "<p>I think if you're using the keyboard, you should just be using <code>Ctrl+B</code> for these, rather than trying to navigate to the popup.  So that argues pretty strongly for figuring out how to have it only show after a mouse selection.</p>",
        "id": 1262600,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1633378986
    },
    {
        "content": "<p>Okay, will do.</p>",
        "id": 1262749,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633388629
    },
    {
        "content": "<p>This is harder than I thought. I am using <code>select</code> event to trigger that popover. There is no real way to tell if a <code>select</code>  event was fired by a keyboard or mouse in textarea.</p>\n<p>We can use a combination of <code>mousedown</code> and <code>mouseup</code> events too but it is too slow to trigger the event for some reason. There appears to be a 2s lag before the popover actually shows up.</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code>    <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"s2\">\"body\"</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"s2\">\"mousedown\"</span><span class=\"p\">,</span> <span class=\"s2\">\".new_message_textarea, .message_edit_content\"</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"s2\">\"body\"</span><span class=\"p\">).</span><span class=\"nx\">one</span><span class=\"p\">(</span><span class=\"s2\">\"mouseup\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span><span class=\"nx\">popover</span><span class=\"p\">.</span><span class=\"nx\">show</span><span class=\"p\">()})</span>\n</code></pre></div>\n<p>Digging more into this...</p>",
        "id": 1262944,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633433666
    },
    {
        "content": "<p>This appears to work well</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code>    <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"s2\">\"body\"</span><span class=\"p\">).</span><span class=\"nx\">on</span><span class=\"p\">(</span><span class=\"s2\">\"mousedown\"</span><span class=\"p\">,</span> <span class=\"s2\">\".new_message_textarea, .message_edit_content\"</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n        <span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"s2\">\"body\"</span><span class=\"p\">).</span><span class=\"nx\">one</span><span class=\"p\">(</span><span class=\"s2\">\"select\"</span><span class=\"p\">,</span> <span class=\"s2\">\".new_message_textarea, .message_edit_content\"</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">)</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n</code></pre></div>",
        "id": 1262947,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633434649
    },
    {
        "content": "<p>I just noticed another bug here -- if I select some text in the compose box, then press ESC, the popover stays even through the compose box closes.</p>",
        "id": 1263046,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1633456381
    },
    {
        "content": "<p>Yeah, I mentioned it and is already fixed in the PR.</p>",
        "id": 1263126,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633472461
    },
    {
        "content": "<p>Oh, sorry!  I missed that you'd caught that already.</p>",
        "id": 1263134,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1633472683
    },
    {
        "content": "<p>No problem, thanks for reporting anyway.</p>",
        "id": 1263139,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1633472951
    },
    {
        "content": "<p>We've had the formatting buttons up on CZO for some time -- how do folks feel about them at this point? Are people using them?</p>\n<p>I'm not sure I like having the buttons show up on highlight... I wonder if it's worth trying putting them in the bottom row instead?</p>",
        "id": 1266693,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1634230830
    },
    {
        "content": "<p>(By the way, Discord uses the highlighting approach, and Slack has a bottom row of buttons, if anyone wants to play around with how the two options feel in a chat app once the kinks have been worked out.)</p>",
        "id": 1266696,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1634231041
    },
    {
        "content": "<p>The fact that they show up when selecting with the keyboard has fairly regularly been annoying. Basically if the message I'm typing is more than a line long, then it's likely that the popup obscures some of the other text.</p>\n<p>I see there was discussion above where <span class=\"user-mention\" data-user-id=\"5140\">@Aman Agrawal (amanagr)</span> found what seemed to be a solution for making that not happen. What's the status of that fix? That would be great to have deployed, to get a clearer sense of how the UI feels with that fixed.</p>",
        "id": 1266726,
        "sender_full_name": "Greg Price",
        "timestamp": 1634236551
    },
    {
        "content": "<p>I think there's a bug where the formatting buttons don't show up in the right place at the bottom of a long message (one that's scrolled down a ways). I can get them to be too low when I highlight a few lines up:</p>\n<p><a href=\"/user_uploads/2/e/43fF5lDGSQDUBj1sQScclpRq/Screen-Shot-2021-10-18-at-1.33.20-PM.png\">Screen-Shot-2021-10-18-at-1.33.20-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/e/43fF5lDGSQDUBj1sQScclpRq/Screen-Shot-2021-10-18-at-1.33.20-PM.png\" title=\"Screen-Shot-2021-10-18-at-1.33.20-PM.png\"><img src=\"/user_uploads/2/e/43fF5lDGSQDUBj1sQScclpRq/Screen-Shot-2021-10-18-at-1.33.20-PM.png\"></a></div><p>And when I highlight in the bottom couple of rows , they don't appear at all:</p>\n<p><a href=\"/user_uploads/2/6e/v2NrrEbEcbDV2gpWyRtjMgW9/Screen-Shot-2021-10-18-at-1.33.32-PM.png\">Screen-Shot-2021-10-18-at-1.33.32-PM.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/6e/v2NrrEbEcbDV2gpWyRtjMgW9/Screen-Shot-2021-10-18-at-1.33.32-PM.png\" title=\"Screen-Shot-2021-10-18-at-1.33.32-PM.png\"><img src=\"/user_uploads/2/6e/v2NrrEbEcbDV2gpWyRtjMgW9/Screen-Shot-2021-10-18-at-1.33.32-PM.png\"></a></div><p>That said, it may not be worth fixing if we decide to move them into the area under the compose box in any case.</p>",
        "id": 1268131,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1634589370
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"2187\">Greg Price</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1266726\">said</a>:</p>\n<blockquote>\n<p>I see there was discussion above where <span class=\"user-mention silent\" data-user-id=\"5140\">Aman Agrawal (amanagr)</span> found what seemed to be a solution for making that not happen. What's the status of that fix? That would be great to have deployed, to get a clearer sense of how the UI feels with that fixed.</p>\n</blockquote>\n<p>That improved version was deployed to <a href=\"http://chat.zulip.org\">chat.zulip.org</a> last night.  Seems to be working for me.</p>",
        "id": 1268176,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1634594067
    },
    {
        "content": "<p>That said ... what do we see as the advantages of the popup model over having it be just permanent formatting buttons in the compose box?  I feel like the popup model has all this extra complexity around placement of the popover (to not block content) and also is less discoverable than having B/I/etc. icons potentially next to the emoji/video call ones.</p>",
        "id": 1268179,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1634594152
    },
    {
        "content": "<p>I think the main advantage is to not have the buttons cluttering the UI when they are not useful. But I'd be interested in seeing a version where they are under the compose box.</p>",
        "id": 1268203,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1634595652
    },
    {
        "content": "<p>Yeah, seems worth trying that out before doing the investment to fix the remaining positioning issues.  Where do you think they would go if fixed in the compose box?</p>",
        "id": 1268205,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1634595735
    },
    {
        "content": "<p>I might try to the left of the other buttons under the compose box, but we may need to start grouping buttons to avoid it feeling overwhelming. Alternately, we could add a brand new row above the compose box.</p>\n<p>I think we already have a lot of ideas for things we want to put to the right of the stream &gt; topic, so I wouldn't want to use that space.</p>",
        "id": 1268209,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1634595974
    },
    {
        "content": "<p>For reference, Slack's compose box:</p>\n<p><a href=\"/user_uploads/2/c7/5WgXjx6_2GzzDptQMNFjoy1L/Screen-Shot-2021-10-18-at-3.23.56-PM.png\">Screen-Shot-2021-10-18-at-3.23.56-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/c7/5WgXjx6_2GzzDptQMNFjoy1L/Screen-Shot-2021-10-18-at-3.23.56-PM.png\" title=\"Screen-Shot-2021-10-18-at-3.23.56-PM.png\"><img src=\"/user_uploads/2/c7/5WgXjx6_2GzzDptQMNFjoy1L/Screen-Shot-2021-10-18-at-3.23.56-PM.png\"></a></div>",
        "id": 1268212,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1634596027
    },
    {
        "content": "<p>We may have to add a row above (or perhaps below?) the box. We only have 3 buttons now, but I think we are imagining adding a bunch more, roughly along the lines of what Sack has in the screenshot above.</p>",
        "id": 1268214,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1634596214
    },
    {
        "content": "<p>The main downside of putting them at the far left is that most naturally it'll make using <code>tab</code> to navigate to the buttons for uploading a file (etc.) without using the mouse awkward.  (Currently, we kinda have the most common things sorted to the left so that <code>Tab Tab</code> gets you to uploading a file)</p>",
        "id": 1268236,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1634598014
    },
    {
        "content": "<p>(We also do something a bit weird of having <code>Send</code> be the first thing and then iterating through widgets left-to-right).</p>",
        "id": 1268241,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1634598075
    },
    {
        "content": "<p>I have been appreciating the update that makes these buttons not pop up when I'm selecting with the keyboard!</p>\n<p>I want to mention that there seems to be a bug where that's not 100% reliable. I just a minute ago had the buttons pop up when I was composing a message entirely with the keyboard.</p>\n<p>The mouse is up on my desk and my hands were on my keyboard down in my lap under the desk; there's no trackpad in sight. So I definitely didn't just accidentally make a mouse selection, or something like that.</p>\n<p>Haven't yet seen it a second time, despite some playing with it to try to reproduce.</p>",
        "id": 1269301,
        "sender_full_name": "Greg Price",
        "timestamp": 1634774172
    },
    {
        "content": "<p>Slack has a nice way to hide the formatting buttons, which is good. I feel like some users don't use formatting buttons at all. It should be good for them to be able to hide them and reduce icon clutter in the compose box.</p>",
        "id": 1276558,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636046633
    },
    {
        "content": "<p>Ah yeah, the Slack way of doing it feels quite nice. You can click on the Aa button in the screenshot above to hide/unhide the formatting buttons. If you hide them, the result is:</p>\n<p><a href=\"/user_uploads/2/9e/adhZcpqV4TQ4xKr9yAd4OHpR/Screen-Shot-2021-11-04-at-10.35.11-AM.png\">Screen-Shot-2021-11-04-at-10.35.11-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/9e/adhZcpqV4TQ4xKr9yAd4OHpR/Screen-Shot-2021-11-04-at-10.35.11-AM.png\" title=\"Screen-Shot-2021-11-04-at-10.35.11-AM.png\"><img src=\"/user_uploads/2/9e/adhZcpqV4TQ4xKr9yAd4OHpR/Screen-Shot-2021-11-04-at-10.35.11-AM.png\"></a></div>",
        "id": 1276567,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1636047326
    },
    {
        "content": "<p>Should we plan a little redesign of the bottom part of our compose box? Seems pretty basic to me right now.</p>",
        "id": 1276570,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636047407
    },
    {
        "content": "<p>The icons at bottom could use more love.</p>",
        "id": 1276571,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636047421
    },
    {
        "content": "<p><a href=\"/user_uploads/2/86/PV1oMmAecedtXWqJJ3eYauYE/Screenshot-2021-11-04-at-11.09.24-PM.png\">GMAIL</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/86/PV1oMmAecedtXWqJJ3eYauYE/Screenshot-2021-11-04-at-11.09.24-PM.png\" title=\"GMAIL\"><img src=\"/user_uploads/2/86/PV1oMmAecedtXWqJJ3eYauYE/Screenshot-2021-11-04-at-11.09.24-PM.png\"></a></div>",
        "id": 1276579,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636047579
    },
    {
        "content": "<p>What Gmail does is like the middle ground between Slack and Discord. They show a popup at bottom of compose area on clicking the formatting button.</p>",
        "id": 1276582,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636047647
    },
    {
        "content": "<p>This is actually a good long-term solution for us. How do folks feel about this?</p>",
        "id": 1276583,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636047695
    },
    {
        "content": "<p>The formatting buttons are also more discoverable this way.</p>",
        "id": 1276585,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636047743
    },
    {
        "content": "<p>(Not more than just placing the icons at bottom)</p>",
        "id": 1276591,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636047906
    },
    {
        "content": "<p>Thoughts on this?</p>",
        "id": 1277403,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636167434
    },
    {
        "content": "<p>I agree that we should think through the overall plan. We might eventually want pretty much all the buttons that Slack has, plus we already have a few that they don't.</p>\n<p>I think Gmail is designed for having a <em>lot</em> of buttons in a partial-width area. They basically have two rows of buttons, with one of them hidable. (It's interesting that the popup is open when you first start composing.) Gmail also haves a lot more heigh by default that our compose box.</p>",
        "id": 1277410,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1636171303
    },
    {
        "content": "<p>If we want to keep all the words we have below the compose box (\"Help\", \"Drafts\", and \"Press Enter to send\" and the \"Send\" button), I'm pretty sure we'll need some kind of two-row solution. E.g. take a look at Russian at a pretty reasonable window width. There's not that much space left.</p>\n<p><a href=\"/user_uploads/2/f4/Z62wM-4E05gq-oWhGdzDN7VZ/Screen-Shot-2021-11-05-at-9.06.24-PM.png\">Screen-Shot-2021-11-05-at-9.06.24-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/f4/Z62wM-4E05gq-oWhGdzDN7VZ/Screen-Shot-2021-11-05-at-9.06.24-PM.png\" title=\"Screen-Shot-2021-11-05-at-9.06.24-PM.png\"><img src=\"/user_uploads/2/f4/Z62wM-4E05gq-oWhGdzDN7VZ/Screen-Shot-2021-11-05-at-9.06.24-PM.png\"></a></div>",
        "id": 1277412,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1636171603
    },
    {
        "content": "<p>A hide / show for button for the second row of buttons is what we need. Do we want to go for a popover like Gmail or a complete second row?</p>",
        "id": 1277421,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636176630
    },
    {
        "content": "<p>What is the tradeoff between the two options? Is it that the popover looks good if it's OK to cover up part of the compose box,  whereas a complete row works better if covering a line of the compose box doesn't leave enough space? If that's accurate, we'd probably prefer to steal a line from the space from the messages above rather than from the compose box?</p>",
        "id": 1277872,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1636351385
    },
    {
        "content": "<p>Okay, I guess we can go for a toggle second row for compose box then, given that the popover will hide part of the compose box which user maybe trying to apply formatting to.</p>",
        "id": 1277911,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636363821
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1268212\">said</a>:</p>\n<blockquote>\n<p>For reference, Slack's compose box:</p>\n<p><a href=\"/user_uploads/2/c7/5WgXjx6_2GzzDptQMNFjoy1L/Screen-Shot-2021-10-18-at-3.23.56-PM.png\">Screen-Shot-2021-10-18-at-3.23.56-PM.png</a></p>\n</blockquote>\n<p>is a good solution like this</p>",
        "id": 1277926,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1636365496
    },
    {
        "content": "<p>I would really prefer to not have a dynamic additional row if we can avoid it.  That sort of design has a lot of complexity, and I don't think it'd actually feel that nice to use.</p>\n<p>We can move \"Enter sends\" to a <code>\\vdots</code> menu if we want the space back; I'm also not sure that \"Drafts\" and \"Help\" absolutely have to be there; they're things we've gone back and forth on.  (E.g. we just added \"Drafts\" to the left sidebar; we might just remove it from the compose box).</p>",
        "id": 1279434,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1636592681
    },
    {
        "content": "<p>I think the GitHub reply design is good inspiration:</p>\n<p><a href=\"/user_uploads/2/4a/1rlGrGFzQYW6oiMc9rKPTDE3/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/4a/1rlGrGFzQYW6oiMc9rKPTDE3/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/4a/1rlGrGFzQYW6oiMc9rKPTDE3/image.png\"></a></div><p>They have a bunch of buttons for all the formatting features, and I don't think it'd be better for some of them be hidden.</p>",
        "id": 1279435,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1636592743
    },
    {
        "content": "<p>Okay, this directions looks viable to me since we have a clear plan to gain the space for more buttons as we add them if needed. I am also thinking of adding some padding around icons and increase their size a bit so they look cleaner.</p>",
        "id": 1279528,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636641053
    },
    {
        "content": "<p><a href=\"/user_uploads/2/46/2vSn_KouY_vpkgRRzmPt8v6Y/Screenshot-2021-11-11-at-11.43.50-PM.png\">new</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/46/2vSn_KouY_vpkgRRzmPt8v6Y/Screenshot-2021-11-11-at-11.43.50-PM.png\" title=\"new\"><img src=\"/user_uploads/2/46/2vSn_KouY_vpkgRRzmPt8v6Y/Screenshot-2021-11-11-at-11.43.50-PM.png\"></a></div>",
        "id": 1279600,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636654447
    },
    {
        "content": "<p><a href=\"/user_uploads/2/c3/ySICRuvk_ZQAFe9DKuVW2A77/Screenshot-2021-11-11-at-11.44.27-PM.png\">current</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/c3/ySICRuvk_ZQAFe9DKuVW2A77/Screenshot-2021-11-11-at-11.44.27-PM.png\" title=\"current\"><img src=\"/user_uploads/2/c3/ySICRuvk_ZQAFe9DKuVW2A77/Screenshot-2021-11-11-at-11.44.27-PM.png\"></a></div>",
        "id": 1279601,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636654473
    },
    {
        "content": "<p>I will also try to fix the mobile view compose box look a bit. It is not broken but not in the best state.</p>",
        "id": 1279603,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636654826
    },
    {
        "content": "<p>Opened <a href=\"https://github.com/zulip/zulip/pull/20235\">#20235</a>.</p>",
        "id": 1279723,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636696260
    },
    {
        "content": "<p>Nice! We should probably organize the buttons into sections so that it feels easier to find what you need. Maybe just a separator to the left of <code>B</code>, to separate out the formatting buttons? And perhaps another separator before the <code>Help</code> link?</p>",
        "id": 1279859,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1636743757
    },
    {
        "content": "<p>Yeah, I had the same thought that this would benefit from separators.</p>",
        "id": 1280195,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1636762822
    },
    {
        "content": "<p>Okay.</p>",
        "id": 1280300,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636772710
    },
    {
        "content": "<p><a href=\"/user_uploads/2/3b/K1xlr4yaj9GTtEhBSirbOqC9/Screenshot-2021-11-13-at-10.18.20-AM.png\">Screenshot-2021-11-13-at-10.18.20-AM.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/3b/K1xlr4yaj9GTtEhBSirbOqC9/Screenshot-2021-11-13-at-10.18.20-AM.png\" title=\"Screenshot-2021-11-13-at-10.18.20-AM.png\"><img src=\"/user_uploads/2/3b/K1xlr4yaj9GTtEhBSirbOqC9/Screenshot-2021-11-13-at-10.18.20-AM.png\"></a></div><p>Added some extra space as divider.</p>",
        "id": 1280320,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636778973
    },
    {
        "content": "<p>Hm, could we also try it with a light vertical line?</p>",
        "id": 1280339,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1636789687
    },
    {
        "content": "<p>Separately, do the formatting buttons look bigger than the rest of the icons?</p>",
        "id": 1280340,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1636789714
    },
    {
        "content": "<p><a href=\"/user_uploads/2/b0/zeyfKloHD-ekV-WUeHdbq-Qk/Screenshot-2021-11-13-at-5.38.33-PM.png\">Screenshot-2021-11-13-at-5.38.33-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/b0/zeyfKloHD-ekV-WUeHdbq-Qk/Screenshot-2021-11-13-at-5.38.33-PM.png\" title=\"Screenshot-2021-11-13-at-5.38.33-PM.png\"><img src=\"/user_uploads/2/b0/zeyfKloHD-ekV-WUeHdbq-Qk/Screenshot-2021-11-13-at-5.38.33-PM.png\"></a></div>",
        "id": 1280441,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636805337
    },
    {
        "content": "<p>I'm test-deploying that last variant so folks can play with it.</p>",
        "id": 1281486,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1636945484
    },
    {
        "content": "<p><a href=\"/user_uploads/2/32/A51ciVmUbqJGDVfUYz8l3r8D/Peek-2021-06-20-03-58.gif\">Peek-2021-06-20-03-58.gif</a> THis features there must be in my opinion</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/32/A51ciVmUbqJGDVfUYz8l3r8D/Peek-2021-06-20-03-58.gif\" title=\"Peek-2021-06-20-03-58.gif\"><img src=\"/user_uploads/2/32/A51ciVmUbqJGDVfUYz8l3r8D/Peek-2021-06-20-03-58.gif\"></a></div>",
        "id": 1281626,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1636964221
    },
    {
        "content": "<p>We already have the 3 buttons in the GIF working similarly.</p>",
        "id": 1281631,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1636964968
    },
    {
        "content": "<p>I mean when you select the text that comes out of the popup</p>",
        "id": 1281643,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1636971455
    },
    {
        "content": "<p><a href=\"/user_uploads/2/6c/AENoqu42AMWrFsfGFUWvl4Uf/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/6c/AENoqu42AMWrFsfGFUWvl4Uf/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/6c/AENoqu42AMWrFsfGFUWvl4Uf/image.png\"></a></div>",
        "id": 1281644,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1636971458
    },
    {
        "content": "<p>Hm, the left separator looks thicker than the right one. I don't think we want that?</p>",
        "id": 1281874,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637002492
    },
    {
        "content": "<p>I also noticed that \"Press enter to send\" and the \"Send\" button are not vertically aligned with the rest of the buttons. Zoomed in:</p>\n<p><a href=\"/user_uploads/2/66/eQRJjBxD4VLPWIyXOKFppvlE/Screen-Shot-2021-11-15-at-10.56.04-AM.png\">Screen-Shot-2021-11-15-at-10.56.04-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/66/eQRJjBxD4VLPWIyXOKFppvlE/Screen-Shot-2021-11-15-at-10.56.04-AM.png\" title=\"Screen-Shot-2021-11-15-at-10.56.04-AM.png\"><img src=\"/user_uploads/2/66/eQRJjBxD4VLPWIyXOKFppvlE/Screen-Shot-2021-11-15-at-10.56.04-AM.png\"></a></div>",
        "id": 1281877,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637002651
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1281874\">said</a>:</p>\n<blockquote>\n<p>Hm, the left separator looks thicker than the right one. I don't think we want that?</p>\n</blockquote>\n<p>I don't see anything different between them.</p>",
        "id": 1282003,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637009935
    },
    {
        "content": "<p>I think it's pretty visible on this screenshot: <a href=\"/user_uploads/2/e3/xH963xJlipG1V-IkO3aESU0W/Screen-Shot-2021-11-15-at-4.08.53-PM.png\">Screen-Shot-2021-11-15-at-4.08.53-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/e3/xH963xJlipG1V-IkO3aESU0W/Screen-Shot-2021-11-15-at-4.08.53-PM.png\" title=\"Screen-Shot-2021-11-15-at-4.08.53-PM.png\"><img src=\"/user_uploads/2/e3/xH963xJlipG1V-IkO3aESU0W/Screen-Shot-2021-11-15-at-4.08.53-PM.png\"></a></div>",
        "id": 1282155,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637021400
    },
    {
        "content": "<p>Oh! It is one of the 110% zoom UI issues.</p>",
        "id": 1282227,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637030722
    },
    {
        "content": "<blockquote>\n<p>I also noticed that \"Press enter to send\" and the \"Send\" button are not vertically aligned with the rest of the buttons.</p>\n</blockquote>\n<p>I can vertically align them, I thought it was an intentional UI decision to have them on the upper part.</p>",
        "id": 1282231,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637030850
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"5140\">Aman Agrawal (amanagr)</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1282231\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>I also noticed that \"Press enter to send\" and the \"Send\" button are not vertically aligned with the rest of the buttons.</p>\n</blockquote>\n<p>I can vertically align them, I thought it was an intentional UI decision to have them on the upper part.</p>\n</blockquote>\n<p>Oh, hm, I dunno -- not having them aligned looks funny to me.</p>",
        "id": 1282336,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637048146
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1281874\">said</a>:</p>\n<blockquote>\n<p>Hm, the left separator looks thicker than the right one. I don't think we want that?</p>\n</blockquote>\n<p>talk with me?</p>",
        "id": 1282362,
        "sender_full_name": "Andrea Soc",
        "timestamp": 1637052946
    },
    {
        "content": "<p>She was just pointing out a bug.</p>",
        "id": 1282461,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637081204
    },
    {
        "content": "<p><a href=\"/user_uploads/2/37/sqHL5rEgPF7vdcPi482WQ-CU/Screenshot-2021-11-16-at-11.23.57-PM.png\">space as divider</a> <br>\n<a href=\"/user_uploads/2/e/V4e7NZ6C-_tYqPxjmTm3PHtA/Screenshot-2021-11-16-at-11.23.52-PM.png\">line dividers</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/37/sqHL5rEgPF7vdcPi482WQ-CU/Screenshot-2021-11-16-at-11.23.57-PM.png\" title=\"space as divider\"><img src=\"/user_uploads/2/37/sqHL5rEgPF7vdcPi482WQ-CU/Screenshot-2021-11-16-at-11.23.57-PM.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/e/V4e7NZ6C-_tYqPxjmTm3PHtA/Screenshot-2021-11-16-at-11.23.52-PM.png\" title=\"line dividers\"><img src=\"/user_uploads/2/e/V4e7NZ6C-_tYqPxjmTm3PHtA/Screenshot-2021-11-16-at-11.23.52-PM.png\"></a></div>",
        "id": 1282480,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637085274
    },
    {
        "content": "<p>Does space works as a good enough divider?</p>",
        "id": 1282481,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637085309
    },
    {
        "content": "<p>I think that's more consistent with our UI than actually having a divider which is consistent with navbar.</p>",
        "id": 1282482,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637085353
    },
    {
        "content": "<p>Updated the PR by fixing the divider issues, send button alignment and extra emoji icon.</p>",
        "id": 1282485,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637086096
    },
    {
        "content": "<p>Hm, I prefer the navbar dividers.</p>",
        "id": 1282633,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637103284
    },
    {
        "content": "<p>Yeah,I agree that the navbar-style dividers look better.</p>",
        "id": 1282698,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637107833
    },
    {
        "content": "<p>Redeploying the revised branch, which seems to use those.</p>",
        "id": 1282700,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637107880
    },
    {
        "content": "<p>Okay.</p>",
        "id": 1282844,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637123782
    },
    {
        "content": "<p>Pushed to fix colour in day mode.</p>",
        "id": 1282846,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637124432
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1280340\">said</a>:</p>\n<blockquote>\n<p>Separately, do the formatting buttons look bigger than the rest of the icons?</p>\n</blockquote>\n<p>I think this one still needs to be fixed?</p>",
        "id": 1283379,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637183446
    },
    {
        "content": "<p>I'm liking the UX better than the hover option we had earlier. What do other folks think?</p>",
        "id": 1283380,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637183466
    },
    {
        "content": "<p>Yeah, I agree this feels like a nicer experience than the hover version.</p>\n<p>(Redeploying the latest branch, BTW).</p>",
        "id": 1283596,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637200299
    },
    {
        "content": "<p>One other thing that I want to flag: I feel like there's a bunch of dead space below the icons at the bottom of the compose box, which I don't recall us ever intentionally adding, so it's probably a bug.  Should we remove it?  Here's a screenshot of what we'd have if we removed the two copies of 8px of bottom padding from that region:</p>\n<p><a href=\"/user_uploads/2/42/hNRGARYug2mG2BiP2f6wzslu/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/42/hNRGARYug2mG2BiP2f6wzslu/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/42/hNRGARYug2mG2BiP2f6wzslu/image.png\"></a></div><p>I think the space allocated to the controls row looks good there, but it the vertical centering is messed up (Especially for the \"Send\" button).</p>",
        "id": 1283598,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637200538
    },
    {
        "content": "<p>The vertical alignment of our bottom row is quite messy, and we should fix it. These should all be aligned to the same baseline:</p>\n<ul>\n<li>“Subscribe to more streams” in the left sidebar</li>\n<li>The icons in the compose box</li>\n<li>The “Help” link in the compose box</li>\n<li>“Press Enter to Send” and “Send” in the compose box</li>\n<li>The message buttons when the compose box is collapsed</li>\n<li>“Invite more users” in the right sidebar</li>\n<li>The keyboard shortcuts icon in the right sidebar.</li>\n</ul>",
        "id": 1283603,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1637201014
    },
    {
        "content": "<p>Agreed.  And I think we want that baseline to match the current baseline in the left sidebar, or something like it, not the very high baseline currently present in the compose box.</p>",
        "id": 1283605,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637201143
    },
    {
        "content": "<blockquote>\n<p>Separately, do the formatting buttons look bigger than the rest of the icons?</p>\n</blockquote>\n<p>I did reduce their size further. <a href=\"/user_uploads/2/8c/T_3F8ZegL9b79rv40zusm2Dn/Screenshot-2021-11-18-at-2.56.05-PM.png\">Screenshot-2021-11-18-at-2.56.05-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/8c/T_3F8ZegL9b79rv40zusm2Dn/Screenshot-2021-11-18-at-2.56.05-PM.png\" title=\"Screenshot-2021-11-18-at-2.56.05-PM.png\"><img src=\"/user_uploads/2/8c/T_3F8ZegL9b79rv40zusm2Dn/Screenshot-2021-11-18-at-2.56.05-PM.png\"></a></div>",
        "id": 1283656,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637227659
    },
    {
        "content": "<p><a href=\"/user_uploads/2/cd/7TMCzcsakOX1TB7b3SGMWgpR/Screenshot-2021-11-18-at-9.29.39-PM.png\">Screenshot-2021-11-18-at-9.29.39-PM.png</a><br>\nThe ideal height would be just above the link preview box shown by browsers so that they don't cover our links. A new user may miss our compose box completely if the cursor is on a topic link on narrow widths.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/cd/7TMCzcsakOX1TB7b3SGMWgpR/Screenshot-2021-11-18-at-9.29.39-PM.png\" title=\"Screenshot-2021-11-18-at-9.29.39-PM.png\"><img src=\"/user_uploads/2/cd/7TMCzcsakOX1TB7b3SGMWgpR/Screenshot-2021-11-18-at-9.29.39-PM.png\"></a></div>",
        "id": 1283702,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637251202
    },
    {
        "content": "<p>I used to think that was a important constraint, but I no longer do.  I think it's OK as long as you can clearly see that <em>something</em> is being occluded by the URL display; it's not important that you be able to actually see the buttons in such a state.</p>",
        "id": 1283853,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637265801
    },
    {
        "content": "<p>In any case, I think we should do the work to have these all aligned with each other and merge that, and then it'd be very easy to have a conversation where one just varies the amount of bottom-of-page padding (We could make an explicit empty element for that purpose, I suppose).</p>",
        "id": 1283855,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637265930
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"5140\">Aman Agrawal (amanagr)</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1283656\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>Separately, do the formatting buttons look bigger than the rest of the icons?</p>\n</blockquote>\n<p>I did reduce their size further. <a href=\"/user_uploads/2/8c/T_3F8ZegL9b79rv40zusm2Dn/Screenshot-2021-11-18-at-2.56.05-PM.png\">Screenshot-2021-11-18-at-2.56.05-PM.png</a></p>\n</blockquote>\n<p>Ah, hm, I think it's not about the size at this point, but the style of the formatting buttons doesn't match the style of the buttons to the left. Could we try using the Font Awesome versions of these icons instead?</p>",
        "id": 1283891,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637270999
    },
    {
        "content": "<p>I filed <a href=\"https://github.com/zulip/zulip/pull/20302\">#20302</a> for extending the set of buttons. Discussion here is appreciated; it was just easiest to put together a concrete proposal in GitHub, which I'm happy to edit if folks have other ideas.</p>",
        "id": 1283902,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637280648
    },
    {
        "content": "<p>Yeah, I think the issue with those buttons is indeed that we should be using font-awesome; we only had a desire for different icons in the context of the popover style.</p>",
        "id": 1283930,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637284876
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1283902\">said</a>:</p>\n<blockquote>\n<p>I filed <a href=\"https://github.com/zulip/zulip/pull/20302\">#20302</a> for extending the set of buttons. Discussion here is appreciated; it was just easiest to put together a concrete proposal in GitHub, which I'm happy to edit if folks have other ideas.</p>\n</blockquote>\n<p>Also filed <a href=\"https://github.com/zulip/zulip/pull/20303\">#20303</a>, <a href=\"https://github.com/zulip/zulip/pull/20304\">#20304</a>, and <a href=\"https://github.com/zulip/zulip/pull/20305\">#20305</a> as continuations.</p>",
        "id": 1283969,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637287441
    },
    {
        "content": "<p>We can't actually use fontawesome 4.7 icons right?</p>",
        "id": 1283971,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637288259
    },
    {
        "content": "<p>Oh! I was under the impression that we can only use upto v3 for some reason.</p>",
        "id": 1283972,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637288357
    },
    {
        "content": "<blockquote>\n<p>I used to think that was a important constraint, but I no longer do. I think it's OK as long as you can clearly see that something is being occluded by the URL display; it's not important that you be able to actually see the buttons in such a state.</p>\n</blockquote>\n<p>Other chat apps do follow this constraint. Atleast for the compose box.</p>",
        "id": 1283973,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637288933
    },
    {
        "content": "<p><a href=\"/user_uploads/2/1e/8pXh4QdcbXFJ8Qj1lRF-xISr/Screenshot-2021-11-19-at-9.41.02-AM.png\">Screenshot-2021-11-19-at-9.41.02-AM.png</a> <a href=\"/user_uploads/2/c3/16SVVuQL_fbuxQ5jycsPfIIe/Screenshot-2021-11-19-at-9.56.15-AM.png\">Screenshot-2021-11-19-at-9.56.15-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/1e/8pXh4QdcbXFJ8Qj1lRF-xISr/Screenshot-2021-11-19-at-9.41.02-AM.png\" title=\"Screenshot-2021-11-19-at-9.41.02-AM.png\"><img src=\"/user_uploads/2/1e/8pXh4QdcbXFJ8Qj1lRF-xISr/Screenshot-2021-11-19-at-9.41.02-AM.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/c3/16SVVuQL_fbuxQ5jycsPfIIe/Screenshot-2021-11-19-at-9.56.15-AM.png\" title=\"Screenshot-2021-11-19-at-9.56.15-AM.png\"><img src=\"/user_uploads/2/c3/16SVVuQL_fbuxQ5jycsPfIIe/Screenshot-2021-11-19-at-9.56.15-AM.png\"></a></div>",
        "id": 1283983,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637296048
    },
    {
        "content": "<p>Added 0.5px more at bottom to the <code>Subscribe to..</code> in the above screenshot.</p>",
        "id": 1283986,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637296274
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"5140\">Aman Agrawal (amanagr)</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1283972\">said</a>:</p>\n<blockquote>\n<p>Oh! I was under the impression that we can only use upto v3 for some reason.</p>\n</blockquote>\n<p>Nope, we use 4.7. :)</p>",
        "id": 1283993,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637300031
    },
    {
        "content": "<p><a href=\"/user_uploads/2/ec/88X6b1dGyAPo5QW6zeXUtgtu/Screenshot-2021-11-19-at-11.35.34-AM.png\">Screenshot-2021-11-19-at-11.35.34-AM.png</a> <br>\nLight dividers to match the navbar dividers?</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/ec/88X6b1dGyAPo5QW6zeXUtgtu/Screenshot-2021-11-19-at-11.35.34-AM.png\" title=\"Screenshot-2021-11-19-at-11.35.34-AM.png\"><img src=\"/user_uploads/2/ec/88X6b1dGyAPo5QW6zeXUtgtu/Screenshot-2021-11-19-at-11.35.34-AM.png\"></a></div>",
        "id": 1283999,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637301962
    },
    {
        "content": "<p>Yeah, I think that makes sense.  What do folks think about the spacing? It feels kind of cramped to me.</p>",
        "id": 1284013,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637305229
    },
    {
        "content": "<p><a href=\"/user_uploads/2/90/KTo-smvgeLabnYyGNxFTvIjj/Screenshot-2021-11-19-at-12.56.17-PM.png\">Screenshot-2021-11-19-at-12.56.17-PM.png</a> <br>\nThis is due to increased font weight of the formatting icons. Added some margin.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/90/KTo-smvgeLabnYyGNxFTvIjj/Screenshot-2021-11-19-at-12.56.17-PM.png\" title=\"Screenshot-2021-11-19-at-12.56.17-PM.png\"><img src=\"/user_uploads/2/90/KTo-smvgeLabnYyGNxFTvIjj/Screenshot-2021-11-19-at-12.56.17-PM.png\"></a></div>",
        "id": 1284019,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637306808
    },
    {
        "content": "<p>I've deployed this pull request.</p>",
        "id": 1284436,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637365162
    },
    {
        "content": "<p>Thoughts on merging <a href=\"https://github.com/zulip/zulip/pull/20235\">#20235</a> so that I can get unblocked on send later PR?</p>",
        "id": 1285511,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637634429
    },
    {
        "content": "<p>Good idea; I think it's ready for an actual code review.</p>",
        "id": 1285513,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637634543
    },
    {
        "content": "<p>Any idea why the two dividers look different on my display?</p>\n<p><a href=\"/user_uploads/2/d8/jSzxCBnDQo9uocrSB_gHRkgK/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/d8/jSzxCBnDQo9uocrSB_gHRkgK/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/d8/jSzxCBnDQo9uocrSB_gHRkgK/image.png\"></a></div>",
        "id": 1285514,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637634563
    },
    {
        "content": "<p>(The right one appears to be larger)</p>",
        "id": 1285515,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637634578
    },
    {
        "content": "<p>110% zoom ?</p>",
        "id": 1285516,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637634583
    },
    {
        "content": "<p>No, it's 100% zoom.</p>",
        "id": 1285518,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637634863
    },
    {
        "content": "<p>Though they look identical at 90% and 110%.  I feel like this is probably a browser artifact.</p>",
        "id": 1285519,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637634894
    },
    {
        "content": "<p>Computed CSS is identical for the two of them:<br>\n<a href=\"/user_uploads/2/27/htv2IXTyeTBDQLKbb2mzx1vm/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/27/htv2IXTyeTBDQLKbb2mzx1vm/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/27/htv2IXTyeTBDQLKbb2mzx1vm/image.png\"></a></div>",
        "id": 1285520,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637634973
    },
    {
        "content": "<p>I posted one comment about use of jQuery <code>.data()</code>; otherwise the code lgtm.</p>",
        "id": 1285521,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637635076
    },
    {
        "content": "<p>Oh, and we should have the PR close the associated issue.</p>",
        "id": 1285523,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637635192
    },
    {
        "content": "<p>Oh, maybe we don't have one?</p>",
        "id": 1285526,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637635314
    },
    {
        "content": "<p>OK, merged.  I did just notice a bug after doing so, though, which is that there's a range of widths where we line wrap awkwardly: <br>\n<a href=\"/user_uploads/2/3f/VwYi0ce8_NDo1KGPmlLgFfpN/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/3f/VwYi0ce8_NDo1KGPmlLgFfpN/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/3f/VwYi0ce8_NDo1KGPmlLgFfpN/image.png\"></a></div><p>I think the best solution is likely to be just implementing <a href=\"https://github.com/zulip/zulip/pull/20303\">#20303</a>, which was proposed earlier in this thread.  <span class=\"user-mention\" data-user-id=\"5140\">@Aman Agrawal (amanagr)</span> want to do that as an immediate follow-up?</p>",
        "id": 1285531,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637635682
    },
    {
        "content": "<p>(I guess this also involves want to realign things to leave a bottom gutter appropriately large for this widget)</p>",
        "id": 1285532,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637635715
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1285526\">said</a>:</p>\n<blockquote>\n<p>Oh, maybe we don't have one?</p>\n</blockquote>\n<p>We have <a href=\"https://github.com/zulip/zulip/pull/20302\">#20302</a> but can't close it with this.</p>",
        "id": 1285533,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637636142
    },
    {
        "content": "<p>Yeah, it is tricky to solve the narrow width alignment of icons. We need to move things to a menu with reducing width as we planned.</p>",
        "id": 1285534,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637636246
    },
    {
        "content": "<p>I don't  know how often one uses the \"Enter to send\" checkbox. Can we move it to Personal settings?</p>",
        "id": 1285546,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637641625
    },
    {
        "content": "<p>I just use <code>CMD + Enter</code> to send and never felt the need to use <code>Enter to send</code> button except in development environment.</p>",
        "id": 1285547,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637641668
    },
    {
        "content": "<p>I assume that's a discoverability thing?</p>",
        "id": 1285550,
        "sender_full_name": "Alex Dehnert",
        "timestamp": 1637641752
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"5140\">Aman Agrawal (amanagr)</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1285546\">said</a>:</p>\n<blockquote>\n<p>I don't  know how often one uses the \"Enter to send\" checkbox. Can we move it to Personal settings?</p>\n</blockquote>\n<p>I think if you're someone like me who prefers it off, you'll never have a reason to enable it.  But the opposite isn't true -- if you mostly prefer that enter-sends, then it's really annoying if you have to go to Settings to disable it for a single message where you're doing more complex formatting.</p>",
        "id": 1285552,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637641878
    },
    {
        "content": "<p>Makes sense. I don't think moving the <code>Enter to send checkbox</code> below the <code>Send</code> button will look well in our UI as evident from attempts in <a href=\"https://github.com/zulip/zulip/pull/20303\">#20303</a>.</p>",
        "id": 1285553,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637642014
    },
    {
        "content": "<p>Moving it to a menu on narrow screens is the correct approach for it too I guess.</p>",
        "id": 1285554,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637642061
    },
    {
        "content": "<p><a href=\"/user_uploads/2/fe/3ycx5SmczdTVbr5uO4Ysf217/Screenshot-2021-11-23-at-10.06.47-AM.png\">slack</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/fe/3ycx5SmczdTVbr5uO4Ysf217/Screenshot-2021-11-23-at-10.06.47-AM.png\" title=\"slack\"><img src=\"/user_uploads/2/fe/3ycx5SmczdTVbr5uO4Ysf217/Screenshot-2021-11-23-at-10.06.47-AM.png\"></a></div>",
        "id": 1285557,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637642680
    },
    {
        "content": "<p><a href=\"/user_uploads/2/b2/zb5hFWRKUJO7shUoqvwF8eU0/Screenshot-2021-11-23-at-10.14.12-AM.png\">discord doesn't care about mobile web</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/b2/zb5hFWRKUJO7shUoqvwF8eU0/Screenshot-2021-11-23-at-10.14.12-AM.png\" title=\"discord doesn't care about mobile web\"><img src=\"/user_uploads/2/b2/zb5hFWRKUJO7shUoqvwF8eU0/Screenshot-2021-11-23-at-10.14.12-AM.png\"></a></div>",
        "id": 1285559,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637642701
    },
    {
        "content": "<p><a href=\"/user_uploads/2/c4/tlFQUlhipncUp48JlXG8aYnR/Screenshot-2021-11-23-at-10.38.00-AM.png\">Quill</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/c4/tlFQUlhipncUp48JlXG8aYnR/Screenshot-2021-11-23-at-10.38.00-AM.png\" title=\"Quill\"><img src=\"/user_uploads/2/c4/tlFQUlhipncUp48JlXG8aYnR/Screenshot-2021-11-23-at-10.38.00-AM.png\"></a></div>",
        "id": 1285568,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637644101
    },
    {
        "content": "<p>Flock just hides all the icons. (Felt super buggy for just 2mins of use).</p>",
        "id": 1285569,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637644436
    },
    {
        "content": "<p><a href=\"/user_uploads/2/e6/66a39io3mohd3fuYC08W9Fqi/Screenshot-2021-11-23-at-10.49.59-AM.png\">Teams is not responsive, uses fixed width layout</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/e6/66a39io3mohd3fuYC08W9Fqi/Screenshot-2021-11-23-at-10.49.59-AM.png\" title=\"Teams is not responsive, uses fixed width layout\"><img src=\"/user_uploads/2/e6/66a39io3mohd3fuYC08W9Fqi/Screenshot-2021-11-23-at-10.49.59-AM.png\"></a></div>",
        "id": 1285573,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637644826
    },
    {
        "content": "<p>Hiding sections of icons that don't fit behind a \"...\" menu seems reasonable.</p>",
        "id": 1285574,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637645290
    },
    {
        "content": "<p>Should we close <a href=\"https://github.com/zulip/zulip/pull/20303\">#20303</a> and <a href=\"https://github.com/zulip/zulip/pull/20335\">#20335</a> then? <span class=\"user-mention\" data-user-id=\"22180\">@Ashwat Kumar Singh</span> FYI</p>",
        "id": 1285582,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637645918
    },
    {
        "content": "<p>I'm okay with what the design demands</p>",
        "id": 1285583,
        "sender_full_name": "Ashwat Kumar Singh",
        "timestamp": 1637646024
    },
    {
        "content": "<p>I've been thinking more about this and I think we should do a bit more holistic of a redesign for that row.  Here's some specific proposals:</p>\n<ul>\n<li>We make the \"Send\" button appear unconditionally; that'll be helpful for upcoming the \"Send Later\" feature, and it seems in line with what other tools that do have Enter auto-send do.  (I like the idea of keeping a button with a word rather than just a triangle, since it's good to have a decently sized click target for a thing that folks do very often).</li>\n<li>We move the <code>Sending...</code> text that can appear in that empty space when we've determined we can't locally echo a message and are waiting for the server to confirm receipt to instead having the \"Send\" button turn into a spinner.  We already use this pattern in the \"Message edit\" UI (where there was more motivation to make it happen because moving topics can be slow), and I think work well to use it here.</li>\n<li>We move the \"Press Enter to send\" toggle to a gutter row below the icons and \"Send\" button (sizing the gutter to match the height of the URL display when hovering the mouse over a link).  With more horizontal space, we can also make it a lot more clear: Once you have a nonempty compose box, we display \"Enter to send &lt;=&gt; Ctrl + Enter to a new line\", with the <code>&lt;=&gt;</code> being an a button that you can click to swap which button goes with which action (maybe <a href=\"https://fontawesome.com/v4.7/icon/exchange\">https://fontawesome.com/v4.7/icon/exchange</a>) via toggling the setting.  (I've always been unhappy that the current \"Press Enter to Send\" toggle requires you to notice the empty checkbox to understand what's happening).</li>\n<li>We may need to also move the <code>13242/10000</code> text that we display when a message is too long; needs testing.  That's the only other widget that dynamically appears in the space below the compose box.</li>\n<li>But I think with those changes, we'll have bought ourselves plenty of space below the compose box, such that we don't need to add a popover for the existing formatting buttons (we'll probably still need one on mobile sizes especially if we add more buttons).</li>\n</ul>",
        "id": 1286554,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637781643
    },
    {
        "content": "<p>Thoughts on that set of proposals?  Also I should add that we may need to work on a variant of these design questions for the message-edit UI in narrow windows, which has a bonus things of its own that consume space and might need to be moved around:</p>\n<p><a href=\"/user_uploads/2/d4/BqEAK2aINs-IYT3rNl8JXTmi/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/d4/BqEAK2aINs-IYT3rNl8JXTmi/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/d4/BqEAK2aINs-IYT3rNl8JXTmi/image.png\"></a></div>",
        "id": 1286555,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1637781746
    },
    {
        "content": "<p>I like that bundle of ideas.</p>",
        "id": 1286575,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1637782142
    },
    {
        "content": "<p>Sounds good.</p>",
        "id": 1286841,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637830143
    },
    {
        "content": "<p>I don't think I understood the plan for <code>Enter to send</code> very well. Is this what you meant?<br>\n<a href=\"/user_uploads/2/db/LgPFjWQ3fnQdbHW5aBWHnucX/Screenshot-2021-11-25-at-10.37.43-PM.png\">Screenshot-2021-11-25-at-10.37.43-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/db/LgPFjWQ3fnQdbHW5aBWHnucX/Screenshot-2021-11-25-at-10.37.43-PM.png\" title=\"Screenshot-2021-11-25-at-10.37.43-PM.png\"><img src=\"/user_uploads/2/db/LgPFjWQ3fnQdbHW5aBWHnucX/Screenshot-2021-11-25-at-10.37.43-PM.png\"></a></div>",
        "id": 1287005,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637860123
    },
    {
        "content": "<blockquote>\n<p>Once you have a nonempty compose box:</p>\n</blockquote>\n<p>Do we want  to vary compose box height after user enters text? Doesn't feel nice.</p>",
        "id": 1287006,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1637860217
    },
    {
        "content": "<p>I would right-align the \"Enter to send...\" part, to put it near the \"Send\" button. I think there was a typo in the text for it; the right side should probably read, \"Enter to add a new line\", or something similar.</p>",
        "id": 1287449,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1638084380
    },
    {
        "content": "<blockquote>\n<p>Do we want to vary compose box height after user enters text? Doesn't feel nice.</p>\n</blockquote>\n<p>I think the concept is not to move the compose box, but to have the text appear when you start typing without any shift in where things are. (We would just have blank space underneath when the compose box is blank.)</p>",
        "id": 1287450,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1638084440
    },
    {
        "content": "<p>Okay.</p>",
        "id": 1287845,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1638198653
    },
    {
        "content": "<p>Any benefit from hiding it when there is no text? We can just always display it when it's taking the required space.</p>",
        "id": 1287855,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1638203664
    },
    {
        "content": "<p>I think the idea is just to make the UI feel cleaner/simpler? There's a potential cost in terms of it being distracting when the text shows up, so I don't know whether or not it's worth it.</p>",
        "id": 1287947,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1638218568
    },
    {
        "content": "<p>Yeah that's the motivation, agree it isn't clear if it's better so I'm fine skipping that detail for now and seeing if we want it after.</p>",
        "id": 1288131,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638229905
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/pull/20396\">#20396</a> should be ready for review. <span class=\"user-mention\" data-user-id=\"19257\">@Alya Abbott</span> FYI</p>",
        "id": 1288389,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1638293229
    },
    {
        "content": "<p>We've merged and deployed <a href=\"https://github.com/zulip/zulip/pull/20396\">#20396</a> here.  Feedback and testing on this is much appreciated; we're only aware of a couple follow-up quirks that I expect will be fixed tomorrow.</p>",
        "id": 1290398,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638487585
    },
    {
        "content": "<p>I hope that we'll be in a position in terms of this not being buggy to deploy this redesign of the bottom half of the compose box to production early next week.  However, I'd much rather that we hold this change back from Zulip Cloud for another week if we have any known regressions, since it's important to present any UI changes in as bug-free a form as possible, so that folks can enjoy the benefits and not be overly distracted by temporary bugs that come with them.</p>\n<p>Remember to play with the \"message edit\" UI and mobile web if you want to be thorough!</p>",
        "id": 1290403,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638487733
    },
    {
        "content": "<p><a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1286554\">This message</a> is a good overview of the set of design changes; most of them are pretty subtle because they represent moving elements that are invisible in the normal case.</p>",
        "id": 1290404,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638487760
    },
    {
        "content": "<p>From my notes in the final comment on the pull request, here are the known user-facing issues:</p>\n<ul>\n<li><a href=\"https://github.com/zulip/zulip/pull/20396#issuecomment-984893802\">https://github.com/zulip/zulip/pull/20396#issuecomment-984893802</a>; probably just needs 5-10px of side margin around the `fa-exchange.</li>\n<li>I still see the \"Send\" button being vertically misaligned in Chrome on Linux on some widths.</li>\n<li>I think it's worth @alya playing a bit with the breakpoints on when the popover appears; it still feels to me like we have some widths in the compose placement where everything in the popover would fit.</li>\n</ul>",
        "id": 1290406,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638487834
    },
    {
        "content": "<p>Bug report: Resizing the \"Send\" button based on how long the word is in your language broke. <a href=\"/user_uploads/2/eb/rTqGmhnSNyXId-G18WS5gcd-/Screen-Shot-2021-12-02-at-3.39.48-PM.png\">Screen-Shot-2021-12-02-at-3.39.48-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/eb/rTqGmhnSNyXId-G18WS5gcd-/Screen-Shot-2021-12-02-at-3.39.48-PM.png\" title=\"Screen-Shot-2021-12-02-at-3.39.48-PM.png\"><img src=\"/user_uploads/2/eb/rTqGmhnSNyXId-G18WS5gcd-/Screen-Shot-2021-12-02-at-3.39.48-PM.png\"></a></div>",
        "id": 1290423,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1638488409
    },
    {
        "content": "<p>Great! Will look into the remaining bugs.</p>",
        "id": 1290544,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1638507664
    },
    {
        "content": "<p>This is great, well done and congrats on milestone!</p>",
        "id": 1290687,
        "sender_full_name": "Jore",
        "timestamp": 1638526535
    },
    {
        "content": "<p>Opened <a href=\"https://github.com/zulip/zulip/pull/20444\">#20444</a> to fix the reported bugs.</p>",
        "id": 1290693,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1638527640
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"5140\">Aman Agrawal (amanagr)</span> <a href=\"#narrow/stream/101-design/topic/compose.20box.20formatting.20button/near/1290544\">said</a>:</p>\n<blockquote>\n<p>Great! Will look into the remaining bugs.</p>\n</blockquote>\n<div class=\"message_inline_image\"><a href=\"https://media3.giphy.com/media/maNB0qAiRVAty/giphy.gif?cid=c623cb35aye3ip229spv8fa83tdax7mqufat0w5m9cwyh62q&amp;rid=giphy.gif&amp;ct=g\"><img src=\"/external_content/7c26095e353d5a9fb29407efa830c4d9c30c3345/68747470733a2f2f6d65646961332e67697068792e636f6d2f6d656469612f6d614e423071416952564174792f67697068792e6769663f6369643d6336323363623335617965336970323239737076386661383374646178376d71756661743077356d3963777968363271267269643d67697068792e6769662663743d67\"></a></div>",
        "id": 1290714,
        "sender_full_name": "Steve Howell",
        "timestamp": 1638535373
    },
    {
        "content": "<div class=\"message_inline_image\"><a href=\"https://media0.giphy.com/media/lVBtp4SRW6rvDHf1b6/giphy-downsized-medium.gif?cid=c623cb35wggb381txj79vqbh666kjo4m8tcxco9fr8e5mcmq&amp;rid=giphy-downsized-medium.gif&amp;ct=g\"><img src=\"/external_content/b17331e6c8a5c524e7b1f2659ac9b10efa8dd8d7/68747470733a2f2f6d65646961302e67697068792e636f6d2f6d656469612f6c56427470345352573672764448663162362f67697068792d646f776e73697a65642d6d656469756d2e6769663f6369643d63363233636233357767676233383174786a3739767162683636366b6a6f346d38746378636f3966723865356d636d71267269643d67697068792d646f776e73697a65642d6d656469756d2e6769662663743d67\"></a></div>",
        "id": 1290741,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1638542687
    },
    {
        "content": "<div class=\"message_inline_image\"><a href=\"https://media2.giphy.com/media/XB3DwmEZY2aBCIEj9P/giphy.gif?cid=c623cb35se3b98jl2yyu0iz8atvd8b5fhpv175wu0kaecw06&amp;rid=giphy.gif&amp;ct=g\"><img src=\"/external_content/78f7b83d2acbb1ee12e9cd6b3b3f91fb1c7b075a/68747470733a2f2f6d65646961322e67697068792e636f6d2f6d656469612f58423344776d455a593261424349456a39502f67697068792e6769663f6369643d63363233636233357365336239386a6c3279797530697a3861747664386235666870763137357775306b616563773036267269643d67697068792e6769662663743d67\"></a></div>",
        "id": 1290742,
        "sender_full_name": "Steve Howell",
        "timestamp": 1638542760
    },
    {
        "content": "<p>I've deployed the updated version of this here fixing the previously reported bugs.</p>",
        "id": 1291145,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638572507
    },
    {
        "content": "<p>So please report anything you see after reloading your browser following this message (reload only necessary in the next 10 minutes or so).</p>",
        "id": 1291146,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638572526
    },
    {
        "content": "<p>For some reason I'm seeing a dark spinner on the \"Send\" button in light theme, whereas it should be light in both themes.</p>",
        "id": 1291370,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1638582950
    },
    {
        "content": "<p>Hmm, that might be intentional; I agree with your assessment that it should be a white spinner in both themes.</p>",
        "id": 1291377,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638583338
    },
    {
        "content": "<p>Opened <a href=\"https://github.com/zulip/zulip/pull/20457\">#20457</a></p>",
        "id": 1291403,
        "sender_full_name": "Aman (amanagr)",
        "timestamp": 1638594212
    },
    {
        "content": "<p>How are we feeling about the state of this redesign?  We've been holding back deploying this to Zulip Cloud while we hammer out the bugs, and I'm curious for thoughts on whether it feels debugged at this point.</p>",
        "id": 1292820,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638831360
    },
    {
        "content": "<p>I would like us to test some ideas in <a class=\"stream-topic\" data-stream-id=\"101\" href=\"/#narrow/stream/101-design/topic/new.20line.20.2F.20send.20commands\">#design &gt; new line / send commands</a> before we deploy to Zulip Cloud.</p>",
        "id": 1292826,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1638831600
    },
    {
        "content": "<p>I don't think we have a satisfactory solution for that part of it yet.</p>",
        "id": 1292828,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1638831620
    },
    {
        "content": "<p>Ahh, yes, that's still unresolved.</p>",
        "id": 1292840,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1638832203
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/new.20line.20.2F.20send.20commands/near/1304927\">said</a>:</p>\n<blockquote>\n<p>I think aside from the detail still pending in <a class=\"stream-topic\" data-stream-id=\"101\" href=\"/#narrow/stream/101-design/topic/drafts\">#design &gt; drafts</a> and an i18n issue, I think we're in a position to stop holding back this set of changes from Zulip Cloud. Feedback on anything you feel is a regression or could be locally improved is much appreciated!</p>\n</blockquote>\n<p>Just adding a reference here, in the original thread about adding this set of new buttons, as well.</p>",
        "id": 1304928,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1641427700
    },
    {
        "content": "<p>I just reviewed <a href=\"https://github.com/zulip/zulip/pull/20672\">#20672</a>, and it looks very close from a UI perspective. (I don't know how much work remains on the code.)</p>",
        "id": 1305123,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1641451586
    }
]