[
    {
        "content": "<p>Is <span class=\"emoji emoji-2639\" title=\"white frowning face\">:white_frowning_face:</span> <code>white_frowning_face</code> the standard name for this emoji?</p>",
        "id": 303368,
        "sender_full_name": "Sean Wallitsch",
        "timestamp": 1508806275
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-email=\"shidarin@gmail.com\" data-user-id=\"3733\">@Sean Wallitsch</span> apparently so? <a href=\"https://emojipedia.org/white-frowning-face/\" target=\"_blank\" title=\"https://emojipedia.org/white-frowning-face/\">https://emojipedia.org/white-frowning-face/</a></p>",
        "id": 303369,
        "sender_full_name": "Joshua Pan",
        "timestamp": 1508806433
    },
    {
        "content": "<p>I think it's related to the background color.</p>",
        "id": 303370,
        "sender_full_name": "Joshua Pan",
        "timestamp": 1508806526
    },
    {
        "content": "<p>interesting. Yeah it sounds like it's legacy based on how the emojis were initially designed. And we've got some many more descriptive emojis now that this stands out</p>",
        "id": 303371,
        "sender_full_name": "Sean Wallitsch",
        "timestamp": 1508806579
    },
    {
        "content": "<p>all the emoji are being renamed very soon; it was a risky change so we didn't want to merge it into 1.7. <br>\nI think that one is being renamed to \"big_frown\" or some such thing, I can check</p>",
        "id": 303373,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1508806904
    },
    {
        "content": "<p><a href=\"/user_uploads/2/cf/eNHEOx_jGhxpWAZ-Mmr26azq/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a>  are the new names for <br>\n<a href=\"/user_uploads/2/1/breqTzlzMaKLZ0zUBxxp0AD6/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/cf/eNHEOx_jGhxpWAZ-Mmr26azq/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/2/cf/eNHEOx_jGhxpWAZ-Mmr26azq/pasted_image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/1/breqTzlzMaKLZ0zUBxxp0AD6/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/2/1/breqTzlzMaKLZ0zUBxxp0AD6/pasted_image.png\"></a></div>",
        "id": 303374,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1508807053
    },
    {
        "content": "<p>the names in the second image (including white_frowning_face) are the ones used by slack, which is what we have in the 1.7 release. The 1.6 release had a different set of names. <br>\nAlso, would love a better alternate name for People 036. It's the emoji for <code>:/</code> (so essentially looking for a name for <code>:/</code>).</p>",
        "id": 303382,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1508807382
    },
    {
        "content": "<p>Oh yeah, <code>:confused:</code> for <code>:/</code> is one that regularly makes me a little bit <code>:/</code>. <span class=\"emoji emoji-1f61b\" title=\"stuck out tongue\">:stuck_out_tongue:</span> </p>\n<p>I think the face I imagine for that, I'd describe as something like \"pursed one's lips\". Like <a href=\"https://goo.gl/images/kS9eVN\" target=\"_blank\" title=\"https://goo.gl/images/kS9eVN\">this</a>, or <a href=\"https://goo.gl/images/YEFwQ4\" target=\"_blank\" title=\"https://goo.gl/images/YEFwQ4\">this</a>, from a Google Images search for [purse lips]. I think the glyphs in columns 0, 2, 3 of that chart match that face; though the one in col 1 looks more dazed, like an interpretation of \"confused\".</p>",
        "id": 303394,
        "sender_full_name": "Greg Price",
        "timestamp": 1508808588
    },
    {
        "content": "<p>On the other hand those search results seem to show the term largely being used to gleefully describe photos of politicians and public figures that the writer hates or detests. So it might not have the right connotations.</p>",
        "id": 303397,
        "sender_full_name": "Greg Price",
        "timestamp": 1508808915
    },
    {
        "content": "<p><a href=\"https://goo.gl/images/MtBWjR\" target=\"_blank\" title=\"https://goo.gl/images/MtBWjR\">This image</a>, found by a search for [half frown], is spot on for the face I have in mind -- and the context in which it's on the web is the same one I just described. Maybe it's more a feature of the actual expression and its meaning than of any term for it, then. I might make that expression for any number of reasons, but if someone enjoys putting a photo of that up on the web, it's likely they're glad to see me frustrated in getting the things I want done done.</p>",
        "id": 303400,
        "sender_full_name": "Greg Price",
        "timestamp": 1508809338
    },
    {
        "content": "<p>To describe the feeling rather than the actual expression, \"disappointed\" or \"concerned\" would be more like it for me than \"confused\".</p>",
        "id": 303402,
        "sender_full_name": "Greg Price",
        "timestamp": 1508809956
    },
    {
        "content": "<p>nice! I like half_frown, disappointed, and concerned all more than confused.</p>",
        "id": 303705,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1508856015
    },
    {
        "content": "<p>Somebody brought up on another Zulip instance the kinda weird <span class=\"emoji emoji-2639\" title=\"white frowning face\">:white_frowning_face:</span> (white_frowning_face) emoji name, which has apparently been previously discussed a bit here. It sounded in <a href=\"#narrow/stream/101-design/subject/emoji.20names/near/303373\" title=\"#narrow/stream/101-design/subject/emoji.20names/near/303373\">https://chat.zulip.org/#narrow/stream/101-design/subject/emoji.20names/near/303373</a> like maybe the plan was to rename it big_frown? The <a href=\"https://emojipedia.org/glossary/#white\" target=\"_blank\" title=\"https://emojipedia.org/glossary/#white\">glossary entry</a> seems to suggest the \"white\" is a pre-emoji holdover, so renaming it <em>something</em> without \"white\" seems reasonable.</p>",
        "id": 581258,
        "sender_full_name": "Alex Dehnert",
        "timestamp": 1526495055
    },
    {
        "content": "<p>yeah, we have new names for all the emoji, though haven't merged the rename</p>",
        "id": 581260,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1526495367
    },
    {
        "content": "<p>Ah, cool. Thanks.</p>",
        "id": 581324,
        "sender_full_name": "Alex Dehnert",
        "timestamp": 1526497369
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy Kassirer</span> <a href=\"#narrow/stream/6-frontend/topic/update.20emoji.20.2319371/near/1379926\">said</a>:</p>\n<blockquote>\n<p>Updated table: <a href=\"/user_uploads/2/9/vgrit3h--sflZVmOPZjPPqH-/emoji_names_table.csv\">emoji_names_table.csv</a></p>\n</blockquote>\n<p>Splitting from <a class=\"stream-topic\" data-stream-id=\"6\" href=\"/#narrow/stream/6-frontend/topic/update.20emoji.20.2319371\">#frontend &gt; update emoji #19371</a> , let's chat about whether/how to change the names we use for emoji.</p>\n<p>There are a couple of questions to consider about emoji names:</p>\n<ol>\n<li>What should we use in contexts where a name has to map to a <strong>single</strong> emoji, specifically when typing an emoji name into the compose box?</li>\n<li>What should we use when a name can map to <strong>any number</strong> of emoji, i.e. any emoji picker search box? </li>\n</ol>\n<p>Our current approach is (if I understand correctly) to use the same custom set of emoji names for both of the contexts above. The philosophy behind the selected names is described in detail <a href=\"https://zulip.readthedocs.io/en/latest/subsystems/emoji.html#picking-emoji-names\">here</a>.</p>\n<p>However, the two don't <em>have</em> to be the same. Based on a quick spot check, it looks like some other apps do the following:</p>\n<ul>\n<li>Slack, Discord: Use the <a href=\"https://github.com/iamcal/emoji-data\">iamcal list</a> for unique names, and both that list and CLDR emoji names and keywords (but not the official Unicode name) as search terms in the picker.</li>\n<li>Twitter: Use the official Unicode name for unique names, and search all three lists in the picker.</li>\n</ul>\n<p>For convenience, I've uploaded the above CSV to a <a href=\"https://docs.google.com/spreadsheets/d/1rTX2uuOKawY8vTHdViODSQPJjNUM2vqOVS_FrDYtOec/edit#gid=982701511\">Google Sreadsheet</a>; you can also check out the PR (<a href=\"https://github.com/zulip/zulip/pull/19371\">#19371</a>) and take a look at the HTML page.</p>",
        "id": 1381285,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652739931
    },
    {
        "content": "<p>What are folks' thoughts on how we should proceed? </p>\n<p>Note that <a href=\"https://github.com/zulip/zulip/pull/18121\">#18121</a> argues for switching to CLDR.</p>\n<p><span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span> are there emoji you specifically wanted to review in the spreadsheet above, e.g. if you recall a lot of thinking going into the names originally?</p>",
        "id": 1381286,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652740185
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/pull/18121\">#18121</a> specifically addresses the canonical representation vs. tooltip vs. search keywords question. You‚Äôre welcome to disagree with my answer but it‚Äôs a bit frustrating to see this brought up as if it‚Äôs a new question.</p>",
        "id": 1381289,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1652740313
    },
    {
        "content": "<p>My bad, I should have re-read the comment thread again before posting here. Not trying to say that the question is new; I was just thinking that it's worth discussing in its own thread on CZO given the new data <span class=\"user-mention silent\" data-user-id=\"21453\">Evy Kassirer</span> has generated.</p>",
        "id": 1381290,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652740466
    },
    {
        "content": "<p>For</p>\n<blockquote>\n<p>What should we use when a name can map to any number of emoji, i.e. any emoji picker search box?</p>\n</blockquote>\n<p>I feel pretty strongly that we show multiple of those emoji in emoji reaction situations, since it's a pretty common use-case to be looking around for an emoji that's vaguely related to some topic. I think emoji being more discoverable in search than in the compose box is reasonable, since I'm guessing people are more often aware of what they're looking for when typing in the compose box.</p>\n<blockquote>\n<p>The set of names should be compatible with the iamcal, gemoji, and Unicode names. Compatible here means that if there is an emoji name a user knows from one of those sets, and the user searches for the key word of that name, they will get an emoji in our set. It is okay if this emoji has a slightly different name or codepoint from the names/codepoints in the other sets. (weak)</p>\n</blockquote>\n<p>This feels relevant to my opinion here. Can you point me to which passage explains why we use the same name for both (1) and (2)?</p>",
        "id": 1381291,
        "sender_full_name": "Evy",
        "timestamp": 1652740538
    },
    {
        "content": "<p>Thanks for your work on emoji thinking Anders, I hope we can use some of that in our discussions here.</p>",
        "id": 1381292,
        "sender_full_name": "Evy",
        "timestamp": 1652740575
    },
    {
        "content": "<p>I personally don't have that many thoughts on emoji other than we're probably better off moving to the CLDR standard as multiple folks were talking about last week.</p>",
        "id": 1381294,
        "sender_full_name": "Evy",
        "timestamp": 1652740611
    },
    {
        "content": "<p>Evy, I'm not yet finding what's being quoted by your \"The set of names‚Ä¶\" block. Are you quoting something on CZO, GitHub, etc.?</p>",
        "id": 1381296,
        "sender_full_name": "Chris Bobbe",
        "timestamp": 1652741037
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"699\">Anders Kaseorg</span> <a href=\"#narrow/stream/101-design/topic/emoji.20names/near/1381289\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/zulip/zulip/pull/18121\">#18121</a> specifically addresses the canonical representation vs. tooltip vs. search keywords question.</p>\n</blockquote>\n<p>For easy reference (copied from the issue):</p>\n<blockquote>\n<ul>\n<li>Canonically store emoji (except custom emoji) as Unicode characters <code>üëª</code> rather than colon-strings <code>:ghost:</code>.</li>\n<li>Generate emoji tooltips using the CLDR canonical name in the viewer‚Äôs chosen language.</li>\n<li>Filter using both CLDR canonical names and CLDR keywords in the emoji picker search bar and the emoji typeahead widget.</li>\n<li>Maybe allow users to define their own emoji aliases, for cases where their favorite emoji might be unergonomic to find using the picker.</li>\n</ul>\n</blockquote>",
        "id": 1381298,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652741083
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"13313\">@Chris Bobbe</span> That‚Äôs from the <a href=\"https://zulip.readthedocs.io/en/latest/subsystems/emoji.html#picking-emoji-names\">emoji subsystem documentation</a>.</p>",
        "id": 1381299,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1652741118
    },
    {
        "content": "<blockquote>\n<p>Can you point me to which passage explains why we use the same name for both (1) and (2)?</p>\n</blockquote>\n<p>I personally don't know the original context for that.</p>",
        "id": 1381300,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652741232
    },
    {
        "content": "<p>Ah ok, so maybe it's not documented and I can wait for someone to share if there's a reason we do that :)</p>",
        "id": 1381301,
        "sender_full_name": "Evy",
        "timestamp": 1652741323
    },
    {
        "content": "<p>Anders' plan sounds great to me. I think it would be good to do it in two steps (my current project of adding more emoji support, using CLDR names for only new emoji) and then switching to full CLDR support as a later project since that would be a bunch of work on its own.</p>",
        "id": 1381302,
        "sender_full_name": "Evy",
        "timestamp": 1652741379
    },
    {
        "content": "<p>Zulip was designed with the model that an emoji is a (symbol, meaning) pair rather than just a symbol, so that (<span aria-label=\"pancakes\" class=\"emoji emoji-1f95e\" role=\"img\" title=\"pancakes\">:pancakes:</span>, pancakes) is ‚Äúobservationally‚Äù different from (<span aria-label=\"breakfast\" class=\"emoji emoji-1f95e\" role=\"img\" title=\"breakfast\">:breakfast:</span>, breakfast). I argue in <a href=\"https://github.com/zulip/zulip/pull/18121\">#18121</a> that this model is poor, but since it is the current model, it explains why we are currently constrained to use the same name for (1) and (2).</p>",
        "id": 1381304,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1652741569
    },
    {
        "content": "<p>We already have aliases that show up in search, I don't see why we couldn't allow some words to show up in multiple searches (it seems from some errors I was getting that this isn't fully supported).</p>",
        "id": 1381305,
        "sender_full_name": "Evy",
        "timestamp": 1652741713
    },
    {
        "content": "<p>The Markdown colon-string representation can‚Äôt simultaneously communicate the symbol and the meaning, so it currently communicates the meaning and expects that to map to a single symbol.</p>",
        "id": 1381306,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1652741932
    },
    {
        "content": "<p>The <a href=\"https://github.com/zulip/zulip/issues/18121#issuecomment-1110173152\">arguments</a> against that data model make sense to me... As that comment explains, it would take quite a bit of work additional work to really get things right in terms of allowing multiple names for the same emoji in the contexts in (1), which is probably not worth it.</p>\n<blockquote>\n<p>We don‚Äôt even fully support our own alias model today. You can‚Äôt view a non-primary alias from a device without mouse hover support. You can‚Äôt react with a non-primary alias from the web. You can‚Äôt react with one alias of emoji if there‚Äôs already a reaction with a different alias of that emoji. If you type a Unicode character from your device‚Äôs native emoji picker, we treat it as if you used the primary name rather than remembering that you didn‚Äôt specify one.</p>\n</blockquote>",
        "id": 1381307,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652741972
    },
    {
        "content": "<p>Have folks looked in detail at the iamcal data set vs. CLDR? Just skimming it, iamcal tends to be more brief (e.g. \"shrug\" vs. \"person shrugging\", etc.). <a href=\"https://github.com/iamcal/emoji-data/issues/109\">https://github.com/iamcal/emoji-data/issues/109</a> does not give much insight into why iamcal's judgment is that \"the CLDR names are pretty bad in a lot of cases\".</p>\n<p>Skimming through the spreadsheet, as long as we're OK with longer names, I don't see a lot of places where using the iamcal set for (1) or (2) would be clearly helpful. (For (2), it could be combined with CLDR.)</p>",
        "id": 1381324,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652742898
    },
    {
        "content": "<p>It‚Äôs possible that comment was confusing the CLDR names with the Unicode character names. Most of these are equivalent in English, but many CLDR names have been corrected in ways that the immutable Unicode character names cannot. To quote some examples I dug up for a comment elsewhere:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>CLDR</th>\n<th>Unicode</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><span aria-label=\"triumph\" class=\"emoji emoji-1f624\" role=\"img\" title=\"triumph\">:triumph:</span></td>\n<td>face with steam from nose</td>\n<td>FACE WITH LOOK OF TRIUMPH</td>\n</tr>\n<tr>\n<td><span aria-label=\"spock\" class=\"emoji emoji-1f596\" role=\"img\" title=\"spock\">:spock:</span></td>\n<td>vulcan salute</td>\n<td>RAISED HAND WITH PART BETWEEN MIDDLE AND RING FINGERS</td>\n</tr>\n<tr>\n<td><span aria-label=\"japanese not free of charge button\" class=\"emoji emoji-1f236\" role=\"img\" title=\"japanese not free of charge button\">:japanese_not_free_of_charge_button:</span></td>\n<td>Japanese ‚Äúnot free of charge‚Äù button</td>\n<td>SQUARED CJK UNIFIED IDEOGRAPH-6709</td>\n</tr>\n<tr>\n<td><span aria-label=\"repeat one\" class=\"emoji emoji-1f502\" role=\"img\" title=\"repeat one\">:repeat_one:</span></td>\n<td>repeat single button</td>\n<td>CLOCKWISE RIGHTWARDS AND LEFTWARDS OPEN CIRCLE ARROWS WITH CIRCLED ONE OVERLAY</td>\n</tr>\n</tbody>\n</table>",
        "id": 1381335,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1652743745
    },
    {
        "content": "<p>But probably most of it is just that Cal wants shorter names that look more like colon-string users expect colon-strings to look.</p>",
        "id": 1381337,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1652744279
    },
    {
        "content": "<p>Yeah, that seems plausible.</p>",
        "id": 1381372,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1652745530
    },
    {
        "content": "<p>Finally had a chance to read this! (And then had to stop work for the day; will send more thoughts later)</p>",
        "id": 1387916,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1654218121
    },
    {
        "content": "<p>I think the point that the CLDR names are not intended for the colon-string format is interesting for thinking about our plans. As noted, <code>:japanese_not_free_of_charge_button:</code> is kinda ridiculous. This makes me wonder whether even if we want to end up on CLDR, if we'd be better with the <code>iamcal</code> data as long as we're still the colon-string format.</p>",
        "id": 1387924,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1654229830
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/emoji.20names/near/1387924\">said</a>:</p>\n<blockquote>\n<p>As noted, <code>:japanese_not_free_of_charge_button:</code> is kinda ridiculous.</p>\n</blockquote>\n<p>Is it? What does iamcal have -- would it be better?</p>",
        "id": 1387933,
        "sender_full_name": "Greg Price",
        "timestamp": 1654233100
    },
    {
        "content": "<p>It looks like what iamcal has for that emoji is:<br>\n<code>\"short_name\":\"u6709\",\"short_names\":[\"u6709\"]</code></p>\n<p>Oh hey, and that's one we currently have: <span aria-label=\"u6709\" class=\"emoji emoji-1f236\" role=\"img\" title=\"u6709\">:u6709:</span>.</p>\n<p>I think <code>:japanese_not_free_of_charge_button:</code> would be a pretty strong improvement over <code>:u6709:</code> as a name for that emoji.</p>",
        "id": 1387934,
        "sender_full_name": "Greg Price",
        "timestamp": 1654233192
    },
    {
        "content": "<p>Similarly, to fill in the iamcal names for Anders's other examples:</p>\n<p><span aria-label=\"triumph\" class=\"emoji emoji-1f624\" role=\"img\" title=\"triumph\">:triumph:</span> is <code>:triumph:</code>. That is a shortening of the Unicode name, but the Unicode name is misleading. <code>:face_with_steam_from_nose:</code> is better, even if it's longer.</p>\n<p><span aria-label=\"spock\" class=\"emoji emoji-1f596\" role=\"img\" title=\"spock\">:spock:</span> is \"spock-hand\" in the iamcal data, so <code>:spock_hand:</code>. I guess this is an example of where our own choices have made the name worse than the data we started from -- our <code>:spock:</code> is a bad name for that, and <code>:spock_hand:</code> would be less bad. But the name we'd get from CLDR, <code>:vulcan_salute:</code>, is actually good instead.</p>\n<p><span aria-label=\"repeat one\" class=\"emoji emoji-1f502\" role=\"img\" title=\"repeat one\">:repeat_one:</span> is <code>:repeat_one:</code>. That's a fine name. But I think <code>:repeat_single_button:</code> is OK too, even if it could perhaps be made more concise.</p>",
        "id": 1387935,
        "sender_full_name": "Greg Price",
        "timestamp": 1654233580
    },
    {
        "content": "<p>Remember that I cherry-picked those four emoji for their ridiculous Unicode names (not CLDR), so they are biased towards being hard to concisely annotate. The only real sense in which the CLDR names were not intended for colon-string representation, is the sense in which <em>emoji</em> were not intended for colon-string representation. Which they aren‚Äôt, as I‚Äôve argued repeatedly‚Äîbut that isn‚Äôt an argument in favor of names that are slightly terser and worse.</p>",
        "id": 1387958,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1654240461
    },
    {
        "content": "<p>Yeah, I don't think having somewhat longer names is really a problem... I'd expect them to be selected from the typeahead, not typed out manually, so it doesn't seem like a big deal.</p>",
        "id": 1388141,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1654276968
    },
    {
        "content": "<p>I'm a bit in the weeds and getting into edge cases so I wanted to check in to see if the thing I'm doing is something we'd actually want</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code>    <span class=\"c1\"># We keep non-ascii (non-\"English\") characters in some emoji names if that's the correct</span>\n    <span class=\"c1\"># way to spell that word, but always add an alias for an ascii-only version of the word.</span>\n    <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"n\">emoji_code</span><span class=\"p\">,</span> <span class=\"n\">emoji_names</span><span class=\"p\">)</span> <span class=\"ow\">in</span> <span class=\"n\">all_emojis</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n        <span class=\"k\">for</span> <span class=\"n\">name</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"n\">emoji_names</span><span class=\"p\">[</span><span class=\"s2\">\"canonical_name\"</span><span class=\"p\">]]</span> <span class=\"o\">+</span> <span class=\"n\">emoji_names</span><span class=\"p\">[</span><span class=\"s2\">\"aliases\"</span><span class=\"p\">]:</span>\n            <span class=\"c1\"># These are known names where we don't have an ascii-only version and there are ascii aliases</span>\n            <span class=\"c1\"># that a user can still enter instead to get the same emoji.</span>\n            <span class=\"k\">if</span> <span class=\"n\">name</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"s2\">\"„Ç≥„Ç≥\"</span><span class=\"p\">,</span> <span class=\"s2\">\"„Çµ\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Êåá\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Á©∫\"</span><span class=\"p\">]:</span>\n                <span class=\"k\">assert</span> <span class=\"p\">[</span><span class=\"n\">alias</span><span class=\"o\">.</span><span class=\"n\">isascii</span><span class=\"p\">()</span> <span class=\"k\">for</span> <span class=\"n\">alias</span> <span class=\"ow\">in</span> <span class=\"n\">aliases</span><span class=\"p\">]</span>\n                <span class=\"k\">continue</span>\n            <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">name</span><span class=\"o\">.</span><span class=\"n\">isascii</span><span class=\"p\">():</span>\n                <span class=\"n\">all_emojis</span><span class=\"p\">[</span><span class=\"n\">emoji_code</span><span class=\"p\">][</span><span class=\"s2\">\"aliases\"</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">convert_non_ascii_chars</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">))</span>\n</code></pre></div>",
        "id": 1429910,
        "sender_full_name": "Evy",
        "timestamp": 1662162841
    },
    {
        "content": "<p>Essentially I'm trying to keep things like \"pi√±ata\" as a canonical name, and make \"pinata\" just an alias.</p>",
        "id": 1429911,
        "sender_full_name": "Evy",
        "timestamp": 1662162880
    },
    {
        "content": "<p>One principle I'd aim for is to try to make the behavior resemble what CLDR will give us in the <a href=\"https://github.com/zulip/zulip/pull/18121\">#18121</a> future.</p>\n<p>What name and keywords do they have for the \"pi√±ata\" emoji?</p>",
        "id": 1429913,
        "sender_full_name": "Greg Price",
        "timestamp": 1662162957
    },
    {
        "content": "<p>Would we actually just not want to have  \"pi√±ata\" as a string that maps to an emoji at all?</p>",
        "id": 1429914,
        "sender_full_name": "Evy",
        "timestamp": 1662162959
    },
    {
        "content": "<p>This is based off of CLDR data, so they do have <code>pi√±ata</code> as the canonical name</p>",
        "id": 1429915,
        "sender_full_name": "Evy",
        "timestamp": 1662162983
    },
    {
        "content": "<p>they don't have \"pinata\" as an alias, but we don't currently supporting matching such that \"pinata\" would work</p>",
        "id": 1429916,
        "sender_full_name": "Evy",
        "timestamp": 1662163006
    },
    {
        "content": "<p>Got it</p>",
        "id": 1429917,
        "sender_full_name": "Greg Price",
        "timestamp": 1662163067
    },
    {
        "content": "<p>Ok I think I found a way to handle this case</p>",
        "id": 1429918,
        "sender_full_name": "Evy",
        "timestamp": 1662163109
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"21453\">@Evy</span> what was the solution you picked?</p>",
        "id": 1433168,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1662759439
    },
    {
        "content": "<p>I added a function <code>convert_non_ascii_chars</code> and some code that uses that. I can share it here if that's helpful</p>",
        "id": 1433181,
        "sender_full_name": "Evy",
        "timestamp": 1662761180
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"k\">def</span> <span class=\"nf\">convert_non_ascii_chars</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">)</span> <span class=\"o\">-&gt;</span> <span class=\"nb\">str</span><span class=\"p\">:</span>\n    <span class=\"n\">replacements</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n        <span class=\"s2\">\"√®\"</span><span class=\"p\">:</span> <span class=\"s2\">\"e\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"«ê\"</span><span class=\"p\">:</span> <span class=\"s2\">\"i\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"√≥\"</span><span class=\"p\">:</span> <span class=\"s2\">\"o\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"ƒÅ\"</span><span class=\"p\">:</span> <span class=\"s2\">\"a\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"≈ç\"</span><span class=\"p\">:</span> <span class=\"s2\">\"o\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"√±\"</span><span class=\"p\">:</span> <span class=\"s2\">\"n\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"√¥\"</span><span class=\"p\">:</span> <span class=\"s2\">\"o\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"√ß\"</span><span class=\"p\">:</span> <span class=\"s2\">\"c\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"√©\"</span><span class=\"p\">:</span> <span class=\"s2\">\"e\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"√£\"</span><span class=\"p\">:</span> <span class=\"s2\">\"a\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"√≠\"</span><span class=\"p\">:</span> <span class=\"s2\">\"i\"</span><span class=\"p\">,</span>\n        <span class=\"s2\">\"√•\"</span><span class=\"p\">:</span> <span class=\"s2\">\"a\"</span><span class=\"p\">,</span>\n    <span class=\"p\">}</span>\n    <span class=\"k\">for</span> <span class=\"n\">before</span><span class=\"p\">,</span> <span class=\"n\">after</span> <span class=\"ow\">in</span> <span class=\"n\">replacements</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n        <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">name</span><span class=\"o\">.</span><span class=\"n\">replace</span><span class=\"p\">(</span><span class=\"n\">before</span><span class=\"p\">,</span> <span class=\"n\">after</span><span class=\"p\">)</span>\n    <span class=\"k\">assert</span> <span class=\"p\">(</span>\n        <span class=\"n\">name</span><span class=\"o\">.</span><span class=\"n\">isascii</span><span class=\"p\">()</span>\n    <span class=\"p\">),</span> <span class=\"sa\">f</span><span class=\"s2\">\"</span><span class=\"si\">{</span><span class=\"n\">name</span><span class=\"si\">}</span><span class=\"s2\"> still contains non-ascii characters. Add them to convert_non_ascii_chars.\"</span>\n    <span class=\"k\">return</span> <span class=\"n\">name</span>\n</code></pre></div>",
        "id": 1433182,
        "sender_full_name": "Evy",
        "timestamp": 1662761212
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code>    <span class=\"c1\"># STEP 4: We keep non-ascii (non-\"English\") characters in some emoji names if that's the correct</span>\n    <span class=\"c1\"># way to spell that word, but always add an alias for an ascii-only version of the word.</span>\n    <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"n\">emoji_code</span><span class=\"p\">,</span> <span class=\"n\">emoji_names</span><span class=\"p\">)</span> <span class=\"ow\">in</span> <span class=\"n\">all_emojis</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">():</span>\n        <span class=\"k\">for</span> <span class=\"n\">name</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"n\">emoji_names</span><span class=\"p\">[</span><span class=\"s2\">\"canonical_name\"</span><span class=\"p\">]]</span> <span class=\"o\">+</span> <span class=\"n\">emoji_names</span><span class=\"p\">[</span><span class=\"s2\">\"aliases\"</span><span class=\"p\">]:</span>\n            <span class=\"c1\"># These are known names where we don't have an ascii-only version and there are ascii aliases</span>\n            <span class=\"c1\"># that a user can still enter instead to get the same emoji.</span>\n            <span class=\"k\">if</span> <span class=\"n\">name</span> <span class=\"ow\">in</span> <span class=\"p\">[</span><span class=\"s2\">\"„Ç≥„Ç≥\"</span><span class=\"p\">,</span> <span class=\"s2\">\"„Çµ\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Êåá\"</span><span class=\"p\">,</span> <span class=\"s2\">\"Á©∫\"</span><span class=\"p\">]:</span>\n                <span class=\"k\">assert</span> <span class=\"p\">[</span><span class=\"n\">alias</span><span class=\"o\">.</span><span class=\"n\">isascii</span><span class=\"p\">()</span> <span class=\"k\">for</span> <span class=\"n\">alias</span> <span class=\"ow\">in</span> <span class=\"n\">aliases</span><span class=\"p\">]</span>\n                <span class=\"k\">continue</span>\n            <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"n\">name</span><span class=\"o\">.</span><span class=\"n\">isascii</span><span class=\"p\">():</span>\n                <span class=\"n\">ascii_alias</span> <span class=\"o\">=</span> <span class=\"n\">convert_non_ascii_chars</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n                <span class=\"c1\"># Now no other emoji can use this alias.</span>\n                <span class=\"k\">for</span> <span class=\"n\">code</span> <span class=\"ow\">in</span> <span class=\"n\">alias_to_emoji_code</span><span class=\"p\">[</span><span class=\"n\">ascii_alias</span><span class=\"p\">]:</span>\n                    <span class=\"n\">all_emojis</span><span class=\"p\">[</span><span class=\"n\">code</span><span class=\"p\">][</span><span class=\"s2\">\"aliases\"</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"n\">alias</span><span class=\"p\">)</span>\n                <span class=\"n\">all_emojis</span><span class=\"p\">[</span><span class=\"n\">emoji_code</span><span class=\"p\">][</span><span class=\"s2\">\"aliases\"</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">ascii_alias</span><span class=\"p\">)</span>\n</code></pre></div>",
        "id": 1433183,
        "sender_full_name": "Evy",
        "timestamp": 1662761226
    },
    {
        "content": "<p>OK, that makes sense!</p>",
        "id": 1433282,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1662766826
    },
    {
        "content": "<p>I posted a few more comments on the pull request; we should probably address those before deploying here.</p>",
        "id": 1433283,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1662766837
    },
    {
        "content": "<p>Comments make sense! Will push shortly.</p>",
        "id": 1433300,
        "sender_full_name": "Evy",
        "timestamp": 1662767576
    }
]