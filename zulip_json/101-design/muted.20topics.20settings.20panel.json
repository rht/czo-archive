[
    {
        "content": "<p>I would like to start a discussion around the changes in the <a href=\"#settings/muted-topics\">\"Muted Topics\" settings panel</a></p>\n<p>Current UI: <a href=\"/user_uploads/2/76/Hfnkt0agTrF5OHqhOVShplbH/Screenshot-from-2023-04-05-01-05-08.png\">Muted Topics UI</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/76/Hfnkt0agTrF5OHqhOVShplbH/Screenshot-from-2023-04-05-01-05-08.png\" title=\"Muted Topics UI\"><img src=\"/user_uploads/2/76/Hfnkt0agTrF5OHqhOVShplbH/Screenshot-from-2023-04-05-01-05-08.png\"></a></div><p>Broadly, I can think of these changes:</p>\n<ol>\n<li>\n<p>Renaming \"Muted Topics\" in the sidebar to:<br>\n     a. Personal preferences for a topic; or<br>\n     b. Topics configuration<br>\n     c. or simply; \"Topics\"</p>\n</li>\n<li>\n<p>Renaming the panel header \"Muted Topics\" as:<br>\n    a. Topics configuration<br>\n    b. Topics with special configuration</p>\n</li>\n</ol>\n<p>(In the future we can add other things (other than visibility_policy) regarding \"personal preferences for topics\" in this UI with respective panel headers)</p>\n<ol start=\"3\">\n<li>\n<p>The <strong>Date muted</strong> column header should be updated as:<br>\n\"Date muted\" to \"Date added\" (Here \"added\" signifies, the date on which configuration was added.)</p>\n</li>\n<li>\n<p><strong>Actions:</strong><br>\na. toggle effect: mute/remove-mute, unmute/remove-unmute, and so on.<br>\nb. dropdown to select any visibility_policy: MUTE/UNMUTE/ no special config (i.e. INHERIT)</p>\n</li>\n<li>\n<p>Updating the search bar to support filtering by other visibility_policy</p>\n</li>\n<li>Update the search bar placeholder text.</li>\n</ol>",
        "id": 1541291,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1680638074
    },
    {
        "content": "<p>Thoughts?</p>",
        "id": 1541292,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1680638107
    },
    {
        "content": "<p>For 3rd point, it can be \"Date Updated\" too as configuration can be updated too.</p>",
        "id": 1541374,
        "sender_full_name": "Hardik Dharmani",
        "timestamp": 1680642524
    },
    {
        "content": "<p>I think, \"Date added\" or \"Date updated\" would make sense, depending on whether we plan to use a \"toggle effect\" or \"dropdown\" (as discussed in the 4th  point).</p>\n<p>\"toggle effect\": \"date added\"<br>\n\"dropdown\": \"date updated\"</p>",
        "id": 1541381,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1680642909
    },
    {
        "content": "<p>Dropdown seems more appropiate. with <code>Date Updated</code></p>",
        "id": 1541383,
        "sender_full_name": "Palash Baderia",
        "timestamp": 1680643009
    },
    {
        "content": "<p>15 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"101\" href=\"/#narrow/stream/101-design/topic/unmuting.20in.20muted.20streams\">#design &gt; unmuting in muted streams</a> by <span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span>.</p>",
        "id": 1544231,
        "sender_full_name": "Notification Bot",
        "timestamp": 1681139081
    },
    {
        "content": "<p>I moved some messages here (not 15, since I also moved some back), since the discussion in the original thread moved to a different question.</p>",
        "id": 1544232,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681139218
    },
    {
        "content": "<p>That's a great set of questions -- thanks for laying it out, <span class=\"user-mention\" data-user-id=\"22341\">@Prakhar Pratyush</span> !</p>",
        "id": 1544238,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681139537
    },
    {
        "content": "<blockquote>\n<ol>\n<li>Renaming \"Muted Topics\" in the sidebar to:</li>\n</ol>\n</blockquote>\n<p>Just \"Topics\" seems OK to me (though not entirely ideal). The panel names are generally noun phrases, so it could be something like \"Configured topics\", but that doesn't really seem to clarify it it to me.</p>",
        "id": 1544241,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681139694
    },
    {
        "content": "<p>We should also change the sidebar icon. <span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span> do you have a suggestion for what to use? This is a settings panel that will list all topics with a special configuration -- muted topics, unmuted topics, followed topics.</p>",
        "id": 1544242,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681139771
    },
    {
        "content": "<blockquote>\n<ol start=\"2\">\n<li>Renaming the panel header \"Muted Topics\" as:</li>\n</ol>\n</blockquote>\n<p>Keeping the heading structure consistent, I think \"Configured topics\" seems fine here. We may also want to add a line of description above the table to give a bit of an explanation about what's going on in this panel.</p>",
        "id": 1544244,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681139873
    },
    {
        "content": "<blockquote>\n<ol start=\"4\">\n<li>Actions:</li>\n</ol>\n</blockquote>\n<p>Yeah, probably the clearest UI would be to have a Status column (just after the Topic column), with a dropdown set of options (Muted, Unmuted, (later) Followed, Default). And then we can just drop the Actions column. If I recall correctly, we expect to have at most one special config set per topic?</p>",
        "id": 1544245,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681140238
    },
    {
        "content": "<blockquote>\n<ol start=\"3\">\n<li>The Date muted column header should be updated as:</li>\n</ol>\n</blockquote>\n<p>\"Date updated\" sounds good to me.</p>",
        "id": 1544247,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681140762
    },
    {
        "content": "<blockquote>\n<ol start=\"5\">\n<li>Updating the search bar to support filtering by other visibility_policy</li>\n</ol>\n</blockquote>\n<p>Sounds good. I think visually this could be similar to <a href=\"https://github.com/zulip/zulip/pull/24671\">#24671</a>. It seems OK for this to be a follow-up, rather than part of the initial implementation.</p>",
        "id": 1544248,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681140788
    },
    {
        "content": "<blockquote>\n<ol start=\"6\">\n<li>Update the search bar placeholder text.</li>\n</ol>\n</blockquote>\n<p>I guess \"Filter topics\" would work there. It could be \"Filter configured topics\", but the extra word probably doesn't add much.</p>",
        "id": 1544252,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681141099
    },
    {
        "content": "<p>We can wait for a bit more discussion, and then I can put all the decisions into an issue.</p>",
        "id": 1544256,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681141210
    },
    {
        "content": "<p>\"Topic settings\" would also be a possible candidate name; maybe a bit more consistent with the rest of our UI naming conventions than \"Configure topics\"?</p>",
        "id": 1544802,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1681174706
    },
    {
        "content": "<p>I filed <strong>Convert \"Muted topics\" settings panel for more general topic subscriptions management</strong> <a href=\"https://github.com/zulip/zulip/pull/25081\">#25081</a>. <span class=\"user-mention\" data-user-id=\"22341\">@Prakhar Pratyush</span> will you have time to work on it? Since it's a release goal, if you have a lot on your plate, we can have some one else (perhaps <span class=\"user-mention\" data-user-id=\"10242\">@Sahil Batra</span> ?) take it on.</p>",
        "id": 1545459,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681237515
    },
    {
        "content": "<p>I can comfortably pick this up.</p>\n<p>The major backend work for unmute topics project is mostly complete. (<a href=\"https://github.com/zulip/zulip/pull/25052\">#25052</a> is the last major work).</p>",
        "id": 1545462,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681237788
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/muted.20topics.20settings.20panel/near/1544242\">said</a>:</p>\n<blockquote>\n<p>We should also change the sidebar icon. <span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> do you have a suggestion for what to use? This is a settings panel that will list all topics with a special configuration -- muted topics, unmuted topics, followed topics.</p>\n</blockquote>\n<p>Which icon looks closer to \"topic\" for you? <br>\n<a href=\"/user_uploads/2/60/DZcDObdEO2-SW1rnPG3gGWis/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/60/DZcDObdEO2-SW1rnPG3gGWis/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/60/DZcDObdEO2-SW1rnPG3gGWis/image.png\"></a></div>",
        "id": 1545851,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1681258794
    },
    {
        "content": "<p>And another 2 in a context. I think it should be one of these: <br>\n<a href=\"/user_uploads/2/6c/ggUTbUZWOsihWuGfCHJ920cm/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/6c/ggUTbUZWOsihWuGfCHJ920cm/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/6c/ggUTbUZWOsihWuGfCHJ920cm/image.png\"></a></div>",
        "id": 1545885,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1681263117
    },
    {
        "content": "<p>I think I like the right one?</p>",
        "id": 1545898,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1681264544
    },
    {
        "content": "<p>Here's the draft PR: <a href=\"https://github.com/zulip/zulip/pull/25127\">#25127</a></p>",
        "id": 1548285,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681509577
    },
    {
        "content": "<blockquote>\n<p>And another 2 in a context. I think it should be one of these:</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"22433\">@Vlad Korobov</span> Could you provide the icon for the one on the right? We should add it to the settings panel issue (<a href=\"https://github.com/zulip/zulip/pull/25081\">#25081</a>).</p>",
        "id": 1548354,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681513881
    },
    {
        "content": "<p><a href=\"/user_uploads/2/c3/jT9MUm6tROTcsZvenLG9rRl8/topic-icon.svg\">topic-icon.svg</a></p>",
        "id": 1548434,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1681523518
    },
    {
        "content": "<p>I would like to carry forward the <a href=\"https://github.com/zulip/zulip/pull/25127#issuecomment-1509000414\">discussion</a> started in <a href=\"https://github.com/zulip/zulip/pull/25127\">#25127</a> :</p>\n<p><strong>I said:</strong></p>\n<p>In the status dropdown, the three options (Muted, Unmuted, Default) should always be present?</p>\n<p>Example to explain:</p>\n<p>Let's say a topic has the status MUTED and is in an unmuted stream. Should we provide the option of UNMUTE in the dropdown? (which will result in UNMUTED topic in the unmuted stream)</p>\n<p>Possible ways to handle this:</p>\n<p>a. Let the user select any option; we will handle the resultant behaviour when working on the display aspects PRs of this feature.</p>\n<p>b. Don't show the option. -- (I think this is the correct way.)</p>",
        "id": 1548750,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681620800
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span>  <a href=\"https://github.com/zulip/zulip/pull/25127#issuecomment-1509379044\">said</a>:</p>\n<blockquote>\n<p>Don't show the option. -- (I think this is the correct way.)</p>\n</blockquote>\n<p>Yeah, I think that's right. Otherwise, it will probably be confusing for the user (what does unmuting a topic that's in an unmuted stream mean?).</p>\n<p>I guess we might still end up showing all 3 options in order to display the current state, e.g. if:</p>\n<ol>\n<li>The user umutes a topic in a muted stream. -&gt; unmuted topic, muted stream</li>\n<li>The user then unmutes the stream. -&gt; unmuted topic, unmuted stream</li>\n</ol>\n<p>Is that right?</p>",
        "id": 1548752,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681621277
    },
    {
        "content": "<p>There has been a previous <a href=\"https://github.com/zulip/zulip/pull/24742#issuecomment-1487971173\">discussion</a> on this in <a href=\"https://github.com/zulip/zulip/pull/24742\">#24742</a></p>\n<p><span class=\"user-mention silent\" data-user-id=\"16839\">Abhijeet Bodas</span> said:</p>\n<p>But as long as we handle UNMUTED topics in not-muted streams correctly (which we do), I think it's fine to not always maintain this truth -- for example, I think it would be OK to avoid doing things like cleaning up UNMUTED topics whenever a stream is unmuted. Doing so would also break workflows for people who frequently mute/unmute streams (I'm not sure if there is a genuine use case for doing so though).</p>",
        "id": 1548753,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681621621
    },
    {
        "content": "<p>So, I think:</p>\n<p>In the topics table, we should exclude the topics having <code>UNMUTED</code> status and being in an unmuted stream.</p>\n<p>In the  new PR <a href=\"https://github.com/zulip/zulip/pull/25127\">#25127</a>, the behavior is:<br>\nWhen you select the status as default, the topic is removed from the table (as it doesn't have any special configuration).</p>\n<p>Similarly, we should treat the <code>UNMUTED</code> topic in an unmuted stream as being <strong>not a special configuration</strong> (so we drop it from the table).</p>\n<p>Thoughts?</p>",
        "id": 1548761,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681622414
    },
    {
        "content": "<p>I think once we add \"follow topic\", we're going to have 4 possible values:</p>\n<ul>\n<li>Follow topic</li>\n<li>Never mute topic / Unmuted</li>\n<li>Default for stream (help text would explain the topic is treated as muted only if the stream is muted)</li>\n<li>Mute topic</li>\n</ul>\n<p>We've been trying to avoid/defer doing UI for that in the many existing places in the app where we currently display a toggle for this \"Unmute topic\" feature, because without the \"Follow topic\" option, it'd feel like pretty silly/contorted UI to have a 3-item dropdown menu where 2 of them do the same thing for most intents and purposes the user is going to think about. </p>\n<p>But I think we shouldn't do a bunch of extra work to avoid just offering those 3 options in this dedicated \"Topics\" panel, where we do have the space to explain the options -- it'd be better to build something where you pick one of those 3 options for that context and then not have to redo it when we add \"follow topic\" in a few months.</p>",
        "id": 1549409,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1681761185
    },
    {
        "content": "<p>I think it will be helpful to figure out how we want to explain the \"Unmuted\" state -- maybe the above problem is something we can solve with some care around language -- but I think I'd rather avoid the extra work of things like hiding <code>UNMUTED</code> topics in streams that are currently not muted; it seems probably more confusing to conceal the state that the user has configured, I think?</p>",
        "id": 1549410,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1681761279
    },
    {
        "content": "<p>That reasoning makes sense to me. If we don't have the space for more than basic labels in the dropdown, we can add an explanation above the table.</p>",
        "id": 1549413,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681761412
    },
    {
        "content": "<p>\"Default for stream\" (vs. just \"Default\") might help clarify things a bit.</p>",
        "id": 1549414,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681761446
    },
    {
        "content": "<p>Ok,</p>\n<p>Should I add the following text?</p>\n<p>Topics with status:</p>\n<ul>\n<li><strong>MUTED</strong>: Topics are displayed faded, with no notifications, and not included in the unread count total.</li>\n<li><strong>UNMUTED</strong>: Topics will remain visible even if the stream is muted. In a stream that is not muted, a status of UNMUTED has the same behavior as DEFAULT.</li>\n<li><strong>DEFAULT</strong>: Topics will inherit the stream's behavior. Topics are treated as muted only if the stream is muted.</li>\n</ul>",
        "id": 1550047,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681820502
    },
    {
        "content": "<p>Also,</p>\n<p>\"Default\" vs \"Default for stream\" vs \"Inherit\" -- which clarifies things better?</p>\n<p>Inherit, because it signifies  \"topic is inheriting the stream's behavior (muted/not-muted)\"?</p>",
        "id": 1550048,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681820691
    },
    {
        "content": "<p><a href=\"/user_uploads/2/22/QSp3_vIZ8LajwjGQcAXp_plq/Screenshot-from-2023-04-18-19-21-29.png\">muted topics panel</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/22/QSp3_vIZ8LajwjGQcAXp_plq/Screenshot-from-2023-04-18-19-21-29.png\" title=\"muted topics panel\"><img src=\"/user_uploads/2/22/QSp3_vIZ8LajwjGQcAXp_plq/Screenshot-from-2023-04-18-19-21-29.png\"></a></div><p>We must update the text \"You have not muted any topics yet.\"</p>\n<p>\"You have not muted/unmuted any topics yet.\" -- looks good?</p>\n<p>or </p>\n<p>\"You haven't added a personal preference for any topics yet.\"</p>",
        "id": 1550081,
        "sender_full_name": "Prakhar Pratyush",
        "timestamp": 1681826479
    },
    {
        "content": "<blockquote>\n<p>\"Default\" vs \"Default for stream\" vs \"Inherit\" -- which clarifies things better?</p>\n</blockquote>\n<p>\"Default for stream\" seems OK to me; \"inherit\" is too much of a software engineering term, I think.</p>",
        "id": 1550084,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681828448
    },
    {
        "content": "<blockquote>\n<p>We must update the text \"You have not muted any topics yet.\"</p>\n</blockquote>\n<p>How about \"You have not configured any topics yet.\" ?</p>",
        "id": 1550085,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681828508
    },
    {
        "content": "<p>(We shouldn't refer to muting/unmuting, since we might as well pick a word we won't have to change when \"follow topic\" is added.)</p>",
        "id": 1550086,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681828547
    },
    {
        "content": "<blockquote>\n<p>Should I add the following text?</p>\n</blockquote>\n<p>I think that's fine for the PR, and I can fiddle with it when reviewing. It'll be easier to think through with the rest of the PR in front of me.</p>",
        "id": 1550089,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681828612
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 1550090,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1681828614
    }
]