[
    {
        "content": "<p>This is probably a good place to discuss the visuals of our inline URL previews feature.  <br>\nSee <a href=\"https://chat.zulip.org/#narrow/near/192766/stream/backend/topic/inline.20URL.20preview\" target=\"_blank\" title=\"https://chat.zulip.org/#narrow/near/192766/stream/backend/topic/inline.20URL.20preview\">https://chat.zulip.org/#narrow/near/192766/stream/backend/topic/inline.20URL.20preview</a> for notes on it.</p>",
        "id": 192769,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493152708
    },
    {
        "content": "<p>Does URL previews have a fixed height?<br>\n<a href=\"/user_uploads/2/5a/aUJUmZNN22RkJ_g4LEyYr60t/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/5a/aUJUmZNN22RkJ_g4LEyYr60t/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/2/5a/aUJUmZNN22RkJ_g4LEyYr60t/pasted_image.png\"></a></div>",
        "id": 192788,
        "sender_full_name": "Tommy Ip",
        "timestamp": 1493153307
    },
    {
        "content": "<p>yeah.  It seems like we should definitely change that in the event that there's no image</p>",
        "id": 192795,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493153786
    },
    {
        "content": "<p>I think the <a href=\"http://youtube.com\" target=\"_blank\" title=\"http://youtube.com\">youtube.com</a> example you have is a bug in the code; it seems to only handle absolute URLs (not relative ones starting with <code>/</code>) in the open graph data.</p>",
        "id": 192797,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493153916
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/issues/4608\" target=\"_blank\" title=\"https://github.com/zulip/zulip/issues/4608\">https://github.com/zulip/zulip/issues/4608</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/zulip/zulip/issues/4608\" style=\"background-image: url(https://avatars1.githubusercontent.com/u/2746074?v=3&amp;s=400)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/zulip/zulip/issues/4608\" target=\"_blank\" title=\"Inline URL previews don't handle relative URLs in open graph data · Issue #4608 · zulip/zulip\">Inline URL previews don't handle relative URLs in open graph data · Issue #4608 · zulip/zulip</a></div><div class=\"message_embed_description\">The youtube image that should be here:\n\nis broken because we're not converting the relatively URL (starting with /) they provide in their open graph data into an absolute URL.\nEasy to reproduce, ju...</div></div></div>",
        "id": 192800,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493154136
    },
    {
        "content": "<p>I kinda think we'd want to turn the feature off for <a href=\"http://github.com\" target=\"_blank\" title=\"http://github.com\">github.com</a> in our project</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"http://github.com\" style=\"background-image: url(https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"http://github.com\" target=\"_blank\" title=\"Build software better, together\">Build software better, together</a></div><div class=\"message_embed_description\">GitHub is where people build software. More than 21 million people use GitHub to discover, fork, and contribute to over 57 million projects.</div></div></div>",
        "id": 192801,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493154172
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 192802,
        "sender_full_name": "Tommy Ip",
        "timestamp": 1493154207
    },
    {
        "content": "<p>Just because we spend a lot of time talking about GitHub issues, etc.  I guess we should see how people feel about it.  </p>\n<p>Testing with auto-linkification: <a href=\"https://github.com/zulip/zulip/pull/1245\" target=\"_blank\" title=\"https://github.com/zulip/zulip/pull/1245\">#1245</a>.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/zulip/zulip/pull/1245\" style=\"background-image: url(https://avatars2.githubusercontent.com/u/842790?v=3&amp;s=400)\" target=\"_blank\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/zulip/zulip/pull/1245\" target=\"_blank\" title=\"polish &quot;Zulip in production&quot; documentation · Issue #1245 · zulip/zulip\">polish \"Zulip in production\" documentation · Issue #1245 · zulip/zulip</a></div><div class=\"message_embed_description\">Following up from #669 and #1219:\n\n Turn README.prod.md into a new \"Zulip in production\" top-level index-like page.\n Turn prod-health-check-debug.md into a \"troubleshooting\" section, either in or l...</div></div></div>",
        "id": 192803,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493154267
    },
    {
        "content": "<p>I guess we can experience it for a few days and see what folks think</p>",
        "id": 192804,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493154388
    },
    {
        "content": "<p>yeah</p>",
        "id": 192805,
        "sender_full_name": "Tommy Ip",
        "timestamp": 1493154395
    },
    {
        "content": "<p>current vote is for turning it off for github, but we can experiment for a few days. If we wanted to do something special for github, I could imagine adding the issue title as alt text for the link.</p>",
        "id": 192893,
        "sender_full_name": "Rishi Gupta",
        "timestamp": 1493158395
    },
    {
        "content": "<p>Some things get cut off with my font size, how are the dimensions of the preview calculated? <a href=\"/user_uploads/2/a2/032LFyy5IP6MB9a4hmT1v3RD/Screen-Shot-2017-04-25-at-20.02.11.png\" target=\"_blank\" title=\"Screen-Shot-2017-04-25-at-20.02.11.png\">Screen-Shot-2017-04-25-at-20.02.11.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/a2/032LFyy5IP6MB9a4hmT1v3RD/Screen-Shot-2017-04-25-at-20.02.11.png\" target=\"_blank\" title=\"Screen-Shot-2017-04-25-at-20.02.11.png\"><img src=\"/user_uploads/2/a2/032LFyy5IP6MB9a4hmT1v3RD/Screen-Shot-2017-04-25-at-20.02.11.png\"></a></div>",
        "id": 193016,
        "sender_full_name": "Andrea  Longo",
        "timestamp": 1493175847
    },
    {
        "content": "<p>Hahah yeah, this feature definitely doesn't support your font size thing.  The dimensions are a fixed 100px height, just like our inline images</p>",
        "id": 193044,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493190027
    },
    {
        "content": "<p>Regarding Home and other buttons:<br>\nIMHO Homes buttons look more poorly than others - not sure about increasing font size</p>",
        "id": 193069,
        "sender_full_name": "Tomasz Kolek",
        "timestamp": 1493190586
    },
    {
        "content": "<p>OK I think we've identified a few issues with inline URL previews:</p>\n<ul>\n<li>We want a realm setting to disable them on a list of domains (which on this server would include <a href=\"http://github.com\" target=\"_blank\" title=\"http://github.com\">github.com</a>)</li>\n<li>We probably don't want to display them at all when there's no image in the open graph data (it doesn't look good)</li>\n<li>Already opened an issue for this, but it doesn't handle relative URLs in the open graph data correctly.</li>\n<li>The fetching code throws an exception when trying to preview itself.</li>\n<li>It doesn't look great with enlarged font size (though I'm not totally sure what to do about that one)</li>\n<li>We probably want some sort of UI for hiding/disabling a preview in a given message.</li>\n<li>We probably want to suppress repeat-appearances of URL previews of the same image in a thread within X time of a previous preview; that probably includes \"in the same message\"</li>\n</ul>\n<p>Any other things?</p>",
        "id": 193188,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493225011
    },
    {
        "content": "<p>We may want to allow users to just turn them all off.</p>",
        "id": 193189,
        "sender_full_name": "Steve Howell",
        "timestamp": 1493225391
    },
    {
        "content": "<p>that's already a realm setting</p>",
        "id": 193191,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493225744
    },
    {
        "content": "<p>I mean a per-user setting.</p>",
        "id": 193192,
        "sender_full_name": "Steve Howell",
        "timestamp": 1493225772
    },
    {
        "content": "<p>(and the per-user setting would only apply to messages I read, not that I compose)</p>",
        "id": 193193,
        "sender_full_name": "Steve Howell",
        "timestamp": 1493225854
    },
    {
        "content": "<p>Maybe let's wait on per-user setting like this until someone complains?</p>",
        "id": 193210,
        "sender_full_name": "Boris Yankov",
        "timestamp": 1493228377
    },
    {
        "content": "<p>That was me complaining. <img alt=\"😀\" class=\"emoji\" src=\"/static/generated/emoji/images/emoji/unicode/1f600.png\" title=\"😀\"></p>",
        "id": 193308,
        "sender_full_name": "Steve Howell",
        "timestamp": 1493234090
    },
    {
        "content": "<p>About the UI for hiding/disabling previews, this is what you can see when you type a URL in Telegram:<br>\n<a href=\"/user_uploads/2/54/M12e-DydPcviCo8NkKsB80wT/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/54/M12e-DydPcviCo8NkKsB80wT/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/2/54/M12e-DydPcviCo8NkKsB80wT/pasted_image.png\"></a></div>",
        "id": 194224,
        "sender_full_name": "Yago González",
        "timestamp": 1493418333
    },
    {
        "content": "<p>I think it's a good approach, since by simply clicking the cross you send the message without the preview.</p>",
        "id": 194225,
        "sender_full_name": "Yago González",
        "timestamp": 1493418407
    },
    {
        "content": "<p>Doing a constantly-visible live preview takes up a lot of space unless your messages are only ever 1 line high</p>",
        "id": 194228,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1493418820
    },
    {
        "content": "<p>Hmmm nice point. Also Telegram doesn't support multiple previews, so this may need some rework.</p>",
        "id": 194229,
        "sender_full_name": "Yago González",
        "timestamp": 1493419404
    }
]