[
    {
        "content": "<p>Hey all! I have some proposals for how we might be able to make the three-dot message menu easier to understand, and would love to get everyone's ideas feedback.</p>\n<p>For reference, here are (admin) menus for when you can / can't edit the message content (first one for my own message, second one for someone else's):</p>\n<p><a href=\"/user_uploads/2/9d/3Adapub23dNpXw9HGaMrc6V8/Screen-Shot-2022-07-19-at-11.55.34-AM.png\">Screen-Shot-2022-07-19-at-11.55.34-AM.png</a> <a href=\"/user_uploads/2/63/WVEv5eyr4kyZJD3NvLxnwKJa/Screen-Shot-2022-07-19-at-11.55.26-AM.png\">Screen-Shot-2022-07-19-at-11.55.26-AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/9d/3Adapub23dNpXw9HGaMrc6V8/Screen-Shot-2022-07-19-at-11.55.34-AM.png\" title=\"Screen-Shot-2022-07-19-at-11.55.34-AM.png\"><img src=\"/user_uploads/2/9d/3Adapub23dNpXw9HGaMrc6V8/Screen-Shot-2022-07-19-at-11.55.34-AM.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/63/WVEv5eyr4kyZJD3NvLxnwKJa/Screen-Shot-2022-07-19-at-11.55.26-AM.png\" title=\"Screen-Shot-2022-07-19-at-11.55.26-AM.png\"><img src=\"/user_uploads/2/63/WVEv5eyr4kyZJD3NvLxnwKJa/Screen-Shot-2022-07-19-at-11.55.26-AM.png\"></a></div>",
        "id": 1406943,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658257058
    },
    {
        "content": "<p>Proposal:</p>\n<ol>\n<li>Rename Edit -&gt; Edit message, Collapse -&gt; Collapse message for clarity, and to match the <strong>Delete message</strong> and <strong>Copy link to message</strong> options.</li>\n<li>Split the View source / Move message option into two menu options that take you to the same UI: <strong>Move message</strong> and <strong>View message source</strong>. At the moment, I think it's confusing why you have this double option, and hard to parse it at a glance.</li>\n</ol>\n<p>Some details:</p>\n<ul>\n<li>The current icon would work well for View message source, but we'd need a different one for Move message. Perhaps some kind of arrow?</li>\n<li>In terms of ordering, probably something like (1) Move message, (2) Quote and reply or forward, (3) View message source would be reasonable.</li>\n</ul>\n<p>Thoughts?</p>",
        "id": 1406944,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658257422
    },
    {
        "content": "<p>The down side of splitting that option is that we have a longer menu, but it seems to me like it would be worth it.</p>",
        "id": 1406945,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658257584
    },
    {
        "content": "<p>We could also consider whether to have a different version of the \"Move message\" menu item based on whether the user has permissions to move the message to a different stream.</p>",
        "id": 1406950,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658258106
    },
    {
        "content": "<p>You can see us struggling a bit with the complexity of the current menu in <a href=\"https://zulip.com/help/move-content-to-another-topic\">https://zulip.com/help/move-content-to-another-topic</a> /  <a href=\"https://zulip.com/help/move-content-to-another-stream#move-messages-to-another-stream\">https://zulip.com/help/move-content-to-another-stream#move-messages-to-another-stream</a>.</p>",
        "id": 1406962,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658258544
    },
    {
        "content": "<p>(The options list for which messages to move will be removed from those pages, so that part is getting simpler.)</p>",
        "id": 1406964,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658258614
    },
    {
        "content": "<p>Splitting the menu items sounds great. It seems like maybe that's an artifact of deriving mouse navigation from the way users think about keyboard navigation</p>",
        "id": 1407021,
        "sender_full_name": "Evy",
        "timestamp": 1658260672
    },
    {
        "content": "<p>Those sound like good changes!</p>",
        "id": 1407047,
        "sender_full_name": "Greg Price",
        "timestamp": 1658261514
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"21453\">Evy Kassirer</span> <a href=\"#narrow/stream/101-design/topic/three-dot.20message.20menu/near/1407021\">said</a>:</p>\n<blockquote>\n<p>Splitting the menu items sounds great. It seems like maybe that's an artifact of deriving mouse navigation from the way users think about keyboard navigation</p>\n</blockquote>\n<p>My guess is that it's less about the keyboard than about the fact that both \"view source\" and \"move message\" are more-limited forms of the \"edit message\" UI, and that I guess we implement them by just taking \"edit message\" and limiting it to allow those two things.</p>",
        "id": 1407050,
        "sender_full_name": "Greg Price",
        "timestamp": 1658261622
    },
    {
        "content": "<p>Hm, for the \"Move message\" icon, perhaps it should be the same as \"Move topic\"? </p>\n<p><a href=\"/user_uploads/2/a7/PCe5kPcER1CLHS0iTws1Xa26/Screen-Shot-2022-07-19-at-2.37.11-PM.png\">Screen-Shot-2022-07-19-at-2.37.11-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/a7/PCe5kPcER1CLHS0iTws1Xa26/Screen-Shot-2022-07-19-at-2.37.11-PM.png\" title=\"Screen-Shot-2022-07-19-at-2.37.11-PM.png\"><img src=\"/user_uploads/2/a7/PCe5kPcER1CLHS0iTws1Xa26/Screen-Shot-2022-07-19-at-2.37.11-PM.png\"></a></div>",
        "id": 1407113,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658266665
    },
    {
        "content": "<p>Yeah, I think that's right. We can potentially pick a different icon for that idea at some point, but we should be consistent with the other move topic UI.</p>",
        "id": 1407124,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1658267397
    },
    {
        "content": "<p>Is the thinking that we'd have those two buttons do the exact same thing (i.e. we still show the raw message content when you've requested a topic move, and we'd still show the topic move options when viewing source)? I can see arguments in either direction on that.</p>",
        "id": 1407125,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1658267456
    },
    {
        "content": "<p>Hm, good question. I guess for moving the message, we could just display the message content as usual, rather than displaying the source of the message. That seems very reasonable.</p>",
        "id": 1407191,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658269051
    },
    {
        "content": "<p>And for viewing the source, we wouldn't have to change how the message header is displayed or make it editable.</p>",
        "id": 1407194,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658269114
    },
    {
        "content": "<p>That might be best, but could probably be done as a follow-up to changing the menu options?</p>",
        "id": 1407197,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658269148
    },
    {
        "content": "<p>Filed <strong>Make three-dot message menu options easier to understand</strong> <a href=\"https://github.com/zulip/zulip/pull/22537\">#22537</a> just for the menu change part.</p>",
        "id": 1407660,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658341597
    },
    {
        "content": "<p>For the follow-up of making these options do different things, we should decide what to do with the keyboard shortcuts. It might be reasonable to keep <code>e</code> for <strong>move message</strong> (~ <strong>editing</strong> the topic), and not have a shortcut for viewing message source?</p>",
        "id": 1407666,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658341794
    },
    {
        "content": "<p>For comparison purposes, ZT currently has various information windows for streams/users/messages, all via <code>i</code>, the latter of which has various keys of which <code>r</code> is likely most relevant here (full <strong>r</strong>aw message) - though that may not be the best key long term for source/markdown. In ZT it wouldn't necessarily do the same as <code>e</code> like in the web app, as at least right now we distinguish between viewing a (full, scrollable) message in raw or rendered form vs editing the message (role-dependent).</p>",
        "id": 1407998,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1658383542
    },
    {
        "content": "<p>I updated the issue to add a follow-up of using the \"View source\" UI we already have (shown when stream/topic are not editable) for the \"View message source\" option, with the caveat that I think we should fix <a href=\"https://github.com/zulip/zulip/pull/22566\">#22566</a> before making that UI more prominent.</p>",
        "id": 1408992,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1658520883
    },
    {
        "content": "<p>Sounds like a good plan!</p>",
        "id": 1410965,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1658873912
    },
    {
        "content": "<p>The reworking of message editing options discussed above is now deployed here. Here's a current screenshot; note that the menu is getting quite long with \"mark unread from here\" and \"View read receipts\" added as well. I think there's a separate discussion on potential design changes to make that popover visually nicer while also removing the feeling of being kinda long; someone else can add a link to it.</p>\n<p><a href=\"/user_uploads/2/a9/ohevwJ8U5wj_AVb5Zl6KF9eU/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/a9/ohevwJ8U5wj_AVb5Zl6KF9eU/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/a9/ohevwJ8U5wj_AVb5Zl6KF9eU/image.png\"></a></div>",
        "id": 1440413,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1663980319
    },
    {
        "content": "<p>Maybe <a class=\"stream-topic\" data-stream-id=\"101\" href=\"/#narrow/stream/101-design/topic/Message.20actions.20per.20role.2Fvisibility\">#design &gt; Message actions per role/visibility</a>?</p>",
        "id": 1440489,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1663997598
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> <a href=\"#narrow/stream/101-design/topic/three-dot.20message.20menu/near/1440413\">said</a>:</p>\n<blockquote>\n<p>The reworking of message editing options discussed above is now deployed here. Here's a current screenshot; note that the menu is getting quite long with \"mark unread from here\" and \"View read receipts\" added as well. I think there's a separate discussion on potential design changes to make that popover visually nicer while also removing the feeling of being kinda long; someone else can add a link to it.</p>\n<p><a href=\"/user_uploads/2/a9/ohevwJ8U5wj_AVb5Zl6KF9eU/image.png\">image.png</a></p>\n</blockquote>\n<p>Hmm, why is the emoji reaction action in the menu instead of next to it? And in it's place next to the menu is a view source button?</p>",
        "id": 1440676,
        "sender_full_name": "Cyphase",
        "timestamp": 1664046835
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"4976\">Cyphase</span> Is this the difference between where you wrote the message or not? I missed that when I was discussing the menus too.</p>",
        "id": 1440744,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1664064223
    },
    {
        "content": "<p>Doh, of course that's what it is. I was trying to think of possible reasons for that to be happening, and somehow missed the obvious one. Thanks!</p>",
        "id": 1440745,
        "sender_full_name": "Cyphase",
        "timestamp": 1664064364
    },
    {
        "content": "<p>The following question came up in the discussion on the PR for this change... Both in <code>main</code> and after this change, the \"Move message\" option is only shown if the user doesn't have editing permissions. When they do, if they are allowed to move the message, they would do it through the \"Edit message\" menu.</p>\n<p>Should we instead show both \"Edit message\" and \"Move message\" when the user is allowed to do both? That seems more intuitive, since it's not obvious that moving a message is considered to be a type of message editing. There's of course a cost in terms of (sometimes) adding  one more option to an already-long menu.</p>",
        "id": 1441015,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664182042
    },
    {
        "content": "<p>Yes please lets show both actions</p>",
        "id": 1441087,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1664200174
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"10242\">@Sahil Batra</span> would you be up for updating <a href=\"https://github.com/zulip/zulip/pull/22652\">#22652</a> to do that?</p>",
        "id": 1441125,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664211650
    },
    {
        "content": "<p>We can put \"Edit message\" above \"Move message\" when both are shown.</p>",
        "id": 1441131,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664213102
    },
    {
        "content": "<p>It would also be nice if we could implement this part of the issue (<a href=\"https://github.com/zulip/zulip/pull/22537\">#22537</a>):</p>\n<blockquote>\n<p>[This can be done as a follow-up] The shortcut icons for one's own messages should be prioritized in the following way:</p>\n</blockquote>",
        "id": 1441132,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664213230
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/three-dot.20message.20menu/near/1441125\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"10242\">Sahil Batra</span> would you be up for updating <a href=\"https://github.com/zulip/zulip/pull/22652\">#22652</a> to do that?</p>\n</blockquote>\n<p>This PR has been updated as per my last review and it looks good for a review by Tim now, do we want to first merge it or do we want these changes as well?</p>",
        "id": 1441703,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1664303650
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"7\">@Tim Abbott</span> What do you think?</p>\n<p>I want to do this follow-up before we push the changes to Zulip Cloud, but I'm open to whatever approach you want to take for merging to <code>main</code>.</p>",
        "id": 1441721,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664305188
    },
    {
        "content": "<p>I'm actually going to file a larger issue, following up on <a class=\"stream-topic\" data-stream-id=\"101\" href=\"/#narrow/stream/101-design/topic/Message.20actions.20per.20role.2Fvisibility\">#design &gt; Message actions per role/visibility</a> .</p>",
        "id": 1441740,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664306627
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"10242\">@Sahil Batra</span>: <strong>Organize three-dot message menu</strong> <a href=\"https://github.com/zulip/zulip/pull/23076\">#23076</a></p>",
        "id": 1441788,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664309745
    },
    {
        "content": "<p>I think I can add a commit to show both edit and move option when both are allowed to <a href=\"https://github.com/zulip/zulip/pull/22652\">#22652</a> and then it can probably be merged as it would be easy to complete <a href=\"https://github.com/zulip/zulip/pull/21739\">#21739</a> after it. And then I can do the remaining followup tasks in a new PR.</p>",
        "id": 1442210,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1664390266
    },
    {
        "content": "<p>Works for me, thanks!</p>",
        "id": 1442237,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664392255
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"7\">Tim Abbott</span> has suggested dropping \"message\" from at least some of the options again, to reduce the impression of complexity given by the menu.</p>\n<p>I'm not convinced it's an improvement, since I do think including \"message\"makes the options more clear. But I'd be most open to doing it for Edit/Move/Delete message, which will be grouped together in one section after <a href=\"https://github.com/zulip/zulip/pull/23076\">#23076</a>.</p>\n<p>What do other folks think?</p>",
        "id": 1442782,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1664475590
    },
    {
        "content": "<p>With the current deployment this looks a little less uniform and more structured, though it also seems more 'bulky' in some way that I can't pin down, not having the previous and deployed versions side by side.</p>",
        "id": 1448144,
        "sender_full_name": "Neil Pilgrim (neiljp)",
        "timestamp": 1665525027
    },
    {
        "content": "<p>The things that may make the menu longer are the following clarity improvements:</p>\n<ul>\n<li>\"View source / Move message\" are separate options.</li>\n<li>We now show a \"Move message\" option regardless of whether you also have an \"Edit message\" option available.</li>\n<li>Separators between sections.</li>\n</ul>",
        "id": 1448157,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665526061
    },
    {
        "content": "<p>We have a few ideas for further tweaks we can make to the menu to make it shorter, such as possibly removing \"Collapse message\". Also worth noting we will likely end up adding a couple new items to that menu over the next year, as we add new features that would best fit there.</p>\n<p>The main thing I've noticed is that I'm super used to the \"Move message\" option being at the top of the menu, so I'm experiencing a bit of the downside of the UI having changed on me.</p>",
        "id": 1448549,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665597123
    },
    {
        "content": "<p>Hm, for your own messages, you probably edit them more often than you move them, right?</p>\n<p>For other people's messages, \"Move message\" will be back at the top of the list once <strong>Add \"Quote and reply or forward\" button to message bar</strong> <a href=\"https://github.com/zulip/zulip/pull/23100\">#23100</a> is implemented, assuming that works out.</p>",
        "id": 1448747,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665611069
    },
    {
        "content": "<p>For my own messages, I almost always click the edit pencil without opening the menu at all.</p>\n<p>But yeah, this experience is when trying to move someone else's message.</p>",
        "id": 1448803,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665612940
    },
    {
        "content": "<p>Should the menu option be \"Move messages\" rather than \"Move message\", to hint that you can move more than one? The message moving modal title is currently \"Move messages\".</p>",
        "id": 1449297,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1665683233
    },
    {
        "content": "<p>Yeah, that might be an improvement in clarity.</p>",
        "id": 1449329,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1665687065
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"19257\">Alya Abbott</span> <a href=\"#narrow/stream/101-design/topic/three-dot.20message.20menu/near/1449297\">said</a>:</p>\n<blockquote>\n<p>Should the menu option be \"Move messages\" rather than \"Move message\", to hint that you can move more than one? The message moving modal title is currently \"Move messages\".</p>\n</blockquote>\n<p>Hearing no objections, <span class=\"user-mention\" data-user-id=\"10242\">@Sahil Batra</span> would you be up for implementing this change?</p>",
        "id": 1451459,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1666051759
    },
    {
        "content": "<p>Added a commit in <a href=\"https://github.com/zulip/zulip/pull/23224\">#23224</a></p>",
        "id": 1451500,
        "sender_full_name": "Sahil Batra",
        "timestamp": 1666059738
    }
]