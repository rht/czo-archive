[
    {
        "content": "<p>It's sometimes annoying when I want to attack some file by drag/drop method and compose box is closed<br>\nIt always opens up the file in chrome<br>\n<a href=\"/user_uploads/2/8e/f0fRqM7vu3n_tvmLMwkVK899/Peek-2020-04-14-23-00.gif\" title=\"Peek-2020-04-14-23-00.gif\">Peek-2020-04-14-23-00.gif</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/8e/f0fRqM7vu3n_tvmLMwkVK899/Peek-2020-04-14-23-00.gif\" title=\"Peek-2020-04-14-23-00.gif\"><img src=\"/user_uploads/2/8e/f0fRqM7vu3n_tvmLMwkVK899/Peek-2020-04-14-23-00.gif\"></a></div>",
        "id": 853517,
        "sender_full_name": "Siddharth",
        "timestamp": 1586885500
    },
    {
        "content": "<p>It will be great that when I drag some file ad drop on zulip webpage it get automatically attached in the compose message box</p>",
        "id": 853518,
        "sender_full_name": "Siddharth",
        "timestamp": 1586885554
    },
    {
        "content": "<p>Definitely agree. The current behavior is quite annoying and we should change it.</p>\n<p>A small but annoying detail is who to fill in as the recipients for the message:</p>\n<ul>\n<li>In an all/alerts/stars/etc narrow -&gt; we could leave the stream and topic empty</li>\n<li>for  in:private -&gt; we could leave the PM recipients empty</li>\n<li>for a given group pm / pm user -&gt; we could fill them in</li>\n<li>for a given stream -&gt; we could fill in the stream and leave the topic empty</li>\n<li>for a given topic -&gt; we could fill in the stream and topic.</li>\n</ul>\n<p>Kinda obvious stuff but worth doing.</p>",
        "id": 853539,
        "sender_full_name": "Yash RE",
        "timestamp": 1586887661
    },
    {
        "content": "<p>Yeah, agreed, we should probably just make the default behavior of dragging it to a place that isn't an open message-edit area to open the compose box and upload there.</p>",
        "id": 853605,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1586890011
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"11296\">@Siddharth</span> can you open an issue?</p>",
        "id": 853606,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1586890015
    },
    {
        "content": "<p>yeah sure</p>",
        "id": 853613,
        "sender_full_name": "Siddharth",
        "timestamp": 1586890201
    },
    {
        "content": "<p>opened <a href=\"https://github.com/zulip/zulip/issues/14579\" title=\"https://github.com/zulip/zulip/issues/14579\">#14579</a></p>",
        "id": 853708,
        "sender_full_name": "Siddharth",
        "timestamp": 1586894393
    },
    {
        "content": "<p>Regarding how to fill in recipients, it could just be a thin wrapper over the logic of the existing \"New private message\" and \"New stream message\" / \"New topic\" buttons.</p>",
        "id": 854022,
        "sender_full_name": "Cyphase",
        "timestamp": 1586932280
    },
    {
        "content": "<p>Hi, I would like to contribute, but where would I begin to look for the code to edit this function. I'm still learning about the Zulip code, so I'm pretty unfamiliar with it.</p>",
        "id": 866961,
        "sender_full_name": "Christina Torres",
        "timestamp": 1588459533
    },
    {
        "content": "<p>I would think the code I must edit would be found in the same place that the code for drag and drop files to the message box, but after searching for 2 days I'm at a loss.</p>",
        "id": 866970,
        "sender_full_name": "Christina Torres",
        "timestamp": 1588462610
    },
    {
        "content": "<p>static/js/upload.js is the file where you will find the drag/drop logic<br>\nNot sure if that's the file which needs changes for this feature...but can be a good starting point for understanding the logic</p>",
        "id": 866974,
        "sender_full_name": "Siddharth",
        "timestamp": 1588464432
    },
    {
        "content": "<p>Thank You <span class=\"user-mention\" data-user-id=\"11296\">@Siddharth</span> !!</p>",
        "id": 867118,
        "sender_full_name": "Christina Torres",
        "timestamp": 1588536424
    },
    {
        "content": "<p>My college team and I were able to create a <a href=\"https://github.com/zulip/zulip/pull/14853\" title=\"https://github.com/zulip/zulip/pull/14853\">pull request</a> solving the issue as we understood it as.</p>",
        "id": 869864,
        "sender_full_name": "Christina Torres",
        "timestamp": 1588809935
    },
    {
        "content": "<p>Are there any changes I should make to my <a href=\"https://github.com/zulip/zulip/pull/14853\">pull request</a>?</p>",
        "id": 873706,
        "sender_full_name": "Christina Torres",
        "timestamp": 1589206186
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"15082\">@Christina Torres</span> it might help to start a thread in <a class=\"stream\" data-stream-id=\"91\" href=\"/#narrow/stream/91-code-review\">#code review</a>. The PR looks good at a glance, and we need someone to manually review this before merging or leaving comments.</p>",
        "id": 873711,
        "sender_full_name": "Rohitt Vashishtha",
        "timestamp": 1589206327
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"1406\">@Rohitt Vashishtha</span> understood! Thank you for the speedy feedback!</p>",
        "id": 873715,
        "sender_full_name": "Christina Torres",
        "timestamp": 1589206390
    },
    {
        "content": "<p>So <a href=\"https://github.com/zulip/zulip/pull/14579\">#14579</a>, opened via this thread a couple years ago, was implemented via <a href=\"https://github.com/zulip/zulip/pull/26041\">#26041</a> at last.</p>\n<p>There's one UI quirk with it that likely needs attention -- we don't do anything visual to indicate that drag/drop is going to work until you do it -- we should probably design a simple animation/overlay to hint that.</p>",
        "id": 1626625,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1692227077
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"22333\">@Brijmohan Siyag</span> and <span class=\"user-mention\" data-user-id=\"52\">@Vishnu KS</span> for all the work on this!</p>",
        "id": 1626626,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1692227106
    },
    {
        "content": "<p>In the new compose box or you want to have it now?</p>",
        "id": 1626645,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1692229645
    },
    {
        "content": "<p>I don't think it's urgent, so just in the new compose box seems reasonable. </p>\n<p>(And to be clear, there's \"drag over the compose box\" which we've had since 2013, and \"drag over the app anywhere else\", which is what we just added).</p>",
        "id": 1627117,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1692299744
    },
    {
        "content": "<p>I suggest to highlight the whole app with semitransparent rectangle.<br>\nIf we want to go further we could write some message above closed compose box.<br>\nOnce file is dropped we could open compose and paste the link.<br>\n<a href=\"/user_uploads/2/1b/r5IgcbedUJx3-HKWJYCWVJpY/Frame-134.png\">Frame-134.png</a><br>\n<a href=\"/user_uploads/2/1a/iqK1hBA6nGRCDesVzJ64pArw/Frame-136.png\">Frame-136.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/1b/r5IgcbedUJx3-HKWJYCWVJpY/Frame-134.png\" title=\"Frame-134.png\"><img src=\"/user_uploads/2/1b/r5IgcbedUJx3-HKWJYCWVJpY/Frame-134.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/2/1a/iqK1hBA6nGRCDesVzJ64pArw/Frame-136.png\" title=\"Frame-136.png\"><img src=\"/user_uploads/2/1a/iqK1hBA6nGRCDesVzJ64pArw/Frame-136.png\"></a></div><p>I'm not sure what exactly will happen if I have compose box open and I drag a file over but drop it outside the compose box. Will I have a link attached to the current draft message inside the compose box?<br>\nIn any case we could just highlight a background:<br>\n<a href=\"/user_uploads/2/3e/gi1Y7c_lVDAipl23-ceMmjyE/Frame-135.png\">Frame-135.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/3e/gi1Y7c_lVDAipl23-ceMmjyE/Frame-135.png\" title=\"Frame-135.png\"><img src=\"/user_uploads/2/3e/gi1Y7c_lVDAipl23-ceMmjyE/Frame-135.png\"></a></div>",
        "id": 1628231,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1692506540
    },
    {
        "content": "<p>For reference, this is what it looks like on some other apps:</p>\n<p><a href=\"/user_uploads/2/30/Up6QLk-VoAQ5S018CFp6zc63/Screen-Shot-2023-08-19-at-10.21.16-PM.png\">discord (that was named \"the slack\" hehe)</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/30/Up6QLk-VoAQ5S018CFp6zc63/Screen-Shot-2023-08-19-at-10.21.16-PM.png\" title=\"discord (that was named &quot;the slack&quot; hehe)\"><img src=\"/user_uploads/2/30/Up6QLk-VoAQ5S018CFp6zc63/Screen-Shot-2023-08-19-at-10.21.16-PM.png\"></a></div><p><a href=\"/user_uploads/2/52/VqfNSSDqZ6WW-P7BeGyqzhAC/Screen-Shot-2023-08-19-at-10.24.16-PM.png\">slack</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/52/VqfNSSDqZ6WW-P7BeGyqzhAC/Screen-Shot-2023-08-19-at-10.24.16-PM.png\" title=\"slack\"><img src=\"/user_uploads/2/52/VqfNSSDqZ6WW-P7BeGyqzhAC/Screen-Shot-2023-08-19-at-10.24.16-PM.png\"></a></div><p><a href=\"/user_uploads/2/e/q2-YgzCxfY1fBEOHy8FXViwB/Screen-Shot-2023-08-19-at-10.29.21-PM.png\">messenger</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/e/q2-YgzCxfY1fBEOHy8FXViwB/Screen-Shot-2023-08-19-at-10.29.21-PM.png\" title=\"messenger\"><img src=\"/user_uploads/2/e/q2-YgzCxfY1fBEOHy8FXViwB/Screen-Shot-2023-08-19-at-10.29.21-PM.png\"></a></div>",
        "id": 1628238,
        "sender_full_name": "Evy",
        "timestamp": 1692509477
    },
    {
        "content": "<p>So I'd say the transparent highlight is definitely the way to go</p>",
        "id": 1628240,
        "sender_full_name": "Evy",
        "timestamp": 1692509522
    },
    {
        "content": "<p>Though I also think that blue isn't a great color because it is a very similar blue to what it looks like to highlight text across the app. A grey similar to what we do for modals makes more sense to me.</p>",
        "id": 1628241,
        "sender_full_name": "Evy",
        "timestamp": 1692509575
    },
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"21453\">@Evy</span> thank you very much for refs. I was suggesting something fast and rough. But if we want something nice here is the version: <br>\n<a href=\"/user_uploads/2/fc/K0vI9ZNwEc6TNRGkMCwNAgDH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/fc/K0vI9ZNwEc6TNRGkMCwNAgDH/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/fc/K0vI9ZNwEc6TNRGkMCwNAgDH/image.png\"></a></div>",
        "id": 1628374,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1692582063
    },
    {
        "content": "<p>Yeah that looks great to me and something we could open an issue for implementation of.</p>",
        "id": 1629062,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1692664187
    },
    {
        "content": "<p>How about showing where files will be dropped like this?<br>\n<a href=\"/user_uploads/2/65/fOCJ6q6B_2wEbvVyUgn29Xvn/Untitled.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/65/fOCJ6q6B_2wEbvVyUgn29Xvn/Untitled.png\" title=\"image.png\"><img src=\"/user_uploads/2/65/fOCJ6q6B_2wEbvVyUgn29Xvn/Untitled.png\"></a></div>",
        "id": 1629882,
        "sender_full_name": "Brijmohan Siyag",
        "timestamp": 1692784170
    },
    {
        "content": "<p>Because you confuse the user and they might think that they should actually drop a file in the highlighted area</p>",
        "id": 1629943,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1692798709
    },
    {
        "content": "<p>Nice idea a bout showing the current file size limitation!</p>",
        "id": 1629945,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1692798741
    },
    {
        "content": "<p><a href=\"https://github.com/zulip/zulip/issues/26565\">https://github.com/zulip/zulip/issues/26565</a></p>",
        "id": 1630848,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1692887078
    },
    {
        "content": "<p>Looks great, thanks!</p>",
        "id": 1630974,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1692899266
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"22433\">Vlad Korobov</span> <a href=\"#narrow/stream/101-design/topic/open.20compose.20on.20drag.2Fdrop/near/1628374\">said</a>:</p>\n<blockquote>\n<p>Hey <span class=\"user-mention silent\" data-user-id=\"21453\">Evy</span> thank you very much for refs. I was suggesting something fast and rough. But if we want something nice here is the version: <br>\n<a href=\"/user_uploads/2/fc/K0vI9ZNwEc6TNRGkMCwNAgDH/image.png\">image.png</a></p>\n</blockquote>\n<p>Wanted to point out that this background has <code>backdrop-filter: blur(8px);</code> which looks great but isn't available in firefox and internet explorer and it's not looking great without the blur, so is there any other thing i can use to create that effect?</p>",
        "id": 1632137,
        "sender_full_name": "Nimish Medatwal",
        "timestamp": 1693132593
    },
    {
        "content": "<p>Fire fox is good <br>\n<a href=\"/user_uploads/2/64/enxyqHLKWkhhMVPK9Vl8IQVV/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/64/enxyqHLKWkhhMVPK9Vl8IQVV/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/64/enxyqHLKWkhhMVPK9Vl8IQVV/image.png\"></a></div><p>For cases when backdrop isn't supported we increase opacity from 65% to 90%:<br>\n<a href=\"/user_uploads/2/f9/f0cG14LLhuOTl-njf9aVEYpe/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/2/f9/f0cG14LLhuOTl-njf9aVEYpe/image.png\" title=\"image.png\"><img src=\"/user_uploads/2/f9/f0cG14LLhuOTl-njf9aVEYpe/image.png\"></a></div>",
        "id": 1632142,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1693139679
    },
    {
        "content": "<p>I'm a bit confused what should I do with task labels and who should take the issue on github: <a href=\"https://github.com/zulip/zulip/issues/26565#issuecomment-1694405393\">https://github.com/zulip/zulip/issues/26565#issuecomment-1694405393</a> <br>\n<span class=\"user-mention\" data-user-id=\"26369\">@Karl Stolley</span> ?</p>",
        "id": 1632143,
        "sender_full_name": "Vlad Korobov",
        "timestamp": 1693139797
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"26602\">Nimish Medatwal</span> <a href=\"#narrow/stream/101-design/topic/open.20compose.20on.20drag.2Fdrop/near/1632137\">said</a>:</p>\n<blockquote>\n<p>Wanted to point out that this background has <code>backdrop-filter: blur(8px);</code> which looks great but isn't available in firefox and internet explorer and it's not looking great without the blur, so is there any other thing i can use to create that effect?</p>\n</blockquote>\n<p>Hmmmm. Looks  like there is Firefox support for <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/backdrop-filter#browser_compatibility\"><code>backdrop-filter</code></a>, but it should be possible to adjust the opacity from the fallback Vlad proposed using an <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/@supports\">@supports</a> query for <code>backdrop-filter</code>.</p>",
        "id": 1632332,
        "sender_full_name": "Karl Stolley",
        "timestamp": 1693229154
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"26602\">@Nimish Medatwal</span>, have you started work on this?</p>",
        "id": 1632333,
        "sender_full_name": "Karl Stolley",
        "timestamp": 1693229167
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"26369\">@Karl Stolley</span>  I have created PR <a href=\"https://github.com/zulip/zulip/pull/26622\">#26622</a> <br>\nplease let me if I have make any changes</p>",
        "id": 1634267,
        "sender_full_name": "Sayyed Arib Hussain",
        "timestamp": 1693534402
    }
]