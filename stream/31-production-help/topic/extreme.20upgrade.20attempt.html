<html>
<head><meta charset="utf-8"><title>extreme upgrade attempt · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html">extreme upgrade attempt</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="935099"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/935099" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#935099">(Jul 14 2020 at 17:35)</a>:</h4>
<p>I think I shall attempt a v1.8.1 to 3.0-rc2 upgrade directly and report back! <span aria-label="smiling devil" class="emoji emoji-1f608" role="img" title="smiling devil">:smiling_devil:</span></p>



<a name="935100"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/935100" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#935100">(Jul 14 2020 at 17:35)</a>:</h4>
<p>for extra bonus points this will also include going from the old docker setup to the new one</p>



<a name="935102"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/935102" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#935102">(Jul 14 2020 at 17:36)</a>:</h4>
<p>if you don't hear from me within 3 weeks consider me lost at sea, send a rescue party <span aria-label="ship" class="emoji emoji-1f6a2" role="img" title="ship">:ship:</span></p>



<a name="935103"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/935103" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#935103">(Jul 14 2020 at 17:37)</a>:</h4>
<p>(the whole server is on ZFS w/ offsite backups so I can rollback with one line if I mess anything up badly)</p>



<a name="935113"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/935113" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#935113">(Jul 14 2020 at 17:51)</a>:</h4>
<p><span class="user-mention" data-user-id="2356">@Nick Sweeting</span> that's definitely not going to work.  See <a href="https://zulip.readthedocs.io/en/latest/production/upgrade-or-modify.html#upgrading-the-operating-system">https://zulip.readthedocs.io/en/latest/production/upgrade-or-modify.html#upgrading-the-operating-system</a> for how to stage upgrades.</p>



<a name="935114"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/935114" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#935114">(Jul 14 2020 at 17:52)</a>:</h4>
<p>Oh, I guess you're using <code>docker-zulip</code>, so it's potentially possible that might work.</p>



<a name="935120"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/935120" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#935120">(Jul 14 2020 at 17:54)</a>:</h4>
<p>yeah it's all in docker, I don't run  anything directly on the host</p>



<a name="935121"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/935121" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#935121">(Jul 14 2020 at 17:55)</a>:</h4>
<p>but it is on the old docker zulip setup before it became the official repo with the new setup</p>



<a name="1035143"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035143" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035143">(Oct 12 2020 at 04:03)</a>:</h4>
<p>just finished this yesterday!</p>



<a name="1035144"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035144" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035144">(Oct 12 2020 at 04:03)</a>:</h4>
<p>1.8.1 straight to -&gt; 3.2 failed</p>



<a name="1035145"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035145" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035145">(Oct 12 2020 at 04:04)</a>:</h4>
<p>(as expected, that's quite a traumatic upgrade, but it was worth a shot)</p>



<a name="1035146"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035146" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035146">(Oct 12 2020 at 04:05)</a>:</h4>
<p>however 1.8.1 -&gt; 1.9.0 -&gt; 2.0.0 -&gt; 2.1.4 -&gt; 2.1.7 -&gt; 3.0 -&gt; 3.2 worked great! (I basically picked the intermediary versions at random)</p>



<a name="1035147"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035147" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035147">(Oct 12 2020 at 04:05)</a>:</h4>
<p>just did <code>docker-compose down; bump the versions; docker-compose up; </code>wait 15min for migrations to complete, <code>repeat...</code></p>



<a name="1035148"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035148" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035148">(Oct 12 2020 at 04:06)</a>:</h4>
<p>worked great</p>



<a name="1035149"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035149" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035149">(Oct 12 2020 at 04:07)</a>:</h4>
<p>not only is the server now running with 0 bugs or hickups, I didn't have to migrate any of my config,! it seems as if it's all backwards compatible or that the config schema didn't change at all! a pleasant surprise</p>



<a name="1035150"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035150" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Sweeting <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035150">(Oct 12 2020 at 04:07)</a>:</h4>
<p>6+ realms across a handful of domains all working swimmingly behind cloudflare</p>



<a name="1035181"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035181" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035181">(Oct 12 2020 at 06:07)</a>:</h4>
<p>Great to hear that!  That's consistent with my expectations -- we do test each major version upgrade directly.</p>



<a name="1035182"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/extreme%20upgrade%20attempt/near/1035182" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/extreme.20upgrade.20attempt.html#1035182">(Oct 12 2020 at 06:07)</a>:</h4>
<p>FWIW just upgrading to the last <code>2.0.x</code> then the latest <code>2.1.x</code> etc. is our recommended upgrade process when going across large version ranges -- there's never a reason to upgrade to an intermediate release within a stable series like 2.1.4.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>