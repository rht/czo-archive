<html>
<head><meta charset="utf-8"><title>✔ delete stream via manage shell? · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20delete.20stream.20via.20manage.20shell.3F.html">✔ delete stream via manage shell?</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1462848"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20delete%20stream%20via%20manage%20shell%3F/near/1462848" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Meyer <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20delete.20stream.20via.20manage.20shell.3F.html#1462848">(Nov 11 2022 at 17:28)</a>:</h4>
<p>Hi,<br>
I have the following error message:</p>
<blockquote>
<p>ERR  [django.request] Internal Server Error: /<br>
Traceback (most recent call last):<br>
  File "/srv/zulip-venv-cache/3e8a51ec39dd017488bd50ab98c1a098b5fc62b4/zulip-py3-venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 34, in inner<br>
    response = get_response(request)<br>
  File "/srv/zulip-venv-cache/3e8a51ec39dd017488bd50ab98c1a098b5fc62b4/zulip-py3-venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 115, in _get_response<br>
    response = self.process_exception_by_middleware(e, request)<br>
  File "/srv/zulip-venv-cache/3e8a51ec39dd017488bd50ab98c1a098b5fc62b4/zulip-py3-venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 113, in _get_response<br>
    response = wrapped_callback(request, *callback_args, **callback_kwargs)<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/views/home.py", line 140, in home<br>
    return home_real(request)<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/decorator.py", line 395, in _wrapped_view<br>
    return view_func(request, *args, **kwargs)<br>
  File "/srv/zulip-venv-cache/3e8a51ec39dd017488bd50ab98c1a098b5fc62b4/zulip-py3-venv/lib/python3.8/site-packages/django/contrib/auth/decorators.py", line 21, in _wrapped_view<br>
    return view_func(request, *args, **kwargs)<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/decorator.py", line 447, in _wrapped_view_func<br>
    return rate_limit()(view_func)(request, *args, **kwargs)<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/decorator.py", line 801, in wrapped_func<br>
    return func(request, *args, **kwargs)<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/views/home.py", line 198, in home_real<br>
    register_ret = do_events_register(user_profile, request.client,<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/lib/events.py", line 882, in do_events_register<br>
    ret = fetch_initial_state_data(user_profile, event_types_set, queue_id,<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/lib/events.py", line 276, in fetch_initial_state_data<br>
    subscriptions, unsubscribed, never_subscribed = gather_subscriptions_helper(<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/lib/actions.py", line 4895, in gather_subscriptions_helper<br>
    subscriber_map: Mapping[int, Optional[List[int]]] = bulk_get_subscriber_user_ids(<br>
  File "/home/zulip/deployments/2020-12-04-10-11-33/./zerver/lib/actions.py", line 2615, in bulk_get_subscriber_user_ids<br>
    recipient_ids = sorted([<br>
TypeError: '&lt;' not supported between instances of 'NoneType' and 'int'</p>
</blockquote>
<p>if i understand correctly, the problem comes with a broken subscriber list of a stream. can i delete the affected stream from the zulip shell? </p>
<p>Thanks<br>
PS: I know, the server has not been updated for a long time... unfortunately :(</p>



<a name="1463433"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20delete%20stream%20via%20manage%20shell%3F/near/1463433" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20delete.20stream.20via.20manage.20shell.3F.html#1463433">(Nov 14 2022 at 17:48)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="9" href="/#narrow/stream/9-issues/topic/delete.20stream.20via.20manage.20shell.3F">#issues &gt; delete stream via manage shell?</a> by <span class="user-mention silent" data-user-id="19257">Alya Abbott</span>.</p>



<a name="1463503"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20delete%20stream%20via%20manage%20shell%3F/near/1463503" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20delete.20stream.20via.20manage.20shell.3F.html#1463503">(Nov 14 2022 at 18:28)</a>:</h4>
<p><span class="user-mention" data-user-id="14062">@Alex Meyer</span> we don't support deleting Stream objects; you can deactivate a stream with <code>do_deactivate_stream</code> in the management shell, which might help.</p>



<a name="1463506"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20delete%20stream%20via%20manage%20shell%3F/near/1463506" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20delete.20stream.20via.20manage.20shell.3F.html#1463506">(Nov 14 2022 at 18:28)</a>:</h4>
<p>I'm not sure what would cause that exception, but I'd consider upgrading as a next step; we'll be much more able to help if you're on a current release.</p>



<a name="1464455"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20delete%20stream%20via%20manage%20shell%3F/near/1464455" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Meyer <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20delete.20stream.20via.20manage.20shell.3F.html#1464455">(Nov 15 2022 at 17:12)</a>:</h4>
<p>Thank you, I will try.</p>



<a name="1466513"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20delete%20stream%20via%20manage%20shell%3F/near/1466513" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Meyer <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20delete.20stream.20via.20manage.20shell.3F.html#1466513">(Nov 17 2022 at 13:34)</a>:</h4>
<p>The command <code>do_deactivate_stream</code> was not present in my Zulip instance. I have now applied the zulip updates and simply created a new realm and deleted the old one. The contents of the old realm were not so important for us. Everything works again now, my problem is solved, thanks for the help.</p>



<a name="1466514"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20delete%20stream%20via%20manage%20shell%3F/near/1466514" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20delete.20stream.20via.20manage.20shell.3F.html#1466514">(Nov 17 2022 at 13:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="14062">Alex Meyer</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>