<html>
<head><meta charset="utf-8"><title>LDAP configuration · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html">LDAP configuration</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1189812"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1189812" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1189812">(May 27 2021 at 12:27)</a>:</h4>
<p>I need help configuring the LDAP. I don´t know why it´s keeping requesting the email (i would like to just use the username) and after i login with the email,inside of  the profile of the user, the field email is the username and i cant change it:<br>
     SETTING_AUTH_LDAP_USER_SEARCH: 'LDAPSearch("DC=lab,DC=com", ldap.SCOPE_SUBTREE, "(sAMAccountName=%(user)s)")'<br>
      SETTING_AUTH_LDAP_USERNAME_ATTR: "sAMAccountName"<br>
      SETTING_AUTH_LDAP_EMAIL_ATTR: "mail"<br>
      SETTING_AUTH_LDAP_REVERSE_EMAIL_SEARCH: 'LDAPSearch("DC=lab,DC=com" ldap.SCOPE_SUBTREE, "(mail=%(email)s)")'</p>



<a name="1189813"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1189813" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1189813">(May 27 2021 at 12:28)</a>:</h4>
<p>Anyone? :)</p>



<a name="1189814"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1189814" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Felix (strifel) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1189814">(May 27 2021 at 12:33)</a>:</h4>
<p>Have you restarted Zulip after you configured LDAP?<br>
Have you enabled LDAP in the organisation settings?</p>
<p>You should then be able to just enter the username in the username/email field.</p>



<a name="1189827"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1189827" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1189827">(May 27 2021 at 13:24)</a>:</h4>
<p>Yep. im using the docker version, so i deleted the volumes and launch it after configuration..</p>



<a name="1189914"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1189914" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Felix (strifel) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1189914">(May 27 2021 at 16:25)</a>:</h4>
<p>Did you do the followeing steps?: <a href="https://zulip.com/help/configure-authentication-methods">https://zulip.com/help/configure-authentication-methods</a></p>



<a name="1189919"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1189919" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1189919">(May 27 2021 at 16:46)</a>:</h4>
<p>Also worth checking /var/log/zulip/ldap.log for debugging information.</p>



<a name="1189921"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1189921" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1189921">(May 27 2021 at 16:48)</a>:</h4>
<p>Hmm  did the user account perhaps get created with an older configuration active that may have been wrong? Or are new accounts being created incorrectly as well?</p>



<a name="1190572"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190572" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190572">(May 28 2021 at 09:47)</a>:</h4>
<p>Just for info.. A lot of heroes of researching and testing. I got the mapping of the mail by using the key SETTING_AUTH_LDAP_USER_ATTR_MAP</p>



<a name="1190573"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190573" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190573">(May 28 2021 at 09:47)</a>:</h4>
<p>Now the new challenge is login withou using the email, and just the username of the AD</p>



<a name="1190576"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190576" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Felix (strifel) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190576">(May 28 2021 at 09:51)</a>:</h4>
<p>When logging in with the username SETTING_AUTH_LDAP_USER_SEARCH ist executed. And if a user is returned login with username is possible</p>



<a name="1190577"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190577" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190577">(May 28 2021 at 09:54)</a>:</h4>
<p>But i used the SETTING_AUTH_LDAP_USERNAME_ATTR: "sAMAccountName" to get the username</p>



<a name="1190578"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190578" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190578">(May 28 2021 at 09:54)</a>:</h4>
<p>but it stills requesting the email</p>



<a name="1190580"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190580" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Felix (strifel) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190580">(May 28 2021 at 09:57)</a>:</h4>
<p>Can you please send a screenshot of the Organisation-&gt;Authentication settings page</p>



<a name="1190581"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190581" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190581">(May 28 2021 at 10:03)</a>:</h4>
<p>ok.. one minute</p>



<a name="1190593"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190593" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190593">(May 28 2021 at 11:09)</a>:</h4>
<p><a href="/user_uploads/2/ce/600RIEazlWp4BxT4tPAnaYXH/ldap.PNG">ldap.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/ce/600RIEazlWp4BxT4tPAnaYXH/ldap.PNG" title="ldap.PNG"><img src="/user_uploads/2/ce/600RIEazlWp4BxT4tPAnaYXH/ldap.PNG"></a></div>



<a name="1190595"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190595" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190595">(May 28 2021 at 11:28)</a>:</h4>
<p><a href="/user_uploads/2/3a/Z7zKngjXonS4SWBYVNFPMzos/mail.PNG">mail.PNG</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/3a/Z7zKngjXonS4SWBYVNFPMzos/mail.PNG" title="mail.PNG"><img src="/user_uploads/2/3a/Z7zKngjXonS4SWBYVNFPMzos/mail.PNG"></a></div>



<a name="1190596"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190596" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190596">(May 28 2021 at 11:28)</a>:</h4>
<p>As you can see the email is the username</p>



<a name="1190598"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/LDAP%20configuration/near/1190598" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> João Fernandes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/LDAP.20configuration.html#1190598">(May 28 2021 at 11:41)</a>:</h4>
<p>resolved!.... it was missing the APPEND domain</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>