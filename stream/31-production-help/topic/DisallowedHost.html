<html>
<head><meta charset="utf-8"><title>DisallowedHost · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html">DisallowedHost</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1361086"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361086" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bablu Kumar <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361086">(Apr 06 2022 at 07:20)</a>:</h4>
<p>i am faciInternal server error<br>
This Zulip server is currently experiencing some technical difficulties. Sorry about that!</p>
<p>The page will reload automatically soon after service is <a href="http://restored.ng">restored.ng</a> issues many days ;'<br>
<a href="/user_uploads/2/37/CAnqIUPFr3bATzY1qA7TzDdv/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/37/CAnqIUPFr3bATzY1qA7TzDdv/image.png" title="image.png"><img src="/user_uploads/2/37/CAnqIUPFr3bATzY1qA7TzDdv/image.png"></a></div>



<a name="1361171"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361171" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bablu Kumar <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361171">(Apr 06 2022 at 12:47)</a>:</h4>
<p>2022-04-06 10:13:49.320 ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: '<a href="http://ec2-18-191-159-204.us-east-2.compute.amazonaws.com">ec2-18-191-159-204.us-east-2.compute.amazonaws.com</a>'. You may need to add 'ec2-1&gt;<br>
2022-04-06 10:13:49.382 ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: '<a href="http://ec2-18-191-159-204.us-east-2.compute.amazonaws.com">ec2-18-191-159-204.us-east-2.compute.amazonaws.com</a>'. You may need to add 'ec2-1&gt;<br>
2022-04-06 10:13:51.076 ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: '<a href="http://ec2-18-191-159-204.us-east-2.compute.amazonaws.com">ec2-18-191-159-204.us-east-2.compute.amazonaws.com</a>'. You may need to add 'ec2-1&gt;<br>
2022-04-06 10:13:52.018 ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: '<a href="http://ec2-18-191-159-204.us-east-2.compute.amazonaws.com">ec2-18-191-159-204.us-east-2.compute.amazonaws.com</a>'. You may need to add 'ec2-1&gt;<br>
2022-04-06 10:13:53.648 ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: '<a href="http://ec2-18-191-159-204.us-east-2.compute.amazonaws.com">ec2-18-191-159-204.us-east-2.compute.amazonaws.com</a>'. You may need to add 'ec2-1&gt;<br>
2022-04-06 10:13:56.756 ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: ''. The domain name provided is not valid according to RFC 1034/1035.<br>
2022-04-06 10:14:33.274 ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: '<a href="http://ec2-18-191-159-204.us-east-2.compute.amazonaws.com">ec2-18-191-159-204.us-east-2.compute.amazonaws.com</a>'. You may need to add 'ec2-1&gt;<br>
2022-04-06 10:14:33.354 ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: '<a href="http://ec2-18-191-159-204.us-east-2.compute.amazonaws.com">ec2-18-191-159-204.us-east-2.compute.amazonaws.com</a>'. You may need to add 'ec2-1&gt;<br>
&lt;'<a href="http://ec2-18-191-159-204.us-east-2.compute.amazonaws.com">ec2-18-191-159-204.us-east-2.compute.amazonaws.com</a>' to ALLOWED_HOSTS.</p>
<p>this problem occurs while restart server<br>
and i have allowed hosts also in etc/zulip/settings.py</p>



<a name="1361172"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361172" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bablu Kumar <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361172">(Apr 06 2022 at 12:47)</a>:</h4>
<p><a href="/user_uploads/2/5a/AwExcv5Q2kQ62CVkD7ZAfHPC/Screenshot-from-2022-04-06-12-57-30.png">Screenshot-from-2022-04-06-12-57-30.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/5a/AwExcv5Q2kQ62CVkD7ZAfHPC/Screenshot-from-2022-04-06-12-57-30.png" title="Screenshot-from-2022-04-06-12-57-30.png"><img src="/user_uploads/2/5a/AwExcv5Q2kQ62CVkD7ZAfHPC/Screenshot-from-2022-04-06-12-57-30.png"></a></div>



<a name="1361318"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361318" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361318">(Apr 06 2022 at 18:35)</a>:</h4>
<p>A message was moved here from <a class="stream-topic" data-stream-id="9" href="/#narrow/stream/9-issues/topic/Mention.20after.20.2F">#issues &gt; Mention after /</a> by <span class="user-mention silent" data-user-id="12178">Alex Vandiver</span>.</p>



<a name="1361352"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361352" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361352">(Apr 06 2022 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="23901">@Bablu Kumar</span>: Please use a new topic when asking for help, rather than tacking onto other topics; I've collected your messages here.</p>
<p>Like the error says, you'll need to add <code>ec2-18-191-159-204.us-east-2.compute.amazonaws.com</code> to your <code>ALLOWED_HOSTS</code> configuration in <code>/etc/zulip/settings.py</code>.  That line should look like:</p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="n">ALLOWED_HOSTS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'ec2-18-191-159-204.us-east-2.compute.amazonaws.com'</span><span class="p">]</span>
</code></pre></div>
<p>Then you should restart the server using:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/home/zulip/deployments/current/scripts/restart-server
</code></pre></div>



<a name="1361353"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361353" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361353">(Apr 06 2022 at 19:13)</a>:</h4>
<p>I am a little confused how that hostname is getting into the <code>Host:</code> header for Django to see it, though -- generally the nginx upstreams are set to <code>127.0.0.1</code> which means that's the hostname that Django sees.</p>



<a name="1361354"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361354" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361354">(Apr 06 2022 at 19:15)</a>:</h4>
<p>Actually, scratch that -- the nginx upstream is the uwsgi socket, so it doesn't have a hostname on it.</p>



<a name="1361355"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361355" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361355">(Apr 06 2022 at 19:16)</a>:</h4>
<p>You must have some other layer of proxy or something in front of Zulip to have it seeing the EC2 hostname.</p>



<a name="1361805"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/DisallowedHost/near/1361805" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bablu Kumar <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/DisallowedHost.html#1361805">(Apr 07 2022 at 11:22)</a>:</h4>
<p>thanks for help <br>
i have done as you advice but same error showing</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>