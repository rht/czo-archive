<html>
<head><meta charset="utf-8"><title>✔ Invalid asm.js while upgrading to master · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html">✔ Invalid asm.js while upgrading to master</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1208745"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1208745" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Tribrunner <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1208745">(Jun 14 2021 at 17:00)</a>:</h4>
<div class="codehilite"><pre><span></span><code>+ ./tools/webpack --quiet
(node:4938) V8: /srv/zulip-npm-cache/f850038301f02016eca8dfe235c26331160d40a2/node_modules/ttf2woff2/jssrc/ttf2woff2.js:3 Invalid asm.js: Invalid member of stdlib
(Use `node --trace-warnings ...` to show where the warning was created)
i ｢wdm｣: Webpack compilation successful.
+ ./manage.py collectstatic --no-default-ignore -v0 --noinput --ignore=assets --ignore=emoji-styles --ignore=html --ignore=js --ignore=styles --ignore=templates
+ ./manage.py compilemessages -v0
</code></pre></div>



<a name="1208746"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1208746" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Tribrunner <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1208746">(Jun 14 2021 at 17:01)</a>:</h4>
<div class="codehilite"><pre><span></span><code>2021-06-14 17:00:36,753 restart-server: Restarting django server
2021-06-14 17:00:39,318 restart-server: Done!
2021-06-14 17:00:39,354 upgrade-zulip-stage-2: Upgrade complete!
2021-06-14 17:00:39,355 upgrade-zulip-stage-2: Purging old deployments...
+ rm -rf /home/zulip/deployments/2021-05-09-10-44-34
Deployments cleaned successfully...
Cleaning orphaned/unused caches...
Traceback (most recent call last):
  File &quot;./scripts/purge-old-deployments&quot;, line 95, in &lt;module&gt;
    main()
  File &quot;./scripts/purge-old-deployments&quot;, line 90, in main
    clean_unused_caches.main(args)
  File &quot;/home/zulip/deployments/2021-06-14-18-52-10/scripts/lib/clean_unused_caches.py&quot;, line 14, in main
    clean_venv_cache.main(args)
  File &quot;/home/zulip/deployments/2021-06-14-18-52-10/scripts/lib/clean_venv_cache.py&quot;, line 54, in main
    purge_unused_caches(VENV_CACHE_DIR, caches_in_use, &quot;venv cache&quot;, args)
  File &quot;/home/zulip/deployments/2021-06-14-18-52-10/scripts/lib/zulip_tools.py&quot;, line 334, in purge_unused_caches
    caches_to_purge, caches_to_keep, cache_type, args.dry_run, args.verbose, args.no_headings
AttributeError: &#39;Namespace&#39; object has no attribute &#39;no_headings&#39;
Traceback (most recent call last):
  File &quot;/home/zulip/deployments/2021-06-14-18-52-10/scripts/lib/upgrade-zulip-stage-2&quot;, line 321, in &lt;module&gt;
    subprocess.check_call([&quot;./scripts/purge-old-deployments&quot;])
  File &quot;/usr/lib/python3.7/subprocess.py&quot;, line 347, in check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command &#39;[&#39;./scripts/purge-old-deployments&#39;]&#39; returned non-zero exit status 1.
</code></pre></div>



<a name="1208927"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1208927" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1208927">(Jun 14 2021 at 19:32)</a>:</h4>
<p>The “Invalid asm.js” warning is known, harmless, and unrelated.</p>



<a name="1208935"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1208935" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1208935">(Jun 14 2021 at 19:42)</a>:</h4>
<p>The <code>args.no_headings</code> error seems hard to explain though. That’s clearly created in <code>parse_cache_script_args</code>.</p>



<a name="1208936"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1208936" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1208936">(Jun 14 2021 at 19:43)</a>:</h4>
<p>Oh, this is being discussed on <a class="stream-topic" data-stream-id="21" href="/#narrow/stream/21-provision-help/topic/filled.20root.20partition">#provision help &gt; filled root partition</a>.</p>



<a name="1208984"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1208984" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1208984">(Jun 14 2021 at 20:17)</a>:</h4>
<p><span class="user-mention" data-user-id="8768">@Fabian Tribrunner</span> the traceback at the end is also harmless; it's a known minor bug (see link above) in a post-upgrade cleanup step and there's no need to do anything special following it.</p>



<a name="1208995"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1208995" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Tribrunner <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1208995">(Jun 14 2021 at 20:22)</a>:</h4>
<p>Thx</p>



<a name="1212653"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1212653" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1212653">(Jun 17 2021 at 22:51)</a>:</h4>
<p><span class="user-mention" data-user-id="8768">@Fabian Tribrunner</span> this was fixed in <a href="https://github.com/zulip/zulip/pull/18842">https://github.com/zulip/zulip/pull/18842</a>.</p>



<a name="1212655"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Invalid%20asm.js%20while%20upgrading%20to%20master/near/1212655" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Invalid.20asm.2Ejs.20while.20upgrading.20to.20master.html#1212655">(Jun 17 2021 at 22:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>