<html>
<head><meta charset="utf-8"><title>✔ can_create_users · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20can_create_users.html">✔ can_create_users</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1124937"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20can_create_users/near/1124937" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabio M. <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20can_create_users.html#1124937">(Feb 27 2021 at 07:13)</a>:</h4>
<p>Hi, I want to create a user programmatically, calling the /api/v1/users API. However, I get the </p>
<div class="codehilite"><pre><span></span><code>{&quot;result&quot;:&quot;error&quot;,&quot;msg&quot;:&quot;Must be an organization administrator&quot;,&quot;code&quot;:&quot;UNAUTHORIZED_PRINCIPAL&quot;}
</code></pre></div>
<p>error.<br>
I've used </p>
<div class="codehilite"><pre><span></span><code>./manage.py change_user_role &lt;EMAIL&gt; can_create_users -r &#39;&#39; (my realm has an empty id)
</code></pre></div>
<p>as shown <a href="https://zulip.com/api/create-user">here</a> where <code>&lt;EMAIL&gt;</code> was the bot email or the admin email (I've tried both, with no luck).<br>
What I'm doing wrong?<br>
Thanks</p>



<a name="1125097"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20can_create_users/near/1125097" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20can_create_users.html#1125097">(Feb 27 2021 at 17:47)</a>:</h4>
<p><span class="user-mention" data-user-id="19043">@Fabio M.</span> This endpoint requires the user to also be the realm's administrator. So additionally doing</p>
<div class="codehilite"><pre><span></span><code>./manage.py change_user_role &lt;EMAIL&gt; admin -r &#39;&#39;
</code></pre></div>
<p>should fix it.</p>



<a name="1339956"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20can_create_users/near/1339956" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lee Harris <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20can_create_users.html#1339956">(Mar 07 2022 at 19:12)</a>:</h4>
<p>(deleted)</p>



<a name="1339967"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20can_create_users/near/1339967" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20can_create_users.html#1339967">(Mar 07 2022 at 19:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="10349">Mateusz Mandera</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>