<html>
<head><meta charset="utf-8"><title>certificate replacement · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html">certificate replacement</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="284339"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284339" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284339">(Sep 19 2017 at 21:19)</a>:</h4>
<p>I have setup a 1.6 Zulip server with OpenSSL self-signed cert. and now wanted to replace them with LetsEncrypt certificates. I've got the LetsEncrypt certificates but when I tried symlinking them into the folders giving in the documentation nginx didn't start up again. <br>
Can someone give me some help with this?</p>



<a name="284451"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284451" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284451">(Sep 20 2017 at 02:18)</a>:</h4>
<p><span class="user-mention" data-user-email="greg@zulipchat.com" data-user-id="2187">@Greg Price</span> do you have time to help with this?  If I had to guess, the problem is something to do with one of the paths being wrong in the symlink.  <code>nginx -t</code> is the best way to iteratively debug the <code>nginx</code> configuration.</p>



<a name="284503"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284503" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284503">(Sep 20 2017 at 05:20)</a>:</h4>
<p>I managed to fix it by copying the lets encrypt certificates to the write spot but since cert-bot won't do that nice time around I'd prefer symlinks again. Using <code>mc</code> MidnightCommander I saw that it usually shows with an <code>@</code> in front and gray font. My symlinks were red  with an <code>!</code>in front. But at the button it pointed to the right path. </p>
<p>I mean, I used the documentation and followed it with copy/paste - just changed the domain name in the path. It worked once before with the first attempt to install Zulip</p>



<a name="284592"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284592" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284592">(Sep 20 2017 at 11:37)</a>:</h4>
<p>A red symlink means it's a broken symlink -- it points to a file that doesn't exist.</p>



<a name="284593"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284593" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284593">(Sep 20 2017 at 11:37)</a>:</h4>
<p>(which probably suggests you made a typo or something when creating the path, or perhaps used a relative path)</p>



<a name="284594"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284594" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284594">(Sep 20 2017 at 11:37)</a>:</h4>
<p>that's strange because the symlinks pointed to the files that I copied to that location in the end</p>



<a name="284595"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284595" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284595">(Sep 20 2017 at 11:38)</a>:</h4>
<p>but a typo in both...</p>



<a name="284596"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284596" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284596">(Sep 20 2017 at 11:38)</a>:</h4>
<p>I will try again with symlinks</p>



<a name="284597"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284597" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284597">(Sep 20 2017 at 11:38)</a>:</h4>
<p>but only next time I have to renew the certificates</p>



<a name="284598"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284598" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284598">(Sep 20 2017 at 11:38)</a>:</h4>
<p>Seems reasonable :)</p>



<a name="284599"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284599" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284599">(Sep 20 2017 at 11:38)</a>:</h4>
<p>now I'm glad it's running <img alt=":smile:" class="emoji" src="/static/generated/emoji/images/emoji/unicode/1f604.png" title="smile"></p>



<a name="284600"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284600" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284600">(Sep 20 2017 at 11:38)</a>:</h4>
<p>We definitely use the symlinks approach in our production environments, so it does work :).</p>



<a name="284603"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/284603" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#284603">(Sep 20 2017 at 11:39)</a>:</h4>
<p>oh, I know it works. I had it working before! but then I had the yarn issue and the HAProxy was misconfigured and I thought I messed something up with the container and started from scratch</p>



<a name="285048"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/certificate%20replacement/near/285048" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/certificate.20replacement.html#285048">(Sep 20 2017 at 21:28)</a>:</h4>
<p>Glad you got it working <span class="user-mention" data-user-email="m.mueller@intercultural-elements.eu" data-user-id="1646">@Matthias</span> !</p>
<p>I agree it sounds like the symlinks were broken. Will be curious if you figure out more about what was going on when you next renew.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>