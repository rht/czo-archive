<html>
<head><meta charset="utf-8"><title>Issue when logging in with LDAP Auth · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html">Issue when logging in with LDAP Auth</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="298798"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298798" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298798">(Oct 15 2017 at 21:04)</a>:</h4>
<p>I get the following error when trying to login with a new user who is in my LDAP directory:</p>
<div class="codehilite"><pre><span></span>Error generated by Anonymous user (not logged in) on chat.adbtechltd.co.uk deployment

Traceback (most recent call last):
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/core/handlers/exception.py&quot;, line 42, in inner
    response = get_response(request)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py&quot;, line 249, in _legacy_get_response
    response = self._get_response(request)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py&quot;, line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py&quot;, line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File &quot;./zerver/views/auth.py&quot;, line 445, in login_page
    extra_context=extra_context, **kwargs)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/contrib/auth/views.py&quot;, line 47, in inner
    return func(*args, **kwargs)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/views/decorators/debug.py&quot;, line 76, in sensitive_post_parameters_wrapper
    return view(request, *args, **kwargs)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/utils/decorators.py&quot;, line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/views/decorators/cache.py&quot;, line 57, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/contrib/auth/views.py&quot;, line 81, in login
    if form.is_valid():
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/forms/forms.py&quot;, line 169, in is_valid
    return self.is_bound and not self.errors
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/forms/forms.py&quot;, line 161, in errors
    self.full_clean()
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/forms/forms.py&quot;, line 371, in full_clean
    self._clean_form()
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/forms/forms.py&quot;, line 398, in _clean_form
    cleaned_data = self.clean()
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/contrib/auth/forms.py&quot;, line 191, in clean
    self.user_cache = authenticate(username=username, password=password)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django/contrib/auth/__init__.py&quot;, line 74, in authenticate
    user = backend.authenticate(**credentials)
  File &quot;./zproject/backends.py&quot;, line 422, in authenticate
    user_profile = ZulipLDAPAuthBackendBase.authenticate(self, username, password)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py&quot;, line 169, in authenticate
    user = ldap_user.authenticate(password)
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py&quot;, line 344, in authenticate
    self._get_or_create_user()
  File &quot;/home/zulip/deployments/2017-10-15-20-13-15/zulip-venv/lib/python2.7/site-packages/django_auth_ldap/backend.py&quot;, line 553, in _get_or_create_user
    self._user, created = self.backend.get_or_create_user(username, self)
  File &quot;./zproject/backends.py&quot;, line 444, in get_or_create_user
    if self._realm.deactivated:
AttributeError: &#39;NoneType&#39; object has no attribute &#39;deactivated&#39;


Request info:
- path: /accounts/login/
- POST: {u&#39;username&#39;: [u&#39;********************&#39;], u&#39;csrfmiddlewaretoken&#39;: [u&#39;**********&#39;], u&#39;password&#39;: [u&#39;**********&#39;], u&#39;button&#39;: [u&#39;********************&#39;]}
- REMOTE_ADDR: &quot;[u&#39;92.233.93.8&#39;]&quot;
- QUERY_STRING: &quot;[u&#39;next=&#39;]&quot;
- SERVER_NAME: &quot;[u&#39;&#39;]&quot;
</pre></div>


<p><a href="https://github.com/zulip/zulip/pull/7017" target="_blank" title="https://github.com/zulip/zulip/pull/7017">#7017</a></p>



<a name="298809"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298809" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298809">(Oct 15 2017 at 23:59)</a>:</h4>
<p>What is the state of <a href="https://github.com/zulip/zulip/pull/7003" target="_blank" title="https://github.com/zulip/zulip/pull/7003">#7003</a>, then?</p>



<a name="298877"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298877" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298877">(Oct 16 2017 at 07:33)</a>:</h4>
<p><span class="user-mention" data-user-email="rhtbot@protonmail.com" data-user-id="2328">@Rein Zustand</span> It was a duplicate of <a href="https://github.com/zulip/zulip/pull/6912" target="_blank" title="https://github.com/zulip/zulip/pull/6912">#6912</a> and <a href="https://github.com/zulip/zulip/pull/6399" target="_blank" title="https://github.com/zulip/zulip/pull/6399">#6399</a>. He got it resolved by disabling LDAP and recreating the server.</p>



<a name="298886"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298886" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298886">(Oct 16 2017 at 10:15)</a>:</h4>
<p><span class="user-mention" data-user-email="adbirds@hotmail.co.uk" data-user-id="3715">@Adam Birds</span> Were you able to create an organisation successfully ?</p>



<a name="298888"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298888" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298888">(Oct 16 2017 at 10:16)</a>:</h4>
<p>Yes, an organisation could be created successfully after reinstalling without LDAP, and then enabling LDAP after the organisation was created.</p>



<a name="298890"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298890" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298890">(Oct 16 2017 at 10:20)</a>:</h4>
<p>Not sure about this but did you restart the server after enabling LDAP?</p>



<a name="298892"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298892" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298892">(Oct 16 2017 at 10:25)</a>:</h4>
<p>Yes, turns out that <a href="https://github.com/zulip/zulip/pull/7017" target="_blank" title="https://github.com/zulip/zulip/pull/7017">#7017</a> was due to me having invites are needed ticket. But there is a bug there as it shouldn't error out if invite is ticketed, it should tell you that sign up is disabled. Was discussing with <span class="user-mention" data-user-email="rhtbot@protonmail.com" data-user-id="2328">@Rein Zustand</span> last night and I think it is already patched in <a href="https://github.com/zulip/zulip/pull/6624" target="_blank" title="https://github.com/zulip/zulip/pull/6624">#6624</a></p>



<a name="298893"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298893" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298893">(Oct 16 2017 at 10:25)</a>:</h4>
<p>Users have reported this error previously <a href="https://chat.zulip.org/#narrow/search/attributeerror.3A.20'nonetype'.20object.20has.20no.20attribute.20'deactivated" target="_blank" title="https://chat.zulip.org/#narrow/search/attributeerror.3A.20'nonetype'.20object.20has.20no.20attribute.20'deactivated">https://chat.zulip.org/#narrow/search/attributeerror.3A.20'nonetype'.20object.20has.20no.20attribute.20'deactivated</a>'</p>



<a name="298894"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/298894" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#298894">(Oct 16 2017 at 10:27)</a>:</h4>
<p>Cool :)</p>



<a name="299057"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299057" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299057">(Oct 16 2017 at 17:04)</a>:</h4>
<p>Yeah, This is fixed in master, we just need to get the release out with the fix :)</p>



<a name="299058"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299058" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299058">(Oct 16 2017 at 17:06)</a>:</h4>
<p>Sorry for the trouble <span class="user-mention" data-user-email="adbirds@hotmail.co.uk" data-user-id="3715">@Adam Birds</span>!</p>



<a name="299158"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299158" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299158">(Oct 16 2017 at 19:07)</a>:</h4>
<p>No probs <span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> , not fun unless you get a few issues.</p>



<a name="299515"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299515" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299515">(Oct 17 2017 at 07:52)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> dropped a reply on <a href="https://github.com/zulip/zulip/pull/7017" target="_blank" title="https://github.com/zulip/zulip/pull/7017">#7017</a>, issues when upgrading from git as suggested.</p>



<a name="299517"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299517" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299517">(Oct 17 2017 at 07:57)</a>:</h4>
<p>The <code>upgrade-zulip-from-git</code> has to be run with sudo, IIRC.</p>



<a name="299519"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299519" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299519">(Oct 17 2017 at 08:00)</a>:</h4>
<p><span class="user-mention" data-user-email="adbirds@hotmail.co.uk" data-user-id="3715">@Adam Birds</span> what did the logfiles say?</p>



<a name="299520"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299520" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299520">(Oct 17 2017 at 08:03)</a>:</h4>
<p>Can't seem to see anything in the upgrade.log or install.log. Will try with sudo now but was running directly as root.</p>



<a name="299521"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299521" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299521">(Oct 17 2017 at 08:05)</a>:</h4>
<p>Still fails running with sudo, same error as posted on issue.</p>



<a name="299524"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299524" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299524">(Oct 17 2017 at 08:19)</a>:</h4>
<p>I see. I have another way to track the detail of the err.</p>



<a name="299525"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299525" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299525">(Oct 17 2017 at 08:21)</a>:</h4>
<p>So the <code>./tools/minify-js</code> failed to run, all we need to do is if you could change it in your branch to be more verbose.</p>



<a name="299526"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299526" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299526">(Oct 17 2017 at 08:22)</a>:</h4>
<p>You have to set in zulip.conf <code>git_repo_url = https://github.com/adambirds/zulip.git</code> as well.</p>



<a name="299625"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299625" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299625">(Oct 17 2017 at 13:18)</a>:</h4>
<p>Ahh okay, so I create a fork and then set the repo-url to the repo-url of my fork? <span class="user-mention" data-user-email="rhtbot@protonmail.com" data-user-id="2328">@Rein Zustand</span></p>



<a name="299626"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299626" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299626">(Oct 17 2017 at 13:21)</a>:</h4>
<p>Yes. That way you can add loggers as you please at the relevant places.</p>



<a name="299742"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299742" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299742">(Oct 17 2017 at 16:49)</a>:</h4>
<p><span class="user-mention" data-user-email="adbirds@hotmail.co.uk" data-user-id="3715">@Adam Birds</span> can you post the output from <code>upgrade-zulip-from-git</code>?  If I had to guess, you skipped the instructions for installing the tooling needed for it.</p>



<a name="299743"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299743" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299743">(Oct 17 2017 at 16:49)</a>:</h4>
<p><a href="http://zulip.readthedocs.io/en/latest/prod-maintain-secure-upgrade.html#upgrading-from-zulip-1-6-and-older" target="_blank" title="http://zulip.readthedocs.io/en/latest/prod-maintain-secure-upgrade.html#upgrading-from-zulip-1-6-and-older">http://zulip.readthedocs.io/en/latest/prod-maintain-secure-upgrade.html#upgrading-from-zulip-1-6-and-older</a></p>



<a name="299793"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299793" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299793">(Oct 17 2017 at 20:09)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> yes I missed the <code>scripts/zulip-puppet-apply</code> bit first. Upgrade completed successfully. But I can now confirm that <a href="https://github.com/zulip/zulip/pull/7017" target="_blank" title="https://github.com/zulip/zulip/pull/7017">#7017</a> is working as expected now in the new version.</p>



<a name="299795"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299795" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Birds <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299795">(Oct 17 2017 at 20:23)</a>:</h4>
<p>Logging in with a user who hasn't had an invite now takes you to the page - <a href="https://chat.adbtechltd.co.uk/config-error/ldap" target="_blank" title="https://chat.adbtechltd.co.uk/config-error/ldap">https://chat.adbtechltd.co.uk/config-error/ldap</a>, although an error is stil emailed to admin email address. (not sure if thats meant to happen)<br>
Logging in with a user has had an invite lets them straight in with LDAP creds.</p>



<a name="299955"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299955" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299955">(Oct 18 2017 at 00:21)</a>:</h4>
<p>I think the <code>puppet-apply</code> part should have been automated within <code>upgrade-zulip-from-git</code>, <span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> ?</p>



<a name="299968"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299968" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299968">(Oct 18 2017 at 02:06)</a>:</h4>
<p>I meant, <code>upgrade-zulip</code>.</p>



<a name="299973"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299973" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299973">(Oct 18 2017 at 02:22)</a>:</h4>
<p><span class="user-mention" data-user-email="rhtbot@protonmail.com" data-user-id="2328">@Rein Zustand</span> we actually already removed that step for doing <code>upgrade-zulip-from-git</code>, just 1.7 isn't out yet.</p>



<a name="299974"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299974" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299974">(Oct 18 2017 at 02:27)</a>:</h4>
<p>I see. Is this line outdated? <a href="https://github.com/zulip/zulip/blob/5a77a4d1226509c72a12b13bc9d87d7a9e5b0fa2/scripts/upgrade-zulip-from-git#L40" target="_blank" title="https://github.com/zulip/zulip/blob/5a77a4d1226509c72a12b13bc9d87d7a9e5b0fa2/scripts/upgrade-zulip-from-git#L40">https://github.com/zulip/zulip/blob/5a77a4d1226509c72a12b13bc9d87d7a9e5b0fa2/scripts/upgrade-zulip-from-git#L40</a></p>



<a name="299975"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299975" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299975">(Oct 18 2017 at 02:39)</a>:</h4>
<p>I updated the lines at <a href="https://github.com/zulip/zulip/pull/7054" target="_blank" title="https://github.com/zulip/zulip/pull/7054">#7054</a></p>



<a name="299981"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20when%20logging%20in%20with%20LDAP%20Auth/near/299981" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20when.20logging.20in.20with.20LDAP.20Auth.html#299981">(Oct 18 2017 at 03:41)</a>:</h4>
<p>Yep, thanks for catching that :)</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>