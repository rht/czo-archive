<html>
<head><meta charset="utf-8"><title>ssl /certificates · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html">ssl /certificates</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="136724"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/136724" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans-Dieter Barth <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#136724">(Jan 25 2017 at 15:22)</a>:</h4>
<p>Zulip is already running on my system with a self-signed certificate. Now I have a new official certificate. After exchange of the certificate: Do I have to initialize the database again or is it sufficient to restart the server? </p>



<a name="136726"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/136726" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#136726">(Jan 25 2017 at 15:30)</a>:</h4>
<p>I am pretty sure you just need to restart the server.</p>



<a name="136735"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/136735" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans-Dieter Barth <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#136735">(Jan 25 2017 at 15:49)</a>:</h4>
<p>After &lt;su zulip -c /home/zulip/deployments/current/scripts/restart-server&gt; <br>
I checked with SSL-Server-Test on <a href="http://ssllabs.com" target="_blank" title="http://ssllabs.com">ssllabs.com</a>. It showed that the old self-signed certificate was still present.</p>



<a name="136737"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/136737" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#136737">(Jan 25 2017 at 15:54)</a>:</h4>
<p>I don't know our "edge" configuration very well, but it's possible you need to restart something like nginx too.</p>



<a name="136738"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/136738" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#136738">(Jan 25 2017 at 15:56)</a>:</h4>
<p>Maybe try <code>service nginx restart</code> to see if that helps.</p>



<a name="136739"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/136739" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#136739">(Jan 25 2017 at 15:59)</a>:</h4>
<p>The docs here suggest that <code>nginx</code> needs to be restarted when you get new certs, so I assume it's similar when you update certs: <a href="https://zulip.readthedocs.io/en/latest/ssl-certificates.html#using-let-s-encrypt" target="_blank" title="https://zulip.readthedocs.io/en/latest/ssl-certificates.html#using-let-s-encrypt">https://zulip.readthedocs.io/en/latest/ssl-certificates.html#using-let-s-encrypt</a></p>



<a name="137223"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137223" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137223">(Jan 25 2017 at 23:12)</a>:</h4>
<p>Yeah, you just need to restart <code>nginx</code></p>



<a name="137740"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137740" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans-Dieter Barth <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137740">(Jan 26 2017 at 13:25)</a>:</h4>
<p>My Zulip is up and running again! Now including Windows application and Android on the phone! My problem was that my new private key was secured with a passphrase. After removal of the passwd from the private key everything was fine! Thanks for your help! </p>



<a name="137751"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137751" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137751">(Jan 26 2017 at 14:21)</a>:</h4>
<p>Great to hear!  Is there a particular step in the docs where we should prevent this pitfall?</p>



<a name="137761"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137761" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans-Dieter Barth <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137761">(Jan 26 2017 at 15:13)</a>:</h4>
<p>Maybe in 'Step 1: Install SSL Certificates' in the Production Installation doc. (Be sure that the private key is not pwd protected!).  I used 'ssh-keygen -p' to remove the passwd from the key.</p>



<a name="137764"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137764" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137764">(Jan 26 2017 at 15:28)</a>:</h4>
<p>Cool.  Here's the link: <a href="https://zulip.readthedocs.io/en/latest/prod-install.html#step-1-install-ssl-certificates" target="_blank" title="https://zulip.readthedocs.io/en/latest/prod-install.html#step-1-install-ssl-certificates">https://zulip.readthedocs.io/en/latest/prod-install.html#step-1-install-ssl-certificates</a></p>
<p>I'm in the middle of something now, but hopefully somebody will see this and make the quick fix.</p>



<a name="137844"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137844" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137844">(Jan 26 2017 at 17:59)</a>:</h4>
<p>It's docs/prod-install.md in the repo, but perhaps we actually want to have scripts/lib/install check whether the key is password-protected and print an error if it isn't?  That would be more bulletproof...</p>



<a name="137849"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137849" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137849">(Jan 26 2017 at 18:00)</a>:</h4>
<p>I guess that wouldn't have helped here</p>



<a name="137850"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137850" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137850">(Jan 26 2017 at 18:00)</a>:</h4>
<p>Since <span class="user-mention" data-user-id="1183">@Hans-Dieter Barth</span> was adding the certificate after installing</p>



<a name="137852"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/137852" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#137852">(Jan 26 2017 at 18:00)</a>:</h4>
<p>So yeah, I guess docs/prod-install.md is the place to edit</p>



<a name="139520"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/ssl%20/certificates/near/139520" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> jawwad hussain <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/ssl.20.2Fcertificates.html#139520">(Jan 28 2017 at 05:20)</a>:</h4>
<p>installation failed </p>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> <br>
o execute operation: No such file or directory<br>
Error: systemctl enable supervisor returned 1 instead of one of [0]<br>
Error: /Stage[main]/Zulip::Supervisor/Exec[enable supervisor]/returns: change fr                                                                                        om notrun to 0 failed: systemctl enable supervisor returned 1 instead of one of                                                                                         [0]</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>