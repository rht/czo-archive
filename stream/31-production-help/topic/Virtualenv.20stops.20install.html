<html>
<head><meta charset="utf-8"><title>Virtualenv stops install · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html">Virtualenv stops install</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="902231"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902231" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902231">(Jun 12 2020 at 03:21)</a>:</h4>
<p>After closely following the installation instructions in step 1, the installation fails in step 2 giving the error "virtualenv: error: unrecognized arguments: --site-packages". It appears like the virtual environment is unable to start (see screenshot). Running on a clean ubuntu 18.04, up to date, lxc instance. <a href="/user_uploads/2/57/ftinQQHAefuhWk4Cp9ceP4Cm/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/57/ftinQQHAefuhWk4Cp9ceP4Cm/image.png" title="image.png"><img src="/user_uploads/2/57/ftinQQHAefuhWk4Cp9ceP4Cm/image.png"></a></div>



<a name="902234"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902234" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902234">(Jun 12 2020 at 03:22)</a>:</h4>
<p>Note that this is at the very bottom of the install.log</p>



<a name="902247"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902247" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arpit Sharma <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902247">(Jun 12 2020 at 04:12)</a>:</h4>
<p><span class="user-mention" data-user-id="16236">@Pita Bread</span>  Can you tell which version of virtualenv you are using?</p>
<div class="codehilite"><pre><span></span><code>virtualenv --version
</code></pre></div>



<a name="902251"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902251" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arpit Sharma <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902251">(Jun 12 2020 at 04:24)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span>  Still  I think we can just remove <code>--site-packages</code> since it is <a href="https://github.com/pypa/virtualenv/blame/legacy/docs/reference.rst#L100">depreciated </a></p>
<blockquote>
<p>--no-site-packages    DEPRECATED. Retained only for backward compatibility.<br>
                        Not having access to global site-packages is now the<br>
                        default behavior.</p>
</blockquote>



<a name="902255"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902255" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902255">(Jun 12 2020 at 04:31)</a>:</h4>
<p>I'm not entirely sure what code is running here.</p>



<a name="902256"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902256" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902256">(Jun 12 2020 at 04:31)</a>:</h4>
<p>Grepping our codebase, I don't think we use that option anywhere I can easily see.</p>



<a name="902286"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902286" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902286">(Jun 12 2020 at 05:30)</a>:</h4>
<p><span class="user-mention" data-user-id="16236">@Pita Bread</span> make sure you are using latest version of vagrant and virtualbox and are on zulip/zulip master.</p>



<a name="902680"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902680" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902680">(Jun 12 2020 at 14:05)</a>:</h4>
<p><a href="/user_uploads/2/18/aUVgjq12sdN0VQHaFOoFZ72d/image.png">image.png</a> Version 20.0.21</p>
<div class="message_inline_image"><a href="/user_uploads/2/18/aUVgjq12sdN0VQHaFOoFZ72d/image.png" title="image.png"><img src="/user_uploads/2/18/aUVgjq12sdN0VQHaFOoFZ72d/image.png"></a></div>



<a name="902683"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902683" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902683">(Jun 12 2020 at 14:12)</a>:</h4>
<p>Should be on the master branch, it does not appear like vagrant was installed. Going to install it and update virtual env and try again.</p>



<a name="902721"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902721" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902721">(Jun 12 2020 at 14:42)</a>:</h4>
<p>Still getting the same error <a href="/user_uploads/2/35/885yHdl5vxyA54IVZodu5p3S/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/35/885yHdl5vxyA54IVZodu5p3S/image.png" title="image.png"><img src="/user_uploads/2/35/885yHdl5vxyA54IVZodu5p3S/image.png"></a></div>



<a name="902744"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902744" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902744">(Jun 12 2020 at 14:56)</a>:</h4>
<p>Running the command without <code>--no-site-packages</code> appears to work <a href="/user_uploads/2/1a/eHaJt_EbfF-jhygb497ljiJz/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/1a/eHaJt_EbfF-jhygb497ljiJz/image.png" title="image.png"><img src="/user_uploads/2/1a/eHaJt_EbfF-jhygb497ljiJz/image.png"></a></div>



<a name="902756"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/902756" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#902756">(Jun 12 2020 at 15:15)</a>:</h4>
<p>Interesting that it is using python 2.7 <a href="/user_uploads/2/69/ST9oHAHe7zS7ooHxhyw-w5YJ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/69/ST9oHAHe7zS7ooHxhyw-w5YJ/image.png" title="image.png"><img src="/user_uploads/2/69/ST9oHAHe7zS7ooHxhyw-w5YJ/image.png"></a></div>



<a name="903120"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903120" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903120">(Jun 12 2020 at 21:27)</a>:</h4>
<p><span class="user-mention" data-user-id="16236">@Pita Bread</span> can you explain precisely what you're trying to do to install Zulip?  I.e. what top command are you running?</p>



<a name="903164"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903164" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903164">(Jun 12 2020 at 22:07)</a>:</h4>
<p>I am trying to install zulip for the first time using this command <a href="/user_uploads/2/9a/PG-lByAreS47B_J0I7CLcvpp/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/9a/PG-lByAreS47B_J0I7CLcvpp/image.png" title="image.png"><img src="/user_uploads/2/9a/PG-lByAreS47B_J0I7CLcvpp/image.png"></a></div>



<a name="903166"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903166" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903166">(Jun 12 2020 at 22:07)</a>:</h4>
<p>Step 1 of the guide went without any issues <a href="https://zulip.readthedocs.io/en/stable/production/install.html#installer-details">https://zulip.readthedocs.io/en/stable/production/install.html#installer-details</a></p>



<a name="903176"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903176" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903176">(Jun 12 2020 at 22:10)</a>:</h4>
<p>More specifically it is the second part <code>./zulip-server-*/scripts/setup/install --certbot \
    --email=YOUR_EMAIL --hostname=YOUR_HOSTNAME</code> that fails. I did change the hostname and email address to the correct values.</p>



<a name="903190"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903190" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903190">(Jun 12 2020 at 22:25)</a>:</h4>
<p>Can you post the full output of that <code>install</code> script ( <code>/var/log/zulip/install.log</code> has it)?</p>



<a name="903191"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903191" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903191">(Jun 12 2020 at 22:25)</a>:</h4>
<p>I'm guessing things go wrong well before the screenshots you're posting.</p>



<a name="903326"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903326" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903326">(Jun 13 2020 at 00:51)</a>:</h4>
<p><a href="/user_uploads/2/cb/ko30V1BAKSGAAow_LmIGdAYR/install.log">install.log</a></p>



<a name="903330"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903330" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903330">(Jun 13 2020 at 00:52)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> That should be the correct log file.</p>



<a name="903369"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903369" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903369">(Jun 13 2020 at 01:10)</a>:</h4>
<p>It looks like the rest of the install went smoothly</p>



<a name="903404"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903404" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pita Bread <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903404">(Jun 13 2020 at 02:20)</a>:</h4>
<p>I got it to work! I created a VM (not an lxc) this time and make sure ALL of the packages were updated, and the installing script worked fine.</p>



<a name="903452"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903452" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903452">(Jun 13 2020 at 04:37)</a>:</h4>
<p>Aha, I understand the problem now <span class="user-mention" data-user-id="16236">@Pita Bread</span>!  It appears the error is coming from <code>certbot</code>; apparently their installer fails in LXC.</p>



<a name="903453"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Virtualenv%20stops%20install/near/903453" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Virtualenv.20stops.20install.html#903453">(Jun 13 2020 at 04:38)</a>:</h4>
<p>I would open an issue to do something about that, but we're actually removing use of that certbot installer in favor of the apt package in our release coming out in 2 weeks (and doing so because certbot is no longer maintaining that install mechanism), so there's nothing to fix in master.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>