<html>
<head><meta charset="utf-8"><title>changing server port · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html">changing server port</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="400373"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400373" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400373">(Dec 20 2017 at 17:22)</a>:</h4>
<p>Hello.<br>
How can I change the port the server listens on?</p>



<a name="400379"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400379" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400379">(Dec 20 2017 at 17:24)</a>:</h4>
<p>I think you can forward 9991 to whatever port you want using iptables</p>



<a name="400434"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400434" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400434">(Dec 20 2017 at 17:35)</a>:</h4>
<p><span class="user-mention" data-user-email="hkmp7tommy@gmail.com" data-user-id="714">@Tommy Ip</span> that doesn't work.</p>



<a name="400436"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400436" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400436">(Dec 20 2017 at 17:36)</a>:</h4>
<p>Why not?</p>



<a name="400437"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400437" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400437">(Dec 20 2017 at 17:36)</a>:</h4>
<p>No idea, but if you just forward 9991 to 80 let's say, the server throws an error.</p>



<a name="400441"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400441" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400441">(Dec 20 2017 at 17:37)</a>:</h4>
<p>What error? Maybe you need sudo to bind to 80</p>



<a name="400443"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400443" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400443">(Dec 20 2017 at 17:37)</a>:</h4>
<p>Yeah, I did a forward using a two way pipe. I'll show you wait <span class="emoji emoji-1f61b" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="400453"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400453" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400453">(Dec 20 2017 at 17:39)</a>:</h4>
<p>Ok, I need to go now, but anyway that doesn't work at all for me on the dev env.</p>



<a name="400454"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400454" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400454">(Dec 20 2017 at 17:39)</a>:</h4>
<p>Maybe the iptables thing will work but I'm not too confident</p>



<a name="400456"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400456" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400456">(Dec 20 2017 at 17:39)</a>:</h4>
<p>There should be some setting where you set the base port.</p>



<a name="400462"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400462" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400462">(Dec 20 2017 at 17:40)</a>:</h4>
<blockquote>
<p>There should be some setting where you set the base port.</p>
</blockquote>
<p>Yeah that's probably the best way</p>



<a name="400484"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400484" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400484">(Dec 20 2017 at 17:57)</a>:</h4>
<p>I think that there was a way to change the port from the settings file. I remember Tim talking about it once.</p>



<a name="400492"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400492" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400492">(Dec 20 2017 at 18:01)</a>:</h4>
<div class="codehilite"><pre><span></span>Vagrantfile
27:  # The Zulip development environment runs on 9991 on the guest.
28:  host_port = 9991
76:  config.vm.network &quot;forwarded_port&quot;, guest: 9991, host: host_port, host_ip: host_ip_addr

Dockerfile-dev
3:EXPOSE 9991

tools/run-dev.py
37:    http://localhost:9991/
84:        # exposing certain guest ports (by default just 9991) to the
95:base_port = 9991

zproject/dev_settings.py
19:        EXTERNAL_HOST = os.uname()[1].lower() + &quot;:9991&quot;
23:        EXTERNAL_HOST = &#39;zulipdev.com:9991&#39;
27:            &#39;zulip&#39;: &#39;localhost:9991&#39;

static/swagger/zulip.yaml
25:#host: 10.2.3.4:9991
</pre></div>


<p>Probably one of these</p>



<a name="400499"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/400499" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#400499">(Dec 20 2017 at 18:03)</a>:</h4>
<p>BTW do you want to do this in dev or production?</p>



<a name="402049"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/402049" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#402049">(Dec 21 2017 at 13:20)</a>:</h4>
<p>Sorry for being late. I am doing multiple things at the same time...</p>



<a name="402050"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/402050" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#402050">(Dec 21 2017 at 13:20)</a>:</h4>
<p>I am trying to do this in a production environment.</p>



<a name="402051"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/402051" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#402051">(Dec 21 2017 at 13:21)</a>:</h4>
<p>And I want my 80 and 443 ports to be freed. I want another server to be running on those ports.</p>



<a name="402052"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/402052" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#402052">(Dec 21 2017 at 13:21)</a>:</h4>
<p>Can I manually edit zulip nginx configuration files safely? Or they will be overwritten?</p>



<a name="403606"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/403606" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#403606">(Dec 22 2017 at 08:54)</a>:</h4>
<p>Anyone any idea? Maybe <span class="user-mention" data-user-email="showell@zulipchat.com" data-user-id="58">@Steve Howell</span>? Or <span class="user-mention" data-user-email="greg@zulipchat.com" data-user-id="2187">@Greg Price</span>?</p>



<a name="404091"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/404091" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#404091">(Dec 22 2017 at 15:53)</a>:</h4>
<p>Hi <span class="user-mention" data-user-email="Shayan.To@hotmail.com" data-user-id="1073">@Shayan Toqraee</span> !</p>
<p>Yes, Zulip will overwrite the nginx config files, when Zulip is installed or upgraded.</p>
<p>Take a look at the <a href="https://zulip.readthedocs.io/en/latest/production/requirements.html#general" target="_blank" title="https://zulip.readthedocs.io/en/latest/production/requirements.html#general">requirements</a> documented for running Zulip in production; we strongly recommend that you run it on its own system. If you have an existing physical machine you want to run it on, that's no problem, but it should be in its own VM or container.</p>



<a name="404093"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/404093" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#404093">(Dec 22 2017 at 15:54)</a>:</h4>
<p>Then if you want it exposed on the external network on whatever port you like, you can set that up in the networking config of your container or VM system.</p>



<a name="450052"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/450052" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#450052">(Jan 16 2018 at 17:58)</a>:</h4>
<p>Hi <span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span>!<br>
Will you please take a look at this? I want to do this, and if no good way, I will be editing zulip nginx config files.<br>
Thoughts?</p>



<a name="450066"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/450066" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#450066">(Jan 16 2018 at 18:01)</a>:</h4>
<p>So, I think we can probably add an option that you can set in /etc/zulip/zulip.conf so that you don't need to edit the files.</p>



<a name="450067"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/450067" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#450067">(Jan 16 2018 at 18:01)</a>:</h4>
<p>As a workaround, you can just make a small fork on the Zulip repo and edit puppet/zulip/files/nginx/sites-available/zulip-enterprise in your fork.</p>



<a name="450152"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20server%20port/near/450152" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20server.20port.html#450152">(Jan 16 2018 at 18:30)</a>:</h4>
<p>Thanks a lot. I think that I will go for the edit-config-files-every-time option for now!</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>