<html>
<head><meta charset="utf-8"><title>trouble installing uwgsi on Ubuntu jammy · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html">trouble installing uwgsi on Ubuntu jammy</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1530514"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530514" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530514">(Mar 22 2023 at 16:33)</a>:</h4>
<p>It is failing for me in building the wheel.  getting this:</p>
<p>.. code:</p>
<div class="codehilite"><pre><span></span><code>/usr/bin/ld: plugins/python/python_plugin.o: in function `uwsgi_pyimport_by_filename&#39;:
python_plugin.c:(.text+0x172c): undefined reference to `PyParser_SimpleParseString&#39;
/usr/bin/ld: python_plugin.c:(.text+0x1741): undefined reference to `PyNode_Compile&#39;
/usr/bin/ld: python_plugin.c:(.text+0x180b): undefined reference to `PyParser_SimpleParseFile&#39;
/usr/bin/ld: python_plugin.c:(.text+0x182b): undefined reference to `PyNode_Compile&#39;
/usr/bin/ld: python_plugin.c:(.text+0x189f): undefined reference to `PyParser_SimpleParseFile&#39;
/usr/bin/ld: python_plugin.c:(.text+0x18bf): undefined reference to `PyNode_Compile&#39;
/usr/bin/ld: plugins/python/pyloader.o: in function `uwsgi_eval_loader&#39;:
pyloader.c:(.text+0x17a3): undefined reference to `PyParser_SimpleParseString&#39;
/usr/bin/ld: pyloader.c:(.text+0x17bf): undefined reference to `PyNode_Compile&#39;
collect2: error: ld returned 1 exit status
*** error linking uWSGI ***
----------------------------------------
ERROR: Command errored out with exit status 1: /srv/zulip-venv- 
cache/1bcbfd34146d47fd035a8504738f7ea4239bd1b2/zulip-py3-venv/bin/python -u -c &#39;import sys, setuptools, 
tokenize; sys.argv[0] = &#39;&quot;&#39;&quot;&#39;/tmp/pip-install-b8i63_op/uwsgi/setup.py&#39;&quot;&#39;&quot;&#39;; __file__=&#39;&quot;&#39;&quot;&#39;/tmp/pip-install- 
b8i63_op/uwsgi/setup.py&#39;&quot;&#39;&quot;&#39;;f=getattr(tokenize, &#39;&quot;&#39;&quot;&#39;open&#39;&quot;&#39;&quot;&#39;, open)(__file__);code=f.read().replace(&#39;&quot;&#39;&quot;&#39;\r\n&#39;&quot;&#39;&quot;&#39;, 
&#39;&quot;&#39;&quot;&#39;\n&#39;&quot;&#39;&quot;&#39;);f.close();exec(compile(code, __file__, &#39;&quot;&#39;&quot;&#39;exec&#39;&quot;&#39;&quot;&#39;))&#39; install --record /tmp/pip-record-oza4_63u/install-
</code></pre></div>

<p>record.txt --single-version-externally-managed --compile --install-headers /srv/zulip-venv- <br>
   cache/1bcbfd34146d47fd035a8504738f7ea4239bd1b2/zulip-py3-venv/include/site/python3.10/uwsgi Check the <br>
   logs for full command output.<br>
   WARNING: You are using pip version 20.3.4; however, version 23.0.1 is available.<br>
   You should consider upgrading via the '/srv/zulip-venv- <br>
  cache/1bcbfd34146d47fd035a8504738f7ea4239bd1b2/zulip-py3-venv/bin/python -m pip install --upgrade pip' <br>
   command.</p>



<a name="1530520"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530520" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530520">(Mar 22 2023 at 16:36)</a>:</h4>
<p>By the way, I have run the upgrade pip command several times, it seems not to do anything.</p>



<a name="1530532"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530532" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530532">(Mar 22 2023 at 16:41)</a>:</h4>
<p>Description:    Ubuntu 22.04.2 LTS<br>
 libgcc-11-dev:amd64                     11.3.0-1ubuntu1~22.04<br>
 python3.10-dev                          3.10.6-1~22.04.2ubuntu1<br>
Thanks for any help.</p>



<a name="1530634"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530634" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Klar <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530634">(Mar 22 2023 at 17:46)</a>:</h4>
<p>This is upstream error <a href="https://github.com/unbit/uwsgi/issues/2350">https://github.com/unbit/uwsgi/issues/2350</a>, though we already took the update to uwsgi that fixes this according to our requirements file <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>
<p>I don't recall hearing we officially support Python 3.10 yet, either, for what it's worth, which could be a factor here.</p>



<a name="1530638"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530638" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530638">(Mar 22 2023 at 17:49)</a>:</h4>
<p>Hm.  Jammy has always been 3.10, so that shouldn't be the issue.</p>



<a name="1530639"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530639" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530639">(Mar 22 2023 at 17:50)</a>:</h4>
<p><span class="user-mention" data-user-id="26567">@Jim Penny</span>: What's the architecture this is on?</p>



<a name="1530640"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530640" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530640">(Mar 22 2023 at 17:50)</a>:</h4>
<p>And can you confirm what version of Zulip you're trying to install?</p>



<a name="1530842"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530842" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530842">(Mar 22 2023 at 19:24)</a>:</h4>
<p>curl -fLO <a href="https://download.zulip.com/server/zulip-server-latest.tar.gz">https://download.zulip.com/server/zulip-server-latest.tar.gz</a></p>



<a name="1530845"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530845" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530845">(Mar 22 2023 at 19:25)</a>:</h4>
<p>I re-downloaded this, and it got a lot further.<br>
The problem I seem to be having now is that it is looking for postgresql 13, and postgresql 14 in now instaslled.</p>



<a name="1530848"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530848" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530848">(Mar 22 2023 at 19:25)</a>:</h4>
<p>Clearly I have reading problems.  ;-)</p>



<a name="1530862"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530862" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530862">(Mar 22 2023 at 19:29)</a>:</h4>
<p>Interesting, a second run of /home/zulip/deployments/current/scripts/upgrade-zulip zulip-server-latest.tar.gz upgraded more ubuntu packages and completed.</p>



<a name="1530864"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530864" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530864">(Mar 22 2023 at 19:29)</a>:</h4>
<p>Running again.</p>



<a name="1530866"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530866" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530866">(Mar 22 2023 at 19:30)</a>:</h4>
<p>Thanks.</p>



<a name="1530869"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530869" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530869">(Mar 22 2023 at 19:32)</a>:</h4>
<p>Huh, that's very unexpected.  This was an upgrade from the start of this attempt, not a fresh install?</p>
<p>See <a href="https://zulip.readthedocs.io/en/latest/production/upgrade.html#upgrading-postgresql">https://zulip.readthedocs.io/en/latest/production/upgrade.html#upgrading-postgresql</a> for instructions for upgading PostgreSQL</p>



<a name="1530880"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530880" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530880">(Mar 22 2023 at 19:45)</a>:</h4>
<p>yes, it was an upgrade.</p>



<a name="1530888"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530888" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530888">(Mar 22 2023 at 19:48)</a>:</h4>
<p>Actually an upgrade of an upgrade.<br>
went from bionic to focal - which worked fine.<br>
went from focal to jammy, which gave some problems.<br>
But, it is all now a bit confused and hard to trace back.</p>



<a name="1530889"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530889" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530889">(Mar 22 2023 at 19:48)</a>:</h4>
<p>What version were you upgrading from?</p>



<a name="1530890"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530890" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530890">(Mar 22 2023 at 19:49)</a>:</h4>
<p>Did you follow <a href="https://zulip.readthedocs.io/en/latest/production/upgrade.html#upgrading-the-operating-system">https://zulip.readthedocs.io/en/latest/production/upgrade.html#upgrading-the-operating-system</a> for the OS upgrades?</p>



<a name="1530891"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530891" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530891">(Mar 22 2023 at 19:49)</a>:</h4>
<p>That was my intent.<br>
But, I may have gotten into the wrong instructions initially.</p>



<a name="1530892"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/trouble%20installing%20uwgsi%20on%20Ubuntu%20jammy/near/1530892" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jim Penny <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/trouble.20installing.20uwgsi.20on.20Ubuntu.20jammy.html#1530892">(Mar 22 2023 at 19:50)</a>:</h4>
<p>Anyway, thanks.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>