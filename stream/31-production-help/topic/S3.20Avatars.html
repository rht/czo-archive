<html>
<head><meta charset="utf-8"><title>S3 Avatars · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html">S3 Avatars</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="718616"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718616" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ostermang <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718616">(Mar 13 2019 at 20:19)</a>:</h4>
<p>Hi, I am new to Zulip and am setting up a test environment for my organization. I just got S3 file uploads working. I can also get avatars working if I make them publicly available as the documentation states. However, I am utilizing LDAP authentication and pulling avatars from LDAP as well. Making these publicly available on the open internet is a big no no for my organization. I'm trying to figure out if there is any way to either have avatars working in S3 without making them publicly available (like file uploads) or if there is a way to keep file uploads on S3 but keep avatars on the Zulip server's local storage?</p>



<a name="718620"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718620" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718620">(Mar 13 2019 at 20:27)</a>:</h4>
<p>good question. None of the folks on-line now work on the LDAP or file uploads system, but someone should be around later today.</p>



<a name="718633"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718633" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ostermang <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718633">(Mar 13 2019 at 20:51)</a>:</h4>
<p>ok, I'll check back later. Thanks!</p>



<a name="718660"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718660" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718660">(Mar 13 2019 at 21:36)</a>:</h4>
<p><span class="user-mention" data-user-id="11818">@ostermang</span> so, just to make sure you understand, they'll be publicly available on secure, random S3 URLs.</p>



<a name="718662"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718662" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718662">(Mar 13 2019 at 21:36)</a>:</h4>
<p>So, it should not be possible for someone to get access to the avatars without receiving a prior link to them.</p>



<a name="718664"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718664" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718664">(Mar 13 2019 at 21:37)</a>:</h4>
<p>We don't currently support using different file upload backends for uploads vs. avatars.</p>



<a name="718666"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718666" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718666">(Mar 13 2019 at 21:37)</a>:</h4>
<p>Working out a solution that fits your security needs is something we could help with as part of a support contract if you're interested.</p>



<a name="718678"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718678" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ostermang <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718678">(Mar 13 2019 at 22:19)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="7">@Tim Abbott</span> , when I set up the S3 bucket policy according to the Upload Backends documentation, I had avatars working with S3. However, I was able to right click an avatar in the Zulip desktop app and copy the image URL, then open that URL on my cell phone which doesn't have Zulip installed, so they definitely are publicly available if someone knows the URL. The policy does prevent listing objects in the S3 bucket so its kind of security by obscurity. Am I possibly doing something wrong since it doesn't appear to be using random S3 URLs?</p>



<a name="718680"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718680" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718680">(Mar 13 2019 at 22:30)</a>:</h4>
<p>I think the avatars URLs should look something like <br>
<a href="https://zulip-avatars.s3.amazonaws.com/1234/e80f3c2e13c2875866f4b76aaaaaaa1234512345?x=x&amp;version=3&amp;s=50" target="_blank" title="https://zulip-avatars.s3.amazonaws.com/1234/e80f3c2e13c2875866f4b76aaaaaaa1234512345?x=x&amp;version=3&amp;s=50">https://zulip-avatars.s3.amazonaws.com/1234/e80f3c2e13c2875866f4b76aaaaaaa1234512345?x=x&amp;version=3&amp;s=50</a></p>



<a name="718682"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718682" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718682">(Mar 13 2019 at 22:31)</a>:</h4>
<p>(and yeah, it is security only by obscurity)</p>



<a name="718683"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20Avatars/near/718683" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ostermang <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20Avatars.html#718683">(Mar 13 2019 at 22:32)</a>:</h4>
<p>ok, yea that is the same type of URL I am seeing so I think it is working as expected. Thanks for the info!</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>