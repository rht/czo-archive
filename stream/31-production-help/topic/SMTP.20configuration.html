<html>
<head><meta charset="utf-8"><title>SMTP configuration · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html">SMTP configuration</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1498869"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1498869" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roberto Navoni <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1498869">(Jan 29 2023 at 21:39)</a>:</h4>
<p>Dear Friend , i try to configure SMTP outgoing on zulip . <br>
I'm using mailersend . Is not clear if i need to add <br>
#EMAIL_BACKEND = 'django.core.mail.backends.filebased.EmailBackend'<br>
#EMAIL_FILE_PATH = '/var/log/zulip/emails'<br>
In settings.py file .<br>
If i don't add i have the error 400 if i add i don't have issue , but the mail don't transmit . What could be the issue ? <br>
I add the user in settings.py and the password in zulip-secrets.conf<br>
Can you help me please ? <br>
I'm using last version in droplet on digitalocean</p>



<a name="1498876"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1498876" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roberto Navoni <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1498876">(Jan 29 2023 at 22:05)</a>:</h4>
<p>Full SMTP log follows:<br>
connect: to ('<a href="http://smtp.mailersend.net">smtp.mailersend.net</a>', 587) None<br>
reply: b'220 <a href="http://smtp.mailersend.net">smtp.mailersend.net</a> ESMTP\r\n'<br>
reply: retcode (220); Msg: b'<a href="http://smtp.mailersend.net">smtp.mailersend.net</a> ESMTP'<br>
connect: b'<a href="http://smtp.mailersend.net">smtp.mailersend.net</a> ESMTP'<br>
send: 'ehlo zulip61onubuntu2004-s-2vcpu-4gb-intel-nyc3-01\r\n'<br>
reply: b'<a href="http://250-smtp.mailersend.net">250-smtp.mailersend.net</a> Nice to meet you, [104.131.179.56]\r\n'<br>
reply: b'250-PIPELINING\r\n'<br>
reply: b'250-8BITMIME\r\n'<br>
reply: b'250-SMTPUTF8\r\n'<br>
reply: b'250-AUTH LOGIN PLAIN\r\n'<br>
reply: b'250 STARTTLS\r\n'<br>
reply: retcode (250); Msg: b'<a href="http://smtp.mailersend.net">smtp.mailersend.net</a> Nice to meet you, [104.131.179.56]\nPIPELINING\n8BITMIME\nSMTPUTF8\nAUTH LOGIN PLAIN\nSTARTTLS'<br>
send: 'STARTTLS\r\n'<br>
reply: b'220 Ready to start TLS\r\n'<br>
reply: retcode (220); Msg: b'Ready to start TLS'<br>
send: 'ehlo zulip61onubuntu2004-s-2vcpu-4gb-intel-nyc3-01\r\n'<br>
reply: b'<a href="http://250-smtp.mailersend.net">250-smtp.mailersend.net</a> Nice to meet you, [104.131.179.56]\r\n'<br>
reply: b'250-PIPELINING\r\n'<br>
reply: b'250-8BITMIME\r\n'<br>
reply: b'250-SMTPUTF8\r\n'<br>
reply: b'250 AUTH LOGIN PLAIN\r\n'<br>
reply: retcode (250); Msg: b'<a href="http://smtp.mailersend.net">smtp.mailersend.net</a> Nice to meet you, [104.131.179.56]\nPIPELINING\n8BITMIME\nSMTPUTF8\nAUTH LOGIN PLAIN'<br>
send: 'AUTH PLAIN AE1TX1FRdlpQR0B6dWxpcC5hbHRlcmVnby5ldmVudHMAM3RGZVlIWjA5N0lYMURTVg==\r\n'<br>
reply: b'235 Authentication successful\r\n'<br>
reply: retcode (235); Msg: b'Authentication successful'<br>
send: 'mail FROM:&lt;r.navoni@virtualrobotix.com&gt;\r\n'<br>
reply: b'250 Accepted\r\n'<br>
reply: retcode (250); Msg: b'Accepted'<br>
send: 'rcpt TO:&lt;r.navoni@radionav.it&gt;\r\n'<br>
reply: b'250 Accepted\r\n'<br>
reply: retcode (250); Msg: b'Accepted'<br>
send: 'data\r\n'<br>
reply: b'354 End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;\r\n'<br>
reply: retcode (354); Msg: b'End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;'<br>
data: (354, b'End data with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;')<br>
send: b'Content-Type: text/plain; charset="utf-8"\r\nMIME-Version: 1.0\r\nContent-Transfer-Encoding: 7bit\r\nSubject: Zulip email test\r\nFrom: r.navoni@virtualrobotix.com\r\nTo: r.navoni@radionav.it\r\nDate: Sun, 29 Jan 2023 22:03:42 -0000\r\nMessage-ID: \r\n &lt;167502982216.14020.272286201271257483@zulip61onubuntu2004-s-2vcpu-4gb-intel-nyc3-01&gt;\r\n\r\nSuccess!  If you receive this message (and a second with a different subject), you\'ve successfully configured sending emails from your Zulip server.  Remember that you need to restart the Zulip server with /home/zulip/deployments/current/scripts/restart-server after changing the settings in /etc/zulip before your changes will take effect.\r\n.\r\n'<br>
reply: b'450 Sorry, please try again. 429 Too many requests.\r\n'<br>
reply: retcode (450); Msg: b'Sorry, please try again. 429 Too many requests.'<br>
data: (450, b'Sorry, please try again. 429 Too many requests.')<br>
send: 'rset\r\n'<br>
reply: b'250 Flushed\r\n'<br>
reply: retcode (250); Msg: b'Flushed'</p>
<p>Email sending failed!</p>



<a name="1498964"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1498964" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1498964">(Jan 30 2023 at 09:50)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="3" href="/#narrow/stream/3-backend/topic/SMTP.20configuration">#backend &gt; SMTP configuration</a> by <span class="user-mention silent" data-user-id="21836">Lauryn Menard</span>.</p>



<a name="1499059"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1499059" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1499059">(Jan 30 2023 at 14:25)</a>:</h4>
<p><span class="user-mention" data-user-id="25882">@Roberto Navoni</span>: You have just posted your username and password for mailsend -- you will want to change your password.  (We should put warnings on <code>send_test_email</code> that it will contain secrets)</p>
<p>Your error is at the end:</p>
<div class="codehilite"><pre><span></span><code>reply: b&#39;450 Sorry, please try again. 429 Too many requests.\r\n&#39;
</code></pre></div>
<p>This means you're trying to send too many emails:<br>
<a href="https://developers.mailersend.com/general.html#rate-limits">https://developers.mailersend.com/general.html#rate-limits</a><br>
<a href="https://developers.mailersend.com/general.html#daily-request-quota">https://developers.mailersend.com/general.html#daily-request-quota</a></p>



<a name="1556874"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1556874" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1556874">(Apr 27 2023 at 14:03)</a>:</h4>
<p>good day, I would like to advise I have a problem with configuring smtp server for zulip chat server, I have it installed on ubuntu 22.04</p>



<a name="1556895"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1556895" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1556895">(Apr 27 2023 at 15:00)</a>:</h4>
<p><a href="#narrow/stream/31-production-help/topic/SMTP.20configuration/near/1556874">A message</a> was moved here from <a class="stream-topic" data-stream-id="387" href="/#narrow/stream/387-zulip-cloud/topic/smtp">#zulip cloud &gt; smtp</a> by <span class="user-mention silent" data-user-id="12178">Alex Vandiver</span>.</p>



<a name="1556896"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1556896" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1556896">(Apr 27 2023 at 15:01)</a>:</h4>
<p><span class="user-mention" data-user-id="26886">@Tuho</span>: Can you be more specific about your question -- are you trying to configure <a href="https://zulip.readthedocs.io/en/latest/production/email.html">*outgoing* email from Zulip</a>, or <a href="https://zulip.readthedocs.io/en/latest/production/email-gateway.html">*incoming* email into Zulip</a>?</p>



<a name="1556907"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1556907" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1556907">(Apr 27 2023 at 15:34)</a>:</h4>
<p>good day, I'm trying to set up outgoing emails to send invitations to users. I have zulip installed on ubuntu 22.04 and smtp is set like this:</p>
<h1>Set defaults for all the following accounts.</h1>
<p>#default<br>
Auth on<br>
tls on<br>
tls_starttls on<br>
tls_certcheck on<br>
logfile /var/log/msmtp.log</p>
<h1>Account for WebSupport SMTP server</h1>
<p>websupport account<br>
host <a href="http://smtp.websupport.sk">smtp.websupport.sk</a><br>
port 465<br>
from <a href="mailto:admin@chat-box.cloud">admin@chat-box.cloud</a><br>
auth on<br>
user <a href="mailto:admin@chat-box.cloud">admin@chat-box.cloud</a><br>
password xxxxxxx</p>
<h1>Default account settings</h1>
<h1>default account : websupport</h1>
<p>Dňa 27. 4. 2023 o 17:03, Oznámení Zulipu &lt;<a href="mailto:noreply@chat.zulip.org">noreply@chat.zulip.org</a>&gt; napísal:</p>
<p>Notification Bot: A message&lt;<a href="#narrow/stream/31-production-help/topic/SMTP.20configuration/near/1556874">https://chat.zulip.org/#narrow/stream/31-production-help/topic/SMTP.20configuration/near/1556874</a>&gt; was moved here from #zulip cloud &gt; smtp&lt;<a href="#narrow/stream/387-zulip-cloud/topic/smtp">https://chat.zulip.org/#narrow/stream/387-zulip-cloud/topic/smtp</a>&gt; by Alex Vandiver.</p>
<p>Alex Vandiver: @Tuho: Can you be more specific about your question -- are you trying to configure <em>outgoing</em> email from Zulip&lt;<a href="https://zulip.readthedocs.io/en/latest/production/email.html">https://zulip.readthedocs.io/en/latest/production/email.html</a>&gt;, or <em>incoming</em> email into Zulip&lt;<a href="https://zulip.readthedocs.io/en/latest/production/email-gateway.html">https://zulip.readthedocs.io/en/latest/production/email-gateway.html</a>&gt;?</p>
<p>—<br>
You are receiving this because you were personally mentioned.<br>
Reply to this email directly, view it in Zulip Community Zulip&lt;<a href="#narrow/stream/31-production-help/topic/SMTP.20configuration">https://chat.zulip.org/#narrow/stream/31-production-help/topic/SMTP.20configuration</a>&gt;, or manage email preferences&lt;<a href="#settings/notifications">https://chat.zulip.org/#settings/notifications</a>&gt;.</p>



<a name="1557054"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1557054" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1557054">(Apr 27 2023 at 17:28)</a>:</h4>
<p><span class="user-mention" data-user-id="26886">@Tuho</span>: That looks like an <code>msmtp</code> configuration.</p>
<p>You should update <code>/etc/zulip/settings.py</code> with the equivalents to those settings -- search for <code>Outgoing email</code> in that file.</p>
<p>You probably want something like:</p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="n">EMAIL_HOST</span> <span class="o">=</span> <span class="s2">"smtp.websupport.sk"</span>
<span class="n">EMAIL_PORT</span> <span class="o">=</span> <span class="mi">465</span>
<span class="n">EMAIL_USE_TLS</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">EMAIL_HOST_USER</span> <span class="o">=</span> <span class="s2">"admin@chat-box.cloud"</span>
</code></pre></div>
<p>...and an appropriate <code>email_password = xxxxxxxx</code> in your  <code>/etc/zulip/zulip-secrets.conf</code></p>
<p>Please give <a href="https://zulip.readthedocs.io/en/latest/production/email.html#how-to-configure">our instructions</a> and <a href="https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting">troubleshooting steps</a> a read.</p>



<a name="1557180"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1557180" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1557180">(Apr 27 2023 at 19:00)</a>:</h4>
<p>I have it set according to you and it still doesn't send me email and I still have a message that I have to set smtp and I've already changed the port to 587</p>
<p>Dňa 27. 4. 2023 o 19:30, Oznámení Zulipu &lt;<a href="mailto:noreply@chat.zulip.org">noreply@chat.zulip.org</a>&gt; napísal:</p>
<p>Alex Vandiver: @Tuho: That looks like an msmtp configuration.</p>
<p>You should update /etc/zulip/settings.py with the equivalents to those settings -- search for Outgoing email in that file.</p>
<p>You probably want something like:</p>
<p>EMAIL_HOST = "<a href="http://smtp.websupport.sk">smtp.websupport.sk</a>"<br>
EMAIL_PORT = 465<br>
EMAIL_USE_TLS = True<br>
EMAIL_HOST_USER = "<a href="mailto:admin@chat-box.cloud">admin@chat-box.cloud</a>"</p>
<p>...and an appropriate email_password = xxxxxxxx in your /etc/zulip/zulip-secrets.conf</p>
<p>Please give our instructions&lt;<a href="https://zulip.readthedocs.io/en/latest/production/email.html#how-to-configure">https://zulip.readthedocs.io/en/latest/production/email.html#how-to-configure</a>&gt; and troubleshooting steps&lt;<a href="https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting">https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting</a>&gt; a read.</p>
<p>—<br>
You are receiving this because you were personally mentioned.<br>
Reply to this email directly, view it in Zulip Community Zulip&lt;<a href="#narrow/stream/31-production-help/topic/SMTP.20configuration">https://chat.zulip.org/#narrow/stream/31-production-help/topic/SMTP.20configuration</a>&gt;, or manage email preferences&lt;<a href="#settings/notifications">https://chat.zulip.org/#settings/notifications</a>&gt;.</p>



<a name="1559061"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1559061" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1559061">(May 01 2023 at 13:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="26886">Tuho</span> <a href="#narrow/stream/31-production-help/topic/SMTP.20configuration/near/1557180">said</a>:</p>
<blockquote>
<p>I have it set according to you and it still doesn't send me email and I still have a message that I have to set smtp and I've already changed the port to 587</p>
<p>I have everything set OK according to the procedures but I still don't get emails, when I run it like this I get an email echo "Test message" | mail -s "Testing sendmail" <a href="mailto:jan.tuharsky@gmail.com">jan.tuharsky@gmail.com</a> so port 587 is open, where can I have an error that I don't get email invitations for new members from the zulip</p>
<p>Dňa 27. 4. 2023 o 19:30, Oznámení Zulipu &lt;<a href="mailto:noreply@chat.zulip.org">noreply@chat.zulip.org</a>&gt; napísal:</p>
<p>Alex Vandiver: @Tuho: That looks like an msmtp configuration.</p>
<p>You should update /etc/zulip/settings.py with the equivalents to those settings -- search for Outgoing email in that file.</p>
<p>You probably want something like:</p>
<p>EMAIL_HOST = "<a href="http://smtp.websupport.sk">smtp.websupport.sk</a>"<br>
EMAIL_PORT = 465<br>
EMAIL_USE_TLS = True<br>
EMAIL_HOST_USER = "<a href="mailto:admin@chat-box.cloud">admin@chat-box.cloud</a>"</p>
<p>...and an appropriate email_password = xxxxxxxx in your /etc/zulip/zulip-secrets.conf</p>
<p>Please give our instructions&lt;<a href="https://zulip.readthedocs.io/en/latest/production/email.html#how-to-configure">https://zulip.readthedocs.io/en/latest/production/email.html#how-to-configure</a>&gt; and troubleshooting steps&lt;<a href="https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting">https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting</a>&gt; a read.</p>
<p>—<br>
You are receiving this because you were personally mentioned.<br>
Reply to this email directly, view it in Zulip Community Zulip&lt;<a href="#narrow/stream/31-production-help/topic/SMTP.20configuration">https://chat.zulip.org/#narrow/stream/31-production-help/topic/SMTP.20configuration</a>&gt;, or manage email preferences&lt;<a href="#settings/notifications">https://chat.zulip.org/#settings/notifications</a>&gt;.</p>
</blockquote>



<a name="1559172"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1559172" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1559172">(May 01 2023 at 15:28)</a>:</h4>
<p><span class="user-mention" data-user-id="26886">@Tuho</span>: Did you restart Zulip after changing <code>/etc/zulip/settings.py</code>?</p>
<p>Please also try running <a href="https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting">the command we show in the Troubleshooting section</a>:</p>
<div class="codehilite"><pre><span></span><code>su zulip -c &#39;/home/zulip/deployments/current/manage.py send_test_email user@example.com&#39;
</code></pre></div>



<a name="1559199"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1559199" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1559199">(May 01 2023 at 15:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="12178">Alex Vandiver</span> <a href="#narrow/stream/31-production-help/topic/SMTP.20configuration/near/1559172">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="26886">Tuho</span>: Did you restart Zulip after changing <code>/etc/zulip/settings.py</code>?</p>
<p>Please also try running <a href="https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting">the command we show in the Troubleshooting section</a>:</p>
<p><div class="codehilite"><pre><span></span><code>su zulip -c &#39;/home/zulip/deployments/current/manage.py send_test_email user@example.com&#39;
````

i have smtp settin on zulip/setting.py
## EMAIL_HOST and EMAIL_HOST_USER are generally required.
EMAIL_HOST = &quot;smtp.m1.websupport.sk&quot;
EMAIL_HOST_USER = &quot;admin@chat-box.cloud&quot;

## Passwords and secrets are not stored in this file.  The password
## for user EMAIL_HOST_USER goes in `/etc/zulip/zulip-secrets.conf`.
## In that file, set `email_password`.  For example:
# email_password = abcd1234

## EMAIL_USE_TLS and EMAIL_PORT are required for most SMTP providers.
##EMAIL_USE_TLS = True
##EMAIL_PORT = 587

EMAIL_USE_SSL = True
EMAIL_HOST_USER = 465
</code></pre></div><br>
</p>
</blockquote>



<a name="1559202"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1559202" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1559202">(May 01 2023 at 15:51)</a>:</h4>
<p>Please run the command I showed, and paste the output into a <a href="https://zulip.com/help/code-blocks">code block</a>.</p>
<div class="codehilite"><pre><span></span><code>su zulip -c &#39;/home/zulip/deployments/current/manage.py send_test_email user@example.com&#39;
</code></pre></div>



<a name="1559203"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1559203" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1559203">(May 01 2023 at 15:51)</a>:</h4>
<p>(fill in <code>user@example.com</code> with your actual email)</p>



<a name="1559310"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1559310" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1559310">(May 01 2023 at 17:40)</a>:</h4>
<p>hello here is the view when I entered the command and the email is set according to the recommendations </p>
<p>root@vmi1263441:~# echo "Test message" | mail -s "Testing sendmail" <a href="mailto:jan.tuharsky@gmail.com">jan.tuharsky@gmail.com</a><br>
root@vmi1263441:~# su zulip -c '/home/zulip/deployments/current/manage.py send_test_email <a href="mailto:jan.tuharsky@gmail.com">jan.tuharsky@gmail.com</a><br>
&gt; </p>
<p>the first line ran OK and the email arrived and the second line remained stat with &gt;</p>



<a name="1559398"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1559398" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1559398">(May 01 2023 at 19:05)</a>:</h4>
<p>What can be the problem when the server sends emails and zulip does not. Emails go through postbox. Does anyone here have zulip set up via subbox?</p>



<a name="1559435"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1559435" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1559435">(May 01 2023 at 19:47)</a>:</h4>
<p>Hello</p>



<a name="1560177"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560177" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560177">(May 02 2023 at 17:33)</a>:</h4>
<blockquote>
<p>the first line ran OK and the email arrived and the second line remained stat with &gt;</p>
</blockquote>
<p><span class="user-mention" data-user-id="26886">@Tuho</span>: Looks like you missed the close quote.</p>



<a name="1560178"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560178" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560178">(May 02 2023 at 17:34)</a>:</h4>
<div class="codehilite"><pre><span></span><code>su zulip -c &#39;/home/zulip/deployments/current/manage.py send_test_email jan.tuharsky@gmail.com&#39;
</code></pre></div>



<a name="1560215"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560215" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560215">(May 02 2023 at 18:01)</a>:</h4>
<p>yes I found out that I didn't close the syntax, only now I have a problem that I don't know where to set the static email address for noreply to my email I get this error : raise SMTPDataError(code, resp)<br>
smtplib.SMTPDataError: (551, b'Blocked, unknown email address in envelope-sender or From header. <a href="https://antispam.websupport.sk/?from=noreply-y3hhizfsiryvnk4rsdnuy2e3@testuj.chat-box.cloud">https://antispam.websupport.sk/?from=noreply-y3hhizfsiryvnk4rsdnuy2e3@testuj.chat-box.cloud</a>')</p>
<p>the server will automatically generate a new noreply email address and the hosting provider will block it for me I need to set a static email address there</p>



<a name="1560216"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560216" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560216">(May 02 2023 at 18:03)</a>:</h4>
<p>See this section of the <code>settings.py</code> which is right below the settings you already changed:</p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="c1">## The noreply address to be used as the sender for certain generated</span>
<span class="c1">## emails.  Messages sent to this address could contain sensitive user</span>
<span class="c1">## data and should not be delivered anywhere.  The default is</span>
<span class="c1">## e.g. noreply-{token}@zulip.example.com (if EXTERNAL_HOST is</span>
<span class="c1">## zulip.example.com).  There are potential security issues if you set</span>
<span class="c1">## ADD_TOKENS_TO_NOREPLY_ADDRESS=False to remove the token; see</span>
<span class="c1">## https://zulip.readthedocs.io/en/latest/production/email.html for details.</span>
<span class="c1"># ADD_TOKENS_TO_NOREPLY_ADDRESS = True</span>
</code></pre></div>



<a name="1560217"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560217" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560217">(May 02 2023 at 18:04)</a>:</h4>
<p><a href="https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting">https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting</a> also talks about this</p>



<a name="1560218"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560218" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560218">(May 02 2023 at 18:04)</a>:</h4>
<p>Please give that section a read. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="1560235"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560235" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560235">(May 02 2023 at 18:12)</a>:</h4>
<p>ok if I understood correctly I will set it here but the question is which lines should I uncomment and where should I enter the email address on noreply so that I don't comment again what is not necessary</p>



<a name="1560249"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560249" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tuho <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560249">(May 02 2023 at 18:16)</a>:</h4>
<p>super thanks for the advice it's already working as it should good job</p>



<a name="1560271"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1560271" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1560271">(May 02 2023 at 18:28)</a>:</h4>
<p>Glad you got it working!</p>



<a name="1573997"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1573997" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ahsan Bano <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1573997">(May 22 2023 at 11:12)</a>:</h4>
<p>Hello,</p>
<p>I am facing issues configuring SMTP on my zulip server, so i have google workspace where i have created a new service account for this outgoing emails. My configuration is the following one:</p>
<p>EMAIL_HOST = "<a href="http://smtp.gmail.com">smtp.gmail.com</a>"<br>
EMAIL_HOST_USER = "<a href="mailto:zulip.stg@zavamed.com">zulip.stg@zavamed.com</a>"<br>
EMAIL_USE_TLS = True<br>
EMAIL_PORT = 587<br>
ADD_TOKENS_TO_NOREPLY_ADDRESS=False<br>
NOREPLY_EMAIL_ADDRESS = "<a href="mailto:zulip.stg@zavamed.com">zulip.stg@zavamed.com</a>"</p>
<p>And when i use the "send_test_email" script i can see in the output that the emails have been sent successful but i am not receiving it in my inbox</p>
<p>*If you run into any trouble, read:</p>
<p><a href="https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting">https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting</a></p>
<p>The most common error is not setting <code>ADD_TOKENS_TO_NOREPLY_ADDRESS=False</code> when<br>
using an email provider that doesn't support that feature.</p>
<p>Sending 2 test emails from:</p>
<p>* <a href="mailto:zulip.stg@zavamed.com">zulip.stg@zavamed.com</a><br>
  * <a href="mailto:zulip.stg@zavamed.com">zulip.stg@zavamed.com</a></p>
<p>Successfully sent 2 emails to ahsan.bano@zavamed.com!*</p>



<a name="1574011"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1574011" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ahsan Bano <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1574011">(May 22 2023 at 13:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="27028">Ahsan Bano</span> <a href="#narrow/stream/31-production-help/topic/SMTP.20configuration/near/1573997">said</a>:</p>
<blockquote>
<p>Hello,</p>
<p>I am facing issues configuring SMTP on my zulip server, so i have google workspace where i have created a new service account for this outgoing emails. My configuration is the following one:</p>
<p>EMAIL_HOST = "<a href="http://smtp.gmail.com">smtp.gmail.com</a>"<br>
EMAIL_HOST_USER = "<a href="mailto:zulip.stg@zavamed.com">zulip.stg@zavamed.com</a>"<br>
EMAIL_USE_TLS = True<br>
EMAIL_PORT = 587<br>
ADD_TOKENS_TO_NOREPLY_ADDRESS=False<br>
NOREPLY_EMAIL_ADDRESS = "<a href="mailto:zulip.stg@zavamed.com">zulip.stg@zavamed.com</a>"</p>
<p>And when i use the "send_test_email" script i can see in the output that the emails have been sent successful but i am not receiving it in my inbox</p>
<p>*If you run into any trouble, read:</p>
<p><a href="https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting">https://zulip.readthedocs.io/en/latest/production/email.html#troubleshooting</a></p>
<p>The most common error is not setting <code>ADD_TOKENS_TO_NOREPLY_ADDRESS=False</code> when<br>
using an email provider that doesn't support that feature.</p>
<p>Sending 2 test emails from:</p>
<p>* <a href="mailto:zulip.stg@zavamed.com">zulip.stg@zavamed.com</a><br>
  * <a href="mailto:zulip.stg@zavamed.com">zulip.stg@zavamed.com</a></p>
<p>Successfully sent 2 emails to ahsan.bano@zavamed.com!*</p>
</blockquote>
<p>can someone help me with this please?</p>



<a name="1574616"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1574616" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1574616">(May 23 2023 at 01:15)</a>:</h4>
<p><span class="user-mention" data-user-id="27028">@Ahsan Bano</span> we don't recommend trying to use a gmail account for outgoing email these days; Google doesn't really intend to support that use case and you'll find it has rate limits and the like that are not suitable for the job.</p>



<a name="1574617"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1574617" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1574617">(May 23 2023 at 01:15)</a>:</h4>
<p>So my main advice is to use a recommended email provider.</p>



<a name="1574828"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1574828" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ahsan Bano <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1574828">(May 23 2023 at 13:49)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> Thank you, much appreciated your reply</p>



<a name="1587158"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1587158" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Laique <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1587158">(Jun 07 2023 at 10:39)</a>:</h4>
<p>I'm unable to receive emails in Zulip. I've followed this document for Local delivery setup but it doesn't work.<br>
<a href="https://zulip.readthedocs.io/en/stable/production/email-gateway.html">https://zulip.readthedocs.io/en/stable/production/email-gateway.html</a></p>
<p>I'm unable to find Incoming mail troubleshooting. When I send an email from my Gmail account, it doesn't bounce back. </p>
<p>My outgoing emails are working fine, I use Gmail ID for outgoing!</p>



<a name="1587174"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1587174" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Laique <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1587174">(Jun 07 2023 at 10:50)</a>:</h4>
<p>a quick question, do I need to allow a mail port for incoming mail?<br>
or do I missing anything</p>



<a name="1587176"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1587176" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Muhammad Laique <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1587176">(Jun 07 2023 at 10:58)</a>:</h4>
<p>I opened port 25, and it worked! <br>
Is it secure?</p>



<a name="1587408"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1587408" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1587408">(Jun 07 2023 at 14:36)</a>:</h4>
<p>Yes, that's safe to do, and necessary to use the local delivery configuration.  I'll push a PR to add that note.</p>



<a name="1587411"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1587411" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1587411">(Jun 07 2023 at 14:41)</a>:</h4>
<p>Pushed <a href="https://github.com/zulip/zulip/pull/25924">#25924</a> for that docs tweak.</p>



<a name="1588424"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/SMTP%20configuration/near/1588424" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dominik Weckmüller <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/SMTP.20configuration.html#1588424">(Jun 08 2023 at 10:49)</a>:</h4>
<p><span class="user-mention" data-user-id="27028">@Ahsan Bano</span> I checked the free plans from the recommended services on the Zulip homepage but found they required payment details which I didn't like. Described a better option in this <a href="https://geo.rocks/post/zulip-server-setup/#smtp-email-service">blog post</a></p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>