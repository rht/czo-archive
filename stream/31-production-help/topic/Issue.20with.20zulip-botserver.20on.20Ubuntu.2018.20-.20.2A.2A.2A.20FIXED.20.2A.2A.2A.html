<html>
<head><meta charset="utf-8"><title>Issue with zulip-botserver on Ubuntu 18 - *** FIXED *** · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html">Issue with zulip-botserver on Ubuntu 18 - *** FIXED ***</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="763094"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20with%20zulip-botserver%20on%20Ubuntu%2018%20-%20%2A%2A%2A%20FIXED%20%2A%2A%2A/near/763094" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoff Wild <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html#763094">(Jul 03 2019 at 18:40)</a>:</h4>
<p>I'm getting an error trying to run zulip-botserver:</p>
<div class="codehilite"><pre><span></span># zulip-botserver --help
Traceback (most recent call last):
  File &quot;/usr/local/bin/zulip-botserver&quot;, line 7, in &lt;module&gt;
    from zulip_botserver.server import main
ModuleNotFoundError: No module named &#39;zulip_botserver&#39;
</pre></div>


<div class="codehilite"><pre><span></span># python --version
Python 3.7.3
</pre></div>


<div class="codehilite"><pre><span></span># cat /usr/local/bin/zulip-botserver
#!/usr/bin/python

# -*- coding: utf-8 -*-
import re
import sys

from zulip_botserver.server import main

if __name__ == &#39;__main__&#39;:
    sys.argv[0] = re.sub(r&#39;(-script\.pyw?|\.exe)?$&#39;, &#39;&#39;, sys.argv[0])
    sys.exit(main())
</pre></div>


<p>Was following: <a href="https://zulipchat.com/api/deploying-bots" target="_blank" title="https://zulipchat.com/api/deploying-bots">https://zulipchat.com/api/deploying-bots</a></p>



<a name="763099"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20with%20zulip-botserver%20on%20Ubuntu%2018%20-%20%2A%2A%2A%20FIXED%20%2A%2A%2A/near/763099" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Szeto <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html#763099">(Jul 03 2019 at 19:06)</a>:</h4>
<p>if you rerun <code>pip install zulip_botserver</code>, does it say that it was already installed?</p>



<a name="763102"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20with%20zulip-botserver%20on%20Ubuntu%2018%20-%20%2A%2A%2A%20FIXED%20%2A%2A%2A/near/763102" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html#763102">(Jul 03 2019 at 19:14)</a>:</h4>
<p><span class="user-mention" data-user-id="10092">@Geoff Wild</span> just mentioning you in case you missed Andrew's question.</p>



<a name="763137"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20with%20zulip-botserver%20on%20Ubuntu%2018%20-%20%2A%2A%2A%20FIXED%20%2A%2A%2A/near/763137" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoff Wild <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html#763137">(Jul 03 2019 at 20:15)</a>:</h4>
<blockquote>
<p>if you rerun <code>pip install zulip_botserver</code>, does it say that it was already installed?</p>
</blockquote>
<p>This is strange:</p>
<div class="codehilite"><pre><span></span># pip install zulip_botserver
Traceback (most recent call last):
  File &quot;/usr/bin/pip&quot;, line 9, in &lt;module&gt;
    from pip import main
ModuleNotFoundError: No module named &#39;pip&#39;
</pre></div>



<a name="763138"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20with%20zulip-botserver%20on%20Ubuntu%2018%20-%20%2A%2A%2A%20FIXED%20%2A%2A%2A/near/763138" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoff Wild <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html#763138">(Jul 03 2019 at 20:20)</a>:</h4>
<p>Guess it doesn't like Python 3?  Changed it to use python2:</p>
<div class="codehilite"><pre><span></span># pip --version
pip 9.0.1 from /usr/lib/python2.7/dist-packages (python 2.7)
</pre></div>


<div class="codehilite"><pre><span></span># pip install zulip_botserver
Requirement already satisfied: zulip_botserver in /usr/local/lib/python2.7/dist-packages
Requirement already satisfied: zulip-bots in /usr/local/lib/python2.7/dist-packages (from zulip_botserver)
Requirement already satisfied: flask&gt;=0.12.2 in /usr/local/lib/python2.7/dist-packages (from zulip_botserver)
Requirement already satisfied: zulip in /usr/local/lib/python2.7/dist-packages (from zulip_botserver)
Requirement already satisfied: html2text in /usr/local/lib/python2.7/dist-packages (from zulip-bots-&gt;zulip_botserver)
Requirement already satisfied: lxml in /usr/local/lib/python2.7/dist-packages (from zulip-bots-&gt;zulip_botserver)
Requirement already satisfied: BeautifulSoup4 in /usr/local/lib/python2.7/dist-packages (from zulip-bots-&gt;zulip_botserver)
Requirement already satisfied: pip in /usr/lib/python2.7/dist-packages (from zulip-bots-&gt;zulip_botserver)
Requirement already satisfied: Werkzeug&gt;=0.14 in /usr/local/lib/python2.7/dist-packages (from flask&gt;=0.12.2-&gt;zulip_botserver)
Requirement already satisfied: click&gt;=5.1 in /usr/local/lib/python2.7/dist-packages (from flask&gt;=0.12.2-&gt;zulip_botserver)
Requirement already satisfied: Jinja2&gt;=2.10 in /usr/local/lib/python2.7/dist-packages (from flask&gt;=0.12.2-&gt;zulip_botserver)
Requirement already satisfied: itsdangerous&gt;=0.24 in /usr/local/lib/python2.7/dist-packages (from flask&gt;=0.12.2-&gt;zulip_botserver)
Requirement already satisfied: six in /usr/lib/python2.7/dist-packages (from zulip-&gt;zulip_botserver)
Requirement already satisfied: typing&gt;=3.5.2.2 in /usr/local/lib/python2.7/dist-packages (from zulip-&gt;zulip_botserver)
Requirement already satisfied: requests[security]&gt;=0.12.1 in /usr/local/lib/python2.7/dist-packages (from zulip-&gt;zulip_botserver)
Requirement already satisfied: matrix-client in /usr/local/lib/python2.7/dist-packages (from zulip-&gt;zulip_botserver)
Requirement already satisfied: soupsieve&gt;=1.2 in /usr/local/lib/python2.7/dist-packages (from BeautifulSoup4-&gt;zulip-bots-&gt;zulip_botserver)
Requirement already satisfied: MarkupSafe&gt;=0.23 in /usr/local/lib/python2.7/dist-packages (from Jinja2&gt;=2.10-&gt;flask&gt;=0.12.2-&gt;zulip_botserver)
Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,&lt;1.26,&gt;=1.21.1 in /usr/local/lib/python2.7/dist-packages (from requests[security]&gt;=0.12.1-&gt;zulip-&gt;zulip_botserver)
Requirement already satisfied: certifi&gt;=2017.4.17 in /usr/local/lib/python2.7/dist-packages (from requests[security]&gt;=0.12.1-&gt;zulip-&gt;zulip_botserver)
Requirement already satisfied: chardet&lt;3.1.0,&gt;=3.0.2 in /usr/local/lib/python2.7/dist-packages (from requests[security]&gt;=0.12.1-&gt;zulip-&gt;zulip_botserver)
Requirement already satisfied: idna&lt;2.9,&gt;=2.5 in /usr/lib/python2.7/dist-packages (from requests[security]&gt;=0.12.1-&gt;zulip-&gt;zulip_botserver)
Requirement already satisfied: cryptography&gt;=1.3.4; extra == &quot;security&quot; in /usr/lib/python2.7/dist-packages (from requests[security]&gt;=0.12.1-&gt;zulip-&gt;zulip_botserver)
Requirement already satisfied: pyOpenSSL&gt;=0.14; extra == &quot;security&quot; in /usr/local/lib/python2.7/dist-packages (from requests[security]&gt;=0.12.1-&gt;zulip-&gt;zulip_botserver)
Requirement already satisfied: backports.functools-lru-cache; python_version &lt; &quot;3&quot; in /usr/local/lib/python2.7/dist-packages (from soupsieve&gt;=1.2-&gt;BeautifulSoup4-&gt;zulip-bots-&gt;zulip_botserver)
</pre></div>



<a name="763139"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20with%20zulip-botserver%20on%20Ubuntu%2018%20-%20%2A%2A%2A%20FIXED%20%2A%2A%2A/near/763139" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoff Wild <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html#763139">(Jul 03 2019 at 20:23)</a>:</h4>
<p>If I change zulip_botserver to use python2, I get:</p>
<div class="codehilite"><pre><span></span># zulip-botserver --help
Traceback (most recent call last):
  File &quot;/usr/local/bin/zulip-botserver&quot;, line 7, in &lt;module&gt;
    from zulip_botserver.server import main
  File &quot;/usr/local/lib/python2.7/dist-packages/zulip_botserver/server.py&quot;, line 20
    def read_config_section(parser: configparser.ConfigParser, section: str) -&gt; Dict[str, str]:
                                  ^
SyntaxError: invalid syntax
</pre></div>



<a name="763142"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20with%20zulip-botserver%20on%20Ubuntu%2018%20-%20%2A%2A%2A%20FIXED%20%2A%2A%2A/near/763142" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Geoff Wild <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html#763142">(Jul 03 2019 at 20:28)</a>:</h4>
<p>All right.  Here's what I had to do, to get it to use Python 3:</p>
<div class="codehilite"><pre><span></span># cp -p -r /usr/local/lib/python2.7/dist-packages /usr/local/lib/python3.7/
</pre></div>


<p>Now:</p>
<div class="codehilite"><pre><span></span># zulip-botserver --help
usage:
        zulip-botserver --config-file &lt;path/to/botserverrc&gt; [--hostname=&lt;address&gt;] [--port=&lt;port&gt;]


optional arguments:
  -h, --help            show this help message and exit
  --config-file CONFIG_FILE, -c CONFIG_FILE
                        Config file for the Botserver. Use your `botserverrc`
                        for multiple bots or`zuliprc` for a single bot.
  --bot-config-file BOT_CONFIG_FILE
                        Config file for bots. Only needed when one of the bots
                        you want to run requires a config file.
  --bot-name BOT_NAME, -b BOT_NAME
                        Run a single bot BOT_NAME. Use this option to run the
                        Botserver with a `zuliprc` config file.
  --hostname HOSTNAME   Address on which you want to run the Botserver.
                        (default: 127.0.0.1)
  --port PORT           Port on which you want to run the Botserver. (default:
                        5002)
</pre></div>



<a name="763181"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20with%20zulip-botserver%20on%20Ubuntu%2018%20-%20%2A%2A%2A%20FIXED%20%2A%2A%2A/near/763181" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20with.20zulip-botserver.20on.20Ubuntu.2018.20-.20.2A.2A.2A.20FIXED.20.2A.2A.2A.html#763181">(Jul 03 2019 at 23:40)</a>:</h4>
<p><span class="user-mention" data-user-id="10092">@Geoff Wild</span> you can use <code>pip3</code> to run the Python 3 version of pip.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>