<html>
<head><meta charset="utf-8"><title>twitter integration install · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html">twitter integration install</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="54079"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54079" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54079">(Nov 14 2016 at 04:28)</a>:</h4>
<p>Hi, I've been trying to install the Twitter integration on our server. After following the instructions, I run the test script and get the following error:<br>
zulip API(): connection error (server 500) -- retrying..........Success!<br>
Error sending message to zulip: Internal server error</p>
<p>Any assistance would be appreciated.</p>



<a name="54198"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54198" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54198">(Nov 14 2016 at 21:18)</a>:</h4>
<p><span class="user-mention" data-user-email="zach@dottedline.com.au">@Zach Casley</span> there should be a 500 error in /var/log/zulip/errors.log on the server that is likely instructive</p>



<a name="54367"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54367" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54367">(Nov 15 2016 at 02:56)</a>:</h4>
<p>thanks <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> , I'll have a look and see if I can sort it out. If I'm stuck hope you don't mind if I give you a yell. </p>



<a name="54368"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54368" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54368">(Nov 15 2016 at 03:07)</a>:</h4>
<p>cool, sounds good!  Let us know what the problem ends up being :)</p>



<a name="54373"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54373" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54373">(Nov 15 2016 at 03:46)</a>:</h4>
<p>Hi <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span>  not luck yet.  I am wondering if the issue is where the  pre-built API bindings for Python are installed.... which directory should the tarball be unzipped and installed in? (it's in the zulip user /home currently).  I noticed today our RSS integration is also not working. When I run it manually as per the docs I get this:</p>
<div class="codehilite"><pre><span></span>zulip@zulip-server:~$ /usr/local/share/zulip/integrations/rss/rss-bot
Traceback (most recent call last):
  File &quot;/usr/local/share/zulip/integrations/rss/rss-bot&quot;, line 37, in &lt;module&gt;
    import feedparser
ImportError: No module named feedparser
</pre></div>


<p>this isn't a show stopper, but it is a pain point as we get status updates for twillio/firebase etc through RSS &amp; Twitter</p>



<a name="54374"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54374" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54374">(Nov 15 2016 at 03:53)</a>:</h4>
<p>You can install the API following these docs: <a href="https://chat.zulip.org/api/" target="_blank" title="https://chat.zulip.org/api/">https://chat.zulip.org/api/</a></p>
<p>It's a little bit silly that we still recommend to install the API this way for users who already have a Zulip install, but it should solve your problem.  Or you can manually add ..../zulip/api to your Python path.</p>



<a name="54375"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54375" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54375">(Nov 15 2016 at 03:55)</a>:</h4>
<p>Thanks Steve, I'll try that now</p>



<a name="54377"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54377" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54377">(Nov 15 2016 at 04:11)</a>:</h4>
<p>Hi <span class="user-mention" data-user-email="showell30@yahoo.com">@Steve Howell</span> and <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> , unfortunately I don't seem to be winning with this. RUnning the twitter one manually gives this as the last entry in the error.log file:</p>
<div class="codehilite"><pre><span></span>2016-11-14 23:07:00,294 ERROR    Traceback (most recent call last):
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py&quot;, line 132, in get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zulip-venv/lib/python2.7/site-packages/django/views/decorators/csrf.py&quot;, line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zerver/lib/rest.py&quot;, line 122, in rest_dispatch
    return target_function(request, **kwargs)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zulip-venv/lib/python2.7/site-packages/django/views/decorators/csrf.py&quot;, line 58, in wrapped_view
    return view_func(*args, **kwargs)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zerver/decorator.py&quot;, line 382, in _wrapped_func_arguments
    return rate_limit()(view_func)(request, profile, *args, **kwargs)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zerver/decorator.py&quot;, line 584, in wrapped_func
    return func(request, *args, **kwargs)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zerver/lib/request.py&quot;, line 160, in _wrapped_view_func
    return view_func(request, *args, **kwargs)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zerver/views/messages.py&quot;, line 791, in send_message_backend
    local_id=local_id, sender_queue_id=queue_id)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zerver/lib/actions.py&quot;, line 903, in check_send_message
    forwarder_user_profile, local_id, sender_queue_id)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zerver/lib/actions.py&quot;, line 996, in check_message
    send_pm_if_empty_stream(sender, stream, stream_name)
  File &quot;/home/zulip/deployments/2016-11-07-22-38-15/zerver/lib/actions.py&quot;, line 926, in send_pm_if_empty_stream
    if stream.realm != sender.realm:
AttributeError: &#39;NoneType&#39; object has no attribute &#39;realm&#39;
</pre></div>


<p>I hope that gives some more info that is of use to you (makes no sense to me, sorry...I'm a python noob).  This is the error when running the twitter integration manually from the command line:</p>
<div class="codehilite"><pre><span></span>zulip@zulip-server:~$ /usr/local/share/zulip/integrations/twitter/twitter-search-bot --search=&quot;@nprnews,quantum physics&quot;
zulip API(): connection error (server 500) -- retrying..........Success!
Error sending message to zulip: Internal server error
</pre></div>


<p>Thanks again</p>



<a name="54379"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54379" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54379">(Nov 15 2016 at 04:12)</a>:</h4>
<p>Ahh, OK, it's a bug in the latest release that you get that traceback rather than a nice Zulip message to the bot owner explaining the problem, but the actual issue is that you haven't created the stream the bot is supposed to send to</p>



<a name="54380"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54380" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54380">(Nov 15 2016 at 04:15)</a>:</h4>
<p>"stoopid empty head"... created a stream called "tweets", not "twitter".  Thank you <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span>, that's the twitter one sorted I think! The stream has tweets in it </p>



<a name="54381"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54381" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54381">(Nov 15 2016 at 04:16)</a>:</h4>
<p>cool.  I'll fix the error handling there -- that's a known bug that should be really easy :)</p>



<a name="54382"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54382" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54382">(Nov 15 2016 at 04:16)</a>:</h4>
<p>my life is but to be a bug finder for others... any idea about why the RSS bot would be busted?</p>



<a name="54383"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54383" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54383">(Nov 15 2016 at 04:17)</a>:</h4>
<p>I think you just need to install the feedparser library with <code>pip install feedparser</code></p>



<a name="54384"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54384" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54384">(Nov 15 2016 at 04:18)</a>:</h4>
<p>OK, will give that a lash. Thank you again</p>



<a name="54385"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54385" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54385">(Nov 15 2016 at 04:20)</a>:</h4>
<p>Sorry Tim, I'm sure you have better things to do than this but I'll push my luck.  Installed feedparser, now I get this:</p>
<div class="codehilite"><pre><span></span>zulip@zulip-server:~$ /usr/local/share/zulip/integrations/rss/rss-bot
Traceback (most recent call last):
  File &quot;/usr/local/share/zulip/integrations/rss/rss-bot&quot;, line 166, in &lt;module&gt;
    client = zulip.Client(email=opts.email, api_key=opts.api_key,
AttributeError: Values instance has no attribute &#39;email&#39;
</pre></div>



<a name="54386"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54386" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54386">(Nov 15 2016 at 04:21)</a>:</h4>
<p>Did you pass the <code>email</code> argument multiple times or something?</p>



<a name="54387"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54387" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54387">(Nov 15 2016 at 04:22)</a>:</h4>
<p>That sounds like an error in how the arguments are passed</p>



<a name="54388"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54388" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54388">(Nov 15 2016 at 04:22)</a>:</h4>
<p>I don't think so, OK, I'll go back and start again with that setup. Thank you</p>



<a name="54389"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54389" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54389">(Nov 15 2016 at 04:23)</a>:</h4>
<p>Maybe you're missing the <code>email</code> argument?</p>



<a name="54390"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54390" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54390">(Nov 15 2016 at 04:24)</a>:</h4>
<p>(Or didn't put it in the <code>zuliprc</code> file you're using?)</p>



<a name="54391"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54391" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54391">(Nov 15 2016 at 04:26)</a>:</h4>
<p>it's in the <code>zuliprc</code> file, I'm assuming it's the bot email. Does it need to be in quotes?</p>



<a name="54392"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54392" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54392">(Nov 15 2016 at 04:26)</a>:</h4>
<p>no</p>



<a name="54395"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54395" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54395">(Nov 15 2016 at 04:45)</a>:</h4>
<p><span class="user-mention" data-user-email="zach@dottedline.com.au">@Zach Casley</span> OK I merged a fix for that error message issue.  I'm surprised you're still having trouble with the RSS bot; it may help for you to post your zuliprc configuration (you can remove the API key) and/or what options you're passing</p>



<a name="54396"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54396" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54396">(Nov 15 2016 at 04:46)</a>:</h4>
<p>OK, no problems.  I broke the twitter one again too... I've got special skills... Here is the zuliprc file:</p>
<div class="codehilite"><pre><span></span>[api]
key=XXXX
email=rss-bot@dottedline.com.au
site=https://hal.dottedline.com.au/api
[api]
key=XXXX
email=twitter-bot@dottedline.com.au
site=https://hal.dottedline.com.au/api
</pre></div>



<a name="54398"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54398" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54398">(Nov 15 2016 at 04:47)</a>:</h4>
<p>Oh, yep, you can't put both of those in the same zuliprc file</p>



<a name="54399"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54399" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54399">(Nov 15 2016 at 04:48)</a>:</h4>
<p>The standard ConfigParser thing we're using doesn't handle that well -- it's probably returning a list of values for email or something because of that :)</p>



<a name="54400"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54400" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54400">(Nov 15 2016 at 04:48)</a>:</h4>
<p>there's an option <code>--config-file</code> you can pass to tell the different bots which config file to use</p>



<a name="54401"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54401" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54401">(Nov 15 2016 at 04:48)</a>:</h4>
<p>told you I had skills...OK, should I just have the one bot do all the fetching?</p>



<a name="54402"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54402" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54402">(Nov 15 2016 at 04:49)</a>:</h4>
<p>that would work too; depends if you want the two things to display as from different or the same senders</p>



<a name="54404"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54404" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54404">(Nov 15 2016 at 04:50)</a>:</h4>
<p>ah.. OK, so split the <code>zuliprc</code> into two files, and call using the <code>--config-file</code> option<br>
explains why twitter worked from the RSS bot when I removed it from <code>zuliprc</code></p>



<a name="54405"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54405" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54405">(Nov 15 2016 at 04:50)</a>:</h4>
<p>yep :)</p>



<a name="54408"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54408" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54408">(Nov 15 2016 at 04:53)</a>:</h4>
<p>so, the manual command would be something like:<br>
<code>/usr/local/share/zulip/integrations/twitter/twitter-search-bot --config-file ~/.zuliprc_twitter --search="@emberjs"</code></p>



<a name="54410"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54410" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54410">(Nov 15 2016 at 04:54)</a>:</h4>
<p>yep!</p>



<a name="54411"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54411" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54411">(Nov 15 2016 at 04:56)</a>:</h4>
<p>bugger, was hoping I had it wrong, as it didn't work </p>



<a name="54413"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54413" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54413">(Nov 15 2016 at 05:06)</a>:</h4>
<p>what error do you get now?</p>



<a name="54417"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54417" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54417">(Nov 15 2016 at 05:12)</a>:</h4>
<p>not returning any tweets. It doesn't seem to register the --config-file</p>



<a name="54418"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54418" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54418">(Nov 15 2016 at 05:14)</a>:</h4>
<p>you don't seem to have passed a stream in the arguments?</p>



<a name="54419"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54419" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54419">(Nov 15 2016 at 05:14)</a>:</h4>
<p>Oh, the script keeps track of which things it has already processed and only sends new things</p>



<a name="54420"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54420" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54420">(Nov 15 2016 at 05:14)</a>:</h4>
<p>It's intended to be run in a cron job</p>



<a name="54421"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54421" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54421">(Nov 15 2016 at 05:14)</a>:</h4>
<p>So if it runs and returns no tweets, that probably means it's working (but there are no new tweets)</p>



<a name="54424"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54424" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54424">(Nov 15 2016 at 05:19)</a>:</h4>
<p>OK, by putting a stream in (and sending to another search) I managed to get it to return a tweet, but it's still ignoring the config, i.e.</p>
<div class="codehilite"><pre><span></span>[api]
key=XXXX
email=twitter-bot@dottedline.com.au
site=https://hal.dottedline.com.au/api
</pre></div>


<p>it's just fetching the tweets as the bot which is in the <code>zuliprc</code> file. I can just configure our main bot to do the fetching I suppose</p>



<a name="54426"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54426" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54426">(Nov 15 2016 at 05:27)</a>:</h4>
<p>Oh, I have a theory</p>



<a name="54427"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54427" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54427">(Nov 15 2016 at 05:27)</a>:</h4>
<p>let's just take as a given my ability to break well made code</p>



<a name="54428"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54428" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54428">(Nov 15 2016 at 05:27)</a>:</h4>
<p>Yeah, OK, I think the twitter bots used to not support using those config files</p>



<a name="54429"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54429" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54429">(Nov 15 2016 at 05:28)</a>:</h4>
<p>And we fixed that recently, but have't done an API release since</p>



<a name="54430"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54430" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54430">(Nov 15 2016 at 05:28)</a>:</h4>
<p>alright then.... that would explain it<br>
so, easiest thing is to have our main bot fetch it all... one bot to fetch them all....<br>
and park the individual API bots for a while</p>



<a name="54912"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54912" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54912">(Nov 16 2016 at 01:20)</a>:</h4>
<p>Hi <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> just wondering if you could give me some pointers regarding the search syntax for the twitter-search-bot, so I can try and filter the firehose coming in. I've tried limiting it to just tweets from a particular user with --search="from:nodejs" but it doesn't seem to work.<br>
Any tips? thanks</p>



<a name="54915"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54915" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54915">(Nov 16 2016 at 01:29)</a>:</h4>
<p>I think you may want <code>api/integrations/twitter/twitter-bot</code> for watching a particular user's tweets?</p>



<a name="54918"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54918" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54918">(Nov 16 2016 at 01:30)</a>:</h4>
<p>ahhh... thanks, hadn't though of that, was just running the search on a cronjob. I'll give it a go. Thanks!<br>
(note ...... +1 beer for <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> )</p>



<a name="54957"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/54957" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#54957">(Nov 16 2016 at 02:14)</a>:</h4>
<p>not having any luck with getting the <code>twitter-bot</code> to work, syntax I'm using to run from command line is (as per the docs I think):</p>
<div class="codehilite"><pre><span></span>/usr/local/share/zulip/integrations/twitter/twitter-bot --user email@mydomain.com.au --api-key XXXYYYZZZ123456 --twitter-id mytwitterusername
</pre></div>


<p>but I keep getting this error back:</p>
<div class="codehilite"><pre><span></span>Traceback (most recent call last):
  File &quot;/usr/local/share/zulip/integrations/twitter/twitter-bot&quot;, line 139, in &lt;module&gt;
    statuses = api.GetFriendsTimeline(user=options.twitter_id, count=5)
AttributeError: &#39;Api&#39; object has no attribute &#39;GetFriendsTimeline&#39;
</pre></div>


<p>I'm pretty sure it's a syntax issue,but I've tried every combination I can think of.  If someone can share one which works that would be great, thanks.</p>



<a name="55461"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55461" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55461">(Nov 17 2016 at 03:16)</a>:</h4>
<p>hi <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> , sorry to bug you direct again, but are you able to give me some pointers for <code>twitter-bot</code>, thanks</p>



<a name="55464"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55464" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55464">(Nov 17 2016 at 05:38)</a>:</h4>
<p>I think python-twitter may have changed its API; try changing that to <code>api.GetUserTimeline(screen_name=user)</code></p>



<a name="55465"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55465" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55465">(Nov 17 2016 at 05:39)</a>:</h4>
<p><span class="user-mention" data-user-email="zach@dottedline.com.au">@Zach Casley</span> FYI since it's been a while :)</p>



<a name="55466"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55466" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55466">(Nov 17 2016 at 05:39)</a>:</h4>
<p>Thanks Tim, will do, and let you know how I go, thanks</p>



<a name="55497"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55497" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55497">(Nov 17 2016 at 07:46)</a>:</h4>
<p>That was the fix <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> , it was a change in the python-twitter API. FYI the changes required to <code>/usr/local/share/zulip/integrations/twitter/twitter-bot</code> were:</p>
<p>Line 139:<br>
<code>statuses = api.GetUserTimeline(screen_name=options.twitter_id, count=5)</code> and,</p>
<p>Line 142:<br>
<code>statuses = api.GetUserTimeline(screen_name=options.twitter_id, since_id=since_id)</code></p>



<a name="55498"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55498" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55498">(Nov 17 2016 at 07:47)</a>:</h4>
<p>Cool; want to submit them as a quick pull request?</p>



<a name="55499"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55499" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55499">(Nov 17 2016 at 07:48)</a>:</h4>
<p>mate, I'm scared to play with that, but I'll give it a go (I'm a Geologist, I used to lick rocks for a living....)</p>



<a name="55510"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55510" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55510">(Nov 17 2016 at 08:19)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> pull request done, hope I didn't break anything</p>



<a name="55524"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55524" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55524">(Nov 17 2016 at 13:11)</a>:</h4>
<p>Hi <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span>, I have made some changes to my local <code>twitter-bot</code> so that I could get it to 'slurp' the posts from more than one twitter account by passing it a <code>--config</code> parameter to specify a different config file  (as per <code>.zulip_twitterrc</code>) for each twitter account I was checking.  Would this be of general interest? If so I can submit a pull request.</p>



<a name="55624"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55624" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55624">(Nov 17 2016 at 16:45)</a>:</h4>
<p>Awesome <span class="user-mention" data-user-email="zach@dottedline.com.au">@Zach Casley</span>! I think that feature is of interest, but we might want to design the config file a bit to support just doing multiple things in one file :)</p>



<a name="55949"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55949" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55949">(Nov 17 2016 at 22:17)</a>:</h4>
<p>that was my original thought, but I just did something quick to make sure the idea worked for our production server. I'll get a fix happening that uses the <code>zulip_twitterrc</code> file and then submit a PR</p>



<a name="55973"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/55973" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#55973">(Nov 17 2016 at 22:57)</a>:</h4>
<p>cool!</p>



<a name="56090"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/56090" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zach Casley <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#56090">(Nov 18 2016 at 10:29)</a>:</h4>
<p>hi <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> , PR submitted for the change to the twitter-bot to 'slurp' from multiple Twitter accounts. Let me know if there is anything needs fixing, cheers</p>



<a name="56106"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/twitter%20integration%20install/near/56106" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/twitter.20integration.20install.html#56106">(Nov 18 2016 at 16:50)</a>:</h4>
<p>awesome!  I'll take a look later today</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>