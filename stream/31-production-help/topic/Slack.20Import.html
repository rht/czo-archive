<html>
<head><meta charset="utf-8"><title>Slack Import · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html">Slack Import</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1164774"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1164774" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1164774">(Apr 16 2021 at 17:24)</a>:</h4>
<p>I'm trying to import from slack into a production server following the documentation here: <a href="https://zulip.com/help/import-from-slack#import-into-zulip-cloud">https://zulip.com/help/import-from-slack#import-into-zulip-cloud</a> </p>
<p>I am getting an error saying "Exception: Error accessing Slack API: invalid_auth" when I run the command "./manage.py convert_slack_data slack_data.zip --token &lt;token&gt; --output converted_slack_data" using my Bot User OAuth Token. I have verified that I have installed the API and that it has the correct scopes. Any idea how to resolve this or where I could go to get more details about the error?</p>



<a name="1169128"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1169128" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1169128">(Apr 26 2021 at 17:26)</a>:</h4>
<p>I've been trying to figure this out but have had no success. Has anyone had similar issues? I'm using the xoxb token from my app and have whitelisted my servers IP address in the apps settings. Any suggestions for troubleshooting?</p>



<a name="1169180"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1169180" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1169180">(Apr 26 2021 at 18:41)</a>:</h4>
<p>I reached out to Slack for help on this and it looks like the method currently used to make the get request by passing the token as a query string has been deprecated for any app created after February 24, 2021. It looks like the token must be passed as an Authorization: Bearer header as explained in this article: <br>
<a href="https://api.slack.com/changelog/2020-11-no-more-tokens-in-querystrings-for-newly-created-apps">https://api.slack.com/changelog/2020-11-no-more-tokens-in-querystrings-for-newly-created-apps</a></p>
<p>I checked the release notes for 3.4 but didn't see anything about this, has this been patched?</p>



<a name="1169269"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1169269" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1169269">(Apr 26 2021 at 20:19)</a>:</h4>
<p><span class="user-mention" data-user-id="19518">@Shane Moon</span> try upgrading to master -- I'm pretty sure we merged something related to this for the 4.0 release, which we're hoping to post the first release candidate for this week.  It may be that we forgot to backport it to the 3.x series.</p>



<a name="1169272"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1169272" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1169272">(Apr 26 2021 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> I'll give that a shot, thanks!</p>



<a name="1169287"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1169287" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1169287">(Apr 26 2021 at 20:36)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> I tried updating to master and got this error... any idea how to fix that? <a href="/user_uploads/2/a2/PzMQIsKvcOH5GImBuE1PAlR1/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/a2/PzMQIsKvcOH5GImBuE1PAlR1/image.png" title="image.png"><img src="/user_uploads/2/a2/PzMQIsKvcOH5GImBuE1PAlR1/image.png"></a></div>



<a name="1169302"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1169302" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1169302">(Apr 26 2021 at 21:02)</a>:</h4>
<p>I ended up just replacing the get_slack_api_data function from <a href="https://github.com/zulip/zulip/blob/master/zerver/data_import/slack.py">https://github.com/zulip/zulip/blob/master/zerver/data_import/slack.py</a> into my slack.py file and it worked perfectly, I'll just use this work around until 4.0 is released, thanks for your help with this!</p>



<a name="1169352"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1169352" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1169352">(Apr 26 2021 at 21:50)</a>:</h4>
<p><span class="user-mention" data-user-id="19518">@Shane Moon</span> that exception appears to be <a href="https://github.com/zulip/zulip/issues/18258">https://github.com/zulip/zulip/issues/18258</a>.  I expect we'll fix that soon.</p>



<a name="1169518"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1169518" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1169518">(Apr 26 2021 at 23:31)</a>:</h4>
<p><a href="https://github.com/zulip/zulip/commit/ba7da6d5c0d6dbd0efbedde5f3e5b41d1b236050">ba7da6d5c0d6dbd0efbedde5f3e5b41d1b236050</a> fixed the Slack import bug.  We should have backported to 3.x; we can do so for completeness, but we're unlikely to release a 3.5, since 4.0rc1 is just around the corner.</p>



<a name="1173901"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1173901" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1173901">(May 04 2021 at 17:22)</a>:</h4>
<p>I got an error during an import saying "psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "zerver_userprofile_realm_id_email_uniq"<br>
DETAIL:  Key (realm_id, upper(email::text))=(8, &lt;user's email&gt;) already exists." It created the subdomain but I can't check if it actually imported any data from slack since when I tried resetting the admin user account password it told me "This Zulip server does not contain a user with email '&lt;admin email&gt;'"</p>
<p>has anyone seen this error or have any suggestions for fixing this?</p>



<a name="1174037"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1174037" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1174037">(May 04 2021 at 20:43)</a>:</h4>
<p>I found out that the error was caused by a user having two slack accounts under the same email with different usernames, but the import didn't add any users... Is there a way to clean up the converted data and re-import without resetting my entire server?</p>



<a name="1174039"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1174039" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1174039">(May 04 2021 at 20:46)</a>:</h4>
<p><span class="user-mention" data-user-id="19518">@Shane Moon</span> interesting, thanks for the report.  I didn't know Slack had that feature (and their export format is essentially undocumented).</p>



<a name="1174040"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1174040" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1174040">(May 04 2021 at 20:47)</a>:</h4>
<p>You can definitely hand edit the zulip import files generated by the tool.</p>



<a name="1174042"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1174042" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1174042">(May 04 2021 at 20:53)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> It looks like it happened because the users changed their display names at some point which the convert data tool interpreted as two separate users and created an entry for each. If I were to get the import data cleaned is there a way I can reimport onto the broken subdomain that was created the first time I tried importing? I tried once already and it gave me an error saying that the subdomain already exists</p>



<a name="1177042"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1177042" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1177042">(May 08 2021 at 05:49)</a>:</h4>
<p><span class="user-mention" data-user-id="19518">@Shane Moon</span> you can do a <code>get_realm("subdomain").delete()</code> in a management shell if you want to hard-delete the realm to re-import.  (Obviously don't do this if there's any data in that realm you don't want deleted).</p>



<a name="1177830"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1177830" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1177830">(May 10 2021 at 18:58)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> Thanks, I'll try that command out!</p>
<p>Also regarding the import tool and the issues with the convert_slack_data command when I updated to git master I got an error saying "request() got an unexpected keyword argument 'user'". </p>
<p>In the slack.py file I edited the get_slack_api_data() function and changed the "data = requests.get()" line to have "params={<strong>kwargs}" instead of just "</strong>kwargs" and it solved the error for me.</p>



<a name="1177840"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1177840" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1177840">(May 10 2021 at 19:03)</a>:</h4>
<p><span class="user-mention" data-user-id="19518">@Shane Moon</span> can you send the diff for that change?  If you're running master, <code>git diff</code> should get you it.</p>



<a name="1177890"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1177890" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1177890">(May 10 2021 at 19:33)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> I just ran /home/zulip/deployments/current/scripts/upgrade-zulip-from-git master, so where would I run git diff?</p>



<a name="1177897"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1177897" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1177897">(May 10 2021 at 19:38)</a>:</h4>
<p>The <code>/home/zulip/deployments/current</code> directory is a git checkout, so:</p>
<div class="codehilite"><pre><span></span><code>cd /home/zulip/deployments/current
git diff
</code></pre></div>



<a name="1177902"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1177902" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1177902">(May 10 2021 at 19:40)</a>:</h4>
<p>Thanks, heres the output: <a href="/user_uploads/2/85/fsxOPyCobKaf_mf30oG7Rymd/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/85/fsxOPyCobKaf_mf30oG7Rymd/image.png" title="image.png"><img src="/user_uploads/2/85/fsxOPyCobKaf_mf30oG7Rymd/image.png"></a></div>



<a name="1178081"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1178081" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1178081">(May 10 2021 at 21:19)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> I got the import to work from slack, but am now wondering if there is anyway to combine history from a cloud hosted Zulip Server into this same realm?</p>



<a name="1178114"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1178114" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1178114">(May 10 2021 at 22:03)</a>:</h4>
<p><span class="user-mention" data-user-id="19518">@Shane Moon</span> there's not currently a way to merge history from multiple sources.  We probably will add one down the line.</p>



<a name="1178587"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1178587" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1178587">(May 11 2021 at 14:10)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> Okay, thanks for all your help on this!</p>



<a name="1180171"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1180171" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1180171">(May 13 2021 at 19:26)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> if I tried to manually add one message dump from a zulip export into the converted slack data before importing, what fields would need to be changed? All the users have correspoding profiles so I changed all the sender fields in the message dump and added the corresponding zerver_streams, and zerver_recipient  pieces into the realm.json then updated the messages.json recipient fields, but am getting an assertion error when it tries to add the messages.json on import</p>



<a name="1180174"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1180174" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1180174">(May 13 2021 at 19:27)</a>:</h4>
<p>Can't help with this today as I'm doing the 4.0 release, ping me tomorrow.</p>



<a name="1180175"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1180175" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1180175">(May 13 2021 at 19:27)</a>:</h4>
<p>Okay, thanks!</p>



<a name="1181270"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1181270" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shane Moon <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1181270">(May 14 2021 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> Got a second you could point me in the right direction with this today?</p>



<a name="1181335"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1181335" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1181335">(May 14 2021 at 17:05)</a>:</h4>
<p><span class="user-mention" data-user-id="19518">@Shane Moon</span> I would expect what you need to do is align the IDs for the objects that appear in both dumps -- UserProfile, Recipient, etc.</p>



<a name="1181336"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1181336" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1181336">(May 14 2021 at 17:06)</a>:</h4>
<p>If you're motivated to work on this, I can write up a design for a general tool for merging organizations that we could build; I'm not sure it's going to be easy to build a 1-time hack that can't be reused by other organizations, so I'd rather invest my time in solving the general problem.</p>



<a name="1190639"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190639" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lukhas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190639">(May 28 2021 at 13:12)</a>:</h4>
<p>Hello, can I use the Slack Export/Import tool to only import custom emojis? Don't care about the rest, blank slate and all, but all our memes and emojis would be nice :)</p>



<a name="1190650"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190650" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190650">(May 28 2021 at 13:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="20327">lukhas</span> <a href="#narrow/stream/31-production-help/topic/Slack.20Import/near/1190639">said</a>:</p>
<blockquote>
<p>Hello, can I use the Slack Export/Import tool to only import custom emojis? Don't care about the rest, blank slate and all, but all our memes and emojis would be nice :)</p>
</blockquote>
<p>Not sure if custom emoji is included in the export file. However,<br>
<a href="https://gist.github.com/lmarkus/8722f56baf8c47045621">https://gist.github.com/lmarkus/8722f56baf8c47045621</a></p>



<a name="1190651"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190651" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lukhas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190651">(May 28 2021 at 13:33)</a>:</h4>
<p>Ah, nice, will check that out. Thanks!</p>



<a name="1190687"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190687" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190687">(May 28 2021 at 14:16)</a>:</h4>
<p>If it works, the documentation probably should be updated.</p>



<a name="1190688"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190688" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lukhas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190688">(May 28 2021 at 14:20)</a>:</h4>
<p>The export was a success, now stumbling on the import via API calls</p>



<a name="1190713"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190713" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lukhas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190713">(May 28 2021 at 15:18)</a>:</h4>
<p>Yeah I can't find out what I'm doing wrong with my emoji import bot.<br>
I created a generic bot with my user (admin/owner of the Zulip instance) and followed <a href="https://zulip.com/api/upload-custom-emoji">https://zulip.com/api/upload-custom-emoji</a> to build my curl command and I get <code>{"result":"error","msg":"This endpoint does not accept bot requests."}</code> as a result</p>



<a name="1190714"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190714" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lukhas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190714">(May 28 2021 at 15:19)</a>:</h4>
<p>No matter what emoji setting I have in Organisation settings (allow all or admin)</p>



<a name="1190715"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190715" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Felix (strifel) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190715">(May 28 2021 at 15:23)</a>:</h4>
<p>Try using you own API key and not one of a bot.<br>
Press settings and scroll on your profile page to the bottom to find the key.</p>



<a name="1190718"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190718" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lukhas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190718">(May 28 2021 at 15:26)</a>:</h4>
<p>Oh, that works, thanks! :)</p>



<a name="1190986"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1190986" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1190986">(May 29 2021 at 03:45)</a>:</h4>
<p><span class="user-mention" data-user-id="20327">@lukhas</span> can you share your script to automate the uploading of the custom emoji?</p>



<a name="1191029"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1191029" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lukhas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1191029">(May 29 2021 at 07:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="2328">Rein Zustand</span> <a href="#narrow/stream/31-production-help/topic/Slack.20Import/near/1190986">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="20327">lukhas</span> can you share your script to automate the uploading of the custom emoji?</p>
</blockquote>
<p>Sure: <a href="https://gist.github.com/lukhas/12a2b34b0fef6e81c9f740f5f596d8e7">https://gist.github.com/lukhas/12a2b34b0fef6e81c9f740f5f596d8e7</a></p>



<a name="1198100"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1198100" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1198100">(May 31 2021 at 04:11)</a>:</h4>
<p>Raised <a href="https://github.com/zulip/zulip/pull/18651">#18651</a>.</p>



<a name="1258825"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1258825" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitry Sobol <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1258825">(Sep 24 2021 at 13:18)</a>:</h4>
<p>Hi! Can you help me with data convert from slack? Small archives converted without any errors. But when I try to import entire history archive (for 7 years) I got an error: </p>
<div class="codehilite" data-code-language="/manage.py"><pre><span></span><code>Converting data ...
Traceback (most recent call last):
  File "./manage.py", line 52, in &lt;module&gt;
    execute_from_command_line(sys.argv)
  File "/srv/zulip-venv-cache/cc77818846b328558cc9444c67cbbe0121ca80f4/zulip-py3-venv/lib/python3.8/site-packages/django/core/management/__init__.py", line 419, in execute_from_command_line
    utility.execute()
  File "/srv/zulip-venv-cache/cc77818846b328558cc9444c67cbbe0121ca80f4/zulip-py3-venv/lib/python3.8/site-packages/django/core/management/__init__.py", line 413, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/srv/zulip-venv-cache/cc77818846b328558cc9444c67cbbe0121ca80f4/zulip-py3-venv/lib/python3.8/site-packages/django/core/management/base.py", line 354, in run_from_argv
    self.execute(*args, **cmd_options)
  File "/srv/zulip-venv-cache/cc77818846b328558cc9444c67cbbe0121ca80f4/zulip-py3-venv/lib/python3.8/site-packages/django/core/management/base.py", line 398, in execute
    output = self.handle(*args, **options)
  File "/home/zulip/deployments/2021-09-07-12-55-30/zerver/management/commands/convert_slack_data.py", line 56, in handle
    do_convert_data(path, output_dir, token, threads=num_threads)
  File "/home/zulip/deployments/2021-09-07-12-55-30/zerver/data_import/slack.py", line 1270, in do_convert_data
    fetch_shared_channel_users(user_list, slack_data_dir, token)
  File "/home/zulip/deployments/2021-09-07-12-55-30/zerver/data_import/slack.py", line 1182, in fetch_shared_channel_users
    user = get_slack_api_data(
  File "/home/zulip/deployments/2021-09-07-12-55-30/zerver/data_import/slack.py", line 1372, in get_slack_api_data
    data = requests.get(
  File "/srv/zulip-venv-cache/cc77818846b328558cc9444c67cbbe0121ca80f4/zulip-py3-venv/lib/python3.8/site-packages/requests/api.py", line 76, in get
    return request('get', url, params=params, **kwargs)
  File "/srv/zulip-venv-cache/cc77818846b328558cc9444c67cbbe0121ca80f4/zulip-py3-venv/lib/python3.8/site-packages/requests/api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
TypeError: request() got an unexpected keyword argument 'user' ```
</code></pre></div>



<a name="1258836"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1258836" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1258836">(Sep 24 2021 at 15:58)</a>:</h4>
<p>The code doesn't make sense to me. <a href="https://github.com/zulip/zulip/blob/4815f6e28b2e99e799c3b60dac5cb1f19fa31b8e/zerver/data_import/slack.py#L1210">https://github.com/zulip/zulip/blob/4815f6e28b2e99e799c3b60dac5cb1f19fa31b8e/zerver/data_import/slack.py#L1210</a> shouldn't pass in <code>user</code> as a keyword argument to <code>requests.get</code>. cc: <span class="user-mention" data-user-id="52">@Vishnu KS</span></p>



<a name="1259028"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259028" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259028">(Sep 25 2021 at 00:13)</a>:</h4>
<p><span class="user-mention" data-user-id="21585">@Dmitry Sobol</span> thanks for the report; I don't think we've seen this failure before.</p>



<a name="1259030"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259030" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259030">(Sep 25 2021 at 00:14)</a>:</h4>
<p><span class="user-mention" data-user-id="2328">@Rein Zustand</span> I think what it's trying to do is pass those as HTTP GET parameters via <code>requests.get</code>, but it's hard to be sure.</p>



<a name="1259060"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259060" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259060">(Sep 25 2021 at 10:35)</a>:</h4>
<p>I looked at the API of the older version of <code>requests</code>(1.1.0: <a href="https://docs.python-requests.org/en/v1.1.0/user/quickstart/">https://docs.python-requests.org/en/v1.1.0/user/quickstart/</a>), and it uses <code>params</code> for URL params.</p>



<a name="1259088"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259088" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259088">(Sep 25 2021 at 20:43)</a>:</h4>
<p>This seems like a case of tests that don’t really test anything because they <a href="https://github.com/zulip/zulip/blob/b43852953b74bbe3fb87acc533814cdbf4efe4f8/zerver/tests/test_slack_importer.py#L143">mock at the wrong level</a>. Mocks should be for behavior, not for function calls.</p>



<a name="1259184"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259184" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitry Sobol <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259184">(Sep 27 2021 at 06:42)</a>:</h4>
<p>So guys can you advice workaround for me? Maybe downgrading <code>requests</code> will help? I use docker-zulip env</p>



<a name="1259186"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259186" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259186">(Sep 27 2021 at 07:32)</a>:</h4>
<p><span class="user-mention" data-user-id="21585">@Dmitry Sobol</span> maybe you can try this quickfix on my branch: <a href="https://github.com/rht/zulip/tree/slack-import-api">https://github.com/rht/zulip/tree/slack-import-api</a>. Sorry that I haven't tested it myself.</p>



<a name="1259214"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259214" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dmitry Sobol <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259214">(Sep 27 2021 at 10:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="2328">Rein Zustand</span> <a href="#narrow/stream/31-production-help/topic/Slack.20Import/near/1259186">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="21585">Dmitry Sobol</span> maybe you can try this quickfix on my branch: <a href="https://github.com/rht/zulip/tree/slack-import-api">https://github.com/rht/zulip/tree/slack-import-api</a>. Sorry that I haven't tested it myself.</p>
</blockquote>
<p>It works! Thank you!</p>



<a name="1259215"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259215" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259215">(Sep 27 2021 at 10:51)</a>:</h4>
<p>OK I will make a PR to zulip/zulip.</p>



<a name="1259307"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259307" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259307">(Sep 27 2021 at 18:23)</a>:</h4>
<p><span class="user-mention" data-user-id="2328">@Rein Zustand</span> it would probably be worth changing the test to mock the HTTP request return value using the <code>responses</code> module while you're at it, to fix the issue that made this bug possible.</p>



<a name="1259473"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259473" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259473">(Sep 27 2021 at 22:22)</a>:</h4>
<p>Yes I will do that in the full PR.</p>



<a name="1259620"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1259620" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1259620">(Sep 28 2021 at 11:22)</a>:</h4>
<p><a href="https://github.com/zulip/zulip/pull/19852">#19852</a></p>



<a name="1260131"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1260131" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1260131">(Sep 29 2021 at 17:28)</a>:</h4>
<p>Posted some review feedback; I think it's very much worth switching to the <code>responses</code> module for the mocking, since it's likely to be less code, and cleaner too, in addition to resulting in a test that actually prevents this failure mode <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>.</p>



<a name="1260354"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1260354" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1260354">(Sep 29 2021 at 22:30)</a>:</h4>
<p>I'm still reading the existing code before I can update the tests.</p>



<a name="1261524"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1261524" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1261524">(Oct 01 2021 at 05:01)</a>:</h4>
<p>Got preoccupied with <code>$work</code>, and so maybe will tackle this in a few days from now.</p>



<a name="1263477"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1263477" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1263477">(Oct 07 2021 at 03:02)</a>:</h4>
<p><span class="user-mention" data-user-id="699">@Anders Kaseorg</span> I applied your suggestion in the second commit of <a href="https://github.com/zulip/zulip/pull/19852">#19852</a>.</p>



<a name="1263742"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1263742" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1263742">(Oct 07 2021 at 18:47)</a>:</h4>
<p><span class="user-mention" data-user-id="2328">@Rein Zustand</span> that looks great, so I've merged this.</p>



<a name="1263744"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1263744" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1263744">(Oct 07 2021 at 18:49)</a>:</h4>
<p>Do we believe this bug applies in the 4.x branch as well as <code>main</code>?  If so, perhaps someone can help backport it, since it doesn't apply cleanly.</p>



<a name="1402294"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402294" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402294">(Jul 09 2022 at 23:43)</a>:</h4>
<p>@all I'm trying to import my Slack data into a new installation on a Digital Ocean droplet following the instructions listed here: <a href="https://zulip.com/help/import-from-slack#import-into-a-self-hosted-zulip-server">https://zulip.com/help/import-from-slack#import-into-a-self-hosted-zulip-server</a></p>
<p>I'm able to enter the following commands in the terminal<br>
"cd /home/zulip/deployments/current<br>
./scripts/stop-server"</p>
<p>When I enter the next command, "./manage.py convert_slack_data slack_data.zip --token &lt;token&gt; --output converted_slack_data" with my Slack API token replacing the &lt;token&gt;, I get the following error: "Error accessing Zulip secrets; manage.py in production must be run as the zulip user." I am already logged in as "Zulip," though. When I try to log in as the Zulip user again using the "su zulip" command, the terminal requests a password. I don't have the password, though. </p>
<p>Any thoughts? <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="1402296"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402296" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402296">(Jul 10 2022 at 00:00)</a>:</h4>
<p>What does <code>whoami</code> output?</p>



<a name="1402302"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402302" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402302">(Jul 10 2022 at 00:21)</a>:</h4>
<p>"zulip"</p>



<a name="1402303"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402303" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402303">(Jul 10 2022 at 00:32)</a>:</h4>
<p>Do you have an <code>/etc/zulip/zulip-secrets.conf</code> file?</p>



<a name="1402304"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402304" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402304">(Jul 10 2022 at 00:35)</a>:</h4>
<p>Negative. The only files in the /etc/zulip directory are nginx_sharding.conf, sharding.json, uwsgi.ini, and zulip.conf.</p>



<a name="1402306"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402306" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402306">(Jul 10 2022 at 00:36)</a>:</h4>
<p>How did you install Zulip?</p>



<a name="1402307"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402307" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402307">(Jul 10 2022 at 00:41)</a>:</h4>
<p>I completed the install through Digital Ocean's automated droplet creation here: <a href="https://marketplace.digitalocean.com/apps/zulip">https://marketplace.digitalocean.com/apps/zulip</a></p>



<a name="1402309"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402309" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402309">(Jul 10 2022 at 00:43)</a>:</h4>
<p>When it started up, did you ^C out of the installer, or did you answer the prompts and let it run to completion?</p>



<a name="1402310"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402310" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402310">(Jul 10 2022 at 00:44)</a>:</h4>
<p>I ^C out of the installer. It was my understanding that I needed to do that in order to complete the Slack import.</p>



<a name="1402311"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402311" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402311">(Jul 10 2022 at 00:45)</a>:</h4>
<p>:nod:  The installer needs to run.  But you will need to do an extra step once it runs to back out one thing it sets up.</p>
<p>So we can update the docs, do you recall where you got the sense to ^C out of it?</p>



<a name="1402313"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402313" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402313">(Jul 10 2022 at 00:46)</a>:</h4>
<p>Your next step should be to log out and back in, which will prompt the installer to run again.  Fill out the prompts and let it complete.</p>



<a name="1402315"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402315" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402315">(Jul 10 2022 at 00:47)</a>:</h4>
<p><del>After it completes, <code>./manage.py delete_realm -r ''</code> will clean out the base organization it set up, which will let you import the converted Slack instance into there.</del></p>
<p>Edit: Nothing to do as cleanup afterwards, just ignore the link it prints out.</p>



<a name="1402316"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402316" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402316">(Jul 10 2022 at 00:48)</a>:</h4>
<p>If you can help us out by pointing to the places in the docs you were looking at to try to do this, we can update those to be accurate.</p>



<a name="1402317"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402317" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402317">(Jul 10 2022 at 00:48)</a>:</h4>
<p>I understood that I needed to ^C out of the shell based upon the instructions here: <a href="https://zulip.com/help/import-from-slack#import-into-a-self-hosted-zulip-server">https://zulip.com/help/import-from-slack#import-into-a-self-hosted-zulip-server</a> where it says, "skipping "Step 3: Create a Zulip organization, and log in" (you'll create your Zulip organization via the data import tool instead)." It was my understanding that creating the droplet was the installation process.</p>



<a name="1402318"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402318" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402318">(Jul 10 2022 at 00:50)</a>:</h4>
<p>Actually, yeah, ignore what I said above.  The installer is step 2.</p>



<a name="1402320"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402320" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402320">(Jul 10 2022 at 00:51)</a>:</h4>
<p>So let that run to completion, and just ignore the link it prints out (like step 3 talks about)</p>



<a name="1402332"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402332" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402332">(Jul 10 2022 at 01:31)</a>:</h4>
<p>When I run the token command, now I get the following error: "Slack data directory not found: 'slack_data.zip'" Is that a concern?</p>



<a name="1402333"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402333" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402333">(Jul 10 2022 at 01:32)</a>:</h4>
<p>And when I run the ./manage.py import '' converted_slack_data command, I get the following error: "Directory not found: '/home/zulip/deployments/2022-07-10-00-54-20/converted_slack_data'"</p>



<a name="1402334"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402334" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402334">(Jul 10 2022 at 01:36)</a>:</h4>
<p>If the first command fails, that is a concern, yes.</p>
<p>When you exported the data from Slack, you should have gotten a <code>.zip</code> file.  You need to copy that onto the server.  When you run the convert command, in addition to the <code>--token xoxb-...</code> you need to pass the path to that <code>.zip</code> file.</p>



<a name="1402335"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402335" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402335">(Jul 10 2022 at 01:37)</a>:</h4>
<p>I see that <a href="https://zulip.com/help/import-from-slack#import-into-a-self-hosted-zulip-server">https://zulip.com/help/import-from-slack#import-into-a-self-hosted-zulip-server</a> is missing the "copy the <code>slack-data.zip</code> file onto your server" step.</p>



<a name="1402339"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402339" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402339">(Jul 10 2022 at 02:18)</a>:</h4>
<p><span class="user-mention" data-user-id="12178">@Alex Vandiver</span>  The filename of my Slack export is "20220709.zip" and it's located in the /home/zulip/deployments/current folder. Can you help me with the commands?</p>



<a name="1402340"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402340" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402340">(Jul 10 2022 at 02:19)</a>:</h4>
<div class="codehilite"><pre><span></span><code>cd /home/zulip/deployments/current
./scripts/stop-server
./manage.py convert_slack_data 20220709.zip --token xoxb-... --output converted_slack_data
./manage.py import &#39;&#39; converted_slack_data
./scripts/start-server
</code></pre></div>



<a name="1402341"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402341" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402341">(Jul 10 2022 at 02:19)</a>:</h4>
<p>Replace <code>xoxb-...</code> with the full token.</p>



<a name="1402342"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402342" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402342">(Jul 10 2022 at 02:20)</a>:</h4>
<p>Thank you so much for your help. I'm sorry to be so needy. I'm very new at this. <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="1402343"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402343" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402343">(Jul 10 2022 at 02:25)</a>:</h4>
<p>Every place of confusion is an opportunity to improve our documentation or the next folks that come along. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="1402346"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402346" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402346">(Jul 10 2022 at 02:35)</a>:</h4>
<p>Yay! I finished importing my Slack data. But now I'm not sure how to finish the install so that I can set up my org. I tried the manage.py generate_realm_creation_link command, but I received the following: "manage.py: command not found"</p>



<a name="1402347"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402347" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402347">(Jul 10 2022 at 02:39)</a>:</h4>
<p>You don't need to run that command.</p>



<a name="1402348"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402348" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402348">(Jul 10 2022 at 02:39)</a>:</h4>
<p>(and it would be <code>./manage.py</code>)</p>



<a name="1402349"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402349" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402349">(Jul 10 2022 at 02:40)</a>:</h4>
<p>You should be able to go to the hostname for your server, where you'll see the login screen.  You'll need to use the "reset password" flow.</p>



<a name="1402350"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402350" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402350">(Jul 10 2022 at 02:46)</a>:</h4>
<p>To be clear, that means you'll also need to have set up <a href="https://zulip.readthedocs.io/en/latest/production/email.html">outgoing email</a></p>



<a name="1402351"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402351" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402351">(Jul 10 2022 at 02:48)</a>:</h4>
<p>That's what I'm trying to do now. I'm not finding my settings.py file. <span aria-label="looking" class="emoji emoji-1f440" role="img" title="looking">:looking:</span></p>



<a name="1402352"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1402352" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1402352">(Jul 10 2022 at 02:50)</a>:</h4>
<p>It's in <code>/etc/zulip/settings.py</code></p>



<a name="1407254"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1407254" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1407254">(Jul 20 2022 at 00:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="12178">Alex Vandiver</span> <a href="#narrow/stream/31-production-help/topic/Slack.20Import/near/1402335">said</a>:</p>
<blockquote>
<p>I see that <a href="https://zulip.com/help/import-from-slack#import-into-a-self-hosted-zulip-server">https://zulip.com/help/import-from-slack#import-into-a-self-hosted-zulip-server</a> is missing the "copy the <code>slack-data.zip</code> file onto your server" step.</p>
</blockquote>
<p>Pushed <a href="https://github.com/zulip/zulip/pull/22531">#22531</a>.</p>



<a name="1407551"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1407551" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1407551">(Jul 20 2022 at 17:01)</a>:</h4>
<p>That fix is now merged, thanks for the report <span class="user-mention" data-user-id="24406">@Tim White</span>.</p>



<a name="1407708"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Slack%20Import/near/1407708" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim White <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Slack.20Import.html#1407708">(Jul 20 2022 at 19:55)</a>:</h4>
<p>Woohoo! My pleasure, <span class="user-mention" data-user-id="7">@Tim Abbott</span>!</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>