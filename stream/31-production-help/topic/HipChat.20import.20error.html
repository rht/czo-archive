<html>
<head><meta charset="utf-8"><title>HipChat import error · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html">HipChat import error</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="708689"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/708689" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#708689">(Feb 27 2019 at 13:12)</a>:</h4>
<p>I'm trying to test an import of our HipChat data into a test-system for Zulip, but I get an error from manage.py<br>
./manage.py convert_hipchat_data hipchat.tar.gz --output converted_hipchat_data<br>
Converting Data ...<br>
2019-02-27 12:46:42.017 INFO [] input data was untarred to /home/zulip/deployments/2018-11-07-22-43-54/hipchat.gz<br>
Traceback (most recent call last):<br>
  File "./manage.py", line 46, in &lt;module&gt;<br>
    execute_from_command_line(sys.argv)<br>
  File "/home/zulip/deployments/2018-11-07-22-43-54/zulip-py3-venv/lib/python3.5/site-packages/django/core/management/__init__.py", line 364, in execute_from_command_line<br>
    utility.execute()<br>
  File "/home/zulip/deployments/2018-11-07-22-43-54/zulip-py3-venv/lib/python3.5/site-packages/django/core/management/__init__.py", line 356, in execute<br>
    self.fetch_command(subcommand).run_from_argv(self.argv)<br>
  File "/home/zulip/deployments/2018-11-07-22-43-54/zulip-py3-venv/lib/python3.5/site-packages/django/core/management/base.py", line 283, in run_from_argv<br>
    self.execute(*args, **cmd_options)<br>
  File "/home/zulip/deployments/2018-11-07-22-43-54/zulip-py3-venv/lib/python3.5/site-packages/django/core/management/base.py", line 330, in execute<br>
    output = self.handle(*args, **options)<br>
  File "/home/zulip/deployments/2018-11-07-22-43-54/zerver/management/commands/convert_hipchat_data.py", line 77, in handle<br>
    masking_content=options.get('masking_content', False),<br>
  File "/home/zulip/deployments/2018-11-07-22-43-54/zerver/data_import/hipchat.py", line 707, in do_convert_data<br>
    realm_id=realm_id,<br>
  File "/home/zulip/deployments/2018-11-07-22-43-54/zerver/data_import/hipchat.py", line 241, in convert_room_data<br>
    return list(map(process, flat_data))<br>
  File "/home/zulip/deployments/2018-11-07-22-43-54/zerver/data_import/hipchat.py", line 230, in process<br>
    members=set(in_dict['members']),<br>
TypeError: unhashable type: 'dict'</p>



<a name="708690"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/708690" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#708690">(Feb 27 2019 at 13:12)</a>:</h4>
<p>Not really proficient enough in python to interpret the error and find out the problem myself</p>



<a name="708730"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/708730" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Pilgrim (neiljp) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#708730">(Feb 27 2019 at 16:10)</a>:</h4>
<p>Just to check - what version are you using? My understanding is that this tool has improved in recent months.</p>



<a name="708741"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/708741" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#708741">(Feb 27 2019 at 16:37)</a>:</h4>
<p><span class="user-mention" data-user-id="11472">@Jonas Bygdén</span> you'll definietly want to make sure you upgrade to the latest master for importing: <a href="https://zulip.readthedocs.io/en/latest/production/maintain-secure-upgrade.html#upgrading-from-a-git-repository" target="_blank" title="https://zulip.readthedocs.io/en/latest/production/maintain-secure-upgrade.html#upgrading-from-a-git-repository">https://zulip.readthedocs.io/en/latest/production/maintain-secure-upgrade.html#upgrading-from-a-git-repository</a></p>



<a name="709422"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/709422" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#709422">(Feb 28 2019 at 08:38)</a>:</h4>
<p>Yeah, well - I'm using the docker-image for this test, I'll see if I can find a way to upgrade that to laster master...</p>



<a name="709431"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/709431" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#709431">(Feb 28 2019 at 10:04)</a>:</h4>
<p>Upgraded to 2019-01-15, but still...</p>



<a name="709432"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/709432" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#709432">(Feb 28 2019 at 10:04)</a>:</h4>
<p>./manage.py convert_hipchat_data hipchat.tar.gz --output converted_hipchat_data<br>
Converting Data ...<br>
2019-02-28 10:03:38.463 INFO [] input data was untarred to /home/zulip/deployments/2019-01-15-00-02-39/hipchat.gz<br>
Traceback (most recent call last):<br>
  File "./manage.py", line 46, in &lt;module&gt;<br>
    execute_from_command_line(sys.argv)<br>
  File "/home/zulip/deployments/2019-01-15-00-02-39/zulip-py3-venv/lib/python3.5/site-packages/django/core/management/__init__.py", line 364, in execute_from_command_line<br>
    utility.execute()<br>
  File "/home/zulip/deployments/2019-01-15-00-02-39/zulip-py3-venv/lib/python3.5/site-packages/django/core/management/__init__.py", line 356, in execute<br>
    self.fetch_command(subcommand).run_from_argv(self.argv)<br>
  File "/home/zulip/deployments/2019-01-15-00-02-39/zulip-py3-venv/lib/python3.5/site-packages/django/core/management/base.py", line 283, in run_from_argv<br>
    self.execute(*args, **cmd_options)<br>
  File "/home/zulip/deployments/2019-01-15-00-02-39/zulip-py3-venv/lib/python3.5/site-packages/django/core/management/base.py", line 330, in execute<br>
    output = self.handle(*args, **options)<br>
  File "/home/zulip/deployments/2019-01-15-00-02-39/zerver/management/commands/convert_hipchat_data.py", line 77, in handle<br>
    masking_content=options.get('masking_content', False),<br>
  File "/home/zulip/deployments/2019-01-15-00-02-39/zerver/data_import/hipchat.py", line 707, in do_convert_data<br>
    realm_id=realm_id,<br>
  File "/home/zulip/deployments/2019-01-15-00-02-39/zerver/data_import/hipchat.py", line 241, in convert_room_data<br>
    return list(map(process, flat_data))<br>
  File "/home/zulip/deployments/2019-01-15-00-02-39/zerver/data_import/hipchat.py", line 230, in process<br>
    members=set(in_dict['members']),<br>
TypeError: unhashable type: 'dict'</p>



<a name="709686"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/709686" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#709686">(Feb 28 2019 at 20:02)</a>:</h4>
<p><span class="user-mention" data-user-id="11472">@Jonas Bygdén</span> can you add a print statement on the line before that?</p>



<a name="709687"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/709687" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#709687">(Feb 28 2019 at 20:03)</a>:</h4>
<p>Also, did you obtain your export as we described from the HipChat app?</p>



<a name="709689"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/709689" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#709689">(Feb 28 2019 at 20:03)</a>:</h4>
<p>It kinda looks like the rooms are in a different format than they usually have</p>



<a name="709690"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/709690" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#709690">(Feb 28 2019 at 20:03)</a>:</h4>
<p>And the question is why</p>



<a name="709691"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/709691" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#709691">(Feb 28 2019 at 20:03)</a>:</h4>
<p>print(in_dict) on the line before that should tell us what's different about the data</p>



<a name="710039"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710039" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710039">(Mar 01 2019 at 07:42)</a>:</h4>
<p>I'll try...<br>
As I said this is within zulip-docker, and there doesn't seem to by any editor in the container...</p>



<a name="710043"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710043" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710043">(Mar 01 2019 at 07:51)</a>:</h4>
<p>The export is obtained following the instructions here: <a href="https://zulipchat.com/help/import-from-hipchat" target="_blank" title="https://zulipchat.com/help/import-from-hipchat">https://zulipchat.com/help/import-from-hipchat</a></p>



<a name="710056"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710056" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710056">(Mar 01 2019 at 08:14)</a>:</h4>
<p>So, <span class="user-mention" data-user-id="7">@Tim Abbott</span>, here it is - the names have been changed to protect the innocent...</p>
<div class="codehilite"><pre><span></span>&lt;class &#39;dict&#39;&gt; {&#39;created&#39;: &#39;2015-11-04T13:02:51+00:00&#39;, &#39;is_archived&#39;: False, &#39;owner&#39;: 215, &#39;id&#39;: 2, &#39;topic&#39;: &#39;Talk to the Infrastructure team&#39;, &#39;name&#39;: &#39;Infra&#39;, &#39;participants&#39;: [], &#39;guest_access_url&#39;: None, &#39;privacy&#39;: &#39;public&#39;, &#39;members&#39;: [{&#39;room_roles&#39;: [&#39;room_member&#39;, &#39;room_admin&#39;], &#39;version&#39;: &#39;6T8QCBMI&#39;, &#39;mention_name&#39;: &#39;username&#39;, &#39;id&#39;: 215, &#39;name&#39;: &#39;User Name&#39;}], &#39;room_admins&#39;: [215]}
</pre></div>



<a name="710057"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710057" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710057">(Mar 01 2019 at 08:15)</a>:</h4>
<p>It's a room</p>



<a name="710059"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710059" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710059">(Mar 01 2019 at 08:17)</a>:</h4>
<p>Oh, and I printed it like this:</p>
<div class="codehilite"><pre><span></span>print(in_dict.__class__,in_dict)
</pre></div>



<a name="710097"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710097" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710097">(Mar 01 2019 at 11:46)</a>:</h4>
<p>And, this is an export from Atlassian HipChat Server 2.2.9</p>



<a name="710242"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710242" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710242">(Mar 01 2019 at 17:06)</a>:</h4>
<p><span class="user-mention" data-user-id="11472">@Jonas Bygdén</span> hmm, <code>members</code> is expected to be a list of IDs, not a structure with this <code>room_roles</code> concept.</p>



<a name="710243"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710243" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710243">(Mar 01 2019 at 17:07)</a>:</h4>
<p>Probably not hard to accept that additional format; <span class="user-mention" data-user-id="58">@Steve Howell</span> do you have time to work on that?</p>



<a name="710260"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710260" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710260">(Mar 01 2019 at 17:18)</a>:</h4>
<p>Can we create an issue?  I don't really have my head in the HC stuff now, to be honest, but I can look at it in the next couple days.</p>



<a name="710289"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710289" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710289">(Mar 01 2019 at 17:38)</a>:</h4>
<p>Yeah; I'm working on posting release, so hopefully someone else can make an issue.</p>



<a name="710311"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/710311" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#710311">(Mar 01 2019 at 17:53)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> I created a quick issue:</p>
<p><a href="https://github.com/zulip/zulip/issues/11734" target="_blank" title="https://github.com/zulip/zulip/issues/11734">https://github.com/zulip/zulip/issues/11734</a></p>



<a name="712564"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/HipChat%20import%20error/near/712564" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Bygdén <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/HipChat.20import.20error.html#712564">(Mar 04 2019 at 08:24)</a>:</h4>
<p>Do you want anything more from me, or should I keep an eye on the GitHub-issue now instead?</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>