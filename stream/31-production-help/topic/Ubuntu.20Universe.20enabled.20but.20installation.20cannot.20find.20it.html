<html>
<head><meta charset="utf-8"><title>Ubuntu Universe enabled but installation cannot find it · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html">Ubuntu Universe enabled but installation cannot find it</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="683893"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/683893" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marko <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#683893">(Jan 18 2019 at 04:04)</a>:</h4>
<p>+++ dirname ./zulip-server-1.9.1/scripts/lib/install<br>
++ readlink -f ./zulip-server-1.9.1/scripts/lib/../..<br>
+ ZULIP_PATH=/tmp/tmp.ij6caA6j43/zulip-server-1.9.1<br>
+ localedef -i en_US -f UTF-8 en_US.UTF-8<br>
+ export LC_ALL=en_US.UTF-8<br>
+ LC_ALL=en_US.UTF-8<br>
+ export LANG=en_US.UTF-8<br>
+ LANG=en_US.UTF-8<br>
+ export LANGUAGE=en_US.UTF-8<br>
+ LANGUAGE=en_US.UTF-8<br>
+ apt-get install -y lsb-release sudo<br>
Reading package lists...<br>
Building dependency tree...<br>
Reading state information...<br>
lsb-release is already the newest version (9.20170808ubuntu1).<br>
sudo is already the newest version (1.8.21p2-3ubuntu1).<br>
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.<br>
++ lsb_release --short --id --release --codename<br>
+ os_info='Ubuntu<br>
18.04<br>
bionic'<br>
+ read -r os_id<br>
+ read -r os_release<br>
+ read -r os_codename<br>
+ case "$os_codename" in<br>
+ '[' Ubuntu = Ubuntu ']'<br>
+ apt-cache policy<br>
+ grep -q '^     release v=18.04,o=Ubuntu,a=bionic,n=bionic,l=Ubuntu,c=universe'<br>
+ set +x</p>
<p>You must enable the Ubuntu Universe repository before installing<br>
Zulip.  You can do this with: <code>add-apt-repository universe</code>.</p>



<a name="683894"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/683894" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marko <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#683894">(Jan 18 2019 at 04:06)</a>:</h4>
<p>i made sure to <code>sudo add-apt-repository universe</code>before executing the installation script. OS is Ubuntu 18.04, hosted on a t3.small in AWS.</p>



<a name="685409"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/685409" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#685409">(Jan 22 2019 at 20:48)</a>:</h4>
<p><span class="user-mention" data-user-id="11031">@Mark</span> can you post the output of <code>apt-cache policy</code> on the system?</p>



<a name="689088"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689088" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marko <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689088">(Jan 25 2019 at 10:44)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> here it is. </p>
<p>Package files:<br>
 100 /var/lib/dpkg/status<br>
     release a=now<br>
 500 <a href="http://security.ubuntu.com/ubuntu" target="_blank" title="http://security.ubuntu.com/ubuntu">http://security.ubuntu.com/ubuntu</a> bionic-security/main amd64 Packages<br>
     release v=18.04,o=Ubuntu,a=bionic-security,n=bionic,l=Ubuntu,c=main,b=amd64<br>
     origin <a href="http://security.ubuntu.com" target="_blank" title="http://security.ubuntu.com">security.ubuntu.com</a><br>
 500 <a href="http://us-east-1.ec2.archive.ubuntu.com/ubuntu" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com/ubuntu">http://us-east-1.ec2.archive.ubuntu.com/ubuntu</a> bionic-updates/main amd64 Packages<br>
     release v=18.04,o=Ubuntu,a=bionic-updates,n=bionic,l=Ubuntu,c=main,b=amd64<br>
     origin <a href="http://us-east-1.ec2.archive.ubuntu.com" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com">us-east-1.ec2.archive.ubuntu.com</a><br>
 500 <a href="http://us-east-1.ec2.archive.ubuntu.com/ubuntu" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com/ubuntu">http://us-east-1.ec2.archive.ubuntu.com/ubuntu</a> bionic/restricted amd64 Packages<br>
     release v=18.04,o=Ubuntu,a=bionic,n=bionic,l=Ubuntu,c=restricted,b=amd64<br>
     origin <a href="http://us-east-1.ec2.archive.ubuntu.com" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com">us-east-1.ec2.archive.ubuntu.com</a><br>
 500 <a href="http://us-east-1.ec2.archive.ubuntu.com/ubuntu" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com/ubuntu">http://us-east-1.ec2.archive.ubuntu.com/ubuntu</a> bionic/main amd64 Packages<br>
     release v=18.04,o=Ubuntu,a=bionic,n=bionic,l=Ubuntu,c=main,b=amd64<br>
     origin <a href="http://us-east-1.ec2.archive.ubuntu.com" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com">us-east-1.ec2.archive.ubuntu.com</a><br>
Pinned packages:</p>



<a name="689089"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689089" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marko <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689089">(Jan 25 2019 at 10:45)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> this is a fresh EC2 instance of Ubuntu 18.04 LTS.</p>



<a name="689267"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689267" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689267">(Jan 25 2019 at 19:34)</a>:</h4>
<p><span class="user-mention" data-user-id="11031">@Mark</span> are you sure universe is enabled?</p>



<a name="689268"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689268" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689268">(Jan 25 2019 at 19:34)</a>:</h4>
<p>Based on that list, it isn't.</p>



<a name="689269"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689269" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689269">(Jan 25 2019 at 19:34)</a>:</h4>
<p>(And 18.04 did change the default to no longer have universe enabled without manual intervention...)</p>



<a name="689419"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689419" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marko <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689419">(Jan 26 2019 at 00:46)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> yeah, but the weird thing is, <code>add-apt-repository universe</code> returns a "'universe' distribution component is already enabled for all sources."</p>



<a name="689420"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689420" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marko <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689420">(Jan 26 2019 at 00:46)</a>:</h4>
<p>root@ip-172-32-64-180:/tmp/tmp.Y2ave0C5nW# add-apt-repository universe<br>
'universe' distribution component is already enabled for all sources.<br>
root@ip-172-32-64-180:/tmp/tmp.Y2ave0C5nW# apt-cache policy<br>
Package files:<br>
 100 /var/lib/dpkg/status<br>
     release a=now<br>
 500 <a href="http://security.ubuntu.com/ubuntu" target="_blank" title="http://security.ubuntu.com/ubuntu">http://security.ubuntu.com/ubuntu</a> bionic-security/main amd64 Packages<br>
     release v=18.04,o=Ubuntu,a=bionic-security,n=bionic,l=Ubuntu,c=main,b=amd64<br>
     origin <a href="http://security.ubuntu.com" target="_blank" title="http://security.ubuntu.com">security.ubuntu.com</a><br>
 500 <a href="http://us-east-1.ec2.archive.ubuntu.com/ubuntu" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com/ubuntu">http://us-east-1.ec2.archive.ubuntu.com/ubuntu</a> bionic-updates/main amd64 Packages<br>
     release v=18.04,o=Ubuntu,a=bionic-updates,n=bionic,l=Ubuntu,c=main,b=amd64<br>
     origin <a href="http://us-east-1.ec2.archive.ubuntu.com" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com">us-east-1.ec2.archive.ubuntu.com</a><br>
 500 <a href="http://us-east-1.ec2.archive.ubuntu.com/ubuntu" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com/ubuntu">http://us-east-1.ec2.archive.ubuntu.com/ubuntu</a> bionic/restricted amd64 Packages<br>
     release v=18.04,o=Ubuntu,a=bionic,n=bionic,l=Ubuntu,c=restricted,b=amd64<br>
     origin <a href="http://us-east-1.ec2.archive.ubuntu.com" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com">us-east-1.ec2.archive.ubuntu.com</a><br>
 500 <a href="http://us-east-1.ec2.archive.ubuntu.com/ubuntu" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com/ubuntu">http://us-east-1.ec2.archive.ubuntu.com/ubuntu</a> bionic/main amd64 Packages<br>
     release v=18.04,o=Ubuntu,a=bionic,n=bionic,l=Ubuntu,c=main,b=amd64<br>
     origin <a href="http://us-east-1.ec2.archive.ubuntu.com" target="_blank" title="http://us-east-1.ec2.archive.ubuntu.com">us-east-1.ec2.archive.ubuntu.com</a><br>
Pinned packages:<br>
root@ip-172-32-64-180:/tmp/tmp.Y2ave0C5nW#</p>



<a name="689421"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689421" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689421">(Jan 26 2019 at 00:50)</a>:</h4>
<p><span class="user-mention" data-user-id="699">@Anders Kaseorg</span> do you have ideas on what could be wrong here?</p>



<a name="689422"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689422" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689422">(Jan 26 2019 at 00:50)</a>:</h4>
<p><span class="user-mention" data-user-id="11031">@Mark</span> posting <code>/etc/apt/sources.list</code> and anything in  <code>/etc/apt/sources.list</code> would be helpful.</p>



<a name="689433"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689433" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689433">(Jan 26 2019 at 02:13)</a>:</h4>
<p>You may need to <code>apt-get update</code> after <code>add-apt-repository universe</code> (in which case, perhaps we should do that earlier in the script).</p>



<a name="689662"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689662" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689662">(Jan 26 2019 at 20:23)</a>:</h4>
<p><span class="user-mention" data-user-id="699">@Anders Kaseorg</span> hmm, yeah.  I think I don't want to add an <code>apt-get update</code> earlier in the script, because that will end up costing us in CI time / runtime (by running <code>apt update</code> multiple times)</p>



<a name="689663"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689663" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689663">(Jan 26 2019 at 20:23)</a>:</h4>
<p>We should just tweak those instructions to suggest <code>apt update</code> afterwards.</p>



<a name="689664"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689664" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689664">(Jan 26 2019 at 20:23)</a>:</h4>
<p><span class="user-mention" data-user-id="11031">@Mark</span> FYI, I think you just need to run <code>sudo apt update</code> here.</p>



<a name="689668"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689668" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689668">(Jan 26 2019 at 20:29)</a>:</h4>
<p>Merged <a href="https://github.com/zulip/zulip/commit/df436a55b44f1c624bd68d48cf0df617972b690a" target="_blank" title="https://github.com/zulip/zulip/commit/df436a55b44f1c624bd68d48cf0df617972b690a">df436a55b44f1c624bd68d48cf0df617972b690a</a> to address this in our documentation.</p>



<a name="689670"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689670" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689670">(Jan 26 2019 at 20:35)</a>:</h4>
<p>(We could run it only in the case where universe wasn't found?)</p>



<a name="689682"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689682" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689682">(Jan 26 2019 at 23:45)</a>:</h4>
<p>Yeah, we could do that, but I'm not sure the extra complexity would be worth it.</p>



<a name="689694"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Ubuntu%20Universe%20enabled%20but%20installation%20cannot%20find%20it/near/689694" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marko <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Ubuntu.20Universe.20enabled.20but.20installation.20cannot.20find.20it.html#689694">(Jan 27 2019 at 00:30)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> <span class="user-mention" data-user-id="699">@Anders Kaseorg</span> yup, running <code>sudo apt update</code> does the trick. Installation went flawless after this. Thanks for taking the time to help, and for updating the documentation. Cheers!</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>