<html>
<head><meta charset="utf-8"><title>Restore from backup · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Restore.20from.20backup.html">Restore from backup</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="978280"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Restore%20from%20backup/near/978280" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tej Gill <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Restore.20from.20backup.html#978280">(Aug 08 2020 at 03:39)</a>:</h4>
<p>Hello,<br>
I am doing a restore from one machine to another. I was able to successfully do that on my test set up, but now when I try to run the restore-backup script. I am getting <code>PermissionError: [Errno 1] Operation not permitted</code>. Would you be able to tell from the error what permissions am I missing?</p>
<div class="codehilite"><pre><span></span><code>Traceback (most recent call last):
  File &quot;/home/zulip/deployments/current/scripts/setup/restore-backup&quot;, line 152, in &lt;module&gt;
    restore_backup(tarball_file)
  File &quot;/home/zulip/deployments/current/scripts/setup/restore-backup&quot;, line 63, in restore_backup
    os.setresuid(0, 0, 0)
PermissionError: [Errno 1] Operation not permitted
</code></pre></div>


<p>OS Info:</p>
<div class="codehilite"><pre><span></span><code>DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=18.04
DISTRIB_CODENAME=bionic
DISTRIB_DESCRIPTION=&quot;Ubuntu 18.04.4 LTS&quot;
NAME=&quot;Ubuntu&quot;
VERSION=&quot;18.04.4 LTS (Bionic Beaver)&quot;
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME=&quot;Ubuntu 18.04.4 LTS&quot;
VERSION_ID=&quot;18.04&quot;
HOME_URL=&quot;https://www.ubuntu.com/&quot;
SUPPORT_URL=&quot;https://help.ubuntu.com/&quot;
BUG_REPORT_URL=&quot;https://bugs.launchpad.net/ubuntu/&quot;
PRIVACY_POLICY_URL=&quot;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&quot;
VERSION_CODENAME=bionic
UBUNTU_CODENAME=bionic
</code></pre></div>


<p>Thanks</p>



<a name="978304"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Restore%20from%20backup/near/978304" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tej Gill <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Restore.20from.20backup.html#978304">(Aug 08 2020 at 04:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="13286">Tej Gill</span> <a href="#narrow/stream/31-production-help/topic/Restore.20from.20backup/near/978280">said</a>:</p>
<blockquote>
<p>Hello,<br>
I am doing a restore from one machine to another. I was able to successfully do that on my test set up, but now when I try to run the restore-backup script. I am getting <code>PermissionError: [Errno 1] Operation not permitted</code>. Would you be able to tell from the error what permissions am I missing?</p>
<div class="codehilite"><pre><span></span><code>Traceback (most recent call last):
  File &quot;/home/zulip/deployments/current/scripts/setup/restore-backup&quot;, line 152, in &lt;module&gt;
    restore_backup(tarball_file)
  File &quot;/home/zulip/deployments/current/scripts/setup/restore-backup&quot;, line 63, in restore_backup
    os.setresuid(0, 0, 0)
PermissionError: [Errno 1] Operation not permitted
</code></pre></div>


<p>OS Info:</p>
<div class="codehilite"><pre><span></span><code>DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=18.04
DISTRIB_CODENAME=bionic
DISTRIB_DESCRIPTION=&quot;Ubuntu 18.04.4 LTS&quot;
NAME=&quot;Ubuntu&quot;
VERSION=&quot;18.04.4 LTS (Bionic Beaver)&quot;
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME=&quot;Ubuntu 18.04.4 LTS&quot;
VERSION_ID=&quot;18.04&quot;
HOME_URL=&quot;https://www.ubuntu.com/&quot;
SUPPORT_URL=&quot;https://help.ubuntu.com/&quot;
BUG_REPORT_URL=&quot;https://bugs.launchpad.net/ubuntu/&quot;
PRIVACY_POLICY_URL=&quot;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&quot;
VERSION_CODENAME=bionic
UBUNTU_CODENAME=bionic
</code></pre></div>


<p>Thanks</p>
</blockquote>
<p>I figured out the issue. it might have skipped my mind to run the retore-backup script as root. Instead I was trying to run it as the zulip user. Hope this would help someone who might run into something like this.</p>



<a name="979555"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Restore%20from%20backup/near/979555" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Restore.20from.20backup.html#979555">(Aug 09 2020 at 23:58)</a>:</h4>
<p><span class="user-mention" data-user-id="699">@Anders Kaseorg</span> I imagine we should make this give a better error message when run as not root?</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>