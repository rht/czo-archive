<html>
<head><meta charset="utf-8"><title>can not build · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/can.20not.20build.html">can not build</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="602092"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/can%20not%20build/near/602092" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zyc <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/can.20not.20build.html#602092">(Jun 21 2018 at 12:34)</a>:</h4>
<p>++ git rev-parse HEAD<br>
+ GITID=e859e630729a6aaceb8c490a739c35d00b6eaa62<br>
+ git diff --exit-code<br>
++ mktemp -d<br>
+ TMPDIR=/tmp/tmp.6NWff7Cd9b<br>
+ TARBALL=/tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1.tar<br>
++ pwd<br>
+ BASEDIR=/srv/zulip<br>
+ git archive -o /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1.tar --prefix=zulip-server-1.8.1/ HEAD<br>
+ cd /tmp/tmp.6NWff7Cd9b<br>
+ tar -xf /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1.tar<br>
++ cat /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/tools/release-tarball-exclude.txt<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/.gitignore<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/.gitattributes<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/static/assets<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/corporate/<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/static/<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/tools/<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/zilencer/<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/templates/corporate<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/templates/zilencer<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/puppet/zulip_ops<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/zproject/dev_settings.py<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/zproject/test_settings.py<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/zerver/fixtures<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/zerver/tests<br>
+ for i in '<code>cat "$TMPDIR/$prefix/tools/release-tarball-exclude.txt"</code>'<br>
+ rm -r --interactive=never /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/frontend_tests<br>
+ tar -cf /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1.tar zulip-server-1.8.1<br>
+ rm -rf zulip-server-1.8.1<br>
+ tar -tf /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1.tar<br>
+ grep -q -e '^zerver/tests'<br>
+ cd /srv/zulip<br>
+ git checkout-index -f -a --prefix /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/<br>
+ cd /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1<br>
+ mkdir -p var/log<br>
+ cat<br>
+ cat<br>
+ USER_PROD_STATIC_LOGPATH=/tmp/tmp.6NWff7Cd9b/update-prod-static.log<br>
+ BUILD_PROD_STATIC_LOGPATH=/tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/var/log/update-prod-static.log<br>
+ ln -nfs /tmp/tmp.6NWff7Cd9b/zulip-server-1.8.1/var/log/update-prod-static.log /tmp/tmp.6NWff7Cd9b/update-prod-static.log<br>
+ ./tools/update-prod-static<br>
Using cached node modules from /srv/zulip-npm-cache/9635f743433da9fbc85f14e98ead66ea61b6ba1d/node_modules<br>
+ rm -rf node_modules<br>
+ ln -nsf /srv/zulip-npm-cache/9635f743433da9fbc85f14e98ead66ea61b6ba1d/node_modules node_modules<br>
Traceback (most recent call last):<br>
  File "./tools/update-prod-static", line 62, in &lt;module&gt;<br>
    stdout=fp, stderr=fp)<br>
  File "/usr/lib/python3.4/subprocess.py", line 561, in check_call<br>
    raise CalledProcessError(retcode, cmd)<br>
subprocess.CalledProcessError: Command '['./tools/minify-js']' returned non-zero exit status 1<br>
+ set +x</p>



<a name="602093"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/can%20not%20build/near/602093" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya Bansal <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/can.20not.20build.html#602093">(Jun 21 2018 at 12:42)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="7945">@zyc</span> I am not really sure what's up here but would suggest you to once try running <br>
<code>tools/provision</code> and after that try to build a release tarball again the same way you did now using the <br>
<code>tools/build-release-tarball</code></p>



<a name="602094"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/can%20not%20build/near/602094" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> zyc <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/can.20not.20build.html#602094">(Jun 21 2018 at 12:47)</a>:</h4>
<p>I tried to run it    tools/provision，However, it has not been solved yet. Is it because I added the       .handlebars file myself.</p>



<a name="602099"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/can%20not%20build/near/602099" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya Bansal <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/can.20not.20build.html#602099">(Jun 21 2018 at 13:27)</a>:</h4>
<p>ohk lets try running <code>tools/minify-js</code> separately and see what error message it throws up.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>