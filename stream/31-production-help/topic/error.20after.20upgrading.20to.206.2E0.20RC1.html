<html>
<head><meta charset="utf-8"><title>error after upgrading to 6.0 RC1 · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/error.20after.20upgrading.20to.206.2E0.20RC1.html">error after upgrading to 6.0 RC1</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1467145"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/error%20after%20upgrading%20to%206.0%20RC1/near/1467145" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> sanil <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/error.20after.20upgrading.20to.206.2E0.20RC1.html#1467145">(Nov 18 2022 at 04:53)</a>:</h4>
<p>Logger root, from module zerver.worker.queue_processors line 381:<br>
Error generated by Anonymous user (not logged in) on ip-172-31-32-33 deployment</p>
<p>Traceback (most recent call last):<br>
  File "/home/zulip/deployments/2022-11-17-16-40-14/zerver/worker/queue_processors.py", line 320, in do_consume<br>
    consume_func(events)<br>
  File "/home/zulip/deployments/2022-11-17-16-40-14/zerver/worker/queue_processors.py", line 354, in &lt;lambda&gt;<br>
    consume_func = lambda events: self.consume(events[0])<br>
  File "/home/zulip/deployments/2022-11-17-16-40-14/zerver/worker/queue_processors.py", line 793, in consume<br>
    handle_push_notification(event["user_profile_id"], event)<br>
  File "/home/zulip/deployments/2022-11-17-16-40-14/zerver/decorator.py", line 948, in wrapped_func<br>
    ret = func(*args, **kwargs)<br>
  File "/home/zulip/deployments/2022-11-17-16-40-14/zerver/lib/push_notifications.py", line 1123, in handle_push_notification<br>
    total_android_devices, total_apple_devices = send_notifications_to_bouncer(<br>
  File "/home/zulip/deployments/2022-11-17-16-40-14/zerver/lib/push_notifications.py", line 502, in send_notifications_to_bouncer<br>
    response_data = send_json_to_push_bouncer("POST", "push/notify", post_data)<br>
  File "/home/zulip/deployments/2022-11-17-16-40-14/zerver/lib/remote_server.py", line 113, in send_json_to_push_bouncer<br>
    return send_to_push_bouncer(<br>
  File "/home/zulip/deployments/2022-11-17-16-40-14/zerver/lib/remote_server.py", line 97, in send_to_push_bouncer<br>
    raise JsonableError(msg)<br>
zerver.lib.exceptions.JsonableError: Zulip server auth failure: ############### is not registered -- did you run <code>manage.py register_server</code>?</p>
<p>Deployed code:</p>
<ul>
<li>git: 6.0-rc1-0-g2ba3d004fd</li>
<li>ZULIP_VERSION: 6.0-rc1</li>
</ul>



<a name="1467146"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/error%20after%20upgrading%20to%206.0%20RC1/near/1467146" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> sanil <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/error.20after.20upgrading.20to.206.2E0.20RC1.html#1467146">(Nov 18 2022 at 04:54)</a>:</h4>
<p>everything seems to be working fine post upgrade and data import .. but i receive an email containing this error when people reset their password and login</p>



<a name="1467153"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/error%20after%20upgrading%20to%206.0%20RC1/near/1467153" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/error.20after.20upgrading.20to.206.2E0.20RC1.html#1467153">(Nov 18 2022 at 05:20)</a>:</h4>
<p>What version were you upgrading from?</p>
<p>The error is in the <a href="https://zulip.readthedocs.io/en/latest/production/mobile-push-notifications.html">mobile push notification service</a>. <br>
 Have you run <code>manage.py register_server</code> like it asks?</p>



<a name="1467158"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/error%20after%20upgrading%20to%206.0%20RC1/near/1467158" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> sanil <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/error.20after.20upgrading.20to.206.2E0.20RC1.html#1467158">(Nov 18 2022 at 06:05)</a>:</h4>
<p>I had imported data from 5.1 to 5.7 and then upgraded to 6.0 RC1.</p>
<p>i ran the register_server and issue seems to be solved. Thanks!</p>



<a name="1467425"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/error%20after%20upgrading%20to%206.0%20RC1/near/1467425" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/error.20after.20upgrading.20to.206.2E0.20RC1.html#1467425">(Nov 18 2022 at 19:47)</a>:</h4>
<p><span class="user-mention" data-user-id="25248">@sanil</span> did you use the data import tool rather than the backup tool to move the data?</p>



<a name="1467427"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/error%20after%20upgrading%20to%206.0%20RC1/near/1467427" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/error.20after.20upgrading.20to.206.2E0.20RC1.html#1467427">(Nov 18 2022 at 19:47)</a>:</h4>
<p>We recommend the backup tool for this situation, as it would have avoided this; I'm wondering if there's something we should clarify in the documentation about which of those to use.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>