<html>
<head><meta charset="utf-8"><title>[Django] chat: Stream matching query does not exist. · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20chat.3A.20Stream.20matching.20query.20does.20not.20exist.2E.html">[Django] chat: Stream matching query does not exist.</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1207644"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20chat%3A%20Stream%20matching%20query%20does%20not%20exist./near/1207644" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20chat.3A.20Stream.20matching.20query.20does.20not.20exist.2E.html#1207644">(Jun 12 2021 at 07:07)</a>:</h4>
<div class="codehilite" data-code-language="E-mail"><pre><span></span><code><span class="err">Logger django.request, from module django.utils.log line 224:</span>
<span class="err">Error generated by Viorel &lt;cosmin@uhl-services.ch&gt; (Organization owner) on chat.uhl.site deployment</span>

Traceback (most recent call last):
 File "/srv/zulip-venv-cache/32fcc960bfb7387aa422d8595f3e85936ecbc5eb/zulip-py3-venv/lib/python3.8/site-packages/django/db/models/fields/related_descriptors.py", line 173, in __get__
   rel_obj = self.field.get_cached_value(instance)
 File "/srv/zulip-venv-cache/32fcc960bfb7387aa422d8595f3e85936ecbc5eb/zulip-py3-venv/lib/python3.8/site-packages/django/db/models/fields/mixins.py", line 15, in get_cached_value
   return instance._state.fields_cache[cache_name]
KeyError: 'notifications_stream'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
 File "/srv/zulip-venv-cache/32fcc960bfb7387aa422d8595f3e85936ecbc5eb/zulip-py3-venv/lib/python3.8/site-packages/django/core/handlers/exception.py", line 47, in inner
   response = get_response(request)
 File "/srv/zulip-venv-cache/32fcc960bfb7387aa422d8595f3e85936ecbc5eb/zulip-py3-venv/lib/python3.8/site-packages/django/core/handlers/base.py", line 181, in _get_response
   response = wrapped_callback(request, *callback_args, **callback_kwargs)
 File "./zerver/views/home.py", line 122, in home
   return home_real(request)
 File "./zerver/decorator.py", line 381, in _wrapped_view
   return view_func(request, *args, **kwargs)
 File "/srv/zulip-venv-cache/32fcc960bfb7387aa422d8595f3e85936ecbc5eb/zulip-py3-venv/lib/python3.8/site-packages/django/contrib/auth/decorators.py", line 21, in _wrapped_view
   return view_func(request, *args, **kwargs)
 File "./zerver/decorator.py", line 446, in _wrapped_view_func
   return rate_limit()(view_func)(request, *args, **kwargs)
 File "./zerver/decorator.py", line 880, in wrapped_func
   return func(request, *args, **kwargs)
 File "./zerver/views/home.py", line 200, in home_real
   queue_id, page_params = build_page_params_for_home_page_load(
 File "./zerver/lib/home.py", line 181, in build_page_params_for_home_page_load
   register_ret = do_events_register(
 File "./zerver/lib/events.py", line 1146, in do_events_register
   ret = fetch_initial_state_data(
 File "./zerver/lib/events.py", line 255, in fetch_initial_state_data
   if realm.notifications_stream and not realm.notifications_stream.deactivated:
 File "/srv/zulip-venv-cache/32fcc960bfb7387aa422d8595f3e85936ecbc5eb/zulip-py3-venv/lib/python3.8/site-packages/django/db/models/fields/related_descriptors.py", line 187, in __get__
   rel_obj = self.get_object(instance)
 File "/srv/zulip-venv-cache/32fcc960bfb7387aa422d8595f3e85936ecbc5eb/zulip-py3-venv/lib/python3.8/site-packages/django/db/models/fields/related_descriptors.py", line 154, in get_object
   return qs.get(self.field.get_reverse_related_filter(instance))
 File "/srv/zulip-venv-cache/32fcc960bfb7387aa422d8595f3e85936ecbc5eb/zulip-py3-venv/lib/python3.8/site-packages/django/db/models/query.py", line 435, in get
   raise self.model.DoesNotExist(
zerver.models.Stream.DoesNotExist: Stream matching query does not exist.


Deployed code:
- git: None
- ZULIP_VERSION: 4.3


Request info:
- path: /
- GET: {}
- REMOTE_ADDR: "86.49.243.42"
- QUERY_STRING: ""
- SERVER_NAME: ""
</code></pre></div>



<a name="1208331"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20chat%3A%20Stream%20matching%20query%20does%20not%20exist./near/1208331" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20chat.3A.20Stream.20matching.20query.20does.20not.20exist.2E.html#1208331">(Jun 14 2021 at 05:40)</a>:</h4>
<p>This is likely some side effect of <a href="#narrow/stream/31-production-help/topic/Migration.20from.20Mattermost/near/1207600">https://chat.zulip.org/#narrow/stream/31-production-help/topic/Migration.20from.20Mattermost/near/1207600</a>.</p>



<a name="1208924"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20chat%3A%20Stream%20matching%20query%20does%20not%20exist./near/1208924" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20chat.3A.20Stream.20matching.20query.20does.20not.20exist.2E.html#1208924">(Jun 14 2021 at 19:29)</a>:</h4>
<p>I solved it with a server reboot. Yet very weird behaviour. It produced me over 200 mail alerts in 2 days until i said il reboot it all.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>