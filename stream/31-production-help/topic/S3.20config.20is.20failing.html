<html>
<head><meta charset="utf-8"><title>S3 config is failing · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html">S3 config is failing</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1508448"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20config%20is%20failing/near/1508448" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html#1508448">(Feb 15 2023 at 08:11)</a>:</h4>
<p>Hi all, in my fresh self-hosted, docker-based Zulip instance, S3 is not working.<br>
See: <a href="https://github.com/zulip/docker-zulip/issues/386">https://github.com/zulip/docker-zulip/issues/386</a></p>
<p>Would appreciate any help/insights on this!<br>
Thanks</p>



<a name="1508470"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20config%20is%20failing/near/1508470" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html#1508470">(Feb 15 2023 at 09:29)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="9" href="/#narrow/stream/9-issues/topic/S3.20config.20is.20failing">#issues &gt; S3 config is failing</a> by <span class="user-mention silent" data-user-id="21836">Lauryn Menard</span>.</p>



<a name="1508882"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20config%20is%20failing/near/1508882" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html#1508882">(Feb 16 2023 at 18:16)</a>:</h4>
<p>Facing this issue with a DigitalOcean 1-click instance as well.</p>
<p>See: <a href="https://github.com/zulip/zulip/issues/24397#issuecomment-1433511205">https://github.com/zulip/zulip/issues/24397#issuecomment-1433511205</a></p>



<a name="1508994"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20config%20is%20failing/near/1508994" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html#1508994">(Feb 16 2023 at 22:18)</a>:</h4>
<p><span class="user-mention" data-user-id="24325">@Shrey</span>  These issues is different - the first one  (in docker) is your secret key not being identified as configured at all. You mention there having put the secrets <code>/data/zulip-secrets.conf</code> - I'm not super familiar without our current docker set up, but why would docker-zulip pick up the secrets from that specific path in your configuration?</p>
<p>The other issue is <code>botocore.exceptions.ClientError: An error occurred (SignatureDoesNotMatch) when calling the PutObject operation: Unknown</code> - perhaps the keys configured are wrong or misspelled? Have you also set up bucket policy as described in the doc?</p>



<a name="1508996"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20config%20is%20failing/near/1508996" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html#1508996">(Feb 16 2023 at 22:25)</a>:</h4>
<p><code>SignatureDoesNotMatch</code> definitely sounds like the key is wrong.</p>



<a name="1509164"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20config%20is%20failing/near/1509164" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html#1509164">(Feb 17 2023 at 10:59)</a>:</h4>
<p>(deleted)</p>



<a name="1509165"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20config%20is%20failing/near/1509165" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shrey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html#1509165">(Feb 17 2023 at 10:59)</a>:</h4>
<p><span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> <span class="user-mention" data-user-id="12178">@Alex Vandiver</span> <br>
Yes, the 2nd issue turned out to be a faulty Access Key from DigitalOcean.</p>
<p>Regarding the whole thing though: i just decided to not go ahead with Zulip after so much hassle. <br>
Also, the DigitalOcean 1-click-droplet turned out to be very resource-heavy (consistent 100% memory usage on a 4GB/2CPU droplet, with no users except for admin).</p>



<a name="1509175"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/S3%20config%20is%20failing/near/1509175" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/S3.20config.20is.20failing.html#1509175">(Feb 17 2023 at 11:53)</a>:</h4>
<p>I'd guess that's just the necessary processes taking up the memory available (and it's not like anything else on the server needs that memory, since Zulip should be the only service running). It should handle a reasonable amount of users just fine - taking up that memory with no users does not mean adding users will require more.</p>
<p>I'll go ahead and close the github issues if that has been resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>