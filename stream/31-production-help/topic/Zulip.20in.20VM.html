<html>
<head><meta charset="utf-8"><title>Zulip in VM · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html">Zulip in VM</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="945783"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/945783" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#945783">(Jul 21 2020 at 04:28)</a>:</h4>
<p>I am new to VMs.  Honestly, I hate Ubuntu but that is what is needed for Zulip.  So I installed Ubuntu 20.4 in a virtualbox vm with the required configuration.  Host system is CentOS 7, Guest Ubuntu 20.4.  Installation of Zulip went well, everything up and running.  I can't figure out the networking required for me to access Zulip from the internet with a browser.  Both host and guest are headless servers.  I am using remotebox to manage the VM but can use the virtualbox manager from command line if that is a better way.  The host has an IP address and is accessible from the internet.  If anyone has experience here please help this VM noob.</p>



<a name="946603"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/946603" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Bannack <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#946603">(Jul 21 2020 at 17:51)</a>:</h4>
<p>You would basically set up a proxy on the hosts web server that tunnels requests to the VM. There are dozens of How-to's around, including <a href="https://zulip.readthedocs.io/en/latest/production/deployment.html#putting-the-zulip-application-behind-a-reverse-proxy">in the Zulip docs</a>.</p>



<a name="946651"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/946651" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#946651">(Jul 21 2020 at 19:01)</a>:</h4>
<p>OK, I was looking at doing it at the network adapter level; using port forwarding to forward requests from the host to the VM's port 80.  Spent most of the day looking for and reading docs at setting up the virtual nic to handle port requests.  I changed network settings so many times I lost count, trying different things.  Thanks for the tip; much appreciated.</p>



<a name="948189"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/948189" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#948189">(Jul 22 2020 at 16:27)</a>:</h4>
<p>Haven't been able to shell into the vm; roadblock for setting up zulip.</p>



<a name="949332"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/949332" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Bannack <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#949332">(Jul 23 2020 at 04:55)</a>:</h4>
<p>I tried that sort of scenario some time ago with an Ubuntu 18 VM that ran in bridge mode, thus, getting an own IP in the hosts network. It went quite well. Have you considered a <a href="https://github.com/zulip/docker-zulip">docker implementation of Zulip</a>? Although they say the project is in "alpha" state, it runs quite good.</p>



<a name="949340"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/949340" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#949340">(Jul 23 2020 at 05:16)</a>:</h4>
<p>dockers are very difficult to make any custom code changes; hard to get into the box.  I need to tie zulip to an existing member database.  I can get into the vm through rdp but I don't have any clipboard access.  I would need to type everything at the terminal; using vi,  Using the normal terminal when I ssh into a server, I can cut and paste from local machine to remote server but don't know how to do this with the VM; as I said, I am new to the VM world on remote servers.  I use virtualbox on the local machine but this remote VM on a remote server is new territory for me.  I really don't want to type for 15 minutes only to not catch an error but I may have to just do that since I am wasting too much time trying to get clipboard to work.</p>



<a name="950307"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/950307" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#950307">(Jul 23 2020 at 17:26)</a>:</h4>
<p>Sometimes I think I am an idiot LOL.  I am looking at all these remote desktop clients of which none is allowing me to paste from clipboard when I thought, dang, why not just install webmin on the VM?  So I did and it is nice having a GUI to the VM to work on files.  Are there any problems with webmin on the VM that zulip is running on; can they work together OK?</p>



<a name="950366"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/950366" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#950366">(Jul 23 2020 at 17:38)</a>:</h4>
<p><span class="user-mention" data-user-id="16302">@Jerianobe Bebe</span> I believe that should work fine.</p>



<a name="952596"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/952596" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#952596">(Jul 24 2020 at 15:02)</a>:</h4>
<p>Just put zulip in a vm.  Easy.  Accessing zulip in a vm, not so easy.</p>



<a name="952924"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/952924" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#952924">(Jul 24 2020 at 17:19)</a>:</h4>
<p><span class="user-mention" data-user-id="16302">@Jerianobe Bebe</span> can you expand on that comment?</p>



<a name="954373"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/954373" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#954373">(Jul 25 2020 at 02:51)</a>:</h4>
<p>Let me give details on the configuration.</p>
<ol>
<li>Host system is CentOS 7 with an external IP address assigned to the server.  Server is reachable by the world.</li>
<li>Client system is Ubuntu 20.4; a VM running under virtualbox.<br>
I have no idea how Zulip works; how one is to connect to Zulip.  I see some things in the documentation but unsure.  I see a mention about port 5080.  Do I need the VM using NAT, Bridge, ???? for the virtual NIC?<br>
Now, I set up webmin on the VM and had no trouble reaching Virutalmin using port forwarding with the VM set to NAT.  I have a domain; a sub domain actually, chat.domain.tld, that will connect to the host server from the world, that I included when I ran the Zulip install script.  Now I assumed that whatever is serving up Zulip on the VM is listening on port 80 but forwarding from the host port xxxx to port 80 didn't return anything.  Webmin set up the same; port xxxx forwarded to webmin's listening port works; I can do all sorts of work on the VM using webmin without any issues.  So, I am guessing that isn't the way Zulip is working.  I have read the documentation but developers that know the nuts and bolts often may think some things are obvious when to a noob they are not.  I have been thinking about renting a VPS as that would simplify things; removing the whole VM part of the equation but I really don't want to spend more money when the dedicated should be able to handle this using virtualbox.</li>
</ol>



<a name="955879"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/955879" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#955879">(Jul 26 2020 at 23:23)</a>:</h4>
<p>Certainly it's easiest to setup Zulip in a dedicated VM.  I'm not sure where you see port 5080 -- that port number only appears in the Zulip documentation as an example.</p>



<a name="957713"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/957713" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#957713">(Jul 27 2020 at 16:42)</a>:</h4>
<p>OK, ignore the 5080 mentioned in the documentation.  Recommendation for the VM; NAT or BRIDGED?  I am getting ready to wipe the server and start over completely.  If anyone can give me some pointers on running Zulip in a VM I would appreciate it.</p>



<a name="957935"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/957935" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#957935">(Jul 27 2020 at 18:26)</a>:</h4>
<p>Either option should work fine but bridged may be simpler if you have a real IP available.  Ultimately, if you can get your VM reachable from the Internet with a real domain name mapping to its public IP, that will be simplest.</p>



<a name="966046"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/966046" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#966046">(Jul 31 2020 at 04:13)</a>:</h4>
<p>everything reinstalled in the VM.  Port forwarding not working.  Is everything for zulip to work started at boot time?  Do I need to start a webserver etc?</p>



<a name="966058"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/966058" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#966058">(Jul 31 2020 at 05:50)</a>:</h4>
<p>Yes, everything starts on boot.</p>



<a name="967385"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/967385" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#967385">(Jul 31 2020 at 18:33)</a>:</h4>
<p>I have made progress; using nat network and port forwarding I have managed to access zulip on the vm.  I am forwarding port 4443 on the host to port 443 on the vm.  The issue is that zulip is not configured properly to handle this port.  Looking at the page view that is returned:</p>
<p>&lt;link type="text/css" href="<a href="https://chat.domain-name.tld/static/webpack-bundles/3b0a8c89f5d304272037.css">https://chat.domain-name.tld/static/webpack-bundles/3b0a8c89f5d304272037.css</a>" rel="stylesheet" /&gt;<br>
&lt;link type="text/css" href="<a href="https://chat.domain-name.tld/static/webpack-bundles/e1d310786ab6d1285f80.css">https://chat.domain-name.tld/static/webpack-bundles/e1d310786ab6d1285f80.css</a>" rel="stylesheet" /&gt;<br>
&lt;link type="text/css" href="<a href="https://chat.domain-name.tld/static/webpack-bundles/17a07d89c2c9dad61d39.css">https://chat.domain-name.tld/static/webpack-bundles/17a07d89c2c9dad61d39.css</a>" rel="stylesheet" /&gt;<br>
&lt;link type="text/css" href="<a href="https://chat.domain-name.tld/static/webpack-bundles/3fe2bb42b30ffad74a02.css">https://chat.domain-name.tld/static/webpack-bundles/3fe2bb42b30ffad74a02.css</a>" rel="stylesheet" /&gt;<br>
        &lt;script type="text/javascript" src="<a href="https://chat.domain-name.tld/static/webpack-bundles/c868d175161bf448fcb4.js">https://chat.domain-name.tld/static/webpack-bundles/c868d175161bf448fcb4.js</a>" defer&gt;&lt;/script&gt;<br>
&lt;script type="text/javascript" src="<a href="https://chat.domain-name.tld/static/webpack-bundles/162b7e577595eac038bf.js">https://chat.domain-name.tld/static/webpack-bundles/162b7e577595eac038bf.js</a>" defer&gt;&lt;/script&gt;<br>
&lt;script type="text/javascript" src="<a href="https://chat.domain-name.tld/static/webpack-bundles/e403d7d3560b85568c2e.js">https://chat.domain-name.tld/static/webpack-bundles/e403d7d3560b85568c2e.js</a>" defer&gt;&lt;/script&gt;<br>
&lt;script type="text/javascript" src="<a href="https://chat.domain-name.tld/static/webpack-bundles/1a3dfa6a26459fb7e76d.js">https://chat.domain-name.tld/static/webpack-bundles/1a3dfa6a26459fb7e76d.js</a>" defer&gt;&lt;/script&gt;<br>
&lt;script type="text/javascript" src="<a href="https://chat.domain-name.tld/static/webpack-bundles/c6a3e540ec997caf7d48.js">https://chat.domain-name.tld/static/webpack-bundles/c6a3e540ec997caf7d48.js</a>" defer&gt;&lt;/script&gt;<br>
&lt;script type="text/javascript" src="<a href="https://chat.domain-name.tld/static/webpack-bundles/signup.404e6eb5a3bfcfab774e.js">https://chat.domain-name.tld/static/webpack-bundles/signup.404e6eb5a3bfcfab774e.js</a>" defer&gt;&lt;/script&gt;</p>
<p>The required port is missing from the url so none of the css or javascript is loaded from the vm.  When I installed it, I put --hostname=chat.domain-name.tld only.  I am guessing that I should have included the port as well?</p>



<a name="967395"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/967395" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#967395">(Jul 31 2020 at 18:40)</a>:</h4>
<p>You can edit the <code>EXTERNAL_HOST</code> setting in <a href="https://zulip.readthedocs.io/en/latest/production/settings.html"><code>/etc/zulip/settings.py</code></a>.</p>



<a name="967980"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Zulip%20in%20VM/near/967980" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jerianobe Bebe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Zulip.20in.20VM.html#967980">(Aug 01 2020 at 03:34)</a>:</h4>
<p>It is working.  Thank you for your help; it was much appreciated.  Now I need to see if I can get an existing member database to work; or will members have to just register again to use chat?</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>