<html>
<head><meta charset="utf-8"><title>missing postgress db · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html">missing postgress db</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1384090"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384090" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384090">(May 24 2022 at 18:24)</a>:</h4>
<p>I'm doing a fresh install of Zulip 5.2 on Debian 11</p>



<a name="1384091"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384091" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384091">(May 24 2022 at 18:25)</a>:</h4>
<p>getting hit with this error:<br>
psql: error: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  database "zulip" does not exist</p>



<a name="1384092"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384092" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384092">(May 24 2022 at 18:26)</a>:</h4>
<p>I tried running manually the /home/zulip/deployments/current/scripts/setup/create-database script but it fails with the same error</p>



<a name="1384093"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384093" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384093">(May 24 2022 at 18:28)</a>:</h4>
<p>Interesting that the script writer sort of prepared for this by adding this comment:</p>
<h1>This psql command may fail because the Zulip database doesn’t exist,</h1>
<h1>hence the &amp;&amp;.</h1>



<a name="1384147"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384147" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384147">(May 24 2022 at 20:02)</a>:</h4>
<p><span class="user-mention" data-user-id="23468">@George</span>: Can you show the full log from the install?  It should be available in <code>/var/log/zulip/install.log</code> if you don't have it in a terminal.</p>
<p>(Tip: If you're pasting in things from logfiles, use three backticks (like <code> ``` </code>) on a line above them.  See <a href="https://zulip.com/help/format-your-message-using-markdown#code">https://zulip.com/help/format-your-message-using-markdown#code</a> )</p>



<a name="1384344"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384344" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384344">(May 24 2022 at 23:05)</a>:</h4>
<p>thanks Alex, but I fixed it by removing everything and reinstalling. I know the install script says it's idempotent but I don't think it's 100%</p>



<a name="1384345"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384345" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384345">(May 24 2022 at 23:05)</a>:</h4>
<p>I did initially try to install but it failed and when I tried again it was stuck on that postgres error</p>



<a name="1384346"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384346" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384346">(May 24 2022 at 23:05)</a>:</h4>
<p>no harm done, all good now</p>



<a name="1384348"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/missing%20postgress%20db/near/1384348" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/missing.20postgress.20db.html#1384348">(May 24 2022 at 23:06)</a>:</h4>
<p>If it's not idempotent, we'd appreciate the logs regardless, so we can help make it correctly so. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>