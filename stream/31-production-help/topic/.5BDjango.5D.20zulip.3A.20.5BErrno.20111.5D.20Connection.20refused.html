<html>
<head><meta charset="utf-8"><title>[Django] zulip: [Errno 111] Connection refused · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html">[Django] zulip: [Errno 111] Connection refused</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="547557"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547557" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547557">(Mar 23 2018 at 15:51)</a>:</h4>
<p>Getting a few of these a day for the last few weeks - should I be concerned?</p>
<p>Error generated by Anonymous user (not logged in) on zulip deployment</p>
<p>Traceback (most recent call last):</p>
<p>File "/home/zulip/deployments/2017-09-17-17-01-30/zerver/worker/queue_processors.py", line 108, in consume_wrapper</p>
<p>self.consume(data)</p>
<p>File "/home/zulip/deployments/2017-09-17-17-01-30/zerver/worker/queue_processors.py", line 240, in consume</p>
<p>send_email_from_dict(data)</p>
<p>File "/home/zulip/deployments/2017-09-17-17-01-30/zerver/lib/send_email.py", line 47, in send_email_from_dict</p>
<p>send_email(**dict(email_dict))</p>
<p>File "/home/zulip/deployments/2017-09-17-17-01-30/zerver/lib/send_email.py", line 37, in send_email</p>
<p>return mail.send() &gt; 0</p>
<p>File "/home/zulip/deployments/2017-09-17-17-01-30/zulip-venv/lib/python2.7/site-packages/django/core/mail/message.py", line 342, in send</p>
<p>return self.get_connection(fail_silently).send_messages([self])</p>
<p>File "/home/zulip/deployments/2017-09-17-17-01-30/zulip-venv/lib/python2.7/site-packages/django/core/mail/backends/smtp.py", line 100, in send_messages</p>
<p>new_conn_created = self.open()</p>
<p>File "/home/zulip/deployments/2017-09-17-17-01-30/zulip-venv/lib/python2.7/site-packages/django/core/mail/backends/smtp.py", line 58, in open</p>
<p>self.connection = connection_class(self.host, self.port, **connection_params)</p>
<p>File "/usr/lib/python2.7/smtplib.py", line 256, in __init__</p>
<p>(code, msg) = self.connect(host, port)</p>
<p>File "/usr/lib/python2.7/smtplib.py", line 316, in connect</p>
<p>self.sock = self._get_socket(host, port, self.timeout)</p>
<p>File "/usr/lib/python2.7/smtplib.py", line 291, in _get_socket</p>
<p>return socket.create_connection((host, port), timeout)</p>
<p>File "/usr/lib/python2.7/socket.py", line 571, in create_connection</p>
<p>raise err</p>
<p>error: [Errno 111] Connection refused</p>



<a name="547585"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547585" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547585">(Mar 23 2018 at 16:44)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> that looks like a networking error for the Zulip server trying to send outgoing email.</p>



<a name="547597"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547597" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547597">(Mar 23 2018 at 16:50)</a>:</h4>
<p>Which is a bit ironic since I get this via email :-)    Is there an indication what kind of email it's trying to send? Things like missed notification emails seem to be working fine for everyone.</p>



<a name="547606"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547606" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547606">(Mar 23 2018 at 16:55)</a>:</h4>
<p>Yeah, it could be a transient issue.  I think in 1.8 we will have some changes that make failures here get auto-retried; but it's most likely a missed-message email just by outgoing email volume (if you tell me what version you have, one can check the code).</p>



<a name="547627"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547627" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547627">(Mar 23 2018 at 17:14)</a>:</h4>
<p>Zulip server is 1.6, or do you mean what mail version?</p>



<a name="547646"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547646" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547646">(Mar 23 2018 at 17:32)</a>:</h4>
<p>No, Zulip server version.  OK, given that version, it's definitely a missed-message email.</p>



<a name="547648"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547648" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547648">(Mar 23 2018 at 17:32)</a>:</h4>
<p>I think the problem should disappear with the automatic retries when you upgrade to 1.8.</p>



<a name="547649"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547649" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547649">(Mar 23 2018 at 17:32)</a>:</h4>
<p>(Coming out Soon)</p>



<a name="547673"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%5BDjango%5D%20zulip%3A%20%5BErrno%20111%5D%20Connection%20refused/near/547673" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.5BDjango.5D.20zulip.3A.20.5BErrno.20111.5D.20Connection.20refused.html#547673">(Mar 23 2018 at 18:01)</a>:</h4>
<p>Ok will wait for that. No one is complaining about missing functionality. Thanks.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>