<html>
<head><meta charset="utf-8"><title>Cannot create realm link · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html">Cannot create realm link</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="364869"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/364869" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#364869">(Dec 05 2017 at 11:59)</a>:</h4>
<p>Could you help me please? I installed zulip on a fresh VM (Ubuntu 16.04) and everything works fine but I cant create a realm link</p>
<p>Command:<br>
su zulip /home/zulip/deployments/current/manage.py generate_realm_creation_link</p>
<p>Error message:<br>
No protocol specified<br>
import: unable to open X server <code>:0' @ error/import.c/ImportImageCommand/364.
No protocol specified
import: unable to open X server</code>:0' @ error/import.c/ImportImageCommand/364.<br>
/home/zulip/deployments/current/manage.py: line 5: syntax error near unexpected token <code>('
/home/zulip/deployments/current/manage.py: line 5:</code>BASE_DIR = os.path.dirname(os.path.abspath(__file__))'</p>



<a name="366195"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/366195" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Linas etc. <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#366195">(Dec 05 2017 at 20:54)</a>:</h4>
<blockquote>
<p>Could you help me please? I installed zulip on a fresh VM (Ubuntu 16.04) and everything works fine but I cant create a realm link</p>
<p>Command:<br>
su zulip /home/zulip/deployments/current/manage.py generate_realm_creation_link</p>
<p>Error message:<br>
No protocol specified<br>
import: unable to open X server <code>:0' @ error/import.c/ImportImageCommand/364.
No protocol specified
import: unable to open X server</code>:0' @ error/import.c/ImportImageCommand/364.<br>
/home/zulip/deployments/current/manage.py: line 5: syntax error near unexpected token <code>('
/home/zulip/deployments/current/manage.py: line 5:</code>BASE_DIR = os.path.dirname(os.path.abspath(__file__))'</p>
</blockquote>
<p>test</p>



<a name="366196"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/366196" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Linas etc. <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#366196">(Dec 05 2017 at 20:54)</a>:</h4>
<blockquote>
<blockquote>
<p>Could you help me please? I installed zulip on a fresh VM (Ubuntu 16.04) and everything works fine but I cant create a realm link</p>
<p>Command:<br>
su zulip /home/zulip/deployments/current/manage.py generate_realm_creation_link</p>
<p>Error message:<br>
No protocol specified<br>
import: unable to open X server <code>:0' @ error/import.c/ImportImageCommand/364.
No protocol specified
import: unable to open X server</code>:0' @ error/import.c/ImportImageCommand/364.<br>
/home/zulip/deployments/current/manage.py: line 5: syntax error near unexpected token <code>('
/home/zulip/deployments/current/manage.py: line 5:</code>BASE_DIR = os.path.dirname(os.path.abspath(__file__))'</p>
</blockquote>
<p>test</p>
</blockquote>
<p>test</p>



<a name="366513"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/366513" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#366513">(Dec 06 2017 at 01:15)</a>:</h4>
<p>What do you mean by that?</p>



<a name="366774"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/366774" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#366774">(Dec 06 2017 at 08:32)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> Never mind, I think he's just testing out Zulip <span class="emoji emoji-1f61b" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="366775"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/366775" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#366775">(Dec 06 2017 at 08:32)</a>:</h4>
<p>Although he should be doing that in <a class="stream" data-stream-id="7" href="/#narrow/stream/test%20here">#test here</a></p>



<a name="367315"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367315" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367315">(Dec 06 2017 at 13:12)</a>:</h4>
<p>Ah ok, thank you :-) Am I doing something wrong? Didn't get any support for 3 days</p>



<a name="367362"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367362" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rohitt Vashishtha <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367362">(Dec 06 2017 at 13:20)</a>:</h4>
<p>Hey! It looks like no one s far has been able to figure this issue out and that is why it might be taking time.</p>



<a name="367364"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367364" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rohitt Vashishtha <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367364">(Dec 06 2017 at 13:20)</a>:</h4>
<p>I'm not entirely sure here, but the manage.py script needs to be run with python.</p>



<a name="367367"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367367" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rohitt Vashishtha <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367367">(Dec 06 2017 at 13:21)</a>:</h4>
<p>Can you try <code>python /home/zulip/deployments/current/manage.py generate_realm_creation_link</code> once <span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> ?</p>



<a name="367623"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367623" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367623">(Dec 06 2017 at 14:59)</a>:</h4>
<p>Unfortunatelly, it didn't work</p>
<p>Command:<br>
su zulip python  /home/zulip/deployments/current/manage.py generate_realm_creation_link</p>
<p>Error:<br>
/usr/bin/python: /usr/bin/python: cannot execute binary file</p>



<a name="367632"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367632" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367632">(Dec 06 2017 at 15:05)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> Can you do <code>which python</code> and <code>ls -l /usr/bin/python</code>?</p>



<a name="367637"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367637" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367637">(Dec 06 2017 at 15:06)</a>:</h4>
<p>Command:<br>
zulip@ubuntu:/home/dieter/zulip-server-1.7.1$ which python</p>
<p>Output:<br>
/usr/bin/python</p>
<p>Command:<br>
zulip@ubuntu:/home/dieter/zulip-server-1.7.1$ ls -l /usr/bin/python</p>
<p>Output:<br>
lrwxrwxrwx 1 root root 9 Dec  9  2015 /usr/bin/python -&gt; python2.7</p>



<a name="367638"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367638" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367638">(Dec 06 2017 at 15:07)</a>:</h4>
<p>Should i update python to 3.6?</p>



<a name="367639"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367639" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367639">(Dec 06 2017 at 15:07)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> If you are running a recent version of Zulip, we are now using python3.</p>



<a name="367640"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367640" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367640">(Dec 06 2017 at 15:07)</a>:</h4>
<p>Ah ok, I will try it out ASAP</p>



<a name="367641"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367641" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367641">(Dec 06 2017 at 15:08)</a>:</h4>
<p>Yeah, I'm kind of surprised that didn't happen automatically when you either installed or upgraded.</p>



<a name="367644"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367644" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367644">(Dec 06 2017 at 15:08)</a>:</h4>
<p>Can you describe your install history?  (i.e. How long have you been running Zulip, have you ever upgraded, etc.?)</p>



<a name="367651"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367651" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367651">(Dec 06 2017 at 15:14)</a>:</h4>
<p>I dit it after that tutorial:<a href="https://www.vultr.com/docs/how-to-install-zulip-on-ubuntu-16-04" target="_blank" title="https://www.vultr.com/docs/how-to-install-zulip-on-ubuntu-16-04">https://www.vultr.com/docs/how-to-install-zulip-on-ubuntu-16-04</a></p>



<a name="367672"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367672" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367672">(Dec 06 2017 at 15:20)</a>:</h4>
<p>Ah...we don't endorse that tutorial.  Here are our instructions:</p>
<p><a href="https://zulip.readthedocs.io/en/latest/production/install.html" target="_blank" title="https://zulip.readthedocs.io/en/latest/production/install.html">https://zulip.readthedocs.io/en/latest/production/install.html</a></p>



<a name="367695"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367695" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367695">(Dec 06 2017 at 15:27)</a>:</h4>
<p>It doesnt work with python 3 too</p>
<p>Command<br>
su zulip python3.5 /home/zulip/deployments/current/manage.py generate_realm_creation_link</p>
<p>Error<br>
/usr/bin/python3.5: /usr/bin/python3.5: cannot execute binary file</p>



<a name="367702"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367702" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367702">(Dec 06 2017 at 15:29)</a>:</h4>
<p>Can you follow the instructions in our official documentation?</p>



<a name="367703"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367703" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sampriti Panda <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367703">(Dec 06 2017 at 15:29)</a>:</h4>
<p>I think the ones in that article might be out-dated</p>



<a name="367708"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367708" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367708">(Dec 06 2017 at 15:31)</a>:</h4>
<p>Ok. It will take some time, have to redo the VM</p>



<a name="367714"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367714" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367714">(Dec 06 2017 at 15:34)</a>:</h4>
<p>It's unfortunate that third party sites basically copy our install instructions without keeping them up to date or supporting them.</p>



<a name="367905"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/367905" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#367905">(Dec 06 2017 at 16:16)</a>:</h4>
<p>In your tutorial, you're missing the installation of curl</p>



<a name="368216"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368216" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368216">(Dec 06 2017 at 17:49)</a>:</h4>
<p>I followed your tutorial but it didnt help. Still got the same error</p>



<a name="368227"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368227" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368227">(Dec 06 2017 at 17:56)</a>:</h4>
<p>But I found a workaround:<br>
passwd zulip<br>
su zulip <br>
cd /home/zulip/deployments/current/<br>
python3 manage.py generate_realm_creation_link</p>



<a name="368228"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368228" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368228">(Dec 06 2017 at 17:56)</a>:</h4>
<p>I did that after initializing the database, before restarting the servers</p>



<a name="368567"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368567" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368567">(Dec 06 2017 at 20:00)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> I think the issue is that the command "su zulip some-program" doesn't make sense -- that's not how the <code>su</code> command line works</p>



<a name="368570"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368570" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368570">(Dec 06 2017 at 20:01)</a>:</h4>
<p>What we have in our instructions is</p>
<div class="codehilite"><pre><span></span>su zulip
/home/zulip/deployments/current/manage.py generate_realm_creation_link
</pre></div>


<p>which is two commands</p>



<a name="368585"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368585" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368585">(Dec 06 2017 at 20:05)</a>:</h4>
<p>Your original errors look like the result of something trying to have a shell interpret that Python script. Reading the <code>su</code> man page, that turns out to be exactly what it does with a command like that.</p>



<a name="368589"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368589" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368589">(Dec 06 2017 at 20:08)</a>:</h4>
<p>(Similarly, with a command like <code>su zulip python3.5 ...</code>, it ends up running something like <code>bash python3.5 ...</code>... which results in <code>bash</code> trying to interpret <code>/usr/bin/python3.5</code> as a shell script, which naturally doesn't work.)</p>



<a name="368600"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368600" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368600">(Dec 06 2017 at 20:14)</a>:</h4>
<p><span class="user-mention" data-user-email="showell@zulipchat.com" data-user-id="58">@Steve Howell</span> FYI we don't touch <code>/usr/bin/python</code> in our install process; we just install Python 3 through the system package manager, which results in a <code>/usr/bin/python3</code> but leaves plain <code>python</code> pointing to Python 2.7. Whether and when to someday make <code>/usr/bin/python</code> refer to Python 3 is a question we leave to the distro.</p>
<p>Instead, we use virtualenvs to control what Python interpreter all our app code runs in, and we make that <code>/usr/bin/python3</code>.</p>



<a name="368603"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/368603" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#368603">(Dec 06 2017 at 20:15)</a>:</h4>
<p>So that output for <code>ls -l /usr/bin/python</code> is normal.</p>



<a name="369051"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369051" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369051">(Dec 07 2017 at 01:23)</a>:</h4>
<p>Now creating realms works, but if i try to connect to zulip from outside the VM, I get a 400 Bad Request Error on the client</p>



<a name="369058"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369058" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369058">(Dec 07 2017 at 01:28)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> Hmm. Do I understand right -- you get that when you connect from outside the VM, but it works when connecting from inside the VM?</p>



<a name="369073"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369073" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369073">(Dec 07 2017 at 01:38)</a>:</h4>
<p>I suspect that what's happening is that you're accessing the site by a name in your browser that isn't in your ALLOWED_HOSTS setting. This is a Django security measure that's described in our default <code>/etc/zulip/settings.py</code> file.</p>



<a name="369076"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369076" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369076">(Dec 07 2017 at 01:40)</a>:</h4>
<p>If you have just one hostname you use for your Zulip server, then you should be able to just set <code>EXTERNAL_HOST</code> to that name, always use that name in the URL, and everything will work -- Zulip takes care of setting <code>ALLOWED_HOSTS</code> to include the value of <code>EXTERNAL_HOST</code>.</p>
<p>If you have some aliases for it, then you can put those in <code>ALLOWED_HOSTS</code>.</p>



<a name="369102"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369102" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369102">(Dec 07 2017 at 02:13)</a>:</h4>
<p>You understood right. I have a ddns. Where do I have to enter the ddns name?</p>



<a name="369178"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369178" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369178">(Dec 07 2017 at 02:56)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> Put it in <code>EXTERNAL_HOST</code>, in your <code>/etc/zulip/settings.py</code></p>



<a name="369180"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369180" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369180">(Dec 07 2017 at 02:56)</a>:</h4>
<p>(Then restart the Zulip server, to pick up the new setting: <code>/home/zulip/deployments/current/scripts/restart-zulip</code>)</p>



<a name="369186"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369186" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369186">(Dec 07 2017 at 02:58)</a>:</h4>
<p>Oh I see, this is a place where that page on "<a href="http://vultr.com" target="_blank" title="http://vultr.com">vultr.com</a>" got things completely wrong :-/ -- it tells you to put <code>localhost</code> there</p>



<a name="369188"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369188" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369188">(Dec 07 2017 at 02:58)</a>:</h4>
<p>That will never work unless you only ever use Zulip by the name of <code>localhost</code> <span class="emoji emoji-1f61b" title="stuck out tongue">:stuck_out_tongue:</span></p>



<a name="369191"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369191" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369191">(Dec 07 2017 at 03:00)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> I'd definitely urge you to read through the actual Zulip install instructions, at <a href="https://zulip.readthedocs.io/en/latest/production/install.html" target="_blank" title="https://zulip.readthedocs.io/en/latest/production/install.html">https://zulip.readthedocs.io/en/latest/production/install.html</a> -- it prominently mentions this setting, and there may be more pitfalls yet in that <code>vultr.com</code> page</p>



<a name="369228"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369228" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369228">(Dec 07 2017 at 03:24)</a>:</h4>
<p>It works :-D I was just confused by allowed hosts and external hosts. I thought you could block external IPs with that setting</p>



<a name="369250"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369250" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369250">(Dec 07 2017 at 03:36)</a>:</h4>
<p>Unfortunatelly, the Android App doesnt work. It says Network request failed. It doesnt work with WLAN neither</p>



<a name="369254"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369254" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369254">(Dec 07 2017 at 03:37)</a>:</h4>
<p>It works on the mobile only over browser</p>



<a name="369258"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369258" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369258">(Dec 07 2017 at 03:38)</a>:</h4>
<p>Could it be that the Zulip App needs another port than 443? I just forwarded this one</p>



<a name="369296"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369296" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369296">(Dec 07 2017 at 03:45)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> Hmm, interesting! I don't think it should need any other port, so let's debug this.</p>
<p>Can you post a screenshot of the error message you're seeing?</p>



<a name="369297"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369297" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369297">(Dec 07 2017 at 03:46)</a>:</h4>
<p>That may be a little annoying, unfortunately -- we have a nice upload-image feature in the mobile app once that's working <span class="emoji emoji-1f603" title="smiley">:smiley:</span> , but I don't think the web app can upload from the phone's images. But if you can get the screenshot here, it'll help a lot in debugging.</p>



<a name="369299"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369299" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369299">(Dec 07 2017 at 03:47)</a>:</h4>
<p>I am not an expert on the mobile app, btw -- pinging <span class="user-mention" data-user-email="borisyankov@gmail.com" data-user-id="284">@Boris Yankov</span> who is (but he's probably asleep right now, and will see this in a few hours).</p>



<a name="369300"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369300" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369300">(Dec 07 2017 at 03:47)</a>:</h4>
<p>Well, the problem is, you won't be amused by the amount of information in the screenshot :-D</p>



<a name="369301"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369301" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369301">(Dec 07 2017 at 03:48)</a>:</h4>
<p>Oh, here's one idea: are you using something like a self-signed cert, or a real certificate issued by a CA that your phone will trust?</p>



<a name="369304"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369304" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369304">(Dec 07 2017 at 03:49)</a>:</h4>
<p>It's in the welcome screen, where you put in your server URL. After typing in that url (autocompletion, no typos) i get the error "Network request failed</p>



<a name="369306"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369306" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369306">(Dec 07 2017 at 03:49)</a>:</h4>
<p>I just <a href="https://chat.zulip.org/#narrow/search/.22network.20request.20failed.22" target="_blank" title="https://chat.zulip.org/#narrow/search/.22network.20request.20failed.22">searched</a> in this Zulip realm for your error message, and that's one thing that can cause this</p>



<a name="369307"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369307" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369307">(Dec 07 2017 at 03:49)</a>:</h4>
<p>Im using a self-signed cert</p>



<a name="369308"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369308" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369308">(Dec 07 2017 at 03:49)</a>:</h4>
<p>Cool, that description is helpful</p>



<a name="369309"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369309" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369309">(Dec 07 2017 at 03:49)</a>:</h4>
<p>OK, that's the issue then</p>



<a name="369310"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369310" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369310">(Dec 07 2017 at 03:49)</a>:</h4>
<p>We definitely need to make that give a better error message</p>



<a name="369311"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369311" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369311">(Dec 07 2017 at 03:50)</a>:</h4>
<p>How can I fix this? <br>
Im more into coding than networking :-D</p>



<a name="369312"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369312" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369312">(Dec 07 2017 at 03:50)</a>:</h4>
<p>Yeah, me too :)</p>



<a name="369313"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369313" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369313">(Dec 07 2017 at 03:50)</a>:</h4>
<p><a href="https://zulip.readthedocs.io/en/latest/production/ssl-certificates.html" target="_blank" title="https://zulip.readthedocs.io/en/latest/production/ssl-certificates.html">https://zulip.readthedocs.io/en/latest/production/ssl-certificates.html</a><br>
is our docs on an easy way to do this</p>



<a name="369314"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369314" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369314">(Dec 07 2017 at 03:50)</a>:</h4>
<p>I'm already using the certbot</p>



<a name="369315"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369315" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369315">(Dec 07 2017 at 03:51)</a>:</h4>
<p>Hmm -- that should give you not a self-signed cert, then</p>



<a name="369316"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369316" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369316">(Dec 07 2017 at 03:52)</a>:</h4>
<p>Oh, I just realized I linked you to documentation from master, which includes an installer option that isn't in a release yet -- <a href="http://zulip.readthedocs.io/en/1.7.1/ssl-certificates.html" target="_blank" title="http://zulip.readthedocs.io/en/1.7.1/ssl-certificates.html">http://zulip.readthedocs.io/en/1.7.1/ssl-certificates.html</a> is the version of that page for the latest release</p>



<a name="369318"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369318" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369318">(Dec 07 2017 at 03:52)</a>:</h4>
<p>What does <code>ls -l /etc/ssl/private/zulip.key /etc/ssl/certs/zulip.combined-chain.crt</code> say?</p>



<a name="369324"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369324" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369324">(Dec 07 2017 at 03:55)</a>:</h4>
<p>-rw-r--r-- 1 root root 1793 Dec  6 08:08 /etc/ssl/certs/zulip.combined-chain.crt<br>
-rw-r--r-- 1 root root 3243 Dec  6 08:07 /etc/ssl/private/zulip.key</p>



<a name="369325"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369325" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369325">(Dec 07 2017 at 03:58)</a>:</h4>
<p>OK, so to use Certbot, those should end up being symlinks to the certs managed by Certbot</p>



<a name="369328"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369328" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369328">(Dec 07 2017 at 03:59)</a>:</h4>
<p>Try following the Certbot instructions on the page <a href="http://zulip.readthedocs.io/en/1.7.1/ssl-certificates.html" target="_blank" title="http://zulip.readthedocs.io/en/1.7.1/ssl-certificates.html">http://zulip.readthedocs.io/en/1.7.1/ssl-certificates.html</a></p>



<a name="369329"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369329" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369329">(Dec 07 2017 at 03:59)</a>:</h4>
<p>Maybe the problem is at that point when I configured certbot<br>
When executing the command:<br>
sudo certbot --nginx<br>
It asks me for a domain name</p>



<a name="369332"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369332" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369332">(Dec 07 2017 at 04:00)</a>:</h4>
<p>And i typed in my ddns name. Is that correct?</p>



<a name="369333"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369333" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369333">(Dec 07 2017 at 04:02)</a>:</h4>
<p>dieter@ubuntu:~$ sudo certbot --nginx<br>
Saving debug log to /var/log/letsencrypt/letsencrypt.log<br>
Plugins selected: Authenticator nginx, Installer nginx<br>
No names were found in your configuration files. Please enter in your domain<br>
name(s) (comma and/or space separated)  (Enter 'c' to cancel): <a href="http://xxx.ddns.net" target="_blank" title="http://xxx.ddns.net">xxx.ddns.net</a><br>
Obtaining a new certificate<br>
Performing the following challenges:<br>
tls-sni-01 challenge for <a href="http://xxx.ddns.net" target="_blank" title="http://xxx.ddns.net">xxx.ddns.net</a><br>
Cleaning up challenges<br>
Cannot find a VirtualHost matching domain <a href="http://xxx.ddns.net" target="_blank" title="http://xxx.ddns.net">xxx.ddns.net</a>. In order for Certbot to correctly perform the challenge please add a corresponding server_name directive to your nginx configuration: <a href="https://nginx.org/en/docs/http/server_names.html" target="_blank" title="https://nginx.org/en/docs/http/server_names.html">https://nginx.org/en/docs/http/server_names.html</a></p>



<a name="369334"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369334" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369334">(Dec 07 2017 at 04:02)</a>:</h4>
<p>You'll want to give it the same name you use to connect to the server as a user (in the mobile app, and in the browser)</p>



<a name="369335"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369335" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369335">(Dec 07 2017 at 04:03)</a>:</h4>
<p>So it was right<br>
But there is still an error (above message)</p>



<a name="369336"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369336" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369336">(Dec 07 2017 at 04:03)</a>:</h4>
<p>Yeah, so that's a certbot error message at the end of that output</p>
<p>You can follow its instructions if you want to use <code>certbot --nginx</code></p>



<a name="369338"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369338" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369338">(Dec 07 2017 at 04:03)</a>:</h4>
<p>Or our instructions suggest <code>certbot certonly --standalone</code></p>



<a name="369339"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369339" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369339">(Dec 07 2017 at 04:04)</a>:</h4>
<p>Oh sorry, I didn't read that...</p>



<a name="369340"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369340" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369340">(Dec 07 2017 at 04:04)</a>:</h4>
<p>:)</p>



<a name="369345"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369345" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369345">(Dec 07 2017 at 04:06)</a>:</h4>
<p>Now I get another error message: <br>
sudo certbot certonly --standalone<br>
Saving debug log to /var/log/letsencrypt/letsencrypt.log<br>
Plugins selected: Authenticator standalone, Installer None<br>
Please enter in your domain name(s) (comma and/or space separated)  (Enter 'c'<br>
to cancel): <a href="http://xxx.ddns.net" target="_blank" title="http://xxx.ddns.net">xxx.ddns.net</a><br>
Obtaining a new certificate<br>
Performing the following challenges:<br>
tls-sni-01 challenge for <a href="http://xxx.ddns.net" target="_blank" title="http://xxx.ddns.net">xxx.ddns.net</a><br>
Cleaning up challenges<br>
Problem binding to port 443: Could not bind to IPv4 or IPv6.</p>



<a name="369348"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369348" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369348">(Dec 07 2017 at 04:07)</a>:</h4>
<p>But thats not possible. I can connect to zulip from inside and outside the VM over https, which uses port 443</p>



<a name="369349"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369349" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369349">(Dec 07 2017 at 04:07)</a>:</h4>
<p>Do I have to stop the zulip server before certing?</p>



<a name="369355"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369355" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369355">(Dec 07 2017 at 04:08)</a>:</h4>
<p>Quick googling suggests it...</p>



<a name="369359"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369359" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369359">(Dec 07 2017 at 04:11)</a>:</h4>
<p>Yeah. We have a note about that in the instructions page:</p>
<blockquote>
<p>Note: If you already had a webserver installed on this system (e.g. you previously installed Zulip and are now getting a cert), you will need to stop the webserver (e.g. service nginx stop) and start it again after (e.g. service nginx start) running the certbot command above.</p>
</blockquote>



<a name="369361"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369361" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369361">(Dec 07 2017 at 04:14)</a>:</h4>
<p>does service nginx stop work for zulip too? I think its based on nginx</p>



<a name="369366"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369366" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369366">(Dec 07 2017 at 04:42)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> Yes, the Zulip installer sets up nginx as Zulip's front end.</p>



<a name="369373"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369373" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369373">(Dec 07 2017 at 04:56)</a>:</h4>
<p>I did as mentioned but after stoping the service and trying to start it, I get an error message</p>
<p>dieter@ubuntu:~$ sudo rm /etc/ssl/certs/zulip.combined-chain.crt<br>
dieter@ubuntu:~$ sudo rm /etc/ssl/private/zulip.key<br>
dieter@ubuntu:~$ sudo ln -s /etc/letsencrypt/live/xxx.ddns.net/fullchain.pem /etc/ssl/certs/zulip.combined-chain.crt<br>
dieter@ubuntu:~$ sudo ln -s /etc/letsencrypt/live/xxx.ddns.net/privkey.pem /etc/ssl/private/zulip.key<br>
dieter@ubuntu:~$ service nginx startJob for nginx.service failed because the control process exited with error code. See "systemctl status nginx.service" and "journalctl -xe" for details.</p>
<p>dieter@ubuntu:~$ systemctl status nginx.service</p>
<p>nginx.service - A high performance web server and a reverse proxy server<br>
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)<br>
   Active: failed (Result: exit-code) since Wed 2017-12-06 20:51:38 PST; 1min 21s ago<br>
  Process: 11293 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=1/FAILURE)</p>
<p>Dec 06 20:51:38 ubuntu systemd[1]: Starting A high performance web server and a reverse proxy server...<br>
Dec 06 20:51:38 ubuntu nginx[11293]: nginx: [emerg] SSL_CTX_use_PrivateKey_file("/etc/ssl/private/zulip.key") failed (SSL: error:02001002:system library:fopen:No such file or directory:fopen('/etc/ssl/private/zulip.key','r') error:20074002:BIO routines:FILE_CTRL:system lib error:140B0002:SSL routines:SSL_CTX_use_PrivateKey_file:system lib)<br>
Dec 06 20:51:38 ubuntu nginx[11293]: nginx: configuration file /etc/nginx/nginx.conf test failed<br>
Dec 06 20:51:38 ubuntu systemd[1]: nginx.service: Control process exited, code=exited status=1<br>
Dec 06 20:51:38 ubuntu systemd[1]: Failed to start A high performance web server and a reverse proxy server.<br>
Dec 06 20:51:38 ubuntu systemd[1]: nginx.service: Unit entered failed state.<br>
Dec 06 20:51:38 ubuntu systemd[1]: nginx.service: Failed with result 'exit-code'.</p>



<a name="369376"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369376" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369376">(Dec 07 2017 at 04:58)</a>:</h4>
<p>dieter@ubuntu:~$ sudo ls -l /etc/ssl/private/zulip.key<br>
lrwxrwxrwx 1 root root 55 Dec  6 20:51 /etc/ssl/private/zulip.key -&gt; /etc/letsencrypt/live/xxx.ddns.net/privkey.pem</p>



<a name="369378"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369378" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369378">(Dec 07 2017 at 04:59)</a>:</h4>
<p>Would it be easier to reinstall everything?</p>



<a name="369379"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369379" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369379">(Dec 07 2017 at 05:00)</a>:</h4>
<p>Btw: Many thanks for your help <span class="user-mention" data-user-email="greg@zulipchat.com" data-user-id="2187">@Greg Price</span> :-D</p>



<a name="369383"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369383" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369383">(Dec 07 2017 at 05:07)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> No, I don't think a reinstall wouldn't help.</p>
<p>Did you successfully run certbot? What does its output look like?</p>



<a name="369386"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369386" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369386">(Dec 07 2017 at 05:08)</a>:</h4>
<p>The order of steps in the instructions is important -- you need to successfully acquire the certificates first, then point those two files at them. Otherwise when you try to start nginx, you get an error like that one, because it looks for the cert files mentioned in its configuration and tries to open them.</p>



<a name="369387"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369387" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369387">(Dec 07 2017 at 05:08)</a>:</h4>
<p>(and those are in the nginx config set up by the Zulip installer)</p>



<a name="369389"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369389" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369389">(Dec 07 2017 at 05:09)</a>:</h4>
<p>Specifically, you want to</p>
<ul>
<li>stop nginx</li>
<li>run the certbot command in the instructions (with --standalone)</li>
<li>start nginx</li>
</ul>



<a name="369399"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369399" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369399">(Dec 07 2017 at 05:20)</a>:</h4>
<p>dieter@ubuntu:~$ sudo certbot certonly --standaloneSaving debug log to /var/log/letsencrypt/letsencrypt.log<br>
Plugins selected: Authenticator standalone, Installer None<br>
Please enter in your domain name(s) (comma and/or space separated)  (Enter 'c'<br>
to cancel): <a href="http://xxx.ddns.net" target="_blank" title="http://xxx.ddns.net">xxx.ddns.net</a><br>
Cert not yet due for renewal</p>
<p>You have an existing certificate that has exactly the same domains or certificate name you requested and isn't close to expiry.<br>
(ref: /etc/letsencrypt/renewal/xxx.ddns.net-0002.conf)</p>
<p>What would you like to do?</p>
<hr>
<p>1: Keep the existing certificate for now<br>
2: Renew &amp; replace the cert (limit ~5 per 7 days)</p>
<hr>
<p>Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 2<br>
Renewing an existing certificate<br>
Performing the following challenges:<br>
tls-sni-01 challenge for <a href="http://xxx.ddns.net" target="_blank" title="http://xxx.ddns.net">xxx.ddns.net</a><br>
Waiting for verification...<br>
Cleaning up challenges</p>
<p>IMPORTANT NOTES:<br>
 - Congratulations! Your certificate and chain have been saved at:<br>
   /etc/letsencrypt/live/xxx.ddns.net-0002/fullchain.pem<br>
   Your key file has been saved at:<br>
   /etc/letsencrypt/live/xxx.ddns.net-0002/privkey.pem<br>
   Your cert will expire on 2018-03-07. To obtain a new or tweaked<br>
   version of this certificate in the future, simply run certbot<br>
   again. To non-interactively renew <em>all</em> of your certificates, run<br>
   "certbot renew"<br>
 - If you like Certbot, please consider supporting our work by:</p>
<p>Donating to ISRG / Let's Encrypt:   <a href="https://letsencrypt.org/donate" target="_blank" title="https://letsencrypt.org/donate">https://letsencrypt.org/donate</a><br>
   Donating to EFF:                    <a href="https://eff.org/donate-le" target="_blank" title="https://eff.org/donate-le">https://eff.org/donate-le</a></p>



<a name="369403"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369403" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369403">(Dec 07 2017 at 05:22)</a>:</h4>
<p>sudo ln -s /etc/letsencrypt/live/xxx.ddns.net-0002/fullchain.pem /etc/ssl/certs/zulip.combined-chain.crt<br>
ln: failed to create symbolic link '/etc/ssl/certs/zulip.combined-chain.crt': File exists<br>
dieter@ubuntu:~$ rm /etc/ssl/certs/zulip.combined-chain.crt<br>
rm: cannot remove '/etc/ssl/certs/zulip.combined-chain.crt': Permission denied<br>
dieter@ubuntu:~$ sudo rm /etc/ssl/certs/zulip.combined-chain.crt<br>
dieter@ubuntu:~$ sudo ln -s /etc/letsencrypt/live/xxx.ddns.net-0002/privkey.pem /etc/ssl/private/zulip.key<br>
ln: failed to create symbolic link '/etc/ssl/private/zulip.key': File exists<br>
dieter@ubuntu:~$ sudo rm /etc/ssl/private/zulip.key<br>
dieter@ubuntu:~$ sudo ln -s /etc/letsencrypt/live/xxx.ddns.net-0002/privkey.pem /etc/ssl/private/zulip.key<br>
dieter@ubuntu:~$ service nginx start<br>
Job for nginx.service failed because the control process exited with error code. See "systemctl status nginx.service" and "journalctl -xe" for details.</p>



<a name="369408"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369408" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369408">(Dec 07 2017 at 05:22)</a>:</h4>
<p><span class="user-mention" data-user-email="greg@zulipchat.com" data-user-id="2187">@Greg Price</span> I cannot see any mistake in there</p>



<a name="369423"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369423" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369423">(Dec 07 2017 at 05:42)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> From that Certbot output, it looks like your certificates are in <code>/etc/letsencrypt/live/xxx.ddns.net-0002/</code> , not <code>/etc/letsencrypt/live/xxx.ddns.net/</code></p>



<a name="369424"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369424" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369424">(Dec 07 2017 at 05:42)</a>:</h4>
<p>So in making those symlinks, you should replace <code>xxx.ddns.net</code> with <code>xxx.ddns.net-0002</code></p>



<a name="369425"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369425" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369425">(Dec 07 2017 at 05:42)</a>:</h4>
<p><span class="user-mention" data-user-email="greg@zulipchat.com" data-user-id="2187">@Greg Price</span> Thats why I changed the symlinks<br>
sudo ln -s /etc/letsencrypt/live/xxx.ddns.net-0002/privkey.pem /etc/ssl/private/zulip.key</p>



<a name="369427"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369427" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369427">(Dec 07 2017 at 05:42)</a>:</h4>
<p>Ah indeed</p>



<a name="369430"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369430" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369430">(Dec 07 2017 at 05:43)</a>:</h4>
<p>Did you create <code>/etc/ssl/certs/zulip.combined-chain.crt</code>? It looks like not, in that transcript</p>



<a name="369431"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369431" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369431">(Dec 07 2017 at 05:44)</a>:</h4>
<p>I suspect if you looked at the nginx log, it would tell you that ;-)</p>



<a name="369436"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369436" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369436">(Dec 07 2017 at 05:48)</a>:</h4>
<p>OmG I'm so stupid sometimes...<br>
To my defense, at my place it's 6.48 in the morning and I have to get up to work at 10 xD</p>



<a name="369438"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369438" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369438">(Dec 07 2017 at 05:50)</a>:</h4>
<p>Ow :-O</p>



<a name="369439"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369439" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369439">(Dec 07 2017 at 05:50)</a>:</h4>
<p>Everything works like a charm now. I cannot tell how much you saved my life :-D</p>



<a name="369440"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369440" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369440">(Dec 07 2017 at 05:51)</a>:</h4>
<p>Great! Glad to hear it :)</p>



<a name="369441"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369441" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369441">(Dec 07 2017 at 05:51)</a>:</h4>
<p>I have to go sleep now xD</p>



<a name="369442"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369442" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369442">(Dec 07 2017 at 05:51)</a>:</h4>
<p>Good idea :-P -- sleep well!</p>



<a name="369443"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369443" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369443">(Dec 07 2017 at 05:51)</a>:</h4>
<p>See you! Have a good time pal! Many thanks for your help!</p>



<a name="369444"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369444" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369444">(Dec 07 2017 at 05:52)</a>:</h4>
<p>We've been planning to replace all of the manual steps in this certbot process with our own automation in the install script -- so your experience is a good reminder of how helpful that will be</p>



<a name="369445"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/369445" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#369445">(Dec 07 2017 at 05:53)</a>:</h4>
<p>(It'll be optional, naturally -- but we'll advertise the flag right in the main install instructions, because most people who don't have some institutional CA process in place will want to use it)</p>



<a name="371098"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371098" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371098">(Dec 07 2017 at 18:42)</a>:</h4>
<p>Does anybody have experience with sub-sub-domains with no-ip?<br>
I tried to create a second realm and it worked, but now i have the problem that i cant cert <a href="http://xyz.xxx.ddns.net" target="_blank" title="http://xyz.xxx.ddns.net">xyz.xxx.ddns.net</a>. Using it without a cert would work, but then I cannot use the Android App</p>



<a name="371099"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371099" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371099">(Dec 07 2017 at 18:43)</a>:</h4>
<p>Maybe my mesias <span class="user-mention" data-user-email="greg@zulipchat.com" data-user-id="2187">@Greg Price</span> can save me again? :-D</p>



<a name="371101"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371101" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371101">(Dec 07 2017 at 18:45)</a>:</h4>
<p>:)</p>
<p>You'll need that domain in the cert too. The Certbot docs should tell you how to request multiple domains in a cert.</p>



<a name="371105"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371105" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371105">(Dec 07 2017 at 18:45)</a>:</h4>
<p>They don't yet support wildcard certs, so if you want arbitrary subdomains you'll have to get the cert elsewhere -- or wait until January 2018, when Certbot supports it.</p>



<a name="371110"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371110" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371110">(Dec 07 2017 at 18:46)</a>:</h4>
<p>Yes, but the problem is that I have to run nginx to have the sub-sub-domain working. In order to cert the sub-sub-domain, I have to stop nginx because otherwise, the 443 port is already in use</p>



<a name="371113"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371113" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371113">(Dec 07 2017 at 18:47)</a>:</h4>
<p>Unfortunatelly, no-ip doesnt allow a second hostname with <a href="http://xyz.xxx.ddns.net" target="_blank" title="http://xyz.xxx.ddns.net">xyz.xxx.ddns.net</a></p>



<a name="371118"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371118" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371118">(Dec 07 2017 at 18:50)</a>:</h4>
<p>Is there any possibility to redirect the existing second realm to another hostname? Like <a href="http://abc.ddns.net" target="_blank" title="http://abc.ddns.net">abc.ddns.net</a>?</p>



<a name="371223"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371223" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371223">(Dec 07 2017 at 19:44)</a>:</h4>
<blockquote>
<p>no-ip doesnt allow a second hostname with <a href="http://xyz.xxx.ddns.net" target="_blank" title="http://xyz.xxx.ddns.net">xyz.xxx.ddns.net</a></p>
</blockquote>
<p>Meaning you can't get that name in DNS? In that case the cert issue doesn't matter, then. (I think the cert issue is solvable, but of course only if you have DNS.)</p>



<a name="371224"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371224" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371224">(Dec 07 2017 at 19:46)</a>:</h4>
<p>For mapping a realm to an alternate domain -- like <code>abc.ddns.net</code>, or something completely different like <code>abc.example.io</code> if you like -- we actually have a new feature for this! The setting is called <code>REALM_HOSTS</code>.</p>



<a name="371225"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371225" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371225">(Dec 07 2017 at 19:46)</a>:</h4>
<p>My DDNS provider does not allow sub-sub-domains in its free plan.</p>



<a name="371226"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371226" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371226">(Dec 07 2017 at 19:46)</a>:</h4>
<p>It's newer than our latest release, though, so you'd need to deploy from Git.</p>



<a name="371227"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371227" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371227">(Dec 07 2017 at 19:47)</a>:</h4>
<p>It might be easier to start with one realm now, and add the other after we release 1.8. :)</p>



<a name="371228"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371228" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371228">(Dec 07 2017 at 19:47)</a>:</h4>
<p>The problem I am facing is that certbot throws an error if I try to cert <a href="http://xyz.xxx.ddns.net" target="_blank" title="http://xyz.xxx.ddns.net">xyz.xxx.ddns.net</a></p>



<a name="371231"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371231" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dieter Köberl <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371231">(Dec 07 2017 at 19:48)</a>:</h4>
<p>DNS problem: NXDOMAIN looking up A for<br>
<a href="http://xyz.xxx.ddns.net" target="_blank" title="http://xyz.xxx.ddns.net">xyz.xxx.ddns.net</a></p>



<a name="371356"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Cannot%20create%20realm%20link/near/371356" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Cannot.20create.20realm.20link.html#371356">(Dec 07 2017 at 21:58)</a>:</h4>
<p><span class="user-mention" data-user-email="dieter.koeberl@freenet.de" data-user-id="4376">@Dieter Köberl</span> Yeah, that's a DNS error -- certbot is telling you that you don't have DNS for that domain</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>