<html>
<head><meta charset="utf-8"><title>Apache2 reverse proxy · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html">Apache2 reverse proxy</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="663152"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/663152" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Carnes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#663152">(Nov 20 2018 at 15:48)</a>:</h4>
<p>my environment is already setup using Apach2 as the reverse proxy and LetsEncrypt certificates. All of the documentation I have found is for nginx as the proxy server.. Any tips for setting up behind Apache? Thanks!</p>



<a name="663221"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/663221" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Carnes <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#663221">(Nov 20 2018 at 20:50)</a>:</h4>
<p>To clarify, I have a single public IP (tied to <a href="http://mydomain.com" target="_blank" title="http://mydomain.com">mydomain.com</a>), which gets routed to a server running Apache, which is acting as the reverse proxy for several other subdomains (<a href="http://sub1.mydomain.com" target="_blank" title="http://sub1.mydomain.com">sub1.mydomain.com</a> <a href="http://sub2.mydomain.com" target="_blank" title="http://sub2.mydomain.com">sub2.mydomain.com</a> etc.) I would like to install Zulip to one of these subdomains (<a href="http://zulip.mydomain.com" target="_blank" title="http://zulip.mydomain.com">zulip.mydomain.com</a>) but all the rest of my infrastructure is already configured to use the Apache sever as the reverse proxy. All of the documentation I have been able to find assumes nginx as the reverse proxy. I'm wondering if there are any specific things I should watch out for or if anyone has some examples of how I would accomplish this.</p>



<a name="663247"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/663247" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#663247">(Nov 21 2018 at 02:46)</a>:</h4>
<p><span class="user-mention" data-user-id="10373">@Joel Carnes</span> the main thing is to ensure that you don't have too-short timeouts, which is discussed in the <code>nginx</code> config guide.</p>



<a name="663248"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/663248" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#663248">(Nov 21 2018 at 02:47)</a>:</h4>
<p>I don't think there should be anything too crazy you need to do.  When you do get this working, I'd love it if you posted the config you wrote, so that we can add it to the documentation as well (we're about to do this for another reverse proxy tool as well)</p>



<a name="903412"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903412" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alexst <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903412">(Jun 13 2020 at 03:52)</a>:</h4>
<p>wow, this is still not written up, though i'm pretty sure there must be folks who have made it work under apache</p>



<a name="903413"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903413" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alexst <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903413">(Jun 13 2020 at 03:54)</a>:</h4>
<p>I'll make an attempt and will post my config if I get it up and running. As far as I've noticed from the Nginx config, it's similar to Mattermost, which does have nice docs for Apache2 (pun!)</p>



<a name="903451"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903451" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903451">(Jun 13 2020 at 04:35)</a>:</h4>
<p>Great!</p>



<a name="903848"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903848" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alexst <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903848">(Jun 13 2020 at 20:26)</a>:</h4>
<p>Got it. Where do you want it?</p>



<a name="903859"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903859" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alexst <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903859">(Jun 13 2020 at 21:46)</a>:</h4>
<p>Your wiki is not editable</p>



<a name="903909"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903909" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903909">(Jun 14 2020 at 00:08)</a>:</h4>
<p><span class="user-mention" data-user-id="16247">@alexst</span> our documentation lives in <code>docs/</code> in the zulip/zulip repository.  See <a href="https://zulip.readthedocs.io/en/latest/documentation/overview.html#developer-and-sysadmin-documentation">https://zulip.readthedocs.io/en/latest/documentation/overview.html#developer-and-sysadmin-documentation</a> for how to contribute.</p>



<a name="903910"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903910" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903910">(Jun 14 2020 at 00:08)</a>:</h4>
<p>(We go for a higher level of polish and consistency in our documentation than is easy to arrange with a wiki)</p>



<a name="903932"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903932" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alexst <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903932">(Jun 14 2020 at 01:30)</a>:</h4>
<p>I use Docker. And your Docker version (which I'm aware is unofficial) is a separate repo and its installation instructions point to a Wiki for the reverse proxy which also only have Nginx ... I take it you have nothing to do with the docker repo?</p>



<a name="903933"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903933" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alexst <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903933">(Jun 14 2020 at 01:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/31-production-help/topic/Apache2.20reverse.20proxy/near/903909">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="16247">alexst</span> our documentation lives in <code>docs/</code> in the zulip/zulip repository.  See <a href="https://zulip.readthedocs.io/en/latest/documentation/overview.html#developer-and-sysadmin-documentation">https://zulip.readthedocs.io/en/latest/documentation/overview.html#developer-and-sysadmin-documentation</a> for how to contribute.</p>
</blockquote>
<p>yeah ... no time for that, i'll drop it in one of the current issues and you can pick it up from tthere</p>



<a name="903938"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/903938" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> alexst <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#903938">(Jun 14 2020 at 02:28)</a>:</h4>
<p>well, in the end I took the time, so here you go <a href="https://github.com/zulip/zulip/pull/15367">https://github.com/zulip/zulip/pull/15367</a> ... only discovered Zulip yesterday, but i kind of like it so far (though I'd  like to have a chat with whoever thought 3px border width boxes was a good idea, should be just the left border highlighted ... feeling another PR sooner or later)</p>
<p>thanks for making Zulip available</p>



<a name="927174"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/927174" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Benesh <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#927174">(Jul 07 2020 at 14:56)</a>:</h4>
<p>Hello there, we're also running Zulip behind an Apache2 Reverseproxy and are fighting with slow message send times when a lot of users are online (~200-250) but we're having trouble pinpointing the reason for this, cpu/ram load on all systems is rather low.</p>
<p>I found this on the Zulip Logs</p>
<p><code>2020-07-07 14:31:35.419 INFO [zr] 145.255.238.136 POST    200   6ms (db: 1ms/2q) (+start: 31ms) /json/report/send_times [181ms/5165ms/(unknown)ms/echo:True/diff:False] (yyy@zzz.com via website)</code></p>
<p>how are the 5165ms computed here?</p>
<p>btw, it's only slow when sending messages. When searching, the UI, uploading, etc. everything else is really quick</p>



<a name="927251"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/927251" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#927251">(Jul 07 2020 at 17:53)</a>:</h4>
<p><span class="user-mention" data-user-id="16455">@Adam Benesh</span> that sounds like your Tornado service is overloaded; the 5165ms is the time before the message was received from the server via the real-time push system.</p>



<a name="927252"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/927252" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#927252">(Jul 07 2020 at 17:53)</a>:</h4>
<p>What zulip version are you running?</p>



<a name="927253"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/927253" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#927253">(Jul 07 2020 at 17:53)</a>:</h4>
<p>I'd recommend upgrading to <code>3.0-rc2</code> when we post it later today (or perhaps tomorrow); that contains a ~4x improvement in Tornado efficiency.</p>



<a name="927462"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Apache2%20reverse%20proxy/near/927462" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Benesh <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Apache2.20reverse.20proxy.html#927462">(Jul 07 2020 at 20:14)</a>:</h4>
<p>we're currently still on 2.1.6, thanks for the advice i will keep an eye on the new release</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>