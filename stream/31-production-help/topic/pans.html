<html>
<head><meta charset="utf-8"><title>pans · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html">pans</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="44632"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44632" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44632">(Oct 21 2016 at 18:50)</a>:</h4>
<p>... where's the apns module?</p>



<a name="44633"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44633" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44633">(Oct 21 2016 at 18:50)</a>:</h4>
<p>Now that I just broke prod. &gt;.&gt; </p>



<a name="44634"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44634" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44634">(Oct 21 2016 at 18:53)</a>:</h4>
<p>Great, and now we have the megabytes of session data corrupted.</p>



<a name="44635"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44635" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44635">(Oct 21 2016 at 18:54)</a>:</h4>
<p>Smooth failover is something that needs some love.</p>



<a name="44637"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44637" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sumana Harihareswara <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44637">(Oct 21 2016 at 18:55)</a>:</h4>
<p>This is the Apple Push Notifications Service, to be super clear? <span class="user-mention" data-user-email="showell30@yahoo.com">@Steve Howell</span> &amp; <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> would know more -- I am <code>git grep</code>ping around and see a lot of references, but I don't know much about it</p>



<a name="44638"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44638" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44638">(Oct 21 2016 at 18:56)</a>:</h4>
<p>I don't know apns stuff, unfortunately.</p>



<a name="44639"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44639" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44639">(Oct 21 2016 at 18:56)</a>:</h4>
<p>Any ideas about...</p>



<a name="44640"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44640" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44640">(Oct 21 2016 at 18:56)</a>:</h4>
<div class="codehilite"><pre><span></span>==&gt; /var/log/zulip/errors.log &lt;==
2016-10-21 14:56:21,723 ERROR    Internal Server Error: /
Traceback (most recent call last):
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py&quot;, line 223, in get_response
    response = middleware_method(request, response)
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zerver/middleware.py&quot;, line 278, in process_response
    error_content=content, error_content_iter=content_iter)
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zerver/middleware.py&quot;, line 208, in write_log_line
    queue_json_publish(&quot;slow_queries&quot;, &quot;%s (%s)&quot; % (logger_line, email), lambda e: None)
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zerver/lib/queue.py&quot;, line 310, in queue_json_publish
    get_queue_client().json_publish(queue_name, event)
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zerver/lib/queue.py&quot;, line 288, in get_queue_client
    queue_client = SimpleQueueClient()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zerver/lib/queue.py&quot;, line 33, in __init__
    self._connect()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zerver/lib/queue.py&quot;, line 38, in _connect
    self.connection = pika.BlockingConnection(self._get_parameters())
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/blocking_connection.py&quot;, line 339, in __init__
    self._process_io_for_connection_setup()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/blocking_connection.py&quot;, line 374, in _process_io_for_connection_setup
    self._open_error_result.is_ready)
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/blocking_connection.py&quot;, line 410, in _flush_output
    self._impl.ioloop.poll()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/select_connection.py&quot;, line 602, in poll
    self._process_fd_events(fd_event_map, write_only)
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/select_connection.py&quot;, line 443, in _process_fd_events
    handler(fileno, events, write_only=write_only)
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/base_connection.py&quot;, line 364, in _handle_events
    self._handle_read()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/base_connection.py&quot;, line 407, in _handle_read
    return self._handle_error(error)
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/base_connection.py&quot;, line 338, in _handle_error
    self._handle_disconnect()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/base_connection.py&quot;, line 288, in _handle_disconnect
    self._adapter_disconnect()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/select_connection.py&quot;, line 95, in _adapter_disconnect
    super(SelectConnection, self)._adapter_disconnect()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/base_connection.py&quot;, line 154, in _adapter_disconnect
    self._check_state_on_disconnect()
  File &quot;/home/zulip/deployments/2016-09-16-21-19-55/zulip-venv/lib/python2.7/site-packages/pika/adapters/base_connection.py&quot;, line 173, in _check_state_on_disconnect
    raise exceptions.ProbableAuthenticationError
ProbableAuthenticationError
</pre></div>



<a name="44642"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44642" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44642">(Oct 21 2016 at 18:58)</a>:</h4>
<p>That's a rabbitmq issue</p>



<a name="44643"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44643" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44643">(Oct 21 2016 at 18:58)</a>:</h4>
<p><code>scripts/setup/configure-rabbitmq</code> and then restarting the Zulip server will usually fix it.</p>



<a name="44644"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44644" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44644">(Oct 21 2016 at 18:59)</a>:</h4>
<p>APNS is in the Zulip virtualenv</p>



<a name="44645"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44645" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44645">(Oct 21 2016 at 19:01)</a>:</h4>
<p>Yup, got it.</p>



<a name="44646"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44646" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44646">(Oct 21 2016 at 19:01)</a>:</h4>
<p>I will... hold a debrief of what just happened on my side and then talk about what I think needs to happen to make it better.</p>



<a name="44647"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44647" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44647">(Oct 21 2016 at 19:02)</a>:</h4>
<p>After I take a break.</p>



<a name="44648"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44648" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44648">(Oct 21 2016 at 19:07)</a>:</h4>
<p>Cool.  We do have some changes to how we configure rabbitmq that I think should permanently fix the issues with rabbitmq and hostnames when you restart a server, just needs a bit more testing.</p>



<a name="44649"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44649" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44649">(Oct 21 2016 at 19:08)</a>:</h4>
<p>Which is definitely issue #1 for running Zulip in production</p>



<a name="44650"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/pans/near/44650" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/pans.html#44650">(Oct 21 2016 at 19:13)</a>:</h4>
<p>Mmmmn.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>