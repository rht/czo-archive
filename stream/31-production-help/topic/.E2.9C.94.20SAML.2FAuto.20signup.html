<html>
<head><meta charset="utf-8"><title>✔ SAML/Auto signup · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html">✔ SAML/Auto signup</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1339872"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1339872" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1339872">(Mar 07 2022 at 16:08)</a>:</h4>
<p>Hi there !<br>
I'm struggling with a fresh installation plugged to a SAML IdP.<br>
I'm trying to get SAML authenticated users to have "auto signup" feature, instead of what I get a "you need an invitation".<br>
I know this feature works well as we have other instances working like a charm.<br>
Is there something I need to change through the UI ?</p>



<a name="1339875"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1339875" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1339875">(Mar 07 2022 at 16:25)</a>:</h4>
<p><del>hmmm ... I might have plumbing issues with SAML attribues</del> <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="1339879"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1339879" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1339879">(Mar 07 2022 at 16:38)</a>:</h4>
<p>I checked the attributes, they are fine<br>
maybe something with the domain ?</p>



<a name="1339881"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1339881" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1339881">(Mar 07 2022 at 16:42)</a>:</h4>
<p>even though I sent an invite, user can't log in</p>



<a name="1339884"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1339884" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1339884">(Mar 07 2022 at 16:45)</a>:</h4>
<p>there's no error in logs<br>
what's strange is that admin user also logs in through the same SAML configuration with no issue</p>



<a name="1339941"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1339941" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1339941">(Mar 07 2022 at 18:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="17877">Benjamin MALYNOVYTCH</span> <a href="#narrow/stream/31-production-help/topic/SAML.2FAuto.20signup/near/1339881">said</a>:</p>
<blockquote>
<p>even though I sent an invite, user can't log in</p>
</blockquote>
<p>What happens then? The "need an invitation page"? Are they able to join if the invitation requirement setting is temporarily disabled? <span class="user-mention" data-user-id="17877">@Benjamin MALYNOVYTCH</span></p>



<a name="1340016"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1340016" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1340016">(Mar 07 2022 at 20:07)</a>:</h4>
<p><span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> is it possible that we added auto signup support for SAML in the 5.0 branch, and it's thus not available in 4.10?</p>



<a name="1340020"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1340020" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1340020">(Mar 07 2022 at 20:10)</a>:</h4>
<p>Hmm no, just checked and auto_signup is in <code>4.x</code></p>



<a name="1340087"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1340087" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1340087">(Mar 07 2022 at 20:55)</a>:</h4>
<p>Cool, thanks for checking that possibility.</p>



<a name="1340615"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1340615" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1340615">(Mar 08 2022 at 13:21)</a>:</h4>
<p><span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> yes feature was there for long enough.<br>
I bet it's a config error but can't find what's wrong <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> <br>
When user comes back from the auth handshake to Zulip, it gets the "need an invitation" page which is strange<br>
Maybe something wrong with the realm ? <img alt=":shrug:" class="emoji" src="/user_avatars/2/emoji/images/31.png" title="shrug"></p>



<a name="1340616"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1340616" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1340616">(Mar 08 2022 at 13:23)</a>:</h4>
<p>again, I've got 2 different instances of Zulip running fine with either full SAML or half SAML and half email auth<br>
the main difference is that I'm configuring a fully automated Zulip instance which plugs on its own to the SAML IdP</p>



<a name="1340759"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1340759" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1340759">(Mar 08 2022 at 18:03)</a>:</h4>
<p><span class="user-mention" data-user-id="17877">@Benjamin MALYNOVYTCH</span> I would expect for a realm that is fully using SAML, you don't need/want the "Require an invitation to join" setup, since you can determine the set of users who can join at the SAML layer. If you're looking for autologin, in particular, you will want to toggle this setting: <a href="https://zulip.com/help/invite-users-to-join#how-to-invite-users-to-join">https://zulip.com/help/invite-users-to-join#how-to-invite-users-to-join</a>.</p>



<a name="1341456"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341456" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341456">(Mar 09 2022 at 13:04)</a>:</h4>
<p>Yeah <code>auto_signup</code> won't skip the need an invitation requirement - it only skips the sometimes-annoying step of "Confirm that you want to create an account?" page upon first login. However, when a user is joining from an invitation link, things would be expected to work... <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="1341457"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341457" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341457">(Mar 09 2022 at 13:04)</a>:</h4>
<p>I hadn't the link, only logging in using the right "invited" email address</p>



<a name="1341458"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341458" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341458">(Mar 09 2022 at 13:05)</a>:</h4>
<p>never mind, <span class="user-mention silent" data-user-id="7">Tim Abbott</span> was right, I needed to set invite to "no", which I had in sight but missed <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="1341459"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341459" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341459">(Mar 09 2022 at 13:06)</a>:</h4>
<p>btw, <span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> do you know if this setting can be changed through <code>manage.py</code> ? I need to enforce it anyway</p>



<a name="1341460"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341460" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341460">(Mar 09 2022 at 13:07)</a>:</h4>
<p>or through the API, but I wasn't able to find the API documentation</p>



<a name="1341461"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341461" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341461">(Mar 09 2022 at 13:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="17877">Benjamin MALYNOVYTCH</span> <a href="#narrow/stream/31-production-help/topic/SAML.2FAuto.20signup/near/1341457">said</a>:</p>
<blockquote>
<p>I hadn't the link, only logging in using the right "invited" email address</p>
</blockquote>
<p>Ah, I see - i dont think that's intended to work - we require joining from the actual invite link directly</p>



<a name="1341462"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341462" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341462">(Mar 09 2022 at 13:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="10349">Mateusz Mandera</span> <a href="#narrow/stream/31-production-help/topic/SAML.2FAuto.20signup/near/1341461">said</a>:</p>
<blockquote>
<p>Ah, I see - i dont think that's intended to work - we require joining from the actual invite link directly</p>
</blockquote>
<p>In fact there's no SMTP plugged to this instance, it's running locally in container <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="1341463"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341463" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341463">(Mar 09 2022 at 13:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="17877">Benjamin MALYNOVYTCH</span> <a href="#narrow/stream/31-production-help/topic/SAML.2FAuto.20signup/near/1341459">said</a>:</p>
<blockquote>
<p>btw, <span class="user-mention silent" data-user-id="10349">Mateusz Mandera</span> do you know if this setting can be changed through <code>manage.py</code> ? I need to enforce it anyway</p>
</blockquote>
<p>Hmm, it can be done in <code>manage.py shell</code> with code like</p>
<div class="codehilite"><pre><span></span><code>realm = Realm.objects.get(string_id=&quot;yoursubdomain&quot;)  # use empty string if you&#39;re just deployed  with a realm on the root subdomain
realm.invite_required = False
realm.save()
</code></pre></div>



<a name="1341465"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341465" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341465">(Mar 09 2022 at 13:13)</a>:</h4>
<p>is there something I should import to use <code>-c "..."</code> with the shell in order to do a oneliner ?<br>
I'm getting a <code>NameError: name 'Realm' is not defined</code></p>



<a name="1341466"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341466" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341466">(Mar 09 2022 at 13:26)</a>:</h4>
<p>Can you post the command you're running? <code>Realm</code> should not require importing inside <code>manage.py shell</code></p>



<a name="1341467"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341467" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341467">(Mar 09 2022 at 13:27)</a>:</h4>
<p>If you want a oneliner, it may be simpler to just add a management command you can simply <code>manage.py your_command</code> to flip the setting</p>



<a name="1341490"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341490" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin MALYNOVYTCH <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341490">(Mar 09 2022 at 14:29)</a>:</h4>
<p>thx <span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> &amp; <span class="user-mention" data-user-id="7">@Tim Abbott</span> for your inputs, I'm on tracks now ! <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="1341491"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20SAML/Auto%20signup/near/1341491" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20SAML.2FAuto.20signup.html#1341491">(Mar 09 2022 at 14:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="17877">Benjamin MALYNOVYTCH</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>