<html>
<head><meta charset="utf-8"><title>stream error · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html">stream error</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="217760"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217760" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217760">(Jun 03 2017 at 04:50)</a>:</h4>
<p>I have a stream (the default zulip stream that is created for new installations) that I set as private and then unsubscribed from. Now, I can't do anything with it. I get errors when I try to subscribe, and I can't remove it from the list of default streams.</p>



<a name="217768"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217768" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217768">(Jun 03 2017 at 05:12)</a>:</h4>
<p><span class="user-mention" data-user-email="ben@benramsey.com" data-user-id="2504">@Ben Ramsey</span> yuck, that's definitely at least 1 bug.  You can probably clean this up with <code>manage.py set_default_streams</code>, but I'm going to see how much of this I can fix before the 1.6 release.</p>



<a name="217769"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217769" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217769">(Jun 03 2017 at 05:13)</a>:</h4>
<p>Thanks. It's definitely sort of user error, but I'm guessing since no one else was subscribed to that stream and I set it private, it's essentially orphaned now.</p>



<a name="217770"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217770" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217770">(Jun 03 2017 at 05:14)</a>:</h4>
<p>Yeah, effectively what "delete stream" does is makes it private and removes all the users</p>



<a name="217771"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217771" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217771">(Jun 03 2017 at 05:14)</a>:</h4>
<p>(since we do need to keep the object around for old messages, etc.)</p>



<a name="217772"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217772" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217772">(Jun 03 2017 at 05:24)</a>:</h4>
<p>I can't seem to run <code>manage.py shell</code>. I keep getting <code>OSError: [Errno 12] Cannot allocate memory</code> errors.</p>



<a name="217773"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217773" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217773">(Jun 03 2017 at 05:33)</a>:</h4>
<p>Though <code>manage.py set_default_streams</code> did the trick for me, so that's good. :-)</p>



<a name="217867"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217867" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217867">(Jun 03 2017 at 17:57)</a>:</h4>
<p><span class="user-mention" data-user-email="ben@benramsey.com" data-user-id="2504">@Ben Ramsey</span> how much RAM does your system have?  "Cannot allocate memory" makes it sounds like it's not enough</p>



<a name="217914"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217914" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217914">(Jun 03 2017 at 18:36)</a>:</h4>
<p>I have 2GB of RAM. Maybe I need to upgrade to a 4GB system. I’ve restarted the system several times. It seems to always use about 1.9GB.</p>



<a name="217919"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217919" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217919">(Jun 03 2017 at 18:37)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> Does that sound like it's using quite a lot to you, or is that normal for Zulip?</p>



<a name="217926"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217926" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217926">(Jun 03 2017 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-email="ben@benramsey.com" data-user-id="2504">@Ben Ramsey</span> you need like 3GB for a production system right now.  However, there's an open PR that should make 2GB happy: <a href="https://github.com/zulip/zulip/pull/5098/files" target="_blank" title="https://github.com/zulip/zulip/pull/5098/files">https://github.com/zulip/zulip/pull/5098/files</a></p>



<a name="217928"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217928" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217928">(Jun 03 2017 at 18:39)</a>:</h4>
<p>I'm actually hoping to test that out and maybe merge it today</p>



<a name="217930"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217930" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217930">(Jun 03 2017 at 18:41)</a>:</h4>
<p>So if you're up for a bit of beta testing, you could try that out rather than upgrading</p>



<a name="217949"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217949" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217949">(Jun 03 2017 at 18:54)</a>:</h4>
<p>Thanks. I’ll take a look this evening.</p>



<a name="217951"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217951" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217951">(Jun 03 2017 at 18:55)</a>:</h4>
<p>Cool; I'm going to test it out on <a href="http://chat.zulip.org" target="_blank" title="http://chat.zulip.org">chat.zulip.org</a> right now, though that will mostly ensure it doesn't break systems with more than 2GB of RAM</p>



<a name="217952"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217952" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217952">(Jun 03 2017 at 18:55)</a>:</h4>
<p>Ah. Saw you are hoping to merge today. I can't promise to get to it earlier.</p>



<a name="217954"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217954" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217954">(Jun 03 2017 at 18:56)</a>:</h4>
<p>no worries, testing post merge is great too (and perhaps a bit easier for you)</p>



<a name="217955"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217955" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217955">(Jun 03 2017 at 18:56)</a>:</h4>
<p>which I'm hoping will happen tomorrow</p>



<a name="217956"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217956" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217956">(Jun 03 2017 at 18:56)</a>:</h4>
<p>I do want a few independent test reports before we release 1.6 with it</p>



<a name="217957"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217957" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217957">(Jun 03 2017 at 18:57)</a>:</h4>
<p>OK it's running here without issue</p>



<a name="217958"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/217958" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#217958">(Jun 03 2017 at 18:58)</a>:</h4>
<p>(Again, with no actual effect, but at least this means we only need to worry about testing with small-RAM systems)</p>



<a name="218775"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/218775" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#218775">(Jun 04 2017 at 18:34)</a>:</h4>
<p><span class="user-mention" data-user-email="ben@benramsey.com" data-user-id="2504">@Ben Ramsey</span> the most important part of the stream issue you reported is now fixed in master (removing the last user from a private stream will deactivate/archive it properly).</p>



<a name="219009"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/stream%20error/near/219009" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Ramsey <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/stream.20error.html#219009">(Jun 05 2017 at 02:17)</a>:</h4>
<p>Thanks!</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>