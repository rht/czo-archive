<html>
<head><meta charset="utf-8"><title>Data restoration from Old Zulip Server · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html">Data restoration from Old Zulip Server</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1632937"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632937" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632937">(Aug 29 2023 at 13:50)</a>:</h4>
<p>Hello everyone,</p>
<p>I find myself in a troublesome situation and I'm reaching out for your kind support. Let me explain my issue: I was using Zulip 6.1, installed on an Ubuntu Server 20 (on-premises). Due to certain reasons, the company has decided to migrate the server to a different location.</p>
<p>I've managed to create a new Zulip 6.1 server, but I'm struggling with restoring the backup from my old server but failed due to my limited knowledge of this process. I am urgently seeking assistance in this matter. Our company's chat server is currently down, and my job is at stake.</p>
<p>Your help in resolving this situation would be greatly appreciated. Thank you for your understanding and support.</p>



<a name="1632973"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632973" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632973">(Aug 29 2023 at 13:59)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="2" href="/#narrow/stream/2-general/topic/Data.20restoration.20from.20Old.20Zulip.20Server">#general &gt; Data restoration from Old Zulip Server</a> by <span class="user-mention silent" data-user-id="5140">Aman (amanagr)</span>.</p>



<a name="1632980"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632980" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632980">(Aug 29 2023 at 14:10)</a>:</h4>
<p>Can you show us what you tried, and how it failed?</p>
<p>For you use case, you should be using our <a href="https://zulip.readthedocs.io/en/latest/production/export-and-import.html#backups">built-in backup</a> and <a href="https://zulip.readthedocs.io/en/latest/production/export-and-import.html#restoring-backups">restore</a> instructions.  Have you tried those?</p>



<a name="1632989"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632989" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632989">(Aug 29 2023 at 14:15)</a>:</h4>
<p>Can you please tell me the procedure to take backup of old server and restore it to my new server. i tried to understand your buil in backup instructions, but not able to understand that.</p>



<a name="1632990"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632990" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632990">(Aug 29 2023 at 14:16)</a>:</h4>
<p>Those links are how you do it.</p>



<a name="1632993"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632993" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632993">(Aug 29 2023 at 14:16)</a>:</h4>
<p>Can you be more specific about what you don't understand?</p>



<a name="1632994"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632994" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632994">(Aug 29 2023 at 14:17)</a>:</h4>
<p>On the old server, either:</p>
<div class="codehilite"><pre><span></span><code># As the zulip user
/home/zulip/deployments/current/manage.py backup

# Or as the &quot;root&quot; user
su zulip -c &#39;/home/zulip/deployments/current/manage.py backup&#39;
</code></pre></div>



<a name="1632997"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632997" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632997">(Aug 29 2023 at 14:23)</a>:</h4>
<p>do i need to take separate backup of postgresql ?</p>



<a name="1632998"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632998" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632998">(Aug 29 2023 at 14:24)</a>:</h4>
<p>No, that will include the database export as well.</p>



<a name="1632999"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1632999" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1632999">(Aug 29 2023 at 14:27)</a>:</h4>
<p>I encourage you to read <a href="https://zulip.readthedocs.io/en/latest/production/export-and-import.html#backups">https://zulip.readthedocs.io/en/latest/production/export-and-import.html#backups</a> thoroughly, since I think all of these questions are answered in there.</p>
<p>If there are parts that are unclear, feel free to ask clarifying questions.</p>



<a name="1633000"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633000" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633000">(Aug 29 2023 at 14:27)</a>:</h4>
<p>Backup done file stored in tmp/</p>



<a name="1633001"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633001" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633001">(Aug 29 2023 at 14:28)</a>:</h4>
<p>Now i have to transfer this file to my new server..!!! <br>
can you please share the command to restore this file to my new server.</p>



<a name="1633002"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633002" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633002">(Aug 29 2023 at 14:29)</a>:</h4>
<p>Have you read <a href="https://zulip.readthedocs.io/en/latest/production/export-and-import.html#restoring-backups">https://zulip.readthedocs.io/en/latest/production/export-and-import.html#restoring-backups</a> ?</p>



<a name="1633003"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633003" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633003">(Aug 29 2023 at 14:32)</a>:</h4>
<p>Backup done file stored in tmp/</p>



<a name="1633004"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633004" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633004">(Aug 29 2023 at 14:32)</a>:</h4>
<p>Now i have to transfer this file to my new server..!!! <br>
can you please share the command to restore this file to my new server.</p>



<a name="1633019"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633019" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633019">(Aug 29 2023 at 15:12)</a>:</h4>
<p>When am trying to restore that backup getting this error <span class="user-mention" data-user-id="12178">@Alex Vandiver</span> </p>
<p>zulip@zulip:~/deployments/current/scripts/setup$ sudo /restore-backup /home/zulip/ <br>
[sudo] password for zulip: <br>
sudo: /restore-backup: command not found<br>
zulip@zulip:~/deployments/current/scripts/setup$</p>
<p>My Backup file is store at /home/zulip/zulip-backup-2023.tar.gz</p>



<a name="1633022"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633022" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633022">(Aug 29 2023 at 15:21)</a>:</h4>
<p>Try:</p>
<div class="codehilite"><pre><span></span><code>sudo /home/zulip/deployments/current/scripts/setup/restore-backup /home/zulip/zulip-backup-2023.tar.gz
</code></pre></div>



<a name="1633023"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633023" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633023">(Aug 29 2023 at 15:21)</a>:</h4>
<p>(please use <a href="https://zulip.com/help/code-blocks">code blocks</a> when pasting in output)</p>



<a name="1633024"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633024" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633024">(Aug 29 2023 at 15:24)</a>:</h4>
<p>However, I'm surprised that you can use <code>sudo</code> to run arbitrary commands as root, from the <code>zulip</code> user.  Did you adjust the sudoers configuration?  That's not how Zulip configures it.</p>



<a name="1633025"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Data%20restoration%20from%20Old%20Zulip%20Server/near/1633025" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Umair Khan Rind <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Data.20restoration.20from.20Old.20Zulip.20Server.html#1633025">(Aug 29 2023 at 15:28)</a>:</h4>
<p>My server working now... Thank you Thank you Thank you so much <span class="user-mention" data-user-id="12178">@Alex Vandiver</span>  You are Hero <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>