<html>
<head><meta charset="utf-8"><title>upgrade-postgresql version mismatch #24192 · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/upgrade-postgresql.20version.20mismatch.20.2324192.html">upgrade-postgresql version mismatch #24192</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1498134"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/upgrade-postgresql%20version%20mismatch%20%2324192/near/1498134" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/upgrade-postgresql.20version.20mismatch.20.2324192.html#1498134">(Jan 27 2023 at 20:10)</a>:</h4>
<p>Posting <a href="https://github.com/zulip/zulip/pull/24192">#24192</a> here for visibility:</p>
<blockquote>
<p>When following <a href="https://zulip.readthedocs.io/en/latest/production/upgrade-or-modify.html#upgrading-the-operating-system">the instructions to upgrade to Ubuntu 22.04</a>, step 4 to run <code>/home/zulip/deployments/current/scripts/setup/upgrade-postgresql
</code> fails, due to a version mismatch.</p>
<p>Specifically (at least on my deployment), <code>upgrade-postgresql</code> upgrades <code>postgres-14</code> to 14.6.1 (<code>14.6-1.pgdg22.04+1</code>), but does not similarly upgrade <code>postgres-client-14</code> and <code>postgres-doc-14</code> (leaving them at <code>14.6-0ubuntu0.22.04.1</code>), meaning that the call to <code>pg_upgradecluster</code> errors out when it notices that <code>pg_dump</code> has a version mismatch.</p>
<p>(I'm guessing when the documentation was written, 14.6.1 wasn't out yet, so the installation step was a no-op, as Postgres 14.6.0 was already installed during the distribution upgrade?)</p>
</blockquote>



<a name="1498260"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/upgrade-postgresql%20version%20mismatch%20%2324192/near/1498260" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/upgrade-postgresql.20version.20mismatch.20.2324192.html#1498260">(Jan 27 2023 at 22:19)</a>:</h4>
<p>Replied there.</p>



<a name="1498376"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/upgrade-postgresql%20version%20mismatch%20%2324192/near/1498376" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/upgrade-postgresql.20version.20mismatch.20.2324192.html#1498376">(Jan 28 2023 at 00:07)</a>:</h4>
<p>Thanks. I feel like there must be something else going on with the system's setup that the user hasn't described.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>