<html>
<head><meta charset="utf-8"><title>changing realm domain · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html">changing realm domain</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1429309"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429309" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429309">(Sep 01 2022 at 20:33)</a>:</h4>
<p>i've changed the external host for my self-hosted zulip instance and now i'm seeing "400 Bad Request" when making requests to the domain</p>



<a name="1429310"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429310" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429310">(Sep 01 2022 at 20:34)</a>:</h4>
<p>it still loads on the old domain (the IP address hasn't changed), so i feel like there's some bit of state hiding somewhere in the data directory</p>



<a name="1429313"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429313" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429313">(Sep 01 2022 at 20:35)</a>:</h4>
<p>when i run the restart-server script i can (temporarily) see a zulip-specific "error 500" page</p>



<a name="1429315"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429315" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429315">(Sep 01 2022 at 20:35)</a>:</h4>
<p>(so i'm fairly confident the 400 Bad Request status is generated from zulip too)</p>



<a name="1429321"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429321" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429321">(Sep 01 2022 at 20:36)</a>:</h4>
<p>any suggestions about what might be going on or how to fix it?</p>



<a name="1429325"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429325" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429325">(Sep 01 2022 at 20:42)</a>:</h4>
<p>ok it seems to be a problem with the realm domain, how do i change the realm domain? the <code>change_realm_subdomain</code> command does not seem to handle this well</p>



<a name="1429337"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429337" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429337">(Sep 01 2022 at 20:52)</a>:</h4>
<p>and now i've somehow totally broken it :(</p>



<a name="1429378"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429378" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429378">(Sep 01 2022 at 21:22)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> any suggestions? seems like i've wedged my install</p>



<a name="1429406"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429406" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429406">(Sep 01 2022 at 21:54)</a>:</h4>
<p><span class="user-mention" data-user-id="24661">@Adam B</span> I don't think one can readily help without more detail. Assuming you were not using subdomains on your server, probably you want to undo the <code>change_realm_subdomain</code> and instead change the <code>EXTERNAL_HOST</code> setting for your server and then restart it.</p>



<a name="1429407"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429407" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429407">(Sep 01 2022 at 21:55)</a>:</h4>
<p>I'd be curious what documentation you looked at for making this change.</p>



<a name="1429483"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429483" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429483">(Sep 02 2022 at 00:03)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> is there documentation anywhere for how to undo a change_realm_subdomain for the root domain?</p>



<a name="1429486"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429486" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429486">(Sep 02 2022 at 00:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/31-production-help/topic/changing.20realm.20domain/near/1429407">said</a>:</p>
<blockquote>
<p>I'd be curious what documentation you looked at for making this change.</p>
</blockquote>
<p>I read through some old issues and commit messages and looked at <code>app:managepy help</code></p>



<a name="1429629"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/changing%20realm%20domain/near/1429629" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam B <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/changing.20realm.20domain.html#1429629">(Sep 02 2022 at 16:37)</a>:</h4>
<p>alright i figured this out, it turns out that the way i was running app:managepy was doing some strange argument escaping</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>