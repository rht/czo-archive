<html>
<head><meta charset="utf-8"><title>Bad Request (404) · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html">Bad Request (404)</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="107523"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107523" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107523">(Dec 27 2016 at 21:19)</a>:</h4>
<p>Hi all,</p>
<p>I'm trying to get a zulip server up and running in an Ubuntu Server 16.04 virtual machine. My host OS is Arch Linux. After some effort, I've been able to follow these instructions: <a href="https://zulip.readthedocs.io/en/latest/prod-install.html" target="_blank" title="https://zulip.readthedocs.io/en/latest/prod-install.html">https://zulip.readthedocs.io/en/latest/prod-install.html</a> nearly to the end.</p>
<p>My issue arises when running ./manage.py generate_realm_creation_link. When I try to connect to the generated url, I simply get a page that says "Bad Request (404)".</p>
<p>Any help is appreciated. Thanks for all of your work on this project!</p>



<a name="107526"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107526" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Hönig <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107526">(Dec 27 2016 at 21:20)</a>:</h4>
<p>Hi <span class="user-mention" data-user-email="oliverevans96@gmail.com">@Oliver Evans</span> can you send the link the program asks you to open?</p>



<a name="107528"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107528" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Hönig <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107528">(Dec 27 2016 at 21:22)</a>:</h4>
<p>Is your outgoing port for Zulip 443 (Https)? I once had a similar issue because I port-forwarded the internal 443 port to some different external port.</p>



<a name="107540"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107540" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107540">(Dec 27 2016 at 21:41)</a>:</h4>
<p><span class="user-mention" data-user-email="robhoenig@gmail.com">@Robert Hönig</span> The link is <a href="https://zulipvm/create_realm/3f209879d20d1b44ba3da633b7d33e31f6743663" target="_blank" title="https://zulipvm/create_realm/3f209879d20d1b44ba3da633b7d33e31f6743663">https://zulipvm/create_realm/3f209879d20d1b44ba3da633b7d33e31f6743663</a>.</p>
<p>On the VM guest, in /etc/zulip/settings.py, I have EXTERNAL_HOST=zulipvm.</p>
<p>On my VM host, in /etc/hosts/ I have: 192.168.56.2  zulipvm<br>
192.168.56.2 is the IP address of the VM.</p>
<p>I'm not sure how to answer your second question. How can I determine the outgoing port for Zulip?</p>



<a name="107547"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107547" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107547">(Dec 27 2016 at 21:43)</a>:</h4>
<p>I suspect the issue is that your server doesn't have a valid SSL cert for its hostname</p>



<a name="107549"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107549" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107549">(Dec 27 2016 at 21:44)</a>:</h4>
<p>You could try connecting over http but I'd recommend using letsencrypt to get a free real SSL cert for your host</p>



<a name="107551"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107551" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107551">(Dec 27 2016 at 21:44)</a>:</h4>
<p>I think you're probably right. I don't have a good understanding of SSL cerfication. When I was trying letsencrypt, I wasn't sure what to use as my hostname. Should I just use 'zulipvm'?</p>



<a name="107552"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107552" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107552">(Dec 27 2016 at 21:45)</a>:</h4>
<p>Since I couldn't figure out the letsencrypt instructions, so far I've just proceeded with the self-signed certificate instructions</p>



<a name="107553"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107553" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107553">(Dec 27 2016 at 21:47)</a>:</h4>
<p>I'm wondering what I should use for my domain name, rather, not host name, when using certbot in letsencrypt</p>



<a name="107558"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107558" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107558">(Dec 27 2016 at 21:53)</a>:</h4>
<p>When trying 'zulipvm' as my domain name, I get:</p>
<div class="codehilite"><pre><span></span>An unexpected error occurred:
The request message was malformed :: DNS name does not have enough labels
Please see the logfiles in /var/log/letsencrypt for more details.
</pre></div>


<p>With the following log file:<br>
<a href="/user_uploads/2/fb/X3Ienom6B7irkgMpG98ejz91/letsencrypt.log" target="_blank" title="letsencrypt.log">letsencrypt.log</a> </p>
<p>Thanks!<br>
Oliver</p>



<a name="107600"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107600" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107600">(Dec 27 2016 at 22:08)</a>:</h4>
<p>you need an actual domain</p>



<a name="107601"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107601" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107601">(Dec 27 2016 at 22:08)</a>:</h4>
<p>So you may need to spend $10 to buy one if you don't already own a domain</p>



<a name="107610"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107610" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107610">(Dec 27 2016 at 22:16)</a>:</h4>
<p>So assuming that I'm going to proceed for now with the self-signed certificate, do you have any idea why this error might be occurring? </p>



<a name="107617"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107617" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107617">(Dec 27 2016 at 22:18)</a>:</h4>
<p>I think the problem actually is caused by your weird DNS/SSL setup, though it's not clkear</p>



<a name="107619"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/107619" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#107619">(Dec 27 2016 at 22:19)</a>:</h4>
<p>Any thought on where I might begin to investigate?</p>



<a name="110662"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/110662" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#110662">(Dec 30 2016 at 20:12)</a>:</h4>
<p>As it turns out, the issue was that I needed to add 'zulipvm' and the ip of the virtual machine to the ALLOWED_HOSTS section of settings.py.</p>



<a name="110663"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/110663" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Oliver Evans <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#110663">(Dec 30 2016 at 20:12)</a>:</h4>
<p>Thanks for the help!</p>



<a name="110669"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Bad%20Request%20%28404%29/near/110669" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Bad.20Request.20.28404.29.html#110669">(Dec 30 2016 at 20:17)</a>:</h4>
<p>ahh, makes sense.  Am actually hoping to make that work automatically</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>