<html>
<head><meta charset="utf-8"><title>process-fts-updates startup failure · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html">process-fts-updates startup failure</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1607074"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607074" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607074">(Jul 10 2023 at 17:47)</a>:</h4>
<p>Hello,<br>
users are not able to connect to zulip server. process-fts-updates  face FATAL error <br>
 supervisorctl status<br>
go-camo                                                         RUNNING   pid 1043, uptime 0:24:56<br>
<strong>process-fts-updates                                             FATAL     Exited too quickly (process log may have details)</strong><br>
smokescreen                                                     RUNNING   pid 4809, uptime 0:15:08<br>
zulip-django                                                    RUNNING   pid 1045, uptime 0:24:56<br>
zulip-tornado                                                   RUNNING   pid 1046, uptime 0:24:56<br>
zulip-workers:zulip_events_deferred_work                        RUNNING   pid 1050, uptime 0:24:56<br>
zulip-workers:zulip_events_digest_emails                        RUNNING   pid 1051, uptime 0:24:56<br>
zulip-workers:zulip_events_email_mirror                         RUNNING   pid 1052, uptime 0:24:56<br>
zulip-workers:zulip_events_email_senders                        RUNNING   pid 1057, uptime 0:24:56<br>
zulip-workers:zulip_events_embed_links                          RUNNING   pid 1053, uptime 0:24:56<br>
zulip-workers:zulip_events_embedded_bots                        RUNNING   pid 1054, uptime 0:24:56<br>
zulip-workers:zulip_events_error_reports                        RUNNING   pid 1055, uptime 0:24:56<br>
zulip-workers:zulip_events_invites                              RUNNING   pid 1056, uptime 0:24:56<br>
zulip-workers:zulip_events_missedmessage_emails                 RUNNING   pid 1058, uptime 0:24:56<br>
zulip-workers:zulip_events_missedmessage_mobile_notifications   RUNNING   pid 1059, uptime 0:24:56<br>
zulip-workers:zulip_events_outgoing_webhooks                    RUNNING   pid 1060, uptime 0:24:56<br>
zulip-workers:zulip_events_user_activity                        RUNNING   pid 1061, uptime 0:24:56<br>
zulip-workers:zulip_events_user_activity_interval               RUNNING   pid 1062, uptime 0:24:56<br>
zulip-workers:zulip_events_user_presence                        RUNNING   pid 1063, uptime 0:24:56<br>
zulip_deliver_scheduled_emails                                  STARTING<br>
zulip_deliver_scheduled_messages                                RUNNING   pid 10313, uptime 0:00:02</p>



<a name="1607080"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607080" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607080">(Jul 10 2023 at 17:49)</a>:</h4>
<p><a href="#narrow/stream/31-production-help/topic/process-fts-updates.20startup.20failure/near/1607074">A message</a> was moved here from <a class="stream-topic" data-stream-id="9" href="/#narrow/stream/9-issues/topic/Sending.20a.20message.20after.20clicking.20the.20main.20stream.20name">#issues &gt; Sending a message after clicking the main stream name</a> by <span class="user-mention silent" data-user-id="12178">Alex Vandiver</span>.</p>



<a name="1607087"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607087" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607087">(Jul 10 2023 at 17:51)</a>:</h4>
<p><span class="user-mention" data-user-id="24660">@Hicham Hajj-Hassan</span>: Did you change anything about the server recently?</p>
<p>Can you show (in a <a href="https://zulip.com/help/code-blocks">code block</a>):</p>
<div class="codehilite"><pre><span></span><code>tail -n100 /var/log/zulip/fts-updates.log
</code></pre></div>



<a name="1607089"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607089" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607089">(Jul 10 2023 at 17:52)</a>:</h4>
<p>Hello Alex,<br>
Nothing changed recently.<br>
Please find below the output of the tail command</p>
<p>root@sv03:/home/hhajjhassan# tail -n100 /var/log/zulip/fts-updates.log<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>Traceback (most recent call last):<br>
  File "/usr/local/bin/process_fts_updates", line 204, in &lt;module&gt;<br>
    conn = psycopg2.connect(connection_factory=None, **pg_args)<br>
  File "/usr/lib/python3/dist-packages/psycopg2/__init__.py", line 122, in connect<br>
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)<br>
psycopg2.OperationalError: connection to server on socket "/var/run/postgresql/.s.PGSQL.5432" failed: FATAL:  le rôle « zulip » n'existe pas</p>
<p>root@sv03:/home/hhajjhassan#</p>



<a name="1607090"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607090" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607090">(Jul 10 2023 at 17:55)</a>:</h4>
<p>Looks like something reset data on your PostgreSQL instance.  Did you upgrade anything about the database recently?</p>



<a name="1607091"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607091" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607091">(Jul 10 2023 at 17:55)</a>:</h4>
<p>Can you show the output from:</p>
<div class="codehilite"><pre><span></span><code>pg_lsclusters
</code></pre></div>



<a name="1607092"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607092" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607092">(Jul 10 2023 at 17:56)</a>:</h4>
<p>no upgrades done in the last 2 weeks</p>



<a name="1607093"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607093" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607093">(Jul 10 2023 at 17:57)</a>:</h4>
<p>root@sv03:/home/hhajjhassan# pg_lsclusters<br>
Ver Cluster Port Status Owner    Data directory              Log file<br>
14  main    5432 down   postgres /var/lib/postgresql/14/main /var/log/postgresql/postgresql-%Y-%m-%d_%H%M%S.log<br>
15  main    5432 online postgres /var/lib/postgresql/15/main /var/log/postgresql/postgresql-15-main.log</p>



<a name="1607095"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607095" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607095">(Jul 10 2023 at 17:57)</a>:</h4>
<p>Looks like someone upgraded your PostgreSQL.</p>



<a name="1607096"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607096" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607096">(Jul 10 2023 at 17:58)</a>:</h4>
<p>Maybe Os update? <br>
Any suggestion?</p>



<a name="1607097"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607097" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607097">(Jul 10 2023 at 17:59)</a>:</h4>
<p>OS updates wouldn't upgrade your major PostgreSQL version by themselves.</p>
<p>For reference, our official PostgreSQL upgrade instructions are <a href="https://zulip.readthedocs.io/en/latest/production/upgrade.html#upgrading-postgresql">here</a>.</p>



<a name="1607098"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607098" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607098">(Jul 10 2023 at 17:59)</a>:</h4>
<p>To get out of your current situation first, you can try stopping the PostgreSQL 15 cluster and starting the version 14.</p>



<a name="1607099"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607099" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607099">(Jul 10 2023 at 18:00)</a>:</h4>
<div class="codehilite"><pre><span></span><code>pg_ctlcluster 15 main stop
pg_ctlcluster 14 main start
</code></pre></div>



<a name="1607101"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607101" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607101">(Jul 10 2023 at 18:01)</a>:</h4>
<p>Working now. Thanks</p>



<a name="1607103"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607103" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607103">(Jul 10 2023 at 18:02)</a>:</h4>
<p>Can you show your <code>/etc/zulip/zulip.conf</code>, out of curiosity?  And what version of Zulip is this?</p>



<a name="1607104"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607104" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607104">(Jul 10 2023 at 18:02)</a>:</h4>
<p>this will be permanent or the error will repeat again after restart?</p>



<a name="1607105"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607105" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607105">(Jul 10 2023 at 18:02)</a>:</h4>
<p>ok</p>



<a name="1607108"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607108" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607108">(Jul 10 2023 at 18:03)</a>:</h4>
<p>/etc/zulip/zulip.conf# This file is managed by Puppet.</p>
<p>[machine]<br>
puppet_classes = zulip::profile::standalone, zulip::profile::smokescreen<br>
deploy_type = voyager</p>
<p>[rabbitmq]<br>
nodename = zulip@localhost</p>
<p>[postgresql]<br>
version = 14</p>
<p>[http_proxy]<br>
host = 127.0.0.1<br>
port = 4750</p>



<a name="1607109"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607109" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607109">(Jul 10 2023 at 18:03)</a>:</h4>
<p>I will check and share  the config in puppet</p>



<a name="1607110"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607110" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607110">(Jul 10 2023 at 18:04)</a>:</h4>
<p>Is this your own puppet which manages that file?</p>



<a name="1607111"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607111" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607111">(Jul 10 2023 at 18:04)</a>:</h4>
<p>yes</p>



<a name="1607112"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607112" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607112">(Jul 10 2023 at 18:04)</a>:</h4>
<p>I suspect your own puppet may have installed the new PostgreSQL.</p>



<a name="1607114"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607114" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607114">(Jul 10 2023 at 18:04)</a>:</h4>
<p>But you can check that by looking at your own puppet logs and/or /var/log/apt/</p>



<a name="1607115"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607115" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607115">(Jul 10 2023 at 18:05)</a>:</h4>
<p>ok</p>



<a name="1607116"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607116" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607116">(Jul 10 2023 at 18:06)</a>:</h4>
<p>In order to make sure this doesn't regress again, my suggestion would be to <code>apt-get purge</code> the PostgreSQL 15, then do our PostgreSQL upgrade steps.  But also check what of your tooling might be messing with PostgreSQL, because Zulip fundamentally believes it's in charge of managing that, and other things messing around with it are only going to break things.</p>



<a name="1607143"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607143" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607143">(Jul 10 2023 at 18:36)</a>:</h4>
<p>process-fts-updates                                             FATAL     Exited too quickly (process log may have details)</p>



<a name="1607144"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607144" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hicham Hajj-Hassan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607144">(Jul 10 2023 at 18:37)</a>:</h4>
<p>still process-fts-updates face FATAL error and is not running. Is this normal?</p>



<a name="1607468"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607468" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607468">(Jul 11 2023 at 04:57)</a>:</h4>
<p><span class="user-mention" data-user-id="24660">@Hicham Hajj-Hassan</span>: After you switched back to PostgreSQL 14?  No, that's not normal.  you should look at the log files, as it suggests, in <code>/var/log/zulip/fts-updates.log</code>.</p>



<a name="1607469"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/process-fts-updates%20startup%20failure/near/1607469" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/process-fts-updates.20startup.20failure.html#1607469">(Jul 11 2023 at 04:58)</a>:</h4>
<p>You may just have to start it again -- as <code>zulip</code>:</p>
<div class="codehilite"><pre><span></span><code>/home/zulip/deployments/current/restart-server
</code></pre></div>
<p>...should restart everything to make sure it come up cleanly.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>