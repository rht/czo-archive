<html>
<head><meta charset="utf-8"><title>Multiple ldap backends · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html">Multiple ldap backends</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="836877"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/836877" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francesco <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#836877">(Mar 23 2020 at 14:21)</a>:</h4>
<p>Hello, would it be possible to setup multiple LDAP backends for authentication?<br>
In my specific case it would be an OpenLDAP and an ActiveDirectory.<br>
If yes, how would this work? In other systems it works be trying each one until a username matches.</p>



<a name="837004"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/837004" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#837004">(Mar 23 2020 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-id="15289">@Francesco</span> I believe you need to use <a href="https://django-auth-ldap.readthedocs.io/en/latest/multiconfig.html" target="_blank" title="https://django-auth-ldap.readthedocs.io/en/latest/multiconfig.html">https://django-auth-ldap.readthedocs.io/en/latest/multiconfig.html</a>, which requires some code changes to <code>zproject/backends.py</code>, to do that.</p>



<a name="837005"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/837005" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#837005">(Mar 23 2020 at 17:46)</a>:</h4>
<p>This is unfortunately a limitation with the third-party LDAP library we're using.</p>



<a name="837007"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/837007" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#837007">(Mar 23 2020 at 17:46)</a>:</h4>
<p>Can you talk a bit about your use case?  Is the intent to host multiple realms each with a different LDAP configuration, or something else?</p>



<a name="837020"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/837020" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francesco <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#837020">(Mar 23 2020 at 17:51)</a>:</h4>
<p>The organization has the list of users spread over two ldaps (one activediretory and one openldap). So to allow users from both to join both has to be configured for authentication.</p>



<a name="837024"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/837024" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francesco <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#837024">(Mar 23 2020 at 17:52)</a>:</h4>
<p>Since asking here I found that I could join both on openldap with <a href="https://lsc-project.org/" target="_blank" title="https://lsc-project.org/">https://lsc-project.org/</a></p>



<a name="837027"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/837027" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francesco <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#837027">(Mar 23 2020 at 17:52)</a>:</h4>
<p>If it works it's a good solution for my case.</p>



<a name="837347"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/837347" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#837347">(Mar 23 2020 at 20:16)</a>:</h4>
<p>Cool, thanks for sharing your solution!</p>



<a name="838125"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/838125" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#838125">(Mar 24 2020 at 11:07)</a>:</h4>
<p>Ohh, the multiconfig trick is actually pretty cool too - doesn't this look like it could be used to reasonably easily implement separate per-realm ldap configurations? <span class="user-mention" data-user-id="7">@Tim Abbott</span> And that feature has been asked about quite a bit I believe.</p>



<a name="838395"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/838395" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#838395">(Mar 24 2020 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> well, it looks like Zulip would need to include an LDAP server to do that?</p>



<a name="838396"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/838396" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#838396">(Mar 24 2020 at 17:48)</a>:</h4>
<p>For per-realm LDAP configurations, there's a path forward that involves changes to django-auth-ldap, some preparatory work of which was merged upstream (though the project currently seems to not be actively maintained)</p>



<a name="838463"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/838463" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#838463">(Mar 24 2020 at 18:32)</a>:</h4>
<p>I meant using the multiple class approach from the django-auth-ldap docs. We could generate a backend class with the appropriate configuration for each realm (and each backend class would <code>return None</code> for auth attempts to a realm other than the one assigned to the class).</p>



<a name="838549"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/838549" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#838549">(Mar 24 2020 at 19:48)</a>:</h4>
<p>Hmm, maybe; I guess we could generate the class based on whether settings of the appropriate names exist?  Might be a bit hacky but could be doable, yeah.</p>



<a name="844455"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/844455" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Francesco <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#844455">(Mar 31 2020 at 06:43)</a>:</h4>
<p>Just a quick update: using openldap pass-through authentication I was able to use accounts from OpenLDAP and from ActiveDiretory in Zulip with one LDAP Backend configured.</p>



<a name="845085"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multiple%20ldap%20backends/near/845085" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multiple.20ldap.20backends.html#845085">(Mar 31 2020 at 23:41)</a>:</h4>
<p>Great, thanks for the confirmation!</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>