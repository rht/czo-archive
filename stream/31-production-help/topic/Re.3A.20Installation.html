<html>
<head><meta charset="utf-8"><title>Re: Installation · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html">Re: Installation</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="929684"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929684" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929684">(Jul 09 2020 at 18:17)</a>:</h4>
<p>Hi everyone.  I've had a problem with installing Zulip.   I presume I install onto a blank unconfigured system. The installer gets as far as trying to configure DNS, but claims no valid IP address found.  I was assuming the IP address of my VPS was the one to use at my Registrar</p>
<p>Does Zulip also need a webserver somewhere ? I was expecting the installer to be 100% self-contained.</p>



<a name="929688"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929688" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929688">(Jul 09 2020 at 18:19)</a>:</h4>
<p>ie - (in my mind) Until Zulip finishes the install, you'd have nothing to point at, which is why I thought Zulip was going to create an apache / webserver instance</p>



<a name="929716"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929716" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929716">(Jul 09 2020 at 18:37)</a>:</h4>
<p><span class="user-mention" data-user-id="16484">@Christopher Wainwright</span> Could you copypaste the full error message and some of the log around it?</p>



<a name="929827"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929827" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929827">(Jul 09 2020 at 19:34)</a>:</h4>
<p>hi,  I was looking a bit closer at my error messages.  I presumed that I would be installing the SSL certificate after installation - but it looks like it was failing on something to do with SSL.   Do I need to install any SSL stuff before running the zulip installer ?   The documentation makes me belive I do that AFTER install zulip</p>



<a name="929829"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929829" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929829">(Jul 09 2020 at 19:36)</a>:</h4>
<p>I've tried installing something from Certbot, which fails (unsurprisingly), because as yet I don't have a webserver service up and running.</p>



<a name="929835"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929835" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929835">(Jul 09 2020 at 19:41)</a>:</h4>
<p>Few lines from the installer are below.     [to be fair the domain is newly setup]  I used my IP address for an A record at my registrar.</p>
<hr>
<div class="codehilite"><pre><span></span><code>A   quick-chat.co.uk    3600    213.136.86.119  Edit    Delete
A   www.quick-chat.co....   3600    213.136.86.119  Edit    Delete
</code></pre></div>


<hr>
<ul>
<li>/usr/local/sbin/certbot-auto --os-packages-only --quiet</li>
<li>/usr/local/sbin/certbot-auto certonly --standalone -d <a href="http://quick-chat.co.uk">quick-chat.co.uk</a> -m <a href="mailto:zulip@online24x7.co.uk">zulip@online24x7.co.uk</a> --force-interactive --no-eff-email<br>
Saving debug log to /var/log/letsencrypt/letsencrypt.log<br>
Plugins selected: Authenticator standalone, Installer None<br>
Obtaining a new certificate<br>
Performing the following challenges:<br>
http-01 challenge for <a href="http://quick-chat.co.uk">quick-chat.co.uk</a><br>
Cleaning up challenges<br>
Problem binding to port 80: Could not bind to IPv4 or IPv6.</li>
</ul>
<p>Zulip installation failed (exit code 1)!</p>



<a name="929839"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929839" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929839">(Jul 09 2020 at 19:45)</a>:</h4>
<p><span class="user-mention" data-user-id="16484">@Christopher Wainwright</span> are you running the 2.1.7 installer or the one on master?</p>



<a name="929842"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929842" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929842">(Jul 09 2020 at 19:46)</a>:</h4>
<p>2.1.7</p>



<a name="929844"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929844" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929844">(Jul 09 2020 at 19:47)</a>:</h4>
<p>Do you have another webserver running on the host?  That's what that error indicates.</p>



<a name="929845"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929845" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929845">(Jul 09 2020 at 19:47)</a>:</h4>
<p>(That <code>certbot</code> can't bind to port 80 to get you a certificate)</p>



<a name="929850"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929850" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929850">(Jul 09 2020 at 19:49)</a>:</h4>
<p>?? who knows.   It was a default setup this afternoon !!   The Zulip installer has run a few times, so that's probably setup apache (if thats what it uses)</p>



<a name="929851"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929851" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929851">(Jul 09 2020 at 19:50)</a>:</h4>
<p>It was desperation trying certbot halfway through running zulip's installer</p>



<a name="929856"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929856" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929856">(Jul 09 2020 at 19:53)</a>:</h4>
<p>We use <code>nginx</code>.  You can try <code>service nginx stop</code> and rerunning the installer in case this is an idempotency issue.</p>



<a name="929862"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929862" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929862">(Jul 09 2020 at 19:55)</a>:</h4>
<p>Obtaining a new certificate<br>
Performing the following challenges:<br>
http-01 challenge for <a href="http://quick-chat.co.uk">quick-chat.co.uk</a><br>
Cleaning up challenges<br>
Problem binding to port 80: Could not bind to IPv4 or IPv6.</p>
<p>Zulip installation failed (exit code 1)!</p>



<a name="929886"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929886" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929886">(Jul 09 2020 at 20:03)</a>:</h4>
<p>does my domain need to be hosted somewhere else first ?  currently I don't see how your installer was able to get an IP address - the domain isn't pingable.  Nowhere was I asked to enter an IP address. so from what I can imagine, the installer at this point should be clueless as far as an IP address is concerned.   Without an IP address, what does it have to bind to port 80?</p>



<a name="929888"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929888" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929888">(Jul 09 2020 at 20:04)</a>:</h4>
<p>If you want to use <code>--certbot</code>, Certbot requires your server to be on the public Internet to issue an SSL cert.</p>



<a name="929889"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929889" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929889">(Jul 09 2020 at 20:04)</a>:</h4>
<p>If your server isn't, you can use the <code>--self-signed-cert</code> (don't quote me on the name) option instead.</p>



<a name="929896"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929896" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929896">(Jul 09 2020 at 20:07)</a>:</h4>
<p>My server is on the public internet, with an IP address. </p>
<p>But how does Certbot know where to look ?  My url <a href="http://quick-chat.co.uk">quick-chat.co.uk</a> isn't going to resolve until its hosted somewhere.  My understanding was that zulip became the hosting platform.</p>



<a name="929903"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929903" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929903">(Jul 09 2020 at 20:09)</a>:</h4>
<p>........ or will it all work in a few hours time once DNS propagates ?</p>



<a name="929906"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929906" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929906">(Jul 09 2020 at 20:11)</a>:</h4>
<p>If <code>quick-chat.co.uk</code> doesn't point to your server in currently propagated DNS, certbot can't work.  So if DNS hasn't propagated yet, that would cause the problem you describe.</p>



<a name="929932"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929932" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929932">(Jul 09 2020 at 20:16)</a>:</h4>
<p>Ok, please can I check that I've done my A records right.  I usually just add a nameserver but can't as I have no hosting platform this time.</p>
<p>A   <a href="http://quick-chat.co.uk">quick-chat.co.uk</a>    3600    213.136.86.119  Edit    Delete<br>
A   <a href="http://www.quick-chat.co">www.quick-chat.co</a>....   3600    213.136.86.119  Edit    Delete</p>
<p>where my new VPS is at  213.136.86.119.</p>
<hr>
<p>So if the above propagates, will the installer take care of everything inc the SSL Cert setup via certbot ?</p>



<a name="929949"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929949" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929949">(Jul 09 2020 at 20:21)</a>:</h4>
<p>I don't have time to help debug your DNS setup, maybe others do.</p>



<a name="929952"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/929952" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#929952">(Jul 09 2020 at 20:24)</a>:</h4>
<p>Okay thanks for your help.  I'll wait a few hours.  I suspect that most installations involve DNS changes so if it does fix it, I'll suggest it for the documentation.</p>



<a name="930316"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Re%3A%20Installation/near/930316" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christopher Wainwright <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Re.3A.20Installation.html#930316">(Jul 10 2020 at 02:40)</a>:</h4>
<p>The documentation is non-existent on what zulip is expecting DNS wise - I got my domain working in 15 or 20 minutes - but pointed elsewhere. The cert-bot feature definitely doesn't work in the currently documented method for installation.</p>
<p>I'm not doing anything fancy here - just a plain vanilla install</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>