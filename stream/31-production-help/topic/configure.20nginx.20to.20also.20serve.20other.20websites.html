<html>
<head><meta charset="utf-8"><title>configure nginx to also serve other websites · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html">configure nginx to also serve other websites</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="811503"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811503" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811503">(Jan 24 2020 at 16:24)</a>:</h4>
<p>So I installed zulip with the installation script.</p>



<a name="811504"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811504" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811504">(Jan 24 2020 at 16:27)</a>:</h4>
<p>since nginx has modified /etc/nginx/nginx.conf to serve only zulip</p>



<a name="811505"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811505" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811505">(Jan 24 2020 at 16:28)</a>:</h4>
<p>I need it serve other websites on my server as well.</p>



<a name="811506"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811506" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811506">(Jan 24 2020 at 16:28)</a>:</h4>
<p>whenever I add another website to serve by nginx, zulip domain stop working.</p>



<a name="811507"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811507" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811507">(Jan 24 2020 at 16:30)</a>:</h4>
<p>We don't support running multiple websites on the zulip server. It's meant to be run on a separate server (or in docker).</p>



<a name="811508"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811508" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811508">(Jan 24 2020 at 16:30)</a>:</h4>
<p>zulip has <a href="http://zulip.example.com" target="_blank" title="http://zulip.example.com">zulip.example.com</a> with a similar named <br>
certificates</p>



<a name="811509"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811509" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811509">(Jan 24 2020 at 16:30)</a>:</h4>
<p><span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> I tried getting Zulip to work with docker for over 3 days now</p>



<a name="811510"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811510" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811510">(Jan 24 2020 at 16:31)</a>:</h4>
<p>the reverse proxy config was just not working for me</p>



<a name="811511"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811511" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811511">(Jan 24 2020 at 16:31)</a>:</h4>
<p>that is why installed it on the host instead of docker</p>



<a name="811512"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811512" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811512">(Jan 24 2020 at 16:31)</a>:</h4>
<p><a href="https://github.com/zulip/docker-zulip/wiki/Proxying-via-nginx-on-host-machine" target="_blank" title="https://github.com/zulip/docker-zulip/wiki/Proxying-via-nginx-on-host-machine">https://github.com/zulip/docker-zulip/wiki/Proxying-via-nginx-on-host-machine</a></p>



<a name="811513"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811513" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811513">(Jan 24 2020 at 16:32)</a>:</h4>
<p>this config for nginx was not working for me</p>



<a name="811514"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811514" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811514">(Jan 24 2020 at 16:32)</a>:</h4>
<p>What was the issue? Perhaps it's worth investigating if we have bugs in that documentation</p>



<a name="811515"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811515" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811515">(Jan 24 2020 at 16:34)</a>:</h4>
<p>I posted about it in this group a few days back.</p>



<a name="811516"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811516" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811516">(Jan 24 2020 at 16:34)</a>:</h4>
<p>I was getting 502 and proxy errors with it</p>



<a name="811517"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811517" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811517">(Jan 24 2020 at 16:34)</a>:</h4>
<p>If you would scroll just a little up, you would see the screenshots</p>



<a name="811518"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811518" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811518">(Jan 24 2020 at 16:36)</a>:</h4>
<p>I  also asked help for a similar apache based reverse proxy configuration as well, since nginx was not  being useful and I was also using Apache for other services.</p>



<a name="811519"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811519" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811519">(Jan 24 2020 at 16:36)</a>:</h4>
<p>I was told to contribute the apache configuration instead</p>



<a name="811520"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811520" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811520">(Jan 24 2020 at 16:36)</a>:</h4>
<blockquote>
<p>What was the issue? Perhaps it's worth investigating if we have bugs in that documentation</p>
</blockquote>
<p>502 bad gateway</p>



<a name="811522"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811522" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811522">(Jan 24 2020 at 17:02)</a>:</h4>
<p>Can you post relevant part of nginx logs? That should make it easier for someone to see if they know how to help with whatever the issue is.</p>



<a name="811570"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/811570" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#811570">(Jan 24 2020 at 19:59)</a>:</h4>
<p>Yeah, we're not really able to provide volunteer help with issues where the report has no clarity as to what the actual problem was, just "it didn't work".</p>



<a name="812264"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812264" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812264">(Jan 27 2020 at 06:55)</a>:</h4>
<p>I am preparing a detailed issue so that you might be able to help with that.</p>



<a name="812265"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812265" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812265">(Jan 27 2020 at 06:55)</a>:</h4>
<p>With configuration pastes  and  logs</p>



<a name="812271"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812271" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812271">(Jan 27 2020 at 07:23)</a>:</h4>
<h3>1. Cloned the default docker-zulip repository</h3>
<h3>2. This is the git diff</h3>
<div class="codehilite"><pre><span></span>  - masking out the passwords, urls and port numbers for obvious reasons
</pre></div>



<a name="812275"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812275" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812275">(Jan 27 2020 at 07:26)</a>:</h4>
<p>the git diff for the  changes <a href="https://bin.disroot.org/?90efd99914471540#uuAsYxknvjGtBddmuuZzZCaCpzsawLgn4nKzsrEGgZz" target="_blank" title="https://bin.disroot.org/?90efd99914471540#uuAsYxknvjGtBddmuuZzZCaCpzsawLgn4nKzsrEGgZz">https://bin.disroot.org/?90efd99914471540#uuAsYxknvjGtBddmuuZzZCaCpzsawLgn4nKzsrEGgZz</a></p>



<a name="812276"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812276" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812276">(Jan 27 2020 at 07:26)</a>:</h4>
<p>using paste as the diff output is  long</p>



<a name="812277"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812277" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812277">(Jan 27 2020 at 07:27)</a>:</h4>
<h2>3. The  docker-compose.yml file</h2>



<a name="812278"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812278" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812278">(Jan 27 2020 at 07:28)</a>:</h4>
<p><a href="https://bin.disroot.org/?4db746155c7dd905#AsRsuJF7nkt38JjfjpRYLdLpkykBLDCEL14a548SLQA" target="_blank" title="https://bin.disroot.org/?4db746155c7dd905#AsRsuJF7nkt38JjfjpRYLdLpkykBLDCEL14a548SLQA">https://bin.disroot.org/?4db746155c7dd905#AsRsuJF7nkt38JjfjpRYLdLpkykBLDCEL14a548SLQA</a></p>



<a name="812279"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812279" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812279">(Jan 27 2020 at 07:28)</a>:</h4>
<h2>4. The logs after starting up the docker-compose</h2>



<a name="812280"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812280" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812280">(Jan 27 2020 at 07:29)</a>:</h4>
<p><a href="https://bin.disroot.org/?dc0e4de46753f0ee#6PUKKxyAT9gqHB6h5Ltcaym17jiHYNLeVQc6gJK2QjKY" target="_blank" title="https://bin.disroot.org/?dc0e4de46753f0ee#6PUKKxyAT9gqHB6h5Ltcaym17jiHYNLeVQc6gJK2QjKY">https://bin.disroot.org/?dc0e4de46753f0ee#6PUKKxyAT9gqHB6h5Ltcaym17jiHYNLeVQc6gJK2QjKY</a></p>



<a name="812281"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812281" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812281">(Jan 27 2020 at 07:30)</a>:</h4>
<p>so now the compose stack is up and running</p>



<a name="812282"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812282" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812282">(Jan 27 2020 at 07:31)</a>:</h4>
<div class="codehilite"><pre><span></span>$ docker ps
CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS              PORTS                                            NAMES
592b3ea62e22        zulip/zulip-postgresql:10    &quot;docker-entrypoint.s…&quot;   15 minutes ago      Up 15 minutes       5432/tcp                                         docker-zulip_database_1
d1ca5141d58e        redis:alpine                 &quot;docker-entrypoint.s…&quot;   15 minutes ago      Up 15 minutes       6379/tcp                                         docker-zulip_redis_1
5130d84439c9        rabbitmq:3.7.7               &quot;docker-entrypoint.s…&quot;   15 minutes ago      Up 15 minutes       4369/tcp, 5671-5672/tcp, 25672/tcp               docker-zulip_rabbitmq_1
6c8f786f4f9b        memcached:alpine             &quot;docker-entrypoint.s…&quot;   15 minutes ago      Up 15 minutes       11211/tcp                                        docker-zulip_memcached_1
5bd102625864        zulip/docker-zulip:2.1.2-0   &quot;/sbin/entrypoint.sh…&quot;   15 minutes ago      Up 15 minutes       0.0.0.0:p1-&gt;80/tcp, 0.0.0.0:p2-&gt;443/tcp    docker-zulip_zulip_1
</pre></div>



<a name="812283"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812283" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812283">(Jan 27 2020 at 07:32)</a>:</h4>
<p>I'll try to set the reverse proxy with nginx now on port <code>p1</code> and <code>p2</code> which I specified in docker-compose.yml</p>



<a name="812284"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812284" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812284">(Jan 27 2020 at 07:35)</a>:</h4>
<p>For that I am following the instructions given here <a href="https://github.com/zulip/docker-zulip/wiki/Proxying-via-nginx-on-host-machine" target="_blank" title="https://github.com/zulip/docker-zulip/wiki/Proxying-via-nginx-on-host-machine">https://github.com/zulip/docker-zulip/wiki/Proxying-via-nginx-on-host-machine</a></p>



<a name="812296"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812296" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amrish Ilyas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812296">(Jan 27 2020 at 08:02)</a>:</h4>
<blockquote>
<p><a href="https://bin.disroot.org/?4db746155c7dd905#AsRsuJF7nkt38JjfjpRYLdLpkykBLDCEL14a548SLQA" target="_blank" title="https://bin.disroot.org/?4db746155c7dd905#AsRsuJF7nkt38JjfjpRYLdLpkykBLDCEL14a548SLQA">https://bin.disroot.org/?4db746155c7dd905#AsRsuJF7nkt38JjfjpRYLdLpkykBLDCEL14a548SLQA</a></p>
</blockquote>
<p>Thanks for the bin. Now I was at least able to connect to my Zulip docker w/ HTTP (it didn't respond to HTTPS).</p>
<p>Note that <span class="user-mention" data-user-id="14112">@Raju Devidas</span> is omitting the <code>build</code>section in <code>docker-compose.yml</code>, too (see <a href="#narrow/stream/31-production-help/topic/docker-compose.20install/near/811929" title="#narrow/stream/31-production-help/topic/docker-compose.20install/near/811929">here</a>).</p>



<a name="812299"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812299" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812299">(Jan 27 2020 at 08:03)</a>:</h4>
<p><span class="user-mention" data-user-id="14507">@Amrish Ilyas</span> I did the build before hand. Sorry that is not in the logs</p>



<a name="812300"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812300" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812300">(Jan 27 2020 at 08:04)</a>:</h4>
<p>I am not omitting it</p>



<a name="812303"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812303" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812303">(Jan 27 2020 at 08:05)</a>:</h4>
<p>Since I have ran this compose many times already, I did not do the build again as it takes a bit of time</p>



<a name="812308"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812308" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812308">(Jan 27 2020 at 08:22)</a>:</h4>
<p>So added this configuration for the zulip domain to set the reverse proxy</p>



<a name="812310"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812310" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812310">(Jan 27 2020 at 08:29)</a>:</h4>
<div class="codehilite"><pre><span></span>server {
    listen 80;
    server_name zulip.example.com;
    return 301 https://$host$request_uri;  # redirect http to https
}

server {
    listen 443 ssl http2;
    server_name zulip.example.com;

    ssl_certificate     /etc/letsencrypt/live/zulip.example.com/fullchain.pem;  # generate this with `apt install letsencrypt; letsencrypt certonly zulip.yourdomain.com`
    ssl_certificate_key /etc/letsencrypt/live/zulip.example.com/privkey.pem;

    port_in_redirect off;
    proxy_buffering off;
    proxy_http_version 1.1;     # Properly proxy websocket connections
    proxy_read_timeout 300s;    # terminate websockets afer 5min of inactivity
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-Server $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Protocol $scheme;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection &quot;upgrade&quot;;


    location / {
            proxy_pass  https://127.0.0.1:p2;    # Port that docker-zulip is listening on
    }
}
</pre></div>



<a name="812311"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812311" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812311">(Jan 27 2020 at 08:29)</a>:</h4>
<p>after enabling this config I get a <code>502</code></p>



<a name="812312"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812312" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812312">(Jan 27 2020 at 08:30)</a>:</h4>
<p><a href="/user_uploads/2/a1/vbSJV7_E3YFShV1qaHV4D_b4/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/a1/vbSJV7_E3YFShV1qaHV4D_b4/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/a1/vbSJV7_E3YFShV1qaHV4D_b4/pasted_image.png"></a></div>



<a name="812314"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812314" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812314">(Jan 27 2020 at 08:56)</a>:</h4>
<p>so its only the nginx part that I am not being able to solve as the default configurations provided is giving 502</p>



<a name="812315"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812315" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812315">(Jan 27 2020 at 08:57)</a>:</h4>
<p>If I access the  domain with <code>ip:port</code> format I being able to access the login page</p>



<a name="812317"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812317" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812317">(Jan 27 2020 at 08:58)</a>:</h4>
<p><a href="/user_uploads/2/3b/xfg4UxU0mwf27jVvWNmO9e54/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/3b/xfg4UxU0mwf27jVvWNmO9e54/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/3b/xfg4UxU0mwf27jVvWNmO9e54/pasted_image.png"></a></div>



<a name="812352"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812352" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812352">(Jan 27 2020 at 09:47)</a>:</h4>
<p>My current debugging says that it is an SSL issue as it seems</p>



<a name="812361"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812361" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812361">(Jan 27 2020 at 10:01)</a>:</h4>
<p>disable https is true in the compose file</p>



<a name="812364"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812364" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812364">(Jan 27 2020 at 10:16)</a>:</h4>
<h1>I Got it working</h1>



<a name="812365"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812365" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812365">(Jan 27 2020 at 10:16)</a>:</h4>
<h1>I Got it Working</h1>



<a name="812366"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812366" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812366">(Jan 27 2020 at 10:17)</a>:</h4>
<p><span class="user-mention" data-user-id="14507">@Amrish Ilyas</span>  Look forward to my debugging info in a few minutes here.</p>



<a name="812384"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812384" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812384">(Jan 27 2020 at 11:17)</a>:</h4>
<p>In the docker-compose file pasted as a link above.</p>



<a name="812385"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812385" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812385">(Jan 27 2020 at 11:18)</a>:</h4>
<p>remove the disable https line</p>



<a name="812386"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812386" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812386">(Jan 27 2020 at 11:18)</a>:</h4>
<p>and then do the nginx configuration specified above.</p>



<a name="812387"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812387" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812387">(Jan 27 2020 at 11:18)</a>:</h4>
<p>that would make it work.</p>



<a name="812404"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812404" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Bannack <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812404">(Jan 27 2020 at 12:52)</a>:</h4>
<p>Nice. I got it working, too, only thing is I proxied a subdomain to the Zulip container with Apache.<br>
Zulip container is on HTTP only, while Apache takes the HTTPS-requests to a (SSL-certified) subdomain and proxies them to the containers' HTTP port.</p>
<p>Just for reference:</p>
<ul>
<li>Zulip docker install with:<ul>
<li><code>DISABLE_HTTPS: 'True'</code></li>
<li><code>SETTING_USE_X_FORWARDED_HOST: 'True'</code></li>
<li><code>SETTING_ALLOWED_HOSTS: "['*', '0.0.0.0']"</code></li>
<li>self-signed certificate (it's not needed in this setup)</li>
</ul>
</li>
<li>Apache reverse proxy config for the subdomain:</li>
</ul>
<div class="codehilite"><pre><span></span>&lt;VirtualHost subdomain.domain.com:443&gt;
   ServerName subdomain.domain.com
   ServerAdmin admin@domain.com
   ProxyPass / http://subdomain.domain.com:10080/ # Zulip container external HTTP port
   ProxyPassReverse / http://subdomain.domain.com:10080/ # Zulip container external HTTP port
&lt;/VirtualHost&gt;
</pre></div>


<p>The subdomain itself is SSL certified.<br>
--<br>
Now I wonder how in the world you would set up <a href="https://zulip.readthedocs.io/en/latest/production/email-gateway.html" target="_blank" title="https://zulip.readthedocs.io/en/latest/production/email-gateway.html">email integration</a> for a Docker install? It's be especially interesting to address streams by email.</p>



<a name="812405"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812405" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812405">(Jan 27 2020 at 12:54)</a>:</h4>
<blockquote>
<p>Nice. I got it working, too, only thing is I proxied a subdomain to the Zulip container with Apache.<br>
Zulip container is on HTTP only, while Apache takes the HTTPS-requests to a (SSL-certified) subdomain and proxies them to the containers' HTTP port.</p>
<p>Now I wonder how in the world you would set up <a href="https://zulip.readthedocs.io/en/latest/production/email-gateway.html" target="_blank" title="https://zulip.readthedocs.io/en/latest/production/email-gateway.html">email integration</a> for a Docker install? It's be especially interesting to address streams by email.</p>
</blockquote>
<p>I did email setup already</p>



<a name="812406"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812406" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812406">(Jan 27 2020 at 12:54)</a>:</h4>
<p>just set the configs in docker-compose.yml</p>



<a name="812408"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812408" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Bannack <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812408">(Jan 27 2020 at 12:56)</a>:</h4>
<p>I'm talking about incoming email. Can you send email to a particular stream in your docker instance? On a 'real' server, I had to configure postfix for that. Could be that a Docker instance would work with polling, idk yet.</p>



<a name="812432"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812432" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812432">(Jan 27 2020 at 14:17)</a>:</h4>
<blockquote>
<p>I'm talking about incoming email. Can you send email to a particular stream in your docker instance? On a 'real' server, I had to configure postfix for that. Could be that a Docker instance would work with polling, idk yet.</p>
</blockquote>
<p><a href="/user_uploads/2/9d/lY3_OTwLPv0enEkiZVf2Li5k/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/9d/lY3_OTwLPv0enEkiZVf2Li5k/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/9d/lY3_OTwLPv0enEkiZVf2Li5k/pasted_image.png"></a></div>



<a name="812433"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812433" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812433">(Jan 27 2020 at 14:18)</a>:</h4>
<p>In the settings.py there is an option for that</p>



<a name="812446"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812446" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Bannack <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812446">(Jan 27 2020 at 15:24)</a>:</h4>
<p><span class="user-mention" data-user-id="14112">@rajudev</span> Right, and did you succeed? How did you install a polling cron job inside Docker that survives a restart?</p>



<a name="812469"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812469" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812469">(Jan 27 2020 at 17:30)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="14112">rajudev</span> Right, and did you succeed? How did you install a polling cron job inside Docker that survives a restart?</p>
</blockquote>
<p>why do you need that?</p>



<a name="812470"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812470" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812470">(Jan 27 2020 at 17:31)</a>:</h4>
<p>once the container starts, it should start the services configured in its entrypoint as is</p>



<a name="812497"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812497" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amrish Ilyas <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812497">(Jan 27 2020 at 19:47)</a>:</h4>
<p><span class="user-mention" data-user-id="14112">@rajudev</span>  I would think it is needed to have the (very useful) incoming email functionality, i.e. sending emails directly to streams.</p>
<p>I set up email polling, but, every time the container (or the whole server) gets restarted, I need to copy <code>/home/zulip/deployments/current/puppet/zulip/files/cron.d/email-mirror</code>to <code>/etc/cron.d/</code>and restart the services (or, at least, cron) by <code>supervisorctl restart all</code>.</p>



<a name="812570"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/812570" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#812570">(Jan 27 2020 at 23:23)</a>:</h4>
<p>The Docker system doesn't currently have a good way to run the incoming email system; it's one of the reasoning we consider the Docker system to be beta.  <span class="user-mention" data-user-id="52">@Vishnu Ks</span> FYI, that could be a good project to work on soon as you spin up on the Docker system.</p>



<a name="813119"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/813119" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#813119">(Jan 29 2020 at 14:00)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="14112">rajudev</span>  I would think it is needed to have the (very useful) incoming email functionality, i.e. sending emails directly to streams.</p>
<p>I set up email polling, but, every time the container (or the whole server) gets restarted, I need to copy <code>/home/zulip/deployments/current/puppet/zulip/files/cron.d/email-mirror</code>to <code>/etc/cron.d/</code>and restart the services (or, at least, cron) by <code>supervisorctl restart all</code>.</p>
</blockquote>
<p>why dont you set those files via volumes?</p>



<a name="813120"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/configure%20nginx%20to%20also%20serve%20other%20websites/near/813120" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rajudev <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/configure.20nginx.20to.20also.20serve.20other.20websites.html#813120">(Jan 29 2020 at 14:00)</a>:</h4>
<p>I'll be setting this up today or tomorrow, will see if the volume hack works for it</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>