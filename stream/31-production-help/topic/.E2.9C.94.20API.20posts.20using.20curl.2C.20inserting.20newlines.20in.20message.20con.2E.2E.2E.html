<html>
<head><meta charset="utf-8"><title>✔ API posts using curl, inserting newlines in message con... · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20API.20posts.20using.20curl.2C.20inserting.20newlines.20in.20message.20con.2E.2E.2E.html">✔ API posts using curl, inserting newlines in message con...</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1634489"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20API%20posts%20using%20curl%2C%20inserting%20newlines%20in%20message%20con.../near/1634489" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20API.20posts.20using.20curl.2C.20inserting.20newlines.20in.20message.20con.2E.2E.2E.html#1634489">(Sep 01 2023 at 20:41)</a>:</h4>
<p>I'm looking at the example of:</p>
<div class="codehilite"><pre><span></span><code># For stream messages
curl -X POST https://yourZulipDomain.zulipchat.com/api/v1/messages \
    -u BOT_EMAIL_ADDRESS:BOT_API_KEY \
    --data-urlencode type=stream \
    --data-urlencode &#39;to=&quot;Denmark&quot;&#39; \
    --data-urlencode topic=Castle \
    --data-urlencode &#39;content=I come not, friends, to steal away your hearts.&#39;
</code></pre></div>
<p>On the documentation site, I have a few scripts posting this way, but the output could be a lot "prettier" if I knew how to put in a newline, this is probably pretty easy, but I'm just not figuring it out.  As a workaround I'm running several scripts in a row to make several posts with the content I want on each line one script at a time, but that's probably kind of silly.</p>
<p>Theoretically, if I was trying to post...</p>
<blockquote>
<p>I come not, <br>
friends, to steal<br>
away your hearts.</p>
</blockquote>
<p>...instead of...</p>
<blockquote>
<p>I come not, friends, to steal away your hearts.</p>
</blockquote>
<p>...is this something I could do, if I knew how to do it?</p>
<p>I've tried sticking <code>\n</code> or <code>\\n</code> or <code>%0A</code> in there, but I keep getting literal characters, which is probably the intended behavior, and sending multiples of <code>--data-urlencode content=</code> but that only gives me the last one sent.</p>
<p>What's the right way to do this?</p>



<a name="1634490"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20API%20posts%20using%20curl%2C%20inserting%20newlines%20in%20message%20con.../near/1634490" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20API.20posts.20using.20curl.2C.20inserting.20newlines.20in.20message.20con.2E.2E.2E.html#1634490">(Sep 01 2023 at 20:45)</a>:</h4>
<p>This is entirely a shell scripting question, but POSIX shells allow you to write literal newlines within a <code>'single
quoted
string'</code>.</p>



<a name="1634491"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20API%20posts%20using%20curl%2C%20inserting%20newlines%20in%20message%20con.../near/1634491" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20API.20posts.20using.20curl.2C.20inserting.20newlines.20in.20message.20con.2E.2E.2E.html#1634491">(Sep 01 2023 at 20:50)</a>:</h4>
<p>Oh my goodness it was really as easy as just typing literal new lines.  Thanks <span class="user-mention" data-user-id="699">@Anders Kaseorg</span></p>



<a name="1634492"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20API%20posts%20using%20curl%2C%20inserting%20newlines%20in%20message%20con.../near/1634492" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20API.20posts.20using.20curl.2C.20inserting.20newlines.20in.20message.20con.2E.2E.2E.html#1634492">(Sep 01 2023 at 20:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="27440">Steve</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>