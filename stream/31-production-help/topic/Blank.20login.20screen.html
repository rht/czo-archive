<html>
<head><meta charset="utf-8"><title>Blank login screen · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html">Blank login screen</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="55878"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55878" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55878">(Nov 17 2016 at 20:55)</a>:</h4>
<p>I followed all instructions and ran dev server. The Login screen is empty, and I am unable to perform an action. Is everything ok here? Attached a JS console.<a href="/user_uploads/2/3d/C-rBt7piRkNAf8mg70MWvGsP/Screenshot-from-2016-11-17-155103.png" target="_blank" title="Screenshot-from-2016-11-17-155103.png">Screenshot-from-2016-11-17-155103.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/2/3d/C-rBt7piRkNAf8mg70MWvGsP/Screenshot-from-2016-11-17-155103.png" target="_blank" title="Screenshot-from-2016-11-17-155103.png"><img src="/user_uploads/2/3d/C-rBt7piRkNAf8mg70MWvGsP/Screenshot-from-2016-11-17-155103.png"></a></div>



<a name="55879"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55879" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55879">(Nov 17 2016 at 20:56)</a>:</h4>
<p>cool, that looks like you have an empty database</p>



<a name="55880"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55880" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55880">(Nov 17 2016 at 20:56)</a>:</h4>
<p>If you rerun <code>tools/provision.py</code>, it should repopulate it, but I'm a it surprised it didn't already.  Can you check your terminal log for errors?</p>



<a name="55881"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55881" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55881">(Nov 17 2016 at 20:58)</a>:</h4>
<p>Ok. The reason is  <code>./tools/*</code> DB scripts fail if <code>username</code> is <code>user</code>. <code>user</code> is reserved in <code>Postgres</code>. </p>



<a name="55882"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55882" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55882">(Nov 17 2016 at 20:58)</a>:</h4>
<p>Oh, as in your username on the system is <code>user</code>?</p>



<a name="55883"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55883" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55883">(Nov 17 2016 at 20:58)</a>:</h4>
<p>I am documenting all of these <a href="https://paper.dropbox.com/doc/Zulip-GCI-task-feedback-yPn9ynpXBHIFkCVW0gH4x" target="_blank" title="https://paper.dropbox.com/doc/Zulip-GCI-task-feedback-yPn9ynpXBHIFkCVW0gH4x">here</a>.</p>



<a name="55884"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55884" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55884">(Nov 17 2016 at 20:58)</a>:</h4>
<p>sweet!</p>



<a name="55885"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55885" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55885">(Nov 17 2016 at 20:59)</a>:</h4>
<p>Yes :-) weird choice!</p>



<a name="55886"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55886" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55886">(Nov 17 2016 at 20:59)</a>:</h4>
<p>In theory we should be using <code>zulip</code> as the username in those scripts</p>



<a name="55887"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55887" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55887">(Nov 17 2016 at 20:59)</a>:</h4>
<p>Like if you read <code>tools/setup/postgres-init-dev-db</code>, we set USERNAME=zulip</p>



<a name="55888"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55888" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55888">(Nov 17 2016 at 20:59)</a>:</h4>
<p>So I'm wondering if something else is going wrong here</p>



<a name="55889"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55889" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55889">(Nov 17 2016 at 21:00)</a>:</h4>
<p>First place where things falling out is <code>VAGRANTUSERNAME=$(whoami)</code> in <code>postgres-init-dev-db</code></p>



<a name="55890"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55890" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55890">(Nov 17 2016 at 21:00)</a>:</h4>
<p>How are you installing?  Manually, via vagrant?</p>



<a name="55891"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55891" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55891">(Nov 17 2016 at 21:02)</a>:</h4>
<p>I am running on <a href="https://zulip.readthedocs.io/en/latest/install-generic-unix-dev.html#all-systems" target="_blank" title="https://zulip.readthedocs.io/en/latest/install-generic-unix-dev.html#all-systems">ubuntu</a>, I didn't choose <code>vagrant</code>. Probably using <code>vagrant/docker</code> will solve this problem.</p>



<a name="55893"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55893" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55893">(Nov 17 2016 at 21:04)</a>:</h4>
<p>yeah, and your username is <code>user</code>?  Interesting.  I think those lines <code>VAGRANTUSERNAME</code> are not super essential -- primarily all that they do is make e.g. <code>psql zulip</code> work for playing with the database rather than the more specialized <code>manage.py dbshell</code>.</p>



<a name="55894"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55894" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55894">(Nov 17 2016 at 21:05)</a>:</h4>
<p>So I think we could just fix the script by putting those 3 lines that involves VAGRANTUSERNAME inside a conditional to not run if the current username is a reserved username in postgres</p>



<a name="55895"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55895" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55895">(Nov 17 2016 at 21:05)</a>:</h4>
<p>and then you could proceed happily onwards :)</p>



<a name="55896"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55896" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55896">(Nov 17 2016 at 21:07)</a>:</h4>
<p>Second place where it fails is <code>version=$(psql -A -t -d postgres -c "show server_version")</code> Line 18 in <code>terminate-psql-sessions</code>. <code>psql</code> takes <code>whoami</code> as default in many cases.</p>



<a name="55897"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55897" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55897">(Nov 17 2016 at 21:17)</a>:</h4>
<p>hmm.  I wonder if actually what you want to do is edit your postgres configuration to rewrite the UNIX username <code>user</code> to some actual username</p>



<a name="55898"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55898" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55898">(Nov 17 2016 at 21:18)</a>:</h4>
<p>But that's probably solvable by tweaking the arguments</p>



<a name="55899"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55899" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55899">(Nov 17 2016 at 21:21)</a>:</h4>
<p>Does having a username of <code>user</code> cause problems for other software?</p>



<a name="55900"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/55900" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#55900">(Nov 17 2016 at 21:21)</a>:</h4>
<p>It's definitely an interesting choice</p>



<a name="56015"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/56015" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#56015">(Nov 18 2016 at 04:02)</a>:</h4>
<p>That's interesting question. I never had any issue with other software with username <code>user</code>. Let me search around and see.</p>



<a name="56963"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/56963" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#56963">(Nov 19 2016 at 05:36)</a>:</h4>
<p>So the workaround is to use login as <code>postgres</code> user and create the schema. Then do <code>./manage.py populate_db</code>. I have asked a question in <a href="https://stackoverflow.com/questions/40689568/can-postgres-role-name-be-user" target="_blank" title="https://stackoverflow.com/questions/40689568/can-postgres-role-name-be-user">SO</a> about <code>user</code> role.</p>



<a name="56967"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/56967" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#56967">(Nov 19 2016 at 05:40)</a>:</h4>
<p>That's silly of me using <code>create user "user"</code> creates a new user.</p>



<a name="56968"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Blank%20login%20screen/near/56968" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kracekumar R <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Blank.20login.20screen.html#56968">(Nov 19 2016 at 05:41)</a>:</h4>
<p>Then <code>psql -d zulip</code> works.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>