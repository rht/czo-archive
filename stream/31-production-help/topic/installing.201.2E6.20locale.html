<html>
<head><meta charset="utf-8"><title>installing 1.6 locale · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html">installing 1.6 locale</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="280817"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280817" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280817">(Sep 14 2017 at 04:29)</a>:</h4>
<p>I tried installing Zulip on a new server but got this during installation </p>
<div class="codehilite"><pre><span></span>Setting up libmemcached-dev <span class="o">(</span><span class="m">1</span>.0.18-4.1<span class="o">)</span> ...
Processing triggers <span class="k">for</span> libc-bin <span class="o">(</span><span class="m">2</span>.23-0ubuntu9<span class="o">)</span> ...
New python executable in /srv/zulip-venv-cache/82d52a88465eb7cc794a3467a56f256631c6a311/zulip-venv/bin/python2
Also creating executable in /srv/zulip-venv-cache/82d52a88465eb7cc794a3467a56f256631c6a311/zulip-venv/bin/python
Installing setuptools, pkg_resources, pip, wheel...
  Complete output from <span class="nb">command</span> /srv/zulip-venv-cach...lip-venv/bin/python2 - setuptools pkg_resources pip wheel:
  Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">24</span>, in &lt;module&gt;
  File <span class="s2">&quot;/usr/share/python-wheels/pip-8.1.1-py2.py3-none-any.whl/pip/__init__.py&quot;</span>, line <span class="m">215</span>, in main
  File <span class="s2">&quot;/srv/zulip-venv-cache/82d52a88465eb7cc794a3467a56f256631c6a311/zulip-venv/lib/python2.7/locale.py&quot;</span>, line <span class="m">581</span>, in setlocale
    <span class="k">return</span> _setlocale<span class="o">(</span>category, locale<span class="o">)</span>
locale.Error: unsupported locale setting
----------------------------------------
...Installing setuptools, pkg_resources, pip, wheel...done.
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;/usr/lib/python3/dist-packages/virtualenv.py&quot;</span>, line <span class="m">2363</span>, in &lt;module&gt;
    main<span class="o">()</span>
  File <span class="s2">&quot;/usr/lib/python3/dist-packages/virtualenv.py&quot;</span>, line <span class="m">719</span>, in main
    <span class="nv">symlink</span><span class="o">=</span>options.symlink<span class="o">)</span>
  File <span class="s2">&quot;/usr/lib/python3/dist-packages/virtualenv.py&quot;</span>, line <span class="m">988</span>, in create_environment
    <span class="nv">download</span><span class="o">=</span>download,
  File <span class="s2">&quot;/usr/lib/python3/dist-packages/virtualenv.py&quot;</span>, line <span class="m">918</span>, in install_wheel
    call_subprocess<span class="o">(</span>cmd, <span class="nv">show_stdout</span><span class="o">=</span>False, <span class="nv">extra_env</span><span class="o">=</span>env, <span class="nv">stdin</span><span class="o">=</span>SCRIPT<span class="o">)</span>
  File <span class="s2">&quot;/usr/lib/python3/dist-packages/virtualenv.py&quot;</span>, line <span class="m">812</span>, in call_subprocess
    % <span class="o">(</span>cmd_desc, proc.returncode<span class="o">))</span>
OSError: Command /srv/zulip-venv-cach...lip-venv/bin/python2 - setuptools pkg_resources pip wheel failed with error code <span class="m">1</span>
Running virtualenv with interpreter /usr/bin/python2
+ apt-get -y install build-essential libffi-dev libfreetype6-dev libz-dev libjpeg-dev libldap2-dev libmemcached-dev python3-dev python-dev python-pip python-virtualenv libxml2-dev libxslt1-dev libpq-dev
+ sudo rm -rf /srv/zulip-venv-cache/82d52a88465eb7cc794a3467a56f256631c6a311/zulip-venv
+ sudo mkdir -p /srv/zulip-venv-cache/82d52a88465eb7cc794a3467a56f256631c6a311/zulip-venv
+ sudo virtualenv -p python2 /srv/zulip-venv-cache/82d52a88465eb7cc794a3467a56f256631c6a311/zulip-venv

Error running a subcommand of /root/zulip/scripts/lib/create-production-venv: sudo virtualenv -p python2 /srv/zulip-venv-cache/82d52a88465eb7cc794a3467a56f256631c6a311/zulip-venv
Actual error output <span class="k">for</span> the subcommand is just above this.

Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;/root/zulip/scripts/lib/create-production-venv&quot;</span>, line <span class="m">32</span>, in &lt;module&gt;
    <span class="nv">virtualenv_args</span><span class="o">=[</span><span class="s1">&#39;-p&#39;</span>, <span class="s1">&#39;python{}&#39;</span>.format<span class="o">(</span>python_version<span class="o">)])</span>
  File <span class="s2">&quot;/root/zulip/scripts/lib/setup_venv.py&quot;</span>, line <span class="m">215</span>, in setup_virtualenv
    do_setup_virtualenv<span class="o">(</span>cached_venv_path, requirements_file, virtualenv_args or <span class="o">[])</span>
  File <span class="s2">&quot;/root/zulip/scripts/lib/setup_venv.py&quot;</span>, line <span class="m">237</span>, in do_setup_virtualenv
    run<span class="o">([</span><span class="s2">&quot;sudo&quot;</span>, <span class="s2">&quot;virtualenv&quot;</span><span class="o">]</span> + virtualenv_args + <span class="o">[</span>venv_path<span class="o">])</span>
  File <span class="s2">&quot;/root/zulip/scripts/lib/zulip_tools.py&quot;</span>, line <span class="m">98</span>, in run
    subprocess.check_call<span class="o">(</span>args, **kwargs<span class="o">)</span>
  File <span class="s2">&quot;/usr/lib/python2.7/subprocess.py&quot;</span>, line <span class="m">541</span>, in check_call
    raise CalledProcessError<span class="o">(</span>retcode, cmd<span class="o">)</span>
subprocess.CalledProcessError: Command <span class="s1">&#39;[&#39;</span>sudo<span class="s1">&#39;, &#39;</span>virtualenv<span class="s1">&#39;, &#39;</span>-p<span class="s1">&#39;, &#39;</span>python2<span class="s1">&#39;, &#39;</span>/srv/zulip-venv-cache/82d52a88465eb7cc794a3467a56f256631c6a311/zulip-venv<span class="s1">&#39;]&#39;</span> returned non-zero <span class="nb">exit</span> status <span class="m">1</span>
</pre></div>


<p>Since it talks about python2 I wonder if I couldn't just install the current master and jump straight to python3. How would I go about creating a release tarball from git master?</p>



<a name="280837"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280837" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280837">(Sep 14 2017 at 05:24)</a>:</h4>
<p>If you have a copy of master on your local machine, you can run <code>./tools/build-release-tarball</code>.  I'm not sure whether you need to set up any environmental stuff to run it, though.</p>



<a name="280846"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280846" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280846">(Sep 14 2017 at 06:55)</a>:</h4>
<p>ok, will try. The other thing is that I'm trying to install Zulip in an Ubuntu 16.04 container (LVC) using Proxmox</p>



<a name="280847"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280847" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280847">(Sep 14 2017 at 06:55)</a>:</h4>
<p>has anyone tried that yet?</p>



<a name="280912"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280912" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280912">(Sep 14 2017 at 10:38)</a>:</h4>
<p><span class="user-mention" data-user-email="m.mueller@intercultural-elements.eu" data-user-id="1646">@Matthias</span> that looks like the machine's locale configuration is broken.  Locale is the system used for i18n in the terminal.  Can you post the output of the <code>locale</code> command?  You can try <code>env LOCALE=en_US.UTF-8 scripts/setup/install</code> which will probably work.</p>



<a name="280914"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280914" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280914">(Sep 14 2017 at 10:39)</a>:</h4>
<p>thanks for that. Will try that tonight. During apt-get update I already saw those locale warnings. Is that due to the LVC?</p>



<a name="280916"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280916" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280916">(Sep 14 2017 at 10:41)</a>:</h4>
<p>Yeah, it's presumably a problem with how the VM was constructed</p>



<a name="280926"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280926" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280926">(Sep 14 2017 at 10:43)</a>:</h4>
<p>I see.. never used containers before but it looks quite efficient in reducing overhead. Ubuntu on it's own was just 40MB of RAM. Let's see how much RAM Zulip and all it's dependencies will use if it works.</p>



<a name="280928"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280928" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280928">(Sep 14 2017 at 10:45)</a>:</h4>
<p>Right, you might try running the "create container" command with the <code>env LC_ALL</code> invocation I suggested.</p>



<a name="280929"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280929" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280929">(Sep 14 2017 at 10:47)</a>:</h4>
<p>I think what's going on is that the guest is inheriting the locale configuration from the host (i.e. which locale it should try to use), but that locale hasn't been generated inside the guest</p>



<a name="280930"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280930" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280930">(Sep 14 2017 at 10:48)</a>:</h4>
<p>uff, I have to get help from a friend for this... I don't know Linux well enough</p>



<a name="280932"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/280932" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#280932">(Sep 14 2017 at 10:48)</a>:</h4>
<p>thanks for the pointer though</p>



<a name="281649"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281649" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281649">(Sep 14 2017 at 21:33)</a>:</h4>
<p><span class="user-mention" data-user-email="m.mueller@intercultural-elements.eu" data-user-id="1646">@Matthias</span> I am not an expert either on system locale settings in Linux, but two steps that I think have sufficed for me in setting up VMs:</p>
<ul>
<li>copy <code>/etc/locale.gen</code> in from the host (it's a config file saying what locales to compile the data for; mine has just one uncommented line, <code>en_US.UTF-8 UTF-8</code>)</li>
<li><code>apt install locales</code></li>
</ul>



<a name="281717"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281717" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281717">(Sep 15 2017 at 03:01)</a>:</h4>
<p>the locale command outputs: </p>
<div class="codehilite"><pre><span></span>locale: Cannot <span class="nb">set</span> LC_CTYPE to default locale: No such file or directory
locale: Cannot <span class="nb">set</span> LC_MESSAGES to default locale: No such file or directory
locale: Cannot <span class="nb">set</span> LC_ALL to default locale: No such file or directory
<span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8
<span class="nv">LANGUAGE</span><span class="o">=</span>en_US:en
<span class="nv">LC_CTYPE</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_NUMERIC</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_TIME</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_COLLATE</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_MONETARY</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_MESSAGES</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_PAPER</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_NAME</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_ADDRESS</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_TELEPHONE</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_MEASUREMENT</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_IDENTIFICATION</span><span class="o">=</span><span class="s2">&quot;en_US.UTF-8&quot;</span>
<span class="nv">LC_ALL</span><span class="o">=</span>
</pre></div>



<a name="281718"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281718" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281718">(Sep 15 2017 at 03:02)</a>:</h4>
<p>running <code>env LOCALE=en_US.UTF-8 scripts/setup/install</code> unfortunately didn't work</p>



<a name="281719"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281719" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281719">(Sep 15 2017 at 03:02)</a>:</h4>
<p>and when running <code>apt install locales</code> it says it's already the latest version</p>



<a name="281721"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281721" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281721">(Sep 15 2017 at 03:07)</a>:</h4>
<p>googled <code>sudo locale-gen "en_US.UTF-8"</code> and this fixed it. <br>
Zulip is installing now. Thanks for your help</p>



<a name="281723"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281723" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281723">(Sep 15 2017 at 03:29)</a>:</h4>
<p>run into another install issue with postgres</p>



<a name="281724"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281724" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281724">(Sep 15 2017 at 03:30)</a>:</h4>
<p>wanted to run the script for release tarball now but when I do <code>wget https://github.com/zulip/zulip/archive/master.zip</code> then this zip doesn't contain the folder tools</p>



<a name="281726"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281726" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281726">(Sep 15 2017 at 03:34)</a>:</h4>
<p><code>git clone https://github.com/zulip/zulip.git</code> did the trick</p>



<a name="281727"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281727" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281727">(Sep 15 2017 at 03:35)</a>:</h4>
<p>would that not belong here? <a href="http://zulip.readthedocs.io/en/latest/prod-maintain-secure-upgrade.html?highlight=build-release-tarball" target="_blank" title="http://zulip.readthedocs.io/en/latest/prod-maintain-secure-upgrade.html?highlight=build-release-tarball">documentation</a></p>



<a name="281728"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281728" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281728">(Sep 15 2017 at 03:46)</a>:</h4>
<p>creating tarball fails with this</p>
<div class="codehilite"><pre><span></span>root@chat:~/zulip/tools# ./build-release-tarball latest
++ getopt -o <span class="s1">&#39;&#39;</span> -l <span class="s1">&#39;&#39;</span> -n ./build-release-tarball -- latest
+ <span class="nv">args</span><span class="o">=</span><span class="s1">&#39; -- &#39;</span><span class="se">\&#39;</span><span class="s1">&#39;latest&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;&#39;</span>
+ <span class="nb">eval</span> <span class="s1">&#39;set --  -- &#39;</span><span class="se">\&#39;</span><span class="s1">&#39;latest&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;&#39;</span>
++ <span class="nb">set</span> -- -- latest
+ <span class="nb">true</span>
+ <span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> in
+ <span class="nb">shift</span>
+ <span class="nb">break</span>
++ git rev-parse HEAD
+ <span class="nv">GITID</span><span class="o">=</span>c4b506998ff4deb5c3284ab3cd875c217d3530eb
+ <span class="s1">&#39;[&#39;</span> -z latest <span class="s1">&#39;]&#39;</span>
+ <span class="nv">version</span><span class="o">=</span>latest
+ <span class="nv">prefix</span><span class="o">=</span>zulip-server-latest
++ uname
+ <span class="s1">&#39;[&#39;</span> <span class="nv">Linux</span> <span class="o">=</span> Darwin <span class="s1">&#39;]&#39;</span>
++ mktemp -d
+ <span class="nv">TMPDIR</span><span class="o">=</span>/tmp/tmp.XExzMUcGFu
+ git diff --exit-code
+ <span class="nv">TMP_CHECKOUT</span><span class="o">=</span>/tmp/tmp.XExzMUcGFu/zulip-server-latest/
+ <span class="nv">TARBALL</span><span class="o">=</span>/tmp/tmp.XExzMUcGFu/zulip-server-latest.tar
+ git archive -o /tmp/tmp.XExzMUcGFu/zulip-server-latest.tar --prefix<span class="o">=</span>zulip-server-latest/ HEAD
+ grep -q -e <span class="s1">&#39;^zerver/tests&#39;</span>
+ tar -tf /tmp/tmp.XExzMUcGFu/zulip-server-latest.tar
+ <span class="nb">echo</span> <span class="s1">&#39;Check for excluded files passed&#39;</span>
Check <span class="k">for</span> excluded files passed
+ git checkout-index -f -a --prefix /tmp/tmp.XExzMUcGFu/zulip-server-latest/
+ <span class="nb">cd</span> /tmp/tmp.XExzMUcGFu/zulip-server-latest/
+ mkdir -p var/log
+ cat
./build-release-tarball: line <span class="m">71</span>: zproject/prod_settings_template.py: No such file or directory
</pre></div>



<a name="281729"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281729" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281729">(Sep 15 2017 at 03:47)</a>:</h4>
<p>but the <code>zproject/prod_settings_template.py</code> is there in the folder</p>



<a name="281744"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/281744" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#281744">(Sep 15 2017 at 05:31)</a>:</h4>
<p>doh! I had forgotten SSL certs... now the installation with standard 1.6 worked. setting it up now (or later)</p>



<a name="282584"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282584" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282584">(Sep 15 2017 at 20:54)</a>:</h4>
<p><span class="user-mention" data-user-email="m.mueller@intercultural-elements.eu" data-user-id="1646">@Matthias</span> Glad the install worked for you in the end! To make sure I understand: once you set up SSL certs, a standard install from the 1.6 release tarball worked?</p>



<a name="282586"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282586" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282586">(Sep 15 2017 at 20:55)</a>:</h4>
<p>yes, that's right</p>



<a name="282587"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282587" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282587">(Sep 15 2017 at 20:55)</a>:</h4>
<blockquote>
<p>wanted to run the script for release tarball now but when I do wget <a href="https://github.com/zulip/zulip/archive/master.zip" target="_blank" title="https://github.com/zulip/zulip/archive/master.zip">https://github.com/zulip/zulip/archive/master.zip</a> then this zip doesn't contain the folder tools</p>
</blockquote>
<p>Hmm, interesting -- I actually didn't even know about that feature of GitHub.</p>



<a name="282591"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282591" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282591">(Sep 15 2017 at 20:56)</a>:</h4>
<p>I had to do a git clone of the repo to get the /tools folder but in the end the default release worked just fine.</p>



<a name="282592"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282592" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282592">(Sep 15 2017 at 20:57)</a>:</h4>
<p>We have some settings in <code>.gitattributes</code> that cause <code>tools/</code> and a few other folders and files to be omitted by <code>git archive</code>. That's because we don't want them to appear in release tarballs -- in particular, <code>tools/</code> has scripts to do things like destroy your database and rebuild it with test data, things that are handy in development but dangerous to leave lying around in production.</p>



<a name="282594"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282594" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282594">(Sep 15 2017 at 20:57)</a>:</h4>
<p>I'm still struggling with ipv6 though (can't reach the server)</p>



<a name="282595"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282595" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282595">(Sep 15 2017 at 20:57)</a>:</h4>
<p>Yeah, because the tools/ folder is intended for development, it's expected that if you want it you'll get it through Git.</p>



<a name="282598"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282598" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282598">(Sep 15 2017 at 20:57)</a>:</h4>
<p>Huh. Does that part appear to be Zulip-related or somewhere else in your stack?</p>



<a name="282600"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282600" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282600">(Sep 15 2017 at 20:58)</a>:</h4>
<p>something else</p>



<a name="282601"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282601" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282601">(Sep 15 2017 at 20:58)</a>:</h4>
<p>OK, cool -- and best of luck :)</p>



<a name="282603"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282603" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282603">(Sep 15 2017 at 20:59)</a>:</h4>
<p>it's a VPS with one IPv4 for the host but since I run everything in containers they have internal IPv4 but externally IPv6. A friend is helping me with setting up HAProxy.</p>



<a name="282607"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/installing%201.6%20locale/near/282607" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/installing.201.2E6.20locale.html#282607">(Sep 15 2017 at 21:03)</a>:</h4>
<p>I was going to remark on how we should probably change this use of <code>.gitattributes</code>, but I just ran across <a href="https://github.com/zulip/zulip/pull/129" target="_blank" title="https://github.com/zulip/zulip/pull/129">#129</a> and I see <span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> already said basically the same things there as I was going to. :-)</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>