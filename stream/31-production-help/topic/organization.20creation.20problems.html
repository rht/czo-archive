<html>
<head><meta charset="utf-8"><title>organization creation problems · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html">organization creation problems</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="254031"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254031" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Glen Thurston <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254031">(Jul 19 2017 at 23:18)</a>:</h4>
<p>I'm trying to finish setting up my instance of Zulip on my local server. </p>
<p>I verified that the outgoing email configuration works and successfully received the email.</p>
<p>When I go to the link generated by:</p>
<div class="codehilite"><pre><span></span>/home/zulip/deployments/current/manage.py generate_realm_creation_link
</pre></div>


<p>and enter my email address I get an error that says:</p>
<div class="codehilite"><pre><span></span>Well oops. This one&#39;s probably our fault. Sorry about that!

If you&#39;d like, you can drop us a line to let us know what happened.
</pre></div>


<p>The email link auto-fills an email to me reporting a 500 error.<br>
Any ideas on what's gone wrong?</p>



<a name="254036"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254036" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Glen Thurston <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254036">(Jul 19 2017 at 23:23)</a>:</h4>
<p>Just figured out that I can create a realm using</p>
<div class="codehilite"><pre><span></span>/home/zulip/deployments/current/manage.py create_realm
</pre></div>


<p>I think everything is working now.</p>



<a name="254038"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254038" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254038">(Jul 19 2017 at 23:27)</a>:</h4>
<p>Hmmm.  Glad you got unblocked, but it sounds like maybe our <code>generate_realm_creation_link</code> script may be broken?</p>



<a name="254039"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254039" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Glen Thurston <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254039">(Jul 19 2017 at 23:29)</a>:</h4>
<p>Possibly. I had to generate an invite link to myself as well to create an account.  But it seems okay now.</p>



<a name="254081"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254081" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrea  Longo <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254081">(Jul 20 2017 at 01:25)</a>:</h4>
<p><span class="user-mention" data-user-email="supermoosen@gmail.com" data-user-id="2878">@Glen Thurston</span> Are emails, more generally, working now? There is an open issue about a 500 error when SMTP fails (<a href="https://github.com/zulip/zulip/pull/3850" target="_blank" title="https://github.com/zulip/zulip/pull/3850">#3850</a>) but I'm not sure if it's relevant here. (I ran into it when my email configuration got corrupted.)</p>



<a name="254089"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254089" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Glen Thurston <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254089">(Jul 20 2017 at 01:51)</a>:</h4>
<p>Yes, they are.  I can send test emails to myself, as well as send emails with invitations to join Zulip.  This seems to be a separate issue.</p>



<a name="254460"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254460" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254460">(Jul 20 2017 at 16:58)</a>:</h4>
<p><span class="user-mention" data-user-email="supermoosen@gmail.com" data-user-id="2878">@Glen Thurston</span> if you were getting a 500 error, there should be logs in <code>/var/log/zulip/errors.log</code>.  Would you be up for taking a look at that and sending us the traceback?  The error was almost certainly something related to your email configuration.</p>



<a name="254461"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254461" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254461">(Jul 20 2017 at 16:58)</a>:</h4>
<p>Also <span class="user-mention" data-user-email="rishig@zulipchat.com" data-user-id="131">@Rishi Gupta</span> I guess this is a data point for someone using <code>create_realm.py</code></p>



<a name="254464"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254464" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254464">(Jul 20 2017 at 17:00)</a>:</h4>
<p>Hmm</p>



<a name="254465"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254465" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254465">(Jul 20 2017 at 17:01)</a>:</h4>
<p>I'd argue the root problem here is whatever email or other configuration problem caused the 500 though</p>



<a name="254467"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254467" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254467">(Jul 20 2017 at 17:02)</a>:</h4>
<p>And the secondary problem is that we should make the error message for that case better.</p>



<a name="254703"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254703" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Glen Thurston <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254703">(Jul 20 2017 at 19:07)</a>:</h4>
<p>It looks like maybe Google wasn't happy with the password it received.  I use two-factor authentication, and created a key specifically for Zulip to get around this. </p>
<p>Here is the log:</p>
<div class="codehilite"><pre><span></span>2017-07-20 02:12:47,147 ERROR    Internal Server Error: /accounts/password/reset/
Traceback (most recent call last):
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/core/handlers/exception.py&quot;, line 42, in inner
    response = get_response(request)
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py&quot;, line 249, in _legacy_get_response
    response = self._get_response(request)
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py&quot;, line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/core/handlers/base.py&quot;, line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/contrib/auth/views.py&quot;, line 47, in inner
    return func(*args, **kwargs)
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/utils/decorators.py&quot;, line 149, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/contrib/auth/views.py&quot;, line 205, in password_reset
    form.save(**opts)
  File &quot;./zerver/forms.py&quot;, line 228, in save
    super(ZulipPasswordResetForm, self).save(*args, **kwargs)
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/contrib/auth/forms.py&quot;, line 291, in save
    user.email, html_email_template_name=html_email_template_name,
 File &quot;./zerver/forms.py&quot;, line 213, in send_mail
    html_email_template_name=html_email_template_name
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/contrib/auth/forms.py&quot;, line 247, in send_mail
    email_message.send()
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/core/mail/message.py&quot;, line 342, in send
    return self.get_connection(fail_silently).send_messages([self])
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/core/mail/backends/smtp.py&quot;, line 100, in send_messages
    new_conn_created = self.open()
  File &quot;/home/zulip/deployments/2017-07-19-17-35-32/zulip-venv/lib/python2.7/site-packages/django/core/mail/backends/smtp.py&quot;, line 67, in open
    self.connection.login(self.username, self.password)
  File &quot;/usr/lib/python2.7/smtplib.py&quot;, line 622, in login
    raise SMTPAuthenticationError(code, resp)
SMTPAuthenticationError: (535, &#39;5.7.8 Username and Password not accepted. Learn more at\n5.7.8  https://support.google.com/mail/?p=BadCredentials g201sm629280itg.31 - gsmtp&#39;)
</pre></div>



<a name="254761"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254761" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254761">(Jul 20 2017 at 20:33)</a>:</h4>
<p>Ahh, OK, yeah, so this is the existing bug that we don't give you great feedback for how to debug for 500s this early in setup.</p>



<a name="254762"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/organization%20creation%20problems/near/254762" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/organization.20creation.20problems.html#254762">(Jul 20 2017 at 20:33)</a>:</h4>
<p>Aka <a href="https://github.com/zulip/zulip/pull/3577" target="_blank" title="https://github.com/zulip/zulip/pull/3577">#3577</a></p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>