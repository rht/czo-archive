<html>
<head><meta charset="utf-8"><title>✔ error upgrading with git · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html">✔ error upgrading with git</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1309521"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309521" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309521">(Jan 13 2022 at 02:06)</a>:</h4>
<p>Hi, am adding few features to Zulip, and i have an installation (production) running.<br>
Please how to deploy my development version in production from my Repo github into the existing regular installation.</p>
<p>Thanks</p>



<a name="1309528"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309528" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309528">(Jan 13 2022 at 03:12)</a>:</h4>
<p><a href="https://zulip.readthedocs.io/en/latest/production/upgrade-or-modify.html#upgrading-from-a-git-repository">https://zulip.readthedocs.io/en/latest/production/upgrade-or-modify.html#upgrading-from-a-git-repository</a> has a section about setting <code>git_repo_url</code> in <code>/etc/zulip/zulip.com</code></p>



<a name="1309536"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309536" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309536">(Jan 13 2022 at 03:34)</a>:</h4>
<p>amazing.. thanks a lot</p>



<a name="1309630"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309630" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309630">(Jan 13 2022 at 12:43)</a>:</h4>
<p>I was able to start the process but it fail because of password authentication on the db... It required to do it with zulip user but am connected as root right now</p>



<a name="1309633"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309633" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309633">(Jan 13 2022 at 12:45)</a>:</h4>
<p><a href="/user_uploads/2/96/o-N93MECueMP_6mskT6Dhxt_/Capture-décran-2022-01-13-à-13.44.49.png">Capture-décran-2022-01-13-à-13.44.49.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/96/o-N93MECueMP_6mskT6Dhxt_/Capture-décran-2022-01-13-à-13.44.49.png" title="Capture-décran-2022-01-13-à-13.44.49.png"><img src="/user_uploads/2/96/o-N93MECueMP_6mskT6Dhxt_/Capture-décran-2022-01-13-à-13.44.49.png"></a></div>



<a name="1309635"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309635" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309635">(Jan 13 2022 at 12:45)</a>:</h4>
<p>i already have a password for that user defined in the zulip secret file</p>



<a name="1309636"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309636" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309636">(Jan 13 2022 at 12:46)</a>:</h4>
<p>am fetching the upgrade from a git repo with my version with some little modifications</p>



<a name="1309661"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309661" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309661">(Jan 13 2022 at 15:10)</a>:</h4>
<p><a href="/user_uploads/2/a8/zRr7FlrLvSzA_ZJBcTSg5SxW/Capture-décran-2022-01-13-à-13.44.49.png">Capture-décran-2022-01-13-à-13.44.49.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/a8/zRr7FlrLvSzA_ZJBcTSg5SxW/Capture-décran-2022-01-13-à-13.44.49.png" title="Capture-décran-2022-01-13-à-13.44.49.png"><img src="/user_uploads/2/a8/zRr7FlrLvSzA_ZJBcTSg5SxW/Capture-décran-2022-01-13-à-13.44.49.png"></a></div>



<a name="1309662"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309662" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309662">(Jan 13 2022 at 15:12)</a>:</h4>
<p>Hi Am having an issue connecting to the db when connecting to the db while making the upgrade from git</p>



<a name="1309663"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309663" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309663">(Jan 13 2022 at 15:12)</a>:</h4>
<p><a href="/user_uploads/2/41/81VeGZ65VYWgmnYqPpO4fRtc/Capture-décran-2022-01-13-à-13.44.49.png">Capture-décran-2022-01-13-à-13.44.49.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/41/81VeGZ65VYWgmnYqPpO4fRtc/Capture-décran-2022-01-13-à-13.44.49.png" title="Capture-décran-2022-01-13-à-13.44.49.png"><img src="/user_uploads/2/41/81VeGZ65VYWgmnYqPpO4fRtc/Capture-décran-2022-01-13-à-13.44.49.png"></a></div>



<a name="1309664"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309664" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309664">(Jan 13 2022 at 15:12)</a>:</h4>
<p>Am doing it as <code>root</code> user</p>



<a name="1309719"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309719" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309719">(Jan 13 2022 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="22633">@adonissimo</span> I just collected your questions from three separate topics where you posted them. Please be careful to post all related questions to the same topic, so that folks who are trying to help you can see all the context.</p>



<a name="1309721"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309721" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309721">(Jan 13 2022 at 17:40)</a>:</h4>
<p>It is also generally best to use code blocks rather than screenshots to post terminal output.</p>



<a name="1309764"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309764" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309764">(Jan 13 2022 at 19:35)</a>:</h4>
<p>okay thank you <span class="user-mention" data-user-id="19257">@Alya Abbott</span></p>



<a name="1309765"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309765" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309765">(Jan 13 2022 at 19:35)</a>:</h4>
<p>i still havent figure out the solution, i have even added <code>zulip</code> user to sudeors</p>



<a name="1309766"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309766" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309766">(Jan 13 2022 at 19:37)</a>:</h4>
<p>Do not add the <code>zulip</code> user to sudoers. Your errors have nothing to do with <code>sudo</code>, and the privilege separation is there for a reason.</p>



<a name="1309767"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309767" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309767">(Jan 13 2022 at 19:38)</a>:</h4>
<p>Your screenshots show errors with PostgreSQL authentication. The PostgreSQL account is separate from the system account.</p>



<a name="1309769"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309769" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309769">(Jan 13 2022 at 19:42)</a>:</h4>
<p>So what should i do... since i made the initial installation according to what is written in the documentation. Any tips please ?</p>



<a name="1309772"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309772" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309772">(Jan 13 2022 at 19:48)</a>:</h4>
<p>A normal server installation with the database on <code>localhost</code> will not have a PostgreSQL password; it uses PostgreSQL peer authentication.</p>



<a name="1309773"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309773" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309773">(Jan 13 2022 at 19:49)</a>:</h4>
<p>Why did you configure a password? And how exactly did you do so—have you tested that PostgreSQL accepts that password?</p>



<a name="1309774"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309774" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309774">(Jan 13 2022 at 19:50)</a>:</h4>
<p>i have defined a password in the <code>/etc/zulip/zulip-secret.conf</code> file</p>



<a name="1309775"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309775" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309775">(Jan 13 2022 at 19:50)</a>:</h4>
<p>Well, just because you put a password there doesn’t make it the right password. Most likely you just need to remove that line.</p>



<a name="1309776"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309776" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309776">(Jan 13 2022 at 19:51)</a>:</h4>
<p>Okay... am actually making a test without the password .</p>



<a name="1309778"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309778" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309778">(Jan 13 2022 at 19:52)</a>:</h4>
<p>humm it actually work without the password. So I assume the PostgreSQL server is using <code>ident</code> auth method</p>



<a name="1309779"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309779" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309779">(Jan 13 2022 at 19:56)</a>:</h4>
<p>It’s using peer authentication. (This is different from ident in that it uses kernel features, not an ident daemon.)</p>



<a name="1309782"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309782" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309782">(Jan 13 2022 at 20:03)</a>:</h4>
<p>okay i understand</p>



<a name="1309790"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309790" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309790">(Jan 13 2022 at 20:15)</a>:</h4>
<p>Now am having this as error when i use a password to connect to  PostgreSQL</p>
<div class="codehilite"><pre><span></span><code>Traceback (most recent call last):
  File &quot;/srv/zulip-venv-cache/3a9126a70136bb012ac5d3e4318beeb1c3b2244c/zulip-py3-venv/lib/python3.8/site-packages/django/db/backends/base/base.py&quot;, line 219, in ensure_connection
    self.connect()
  File &quot;/srv/zulip-venv-cache/3a9126a70136bb012ac5d3e4318beeb1c3b2244c/zulip-py3-venv/lib/python3.8/site-packages/django/utils/asyncio.py&quot;, line 33, in inner
    return func(*args, **kwargs)
  File &quot;/srv/zulip-venv-cache/3a9126a70136bb012ac5d3e4318beeb1c3b2244c/zulip-py3-venv/lib/python3.8/site-packages/django/db/backends/base/base.py&quot;, line 200, in connect
    self.connection = self.get_new_connection(conn_params)
  File &quot;/srv/zulip-venv-cache/3a9126a70136bb012ac5d3e4318beeb1c3b2244c/zulip-py3-venv/lib/python3.8/site-packages/django/utils/asyncio.py&quot;, line 33, in inner
    return func(*args, **kwargs)
  File &quot;/srv/zulip-venv-cache/3a9126a70136bb012ac5d3e4318beeb1c3b2244c/zulip-py3-venv/lib/python3.8/site-packages/django/db/backends/postgresql/base.py&quot;, line 187, in get_new_connection
    connection = Database.connect(**conn_params)
  File &quot;/srv/zulip-venv-cache/3a9126a70136bb012ac5d3e4318beeb1c3b2244c/zulip-py3-venv/lib/python3.8/site-packages/psycopg2/__init__.py&quot;, line 122, in connect
    conn = _connect(dsn, connection_factory=connection_factory, **kwasync)
  File &quot;/home/zulip/deployments/2021-12-06-16-04-50/zerver/lib/db.py&quot;, line 47, in __init__
    super().__init__(*args, **kwargs)
psycopg2.OperationalError: connection to server on socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot; failed: fe_sendauth: no password supplied
</code></pre></div>
<p>Any idea where the <code>fe_sendauth</code>  is comming from ?</p>



<a name="1309815"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1309815" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adonis SIMO <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1309815">(Jan 13 2022 at 20:41)</a>:</h4>
<p>It's done. Thank you <span class="user-mention" data-user-id="699">@Anders Kaseorg</span>  for responding meand hints</p>



<a name="1310356"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20error%20upgrading%20with%20git/near/1310356" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20error.20upgrading.20with.20git.html#1310356">(Jan 14 2022 at 12:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="22633">adonissimo</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>