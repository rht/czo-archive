<html>
<head><meta charset="utf-8"><title>OIDC custom attributes · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/OIDC.20custom.20attributes.html">OIDC custom attributes</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1417110"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/OIDC%20custom%20attributes/near/1417110" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schumacher <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/OIDC.20custom.20attributes.html#1417110">(Aug 08 2022 at 20:09)</a>:</h4>
<p>Hi, we're currently testing Zulip 5.5 and just configured authentication via OIDC (Keycloak). Is it possible to map more attributes like the avatar and roles, without relying on LDAP?</p>



<a name="1417141"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/OIDC%20custom%20attributes/near/1417141" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/OIDC.20custom.20attributes.html#1417141">(Aug 08 2022 at 22:10)</a>:</h4>
<p><span class="user-mention" data-user-id="24533">@Fabian Schumacher</span> I don't think that's possible today. <span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> can perhaps comment on how complex it would be to add support for that.</p>



<a name="1417369"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/OIDC%20custom%20attributes/near/1417369" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/OIDC.20custom.20attributes.html#1417369">(Aug 09 2022 at 10:57)</a>:</h4>
<p>Hmm, depends on the attributes, because specifically avatar and roles would be harder since we don't have an existing mechanism non-ldap backends to sync these I think. Actual custom attributes in the sense of <a href="https://zulip.com/help/add-custom-profile-fields">https://zulip.com/help/add-custom-profile-fields</a> should be easy to implement this since <a href="https://github.com/zulip/zulip/commit/c54b48452d7336bf70f181253e1a193c0bbf238b">c54b48452d7336bf70f181253e1a193c0bbf238b</a> was made very general so that it would easily extend to other backends than saml. </p>
<p><span class="user-mention" data-user-id="24533">@Fabian Schumacher</span> Can you say more about this info would be given to zulip via OIDC? Would it be in the form of additional values fetched from the /userinfo endpoint? How does that work for the avatar specifically since that's image data rather than a simple string?</p>



<a name="1417576"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/OIDC%20custom%20attributes/near/1417576" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Fabian Schumacher <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/OIDC.20custom.20attributes.html#1417576">(Aug 09 2022 at 19:37)</a>:</h4>
<p>We were thinking about mapping user roles and also avatars. Not sure how Keycloak handles these attributes in the response but we decided to just use LDAP for attribute mapping. Thanks anyways :)</p>



<a name="1417850"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/OIDC%20custom%20attributes/near/1417850" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jussi Talaskivi <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/OIDC.20custom.20attributes.html#1417850">(Aug 10 2022 at 04:51)</a>:</h4>
<p>Images could be fetched from the userinfo endpoint using data urls (as in data:[&lt;mediatype&gt;][;base64],&lt;data&gt;). Was there an option to set which scopes to use with OIDC? I think that avatar would probably be under a different scope than the default ones.</p>



<a name="1417862"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/OIDC%20custom%20attributes/near/1417862" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jussi Talaskivi <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/OIDC.20custom.20attributes.html#1417862">(Aug 10 2022 at 05:27)</a>:</h4>
<p>Oh. The standard says that picture claim is actually an URL to the image and it is under the profile scope.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>