<html>
<head><meta charset="utf-8"><title>database migration · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/database.20migration.html">database migration</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="631581"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/database%20migration/near/631581" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Russell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/database.20migration.html#631581">(Aug 15 2018 at 13:52)</a>:</h4>
<p>Does anyone have experence doing the backup and restore of the zulip db? I'm doing test move from one server to another. I tried this:</p>
<p>1. old server: as user <em>zulip</em> run <code>pg_dump &gt; dump.sql</code><br>
2. new server: as user <em>zulip</em> run <code>~/deployments/current/scripts/setup/postgres-init-db</code></p>
<p>At this point the script will prompt for the <em>zulip</em> user password. Eventually it will also as for the <em>postgress</em> user password. I'm assuming these were created during install. The install log doesn't have them. The <code>zulip-secrets.conf</code> appears to have passwords encrypted instead of plain text?</p>
<p>Where do I find the passwords to drop the db and recreate it with the backup data?</p>



<a name="631597"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/database%20migration/near/631597" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Russell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/database.20migration.html#631597">(Aug 15 2018 at 14:13)</a>:</h4>
<p>I think I got it... it wasn't clear from the docs but the <code>postgres-init-db</code> script should be run as <code>root</code> user.</p>



<a name="632011"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/database%20migration/near/632011" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/database.20migration.html#632011">(Aug 15 2018 at 20:51)</a>:</h4>
<p>We should probably offer a bit more scripted version of backup instructions...</p>



<a name="632012"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/database%20migration/near/632012" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/database.20migration.html#632012">(Aug 15 2018 at 20:52)</a>:</h4>
<p>I'm sick so not dealing today but would love if someone opened an issue for that</p>



<a name="632040"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/database%20migration/near/632040" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Russell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/database.20migration.html#632040">(Aug 15 2018 at 21:23)</a>:</h4>
<p>I've udpated <a href="https://github.com/zulip/zulip/issues/552" target="_blank" title="https://github.com/zulip/zulip/issues/552">https://github.com/zulip/zulip/issues/552</a> with comments from you and my experience.</p>



<a name="632041"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/database%20migration/near/632041" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> 6lauber oak <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/database.20migration.html#632041">(Aug 15 2018 at 21:24)</a>:</h4>
<p>Thank you, <span class="user-mention" data-user-id="7">@Tim Abbott</span>  and get well!</p>



<a name="632046"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/database%20migration/near/632046" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> 6lauber oak <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/database.20migration.html#632046">(Aug 15 2018 at 21:32)</a>:</h4>
<p>oops, wrong thread</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>