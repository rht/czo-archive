<html>
<head><meta charset="utf-8"><title>new install error debian 10 · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html">new install error debian 10</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1103312"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1103312" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1103312">(Jan 20 2021 at 22:28)</a>:</h4>
<p>Trying to install zulip in a vm to test it out. I'm getting the following error. <br>
Preparing to unpack .../python3.7_3.7.3-2+deb10u2_amd64.deb ...</p>
<ul>
<li>rm -rf /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv</li>
<li>mkdir -p /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv</li>
<li>virtualenv -p python3 /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv</li>
</ul>
<p>Error running a subcommand of /tmp/zulip/zulip-server-3.3/scripts/lib/create-production-venv: virtualenv -p python3 /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv<br>
Actual error output for the subcommand is just above this.</p>
<p>Traceback (most recent call last):<br>
  File "/tmp/zulip/zulip-server-3.3/scripts/lib/create-production-venv", line 37, in &lt;module&gt;<br>
    os.path.join(ZULIP_PATH, "requirements", "prod.txt"))<br>
  File "/tmp/zulip/zulip-server-3.3/scripts/lib/setup_venv.py", line 294, in setup_virtualenv<br>
    do_setup_virtualenv(cached_venv_path, requirements_file)<br>
  File "/tmp/zulip/zulip-server-3.3/scripts/lib/setup_venv.py", line 320, in do_setup_virtualenv<br>
    run_as_root(["virtualenv", "-p", "python3", venv_path])<br>
  File "/tmp/zulip/zulip-server-3.3/scripts/lib/zulip_tools.py", line 464, in run_as_root<br>
    run(args, **kwargs)<br>
  File "/tmp/zulip/zulip-server-3.3/scripts/lib/zulip_tools.py", line 198, in run<br>
    subprocess.check_call(args, **kwargs)<br>
  File "/usr/lib/python3.7/subprocess.py", line 347, in check_call<br>
    raise CalledProcessError(retcode, cmd)<br>
subprocess.CalledProcessError: Command '['virtualenv', '-p', 'python3', '/srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv']' returned non-zero exit status 1.</p>
<p>The install command is using self signed certificate.</p>



<a name="1103744"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1103744" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diptesh Choudhuri <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1103744">(Jan 21 2021 at 11:20)</a>:</h4>
<p>Could you please attach a screen shot for this? I would like to see where exactly the build errored out.</p>



<a name="1103889"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1103889" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1103889">(Jan 21 2021 at 15:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="18337">Diptesh Choudhuri</span> <a href="#narrow/stream/31-production-help/topic/new.20install.20error.20debian.2010/near/1103744">said</a>:</p>
<blockquote>
<p>Could you please attach a screen shot for this? I would like to see where exactly the build errored out.</p>
</blockquote>
<p>I went back in the error log further.:<br>
Unpacking postgresql-common (223.pgdg100+1) over (200+deb10u3) ...<br>
Preparing to unpack .../3-systemd_241-7~deb10u5_amd64.deb ...<br>
Unpacking systemd (241-7~deb10u5) over (241-7~deb10u3) ...<br>
Preparing to unpack .../4-udev_241-7~deb10u5_amd64.deb ...<br>
Unpacking udev (241-7~deb10u5) over (241-7~deb10u3) ...<br>
Preparing to unpack .../5-libudev1_241-7~deb10u5_amd64.deb ...<br>
Unpacking libudev1:amd64 (241-7~deb10u5) over (241-7~deb10u3) ...<br>
Setting up libudev1:amd64 (241-7~deb10u5) ...<br>
Setting up systemd (241-7~deb10u5) ...<br>
(Reading database ... 36489 files and directories currently installed.)<br>
Preparing to unpack .../systemd-sysv_241-7~deb10u5_amd64.deb ...<br>
Unpacking systemd-sysv (241-7~deb10u5) over (241-7~deb10u3) ...<br>
Preparing to unpack .../libgnutls30_3.6.7-4+deb10u5_amd64.deb ...<br>
Unpacking libgnutls30:amd64 (3.6.7-4+deb10u5) over (3.6.7-4+deb10u4) ...<br>
Setting up libgnutls30:amd64 (3.6.7-4+deb10u5) ...<br>
(Reading database ... 36489 files and directories currently installed.)<br>
Preparing to unpack .../python3.7_3.7.3-2+deb10u2_amd64.deb ...</p>
<ul>
<li>mkdir -p /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv</li>
<li>virtualenv -p python3 /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv</li>
</ul>
<p>Error running a subcommand of /tmp/zulip/zulip-server-3.3/scripts/lib/create-production-venv: virtualenv -p python3 /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv<br>
Actual error output for the subcommand is just above this.</p>



<a name="1104119"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104119" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104119">(Jan 21 2021 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="18622">@Tyson Parker</span> the actual error must be higher up in the log..</p>



<a name="1104279"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104279" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104279">(Jan 21 2021 at 22:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/31-production-help/topic/new.20install.20error.20debian.2010/near/1104119">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="18622">Tyson Parker</span> the actual error must be higher up in the log..</p>
</blockquote>
<p>Thanks, I already posted the last few lines that contained the errors and <span class="user-mention" data-user-id="18337">@Diptesh Choudhuri</span>  asked to post what was above that.</p>



<a name="1104307"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104307" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104307">(Jan 21 2021 at 23:04)</a>:</h4>
<p>The log is quite long, is there a fail message I can parse for?</p>



<a name="1104337"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104337" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104337">(Jan 21 2021 at 23:21)</a>:</h4>
<p><span class="user-mention" data-user-id="18622">@Tyson Parker</span> you could just upload <code>install.log</code> as a file?</p>



<a name="1104338"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104338" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104338">(Jan 21 2021 at 23:22)</a>:</h4>
<p>But I'd expect to see something within at most 2-3 screenfuls above the output you showed.</p>



<a name="1104715"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104715" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104715">(Jan 22 2021 at 14:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/31-production-help/topic/new.20install.20error.20debian.2010/near/1104337">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="18622">Tyson Parker</span> you could just upload <code>install.log</code> as a file?</p>
</blockquote>
<p>Ok, I'll add the entire error log. Thank you for clarifying.</p>



<a name="1104732"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104732" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104732">(Jan 22 2021 at 14:52)</a>:</h4>
<p>Tried pasting entire log, and it didn't allow that length here I guess. It also appears to be the entire install log rather than an error log. How do I just get the error output?</p>



<a name="1104823"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104823" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104823">(Jan 22 2021 at 15:34)</a>:</h4>
<p>I moved the install log out of the way and ran it again to get a fresh log. <br>
Narrowed it down to these:<br>
New python executable in /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv/bin/python3Also creating executable in /srv/zulip-venv-cache/eb3a3e742556eac11564ee4044096adc073de864/zulip-py3-venv/bin/python<br>
Installing setuptools, pkg_resources, pip, wheel...<br>
  Complete output from command /srv/zulip-venv-cach...py3-venv/bin/python3 - setuptools pkg_resources pip wheel:<br>
  Looking in links: /usr/lib/python3/dist-packages, /usr/share/python-wheels/<br>
Collecting setuptools<br>
  Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', OSError(0, 'Error'))': /packages/b2/81/509db0082c0d2ca2af307c6652ea422865de1f83c14b1e1f3549e415cfac/setuptools-51.3.3-py3-none-any.whl<br>
  Retrying (Retry(total=3, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', OSError(0, 'Error'))': /packages/b2/81/509db0082c0d2ca2af307c6652ea422865de1f83c14b1e1f3549e415cfac/setuptools-51.3.3-py3-none-any.whl<br>
  Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', OSError(0, 'Error'))': /packages/b2/81/509db0082c0d2ca2af307c6652ea422865de1f83c14b1e1f3549e415cfac/setuptools-51.3.3-py3-none-any.whl<br>
  Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', OSError(0, 'Error'))': /packages/b2/81/509db0082c0d2ca2af307c6652ea422865de1f83c14b1e1f3549e415cfac/setuptools-51.3.3-py3-none-any.whl<br>
  Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', OSError(0, 'Error'))': /packages/b2/81/509db0082c0d2ca2af307c6652ea422865de1f83c14b1e1f3549e415cfac/setuptools-51.3.3-py3-none-any.whl<br>
Could not install packages due to an EnvironmentError: HTTPSConnectionPool(host='<a href="http://files.pythonhosted.org">files.pythonhosted.org</a>', port=443): Max retries exceeded with url: /packages/b2/81/509db0082c0d2ca2af307c6652ea422865de1f83c14b1e1f3549e415cfac/setuptools-51.3.3-py3-none-any.whl (Caused by ProtocolError('Connection aborted.', OSError(0, 'Error')))</p>
<hr>
<p>Looked through firewall and noticed some blocked outgoing connections and adjusted the rule's scanning mode. (Fortinet from Proxy to Flowbased) Now the install is proceeding.</p>



<a name="1104928"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104928" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104928">(Jan 22 2021 at 18:15)</a>:</h4>
<p><span class="user-mention" data-user-id="18622">@Tyson Parker</span> you can upload the entire log as an attachment.</p>



<a name="1104929"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1104929" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1104929">(Jan 22 2021 at 18:16)</a>:</h4>
<p>But yeah, pretty clearly a networking issue; glad you were able to resolve it!</p>



<a name="1106344"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1106344" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1106344">(Jan 25 2021 at 17:16)</a>:</h4>
<p>Having more issues now. Wondering if I'm doing something wrong here, I started with a turnkey debian 10 image that had postgress on it. Followed the instructions and keep hitting snags.  <a href="/user_uploads/2/90/xqMes8Jkk7T0qsY7Cmo6hlDq/install.log">install.log</a></p>



<a name="1106436"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1106436" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1106436">(Jan 25 2021 at 20:08)</a>:</h4>
<p><span class="user-mention" data-user-id="18622">@Tyson Parker</span> it looks like the Zulip <code>nginx</code> server is failing to bind to ports 80/443 -- are you running another webserver on the system?</p>



<a name="1107060"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1107060" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1107060">(Jan 26 2021 at 15:22)</a>:</h4>
<p>There is a turnkey management running there.  Maybe I'll give this a try off a debian 10. I'm an accidently linux admin so still learning a lot of the linux specific admin issues.</p>



<a name="1107982"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/new%20install%20error%20debian%2010/near/1107982" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Parker <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/new.20install.20error.20debian.2010.html#1107982">(Jan 27 2021 at 15:20)</a>:</h4>
<p>Ok I started from scratch on a debian 10 iso and the install went much better.  Thanks for your help. <span class="user-mention" data-user-id="7">@Tim Abbott</span></p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>