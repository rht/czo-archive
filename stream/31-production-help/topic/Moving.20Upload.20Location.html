<html>
<head><meta charset="utf-8"><title>Moving Upload Location · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Moving.20Upload.20Location.html">Moving Upload Location</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="718956"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Moving%20Upload%20Location/near/718956" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ostermang <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Moving.20Upload.20Location.html#718956">(Mar 14 2019 at 16:23)</a>:</h4>
<p>Hi,</p>
<p>I had previously set up S3 storage but realized this won't work for our organization at this time. I have since reconfigured Zulip to use local storage again but changed the location to a new volume. I moved all the files from the old location to the new location and verified permissions. In settings.py, I have set <code>LOCAL_UPLOADS_DIR = "/storage"</code> and commented out the S3 lines. I have also restarted Zulip but it appears Zulip is still looking for files in /home/zulip/uploads. I have also checked the nginx config and it is still pointing to /home/zulip/uploads.</p>
<p>Should I only have to update settings.py with the new storage location or do I need to update the nginx configs too?</p>



<a name="719153"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Moving%20Upload%20Location/near/719153" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Moving.20Upload.20Location.html#719153">(Mar 14 2019 at 19:39)</a>:</h4>
<p><span class="user-mention" data-user-id="11818">@ostermang</span> you need to update the <code>nginx</code> configuration as well.</p>



<a name="719154"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Moving%20Upload%20Location/near/719154" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Moving.20Upload.20Location.html#719154">(Mar 14 2019 at 19:39)</a>:</h4>
<p>(Or just symlink the default path to your storage path, which is what we usually recommend to avoid needing to fork the nginx config)</p>



<a name="719184"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Moving%20Upload%20Location/near/719184" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ostermang <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Moving.20Upload.20Location.html#719184">(Mar 14 2019 at 19:56)</a>:</h4>
<p>Ah, I didn't even thing about that. I would definitely prefer not to fork any configs that could be overwritten so the symlink idea is what I'll do.<br>
Thanks!</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>