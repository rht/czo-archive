<html>
<head><meta charset="utf-8"><title>outgoing email problem · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html">outgoing email problem</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1535304"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1535304" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1535304">(Mar 28 2023 at 12:04)</a>:</h4>
<p>When setting up my server I set it to use <a href="https://zulip.readthedocs.io/en/stable/production/email.html#using-system-email">system email</a>, but this is leading to problems now since people aren't getting their signup-confirmation mails.</p>
<p>I would like to switch to using some <a href="https://zulip.readthedocs.io/en/stable/production/email.html#using-system-email">email service</a>, as recommended in the documentation. The documentation recommends mailgun and sendgrid and states that those have free options, but as far as i can see, mailgun only has a free plan for one month, and sendgrid's free plan only gives 100 mails per day which can be limiting, if people use email notifications.</p>
<p>Does anybody have a better recommendation for a free email service?</p>



<a name="1535369"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1535369" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1535369">(Mar 28 2023 at 14:00)</a>:</h4>
<p>I suggest doing a couple web searches.  <a href="https://www.sendinblue.com/free-smtp-server/">sendinblue looks to have a free 300/day service</a>, for instance.  <a href="https://www.mailersend.com/features/smtp-relay">mailersend is 12000/month</a>.</p>
<p>We're happy to update the documentation with whatever you find.</p>



<a name="1535704"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1535704" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1535704">(Mar 28 2023 at 21:04)</a>:</h4>
<p>Thanks! I just tried mailersend, but they didn't approve me.</p>



<a name="1535705"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1535705" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1535705">(Mar 28 2023 at 21:05)</a>:</h4>
<p>One more question: I have two organizations on two subdomains. Does anybody know whether I have to set up the subdomains separately with the email service, or if it can all go via the root domain?</p>



<a name="1535708"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1535708" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1535708">(Mar 28 2023 at 21:09)</a>:</h4>
<p>They will use he same one root domain for sending.</p>



<a name="1536574"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1536574" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1536574">(Mar 29 2023 at 19:08)</a>:</h4>
<p>OK, <a href="https://www.sendinblue.com/">https://www.sendinblue.com/</a> was easy to set up, but the confirmation messages are still going to spam (in gmail)! </p>
<p>Isn't the point supposed to be that the big providers trust email services like sendinblue more than emails coming from random virtual private servers?</p>



<a name="1536608"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1536608" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1536608">(Mar 29 2023 at 19:17)</a>:</h4>
<p>Configuring SPF / DKIM may help with the spam scoring.</p>



<a name="1536611"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1536611" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1536611">(Mar 29 2023 at 19:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="17356">Jonas F</span> <a href="#narrow/stream/31-production-help/topic/outgoing.20email.20problem/near/1536574">said</a>:</p>
<blockquote>
<p>Isn't the point supposed to be that the big providers trust email services like sendinblue more than emails coming from random virtual private servers?</p>
</blockquote>
<p>They have a bit of a hard time -- if any VPS can sign up for sendinblue, how much signal is there in some mail that comes from sendinblue vs a VPS?</p>



<a name="1536692"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1536692" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1536692">(Mar 29 2023 at 19:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="12178">Alex Vandiver</span> <a href="#narrow/stream/31-production-help/topic/outgoing.20email.20problem/near/1536608">said</a>:</p>
<blockquote>
<p>Configuring SPF / DKIM may help with the spam scoring.</p>
</blockquote>
<p>OK I'll try to figure that out, thanks!</p>



<a name="1537250"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1537250" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1537250">(Mar 30 2023 at 11:07)</a>:</h4>
<p>After configuring DKIM with <a href="http://sendinblue.com">sendinblue.com</a> it seems to work, the new members were finally able to activate their accounts!</p>



<a name="1537251"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1537251" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1537251">(Mar 30 2023 at 11:09)</a>:</h4>
<p>However, in my own experimentation, some of the emails still got stuck in spam (which was problematic especially for a gmail account that is forwarded to another gmail account).</p>



<a name="1537252"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1537252" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1537252">(Mar 30 2023 at 11:10)</a>:</h4>
<p>Looking at the headers of one of the emails that actually <em>was</em> forwarded, I saw the following: <br>
<a href="/user_uploads/2/8b/jZ8iZq3hXHIPK5tNFHrQw_zK/Screenshot_20230330_130952.png">Screenshot_20230330_130952.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/8b/jZ8iZq3hXHIPK5tNFHrQw_zK/Screenshot_20230330_130952.png" title="Screenshot_20230330_130952.png"><img src="/user_uploads/2/8b/jZ8iZq3hXHIPK5tNFHrQw_zK/Screenshot_20230330_130952.png"></a></div>



<a name="1537253"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1537253" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1537253">(Mar 30 2023 at 11:12)</a>:</h4>
<p>So the DKIM test is successful, but DMARC fails? Can I do anything about that? Is it because a configured a gmail address as a return address, but google noticed that the email does not originate from them?</p>



<a name="1537254"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1537254" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas F <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1537254">(Mar 30 2023 at 11:13)</a>:</h4>
<p>The DMARC field seems to be missing from most headers, I've only seen it in this one message, which on further investigation seems to be distinguished from the other emails by the fact that its from address is my (the administrators) email rather than noreply@server, like the invitation and confirmation mails.</p>
<p>Anyway, that's not the main problem. The primary concern is to get notifications, invitations, and confirmations through, which all come from noreply@server apparently , and that largely seems to work!</p>



<a name="1537377"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1537377" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1537377">(Mar 30 2023 at 15:32)</a>:</h4>
<p><span class="user-mention" data-user-id="17356">@Jonas F</span>: The raw message headers may have more detail?</p>



<a name="1537378"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/outgoing%20email%20problem/near/1537378" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/outgoing.20email.20problem.html#1537378">(Mar 30 2023 at 15:34)</a>:</h4>
<p>We're into the weeds of email administration, not as much Zulip, but check the <code>Authenticatrion-Results</code> mail header.</p>
<p>e.g.</p>
<div class="codehilite"><pre><span></span><code>Authentication-Results: mx.google.com;
       dkim=pass header.i=@zulip.com header.s=3hoscmgjlnsgqebqbb3qw2atkyvqrzap header.b=RKgSHG0C;
       dkim=pass header.i=@amazonses.com header.s=224i4yxa5dv7c2xz3womw6peuasteono header.b=W7r2NU1r;
       spf=pass (google.com: domain of 0100018713d5cd30-1dd30067-d66e-4efc-8634-1dade038ff7f-000000@bounces.zulip.com designates 54.240.32.207 as permitted sender) smtp.mailfrom=0100018713d5cd30-1dd30067-d66e-4efc-8634-1dade038ff7f-000000@bounces.zulip.com;
       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=zulip.com
</code></pre></div>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>