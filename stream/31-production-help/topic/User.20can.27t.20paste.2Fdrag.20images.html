<html>
<head><meta charset="utf-8"><title>User can&#x27;t paste/drag images · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html">User can&#x27;t paste/drag images</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="283842"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283842" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283842">(Sep 18 2017 at 13:32)</a>:</h4>
<p>After the 1.6.0 upgrade we have one user who can no longer paste or drag images into the Zulip chat window. Paste via right-click or CTRL-V does not work, and if he drags or pastes an image he gets "Upload would exceed your maximum quota. Consider deleting some previously uploaded files."  <br>
On that subject, is there a best practice/method for pruning the Attachments folder on the server - ours is approaching 30GB. Server has been in use for almost 3 years.</p>



<a name="283894"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283894" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283894">(Sep 18 2017 at 14:32)</a>:</h4>
<p>I think you can work around this temporarily by updating the "quota" field in <code>zerver_userprofile</code> for the users that are hitting their quota.  I'm curious if you would be concerned about running out of space if it weren't for Zulip's limit here.</p>



<a name="283899"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283899" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283899">(Sep 18 2017 at 14:42)</a>:</h4>
<p>Would PGAdmin be the best tool for poking around the DB?</p>



<a name="283900"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283900" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283900">(Sep 18 2017 at 14:43)</a>:</h4>
<p>We keep an eye on the HDD space. We hit the limit a couple times and then added some more virtual HDD room. Generally I don't think our users need to go back much more than a year. Our QA teams make heavy use of the attachments/ past images feature.</p>



<a name="283901"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283901" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283901">(Sep 18 2017 at 14:44)</a>:</h4>
<p>I tried that myself before but you have to first create a user that has access to the zulip database and from remote machines. I used DBeaver but I was never able to do much because of triggers. But I think that most devs here would advice you to not change values or you risk data inconsistency.</p>



<a name="283902"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283902" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283902">(Sep 18 2017 at 14:45)</a>:</h4>
<p>OK - how do I modify that quota then - is it not in the PG database?</p>



<a name="283903"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283903" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283903">(Sep 18 2017 at 14:46)</a>:</h4>
<p>sorry, I wasn't answering that question. I was still writing when you posted it and short answer: don't know.</p>



<a name="283904"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283904" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283904">(Sep 18 2017 at 14:47)</a>:</h4>
<p>but 30GB doesn't sound much to me.</p>



<a name="283905"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283905" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283905">(Sep 18 2017 at 14:47)</a>:</h4>
<p>It was when the VM was too small :-) Anyhow now trying to fix quota for one user.</p>



<a name="283906"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283906" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283906">(Sep 18 2017 at 14:48)</a>:</h4>
<p><span class="user-mention" data-user-email="m.mueller@intercultural-elements.eu" data-user-id="1646">@Matthias</span> is correct that you should be cautious about direct DB updates, since we do have things in memcached, and you can put users in inconsistent states.  I know enough this field, however, to assure <span class="user-mention" data-user-email="dylanh@hb-studios.com" data-user-id="3275">@hb-it</span>  that it's ok to carefully modify userprofile quotas.  They may not take effect right away, however, due to memcached.  They won't screw anything up; they will just be at their old values.</p>



<a name="283907"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283907" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283907">(Sep 18 2017 at 14:48)</a>:</h4>
<p>If you can restart the server, I believe you'll be fine.</p>



<a name="283908"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283908" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283908">(Sep 18 2017 at 14:49)</a>:</h4>
<p>Sounds good, will try that. Thanks!</p>



<a name="283929"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283929" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283929">(Sep 18 2017 at 17:08)</a>:</h4>
<p>That has worked, used PGAdmin IV to get connected and edit the quotas field. Thank you for the help.</p>



<a name="283934"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/283934" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#283934">(Sep 18 2017 at 17:15)</a>:</h4>
<p>You're welcome!</p>



<a name="284208"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284208" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284208">(Sep 19 2017 at 14:32)</a>:</h4>
<p>So this is an issue for several users it seems, I'm thinking of running this query on the Postgres DB:    </p>
<p>update zerver_userprofile SET quota = 2073741824.     (default value is 1073741824)</p>
<p>Am I asking for trouble by doing this? That would double the quota for everyone. I will snapshot the server first of course. <br>
Also wondering if there is somewhere I can set a higher default value for new users.</p>



<a name="284211"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284211" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284211">(Sep 19 2017 at 14:41)</a>:</h4>
<blockquote>
<p>Also wondering if there is somewhere I can set a higher default value for new users.</p>
</blockquote>
<p>There is an attribute called <code>DEFAULT_UPLOADS_QUOTA</code> in zerver/model.UserProfile. But I am not sure modifying it directly is recommended in production.</p>



<a name="284212"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284212" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284212">(Sep 19 2017 at 14:44)</a>:</h4>
<p>The query here is fine to run.</p>



<a name="284216"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284216" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284216">(Sep 19 2017 at 14:52)</a>:</h4>
<p><span class="user-mention" data-user-email="showell@zulipchat.com" data-user-id="58">@Steve Howell</span> Is it fine to modify the value of DEFAULT_UPLOADS_QUOTA  and create a migration for a particular production instance? Will it create problem when they have to upgrade to a newer Zulip release?</p>



<a name="284217"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284217" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284217">(Sep 19 2017 at 15:08)</a>:</h4>
<p>I am pretty sure they can change the settings value now, and that will persist across upgrades, and that will pre-populate all future users with a correct value.  And then to retroactively fix the current users, you can use the update statement <code>update zerver_userprofile SET quota = 2073741824</code> proposed by <span class="user-mention" data-user-email="dylanh@hb-studios.com" data-user-id="3275">@hb-it</span>.</p>



<a name="284218"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284218" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284218">(Sep 19 2017 at 15:16)</a>:</h4>
<p>Updating current users has worked with that query, but I'm not seeing where to edit DEFAULT_UPLOADS_QUOTA - can't find zerver/model.UserProfile. FYI we did not need to reboot the server, just getting endusers to restart Zulip enabled the new quota.</p>



<a name="284219"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284219" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284219">(Sep 19 2017 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-email="dylanh@hb-studios.com" data-user-id="3275">@hb-it</span> It might be in <code>/etc/zulip/settings.py</code>.</p>



<a name="284220"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284220" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284220">(Sep 19 2017 at 15:20)</a>:</h4>
<p>Hmmmm, hold on.</p>



<a name="284221"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284221" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284221">(Sep 19 2017 at 15:23)</a>:</h4>
<p>I was thinking of <code>MAX_FILE_UPLOAD_SIZE</code>, which is in settings.  The field <span class="user-mention" data-user-email="yo@vishnuks.com" data-user-id="52">@Vishnu Ks</span> mentions is in <code>zerver/models.py</code>.</p>



<a name="284222"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284222" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284222">(Sep 19 2017 at 15:25)</a>:</h4>
<p>Ok found it, it says 1024<em>1024</em>1024    -  If I want to double it I'm assuming 2048<em>2048</em>2048 will work?</p>



<a name="284223"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284223" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284223">(Sep 19 2017 at 15:25)</a>:</h4>
<p>And we can modify that now, and restart the server, and that will fix the default for new users.  But you'll need to keep patching that on every upgrade (although eventually we'll bump it up or put it in settings.)</p>



<a name="284224"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284224" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284224">(Sep 19 2017 at 15:25)</a>:</h4>
<p>Sorry this client is not showing the * asterisk</p>



<a name="284225"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284225" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284225">(Sep 19 2017 at 15:25)</a>:</h4>
<p>Only double one of the numbers. :)</p>



<a name="284226"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284226" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284226">(Sep 19 2017 at 15:25)</a>:</h4>
<p>Which one?</p>



<a name="284227"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284227" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284227">(Sep 19 2017 at 15:26)</a>:</h4>
<p><code>2048 * 1024 * 1024</code>  It doesn't really matter, since multiplication is commutative. :)</p>



<a name="284228"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284228" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284228">(Sep 19 2017 at 15:26)</a>:</h4>
<p>Ah gotcha. Thanks again!</p>



<a name="284229"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284229" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284229">(Sep 19 2017 at 15:27)</a>:</h4>
<p>Yes an Admin option to manage quotas would be good. Just FYI this only started once we got to 1.6.0 from 1.3.5, so the quota functionality must have changed along the way?</p>



<a name="284230"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284230" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284230">(Sep 19 2017 at 15:29)</a>:</h4>
<p>Yep, it was added early this year, before the 1.6 release.  Obviously it's important to have some limit here, but we probably should have made the default much larger.  <span class="user-mention" data-user-email="rishig@zulipchat.com" data-user-id="131">@Rishi Gupta</span> <span class="user-mention" data-user-email="yo@vishnuks.com" data-user-id="52">@Vishnu Ks</span> Do either of you know whether we've done anything to address this?  (Another organization also bumped up against this recently, I believe.)</p>



<a name="284231"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284231" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284231">(Sep 19 2017 at 15:32)</a>:</h4>
<p>Our QA teams use this feature heavily, they are sending screenshots to the devs all day long. As does the Art dept.</p>



<a name="284233"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284233" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284233">(Sep 19 2017 at 16:03)</a>:</h4>
<p>Good to know!</p>



<a name="284234"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284234" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284234">(Sep 19 2017 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-email="showell@zulipchat.com" data-user-id="58">@Steve Howell</span> I am not aware of anything related to increasing the quota/ making it a realm specific settings. Lets wait till Rishi and make an issue opened for that if it does not exist. Also <span class="user-mention" data-user-email="dylanh@hb-studios.com" data-user-id="3275">@hb-it</span>  have to generate migrations and migrate it after modifying DEFAULT_UPLOADS_QUOTA right?</p>



<a name="284237"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284237" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284237">(Sep 19 2017 at 16:10)</a>:</h4>
<p>No, there's no need to create a migration here, since you're just updating data with a simple update statement against a small table.</p>



<a name="284239"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284239" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284239">(Sep 19 2017 at 16:16)</a>:</h4>
<p>Okay. I thought he was going to modify the zerver/models.py instead of modifying tables.</p>



<a name="284240"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284240" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284240">(Sep 19 2017 at 16:18)</a>:</h4>
<p>I did both - updated the database to fix for current users, and edited models.py for future users - is there another step I need to complete?</p>



<a name="284278"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284278" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284278">(Sep 19 2017 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-email="dylanh@hb-studios.com" data-user-id="3275">@hb-it</span> If you changed models.py you have to generate migrations and migrate it. But I would wait for Steve to come back :)</p>



<a name="284282"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284282" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284282">(Sep 19 2017 at 17:50)</a>:</h4>
<p>Huh, I guess it depends on whether the defaults are managed directly by Django or by the database.  I guess <span class="user-mention" data-user-email="yo@vishnuks.com" data-user-id="52">@Vishnu Ks</span> is suggesting it's the latter, in which case changing <code>models.py</code> doesn't have much effect.  I'm a little wary of running a migration, as that can definitely complicate future  upgrades.</p>



<a name="284283"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284283" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284283">(Sep 19 2017 at 17:51)</a>:</h4>
<p>No big deal, we can always rerun the update query if we need to.</p>



<a name="284409"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/284409" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#284409">(Sep 20 2017 at 00:01)</a>:</h4>
<p>I think Vishnu is right; this needs a migration to change the default.</p>
<p>Probably the right way forward for zulip is to remove the default from the database field, and set UserProfile.quota in do_create_user. I also agree with Steve that running a custom migration to do this will be trouble for future upgrades.</p>



<a name="288260"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288260" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288260">(Sep 27 2017 at 17:15)</a>:</h4>
<p>We have a user now who appears to have hit the new limit of  2073741824 - and I am now running into "integer out of range" errors if I try to set quota much higher in the PostGres DB.</p>



<a name="288267"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288267" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288267">(Sep 27 2017 at 17:18)</a>:</h4>
<p>4 Byte integer can hold 2,147,483,647, I just tested that by trying to set it to 2,147,483,648</p>



<a name="288273"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288273" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288273">(Sep 27 2017 at 17:20)</a>:</h4>
<p>So I think I need to do one of:    alter the field so it holds bigger values (probably a bad idea), purge some old files based on date, or disable the quota altogether which would be my first choice.</p>



<a name="288295"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288295" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288295">(Sep 27 2017 at 17:28)</a>:</h4>
<p>Yep, I think hacking the code to bypass the check might be your best bet for the short term.</p>



<a name="288301"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288301" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288301">(Sep 27 2017 at 17:29)</a>:</h4>
<p>Ok - where do I do that, can it be done per user?</p>



<a name="288320"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288320" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288320">(Sep 27 2017 at 17:43)</a>:</h4>
<p>In zerver/lib/upload.py, you could change the within_upload_quota function to add an exception for a particular user.</p>
<p>unrelatedly, probably we should change all the constants like DEFAULT_UPLOADS_QUOTA,  MAX_FILE_UPLOAD_SIZE, etc to be in megabytes rather than bytes?</p>



<a name="288321"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288321" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288321">(Sep 27 2017 at 17:44)</a>:</h4>
<p>something like <code>if user.email == special_user@domain.tld: return True</code> at the beginning of the function</p>



<a name="288323"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288323" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288323">(Sep 27 2017 at 17:48)</a>:</h4>
<p>try changing <code>within_upload_quota</code> to multiply the quote by 1024 (basically treating it as in KB)</p>



<a name="288324"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288324" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288324">(Sep 27 2017 at 17:48)</a>:</h4>
<p>Oh, is that field an integer, in bytes?  Sigh.</p>



<a name="288325"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288325" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288325">(Sep 27 2017 at 17:48)</a>:</h4>
<p>in <code>zerver/lib/upload.py</code></p>



<a name="288326"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288326" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288326">(Sep 27 2017 at 17:48)</a>:</h4>
<p>That's definitely a bug, we should open an issue for it.</p>



<a name="288327"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288327" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288327">(Sep 27 2017 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-email="showell@zulipchat.com" data-user-id="58">@Steve Howell</span> do you think we want to solve this by changing units to MB or something, or by making the number 64-bit?</p>



<a name="288330"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288330" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288330">(Sep 27 2017 at 17:50)</a>:</h4>
<p>(I lost Internet briefly, hence the second solution)</p>



<a name="288331"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288331" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288331">(Sep 27 2017 at 17:50)</a>:</h4>
<p>I think we should make the field 64-bit.</p>



<a name="288332"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288332" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288332">(Sep 27 2017 at 17:50)</a>:</h4>
<p>What's your reasoning?</p>



<a name="288334"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288334" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288334">(Sep 27 2017 at 17:51)</a>:</h4>
<p>64-bit is plenty big, whereas framing max/mins in terms of kB or MB can lead to unexpected traps</p>



<a name="288336"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288336" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288336">(Sep 27 2017 at 17:52)</a>:</h4>
<p>I should say 2^^64 is plenty big for future max values, and 64 bits is plenty small for storing the value.</p>



<a name="288337"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288337" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288337">(Sep 27 2017 at 18:04)</a>:</h4>
<p>I think I'll just put return true at the beginning to disable the whole thing for now and wait for updates in a newer version - we can manage the disk space manually as we have been.  Or just comment out the return false line.</p>



<a name="288338"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288338" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288338">(Sep 27 2017 at 18:07)</a>:</h4>
<p>Do I need to do the migrations thing to get this to stick?</p>



<a name="288339"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288339" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288339">(Sep 27 2017 at 18:09)</a>:</h4>
<p>You don't need to create any migrations if you are only changing <code>upload.py</code></p>



<a name="288340"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288340" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288340">(Sep 27 2017 at 18:12)</a>:</h4>
<p>Ok will try that. Thank you again everyone for the assist.</p>



<a name="288341"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288341" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288341">(Sep 27 2017 at 18:13)</a>:</h4>
<p>For reference you have to create and run migrations only if you change the database schema.(Which is usually <code>models.py</code> file)</p>



<a name="288342"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288342" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288342">(Sep 27 2017 at 18:14)</a>:</h4>
<p>my reason for wanting MB is that I think we'll eventually want this to become a realm or server setting, in which case MB is easier to reason about, and less prone to human mistake than bytes.</p>



<a name="288344"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288344" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288344">(Sep 27 2017 at 18:16)</a>:</h4>
<p>But you may be right that an absolute number of bytes is a cleaner model, since then one doesn't need to worry about where one rounds.</p>



<a name="288345"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288345" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288345">(Sep 27 2017 at 18:16)</a>:</h4>
<p>I guess the only cost is a larger UserProfile table.</p>



<a name="288346"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288346" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288346">(Sep 27 2017 at 18:16)</a>:</h4>
<p>Personally, I'm probably more tempted by the MB one, just because the code for checking quota is like 1 function, so not a lot of traps, and I think everyone interacting with it will want to specify their values in some large unit like MB.</p>



<a name="288347"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288347" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288347">(Sep 27 2017 at 18:16)</a>:</h4>
<p>I'd like a few other folks' opinions, I guess.</p>



<a name="288348"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288348" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288348">(Sep 27 2017 at 18:16)</a>:</h4>
<p><span class="user-mention" data-user-email="dylanh@hb-studios.com" data-user-id="3275">@hb-it</span> I think either of the hacks we described should work for now, but we'll make sure this gets fixed in Zulip 1.7.</p>



<a name="288349"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288349" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288349">(Sep 27 2017 at 18:17)</a>:</h4>
<p>From our end user perspective, our dev, QA and art teams use this function all day long to easily pass around and discuss screen grabs and mocks, so we don't want to limit their use of it.</p>



<a name="288350"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288350" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288350">(Sep 27 2017 at 18:17)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> - much appreciated.</p>



<a name="288353"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288353" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288353">(Sep 27 2017 at 18:32)</a>:</h4>
<p><span class="user-mention" data-user-email="dylanh@hb-studios.com" data-user-id="3275">@hb-it</span> just so we have the data, did someone use 1GB (going from 1GB to 2GB) in about a month in your organization?  It's helpful to have a sense for what "a lot of file uploads" rate is :)</p>



<a name="288364"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288364" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288364">(Sep 27 2017 at 18:39)</a>:</h4>
<p>That is a good question  - he said he only added a few more files since we looked at this last time. So I'm wondering how it triggered myself. I can tell you the attachments directory is 28+GB</p>



<a name="288365"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288365" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288365">(Sep 27 2017 at 18:39)</a>:</h4>
<p>Is there an easy way to see which uploads belong to who?</p>



<a name="288370"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288370" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288370">(Sep 27 2017 at 18:44)</a>:</h4>
<p>He should be able to see in the <code>#settings/uploaded-files</code> page, but that doesn't have sizes yet (should have it soon though, we should merge the PR from <span class="user-mention" data-user-email="yo@vishnuks.com" data-user-id="52">@Vishnu Ks</span> on this).</p>



<a name="288371"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288371" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288371">(Sep 27 2017 at 18:44)</a>:</h4>
<p>Definitely possible on the <code>manage.py shell</code></p>



<a name="288374"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288374" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288374">(Sep 27 2017 at 18:46)</a>:</h4>
<p>A way for an admin to see file totals would be good</p>



<a name="288377"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288377" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288377">(Sep 27 2017 at 18:46)</a>:</h4>
<p>Or purge files older than a certain date</p>



<a name="288381"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288381" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288381">(Sep 27 2017 at 18:47)</a>:</h4>
<p>I still think the back end should be an absolute number of bytes, but of course any UI should allow for users to specify it in terms of Mb, Gb, etc.</p>



<a name="288382"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/288382" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#288382">(Sep 27 2017 at 18:48)</a>:</h4>
<p>If we express the value in Mb, and you want 800Gb, then we put 800,000 in the database field?  Seems funny to me, since in 2025 megabytes will be the new kilobytes.</p>



<a name="289392"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/User%20can%27t%20paste/drag%20images/near/289392" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/User.20can.27t.20paste.2Fdrag.20images.html#289392">(Sep 28 2017 at 23:38)</a>:</h4>
<p>I'd be happy with any reasonable unit -- so long as we make it clear in the name of the field. So something like "..._bytes" or "..._mb" or "..._mib", where if we say "_mb" we really do mean MB, aka 10^6 bytes. :-)</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>