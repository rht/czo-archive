<html>
<head><meta charset="utf-8"><title>CA certs · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/CA.20certs.html">CA certs</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1349133"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/CA%20certs/near/1349133" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Blair MacInnis <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/CA.20certs.html#1349133">(Mar 21 2022 at 19:15)</a>:</h4>
<p>Hi I was wondering if there is any additional information on how to get Zulip to read custom CA certs. When we try running Oauth with Keycloak we get the following error.<br>
<code>social_core.exceptions.AuthFailed: Authentication failed: HTTPSConnectionPool(host='auth.sdm', port=443): Max retries exceeded with url: /auth/realms/sdm/.well-known/openid-configuration (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1131)')))</code></p>



<a name="1349161"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/CA%20certs/near/1349161" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/CA.20certs.html#1349161">(Mar 21 2022 at 19:29)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="9" href="/#narrow/stream/9-issues/topic/CA.20certs">#issues &gt; CA certs</a> by <span class="user-mention silent" data-user-id="7">Tim Abbott</span>.</p>



<a name="1349289"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/CA%20certs/near/1349289" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/CA.20certs.html#1349289">(Mar 21 2022 at 21:11)</a>:</h4>
<p><span class="user-mention" data-user-id="15764">@Blair MacInnis</span> Have you tried <a href="https://ubuntu.com/server/docs/security-trust-store">adding</a> the CA to the system trust store on the server? I’m not 100% confident this will work, but it’s the first thing to try.</p>



<a name="1349304"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/CA%20certs/near/1349304" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Blair MacInnis <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/CA.20certs.html#1349304">(Mar 21 2022 at 21:24)</a>:</h4>
<p>yes that was tried</p>



<a name="1349740"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/CA%20certs/near/1349740" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Huebner <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/CA.20certs.html#1349740">(Mar 22 2022 at 06:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="699">Anders Kaseorg</span> <a href="#narrow/stream/31-production-help/topic/CA.20certs/near/1349289">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="15764">Blair MacInnis</span> Have you tried <a href="https://ubuntu.com/server/docs/security-trust-store">adding</a> the CA to the system trust store on the server? I’m not 100% confident this will work, but it’s the first thing to try.</p>
</blockquote>
<p>Yes that does work. We're running Zulip against our internal OpenLDAP with a custom CA and TLS verification.</p>



<a name="1349742"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/CA%20certs/near/1349742" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Philipp Huebner <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/CA.20certs.html#1349742">(Mar 22 2022 at 06:51)</a>:</h4>
<p>You can use <code>openssl s_client [...]</code> to verify correct installation of CAs in the system trust store.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>