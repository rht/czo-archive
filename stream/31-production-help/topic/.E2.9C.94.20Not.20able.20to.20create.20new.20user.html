<html>
<head><meta charset="utf-8"><title>✔ Not able to create new user · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html">✔ Not able to create new user</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1447926"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447926" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shirish <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447926">(Oct 11 2022 at 17:12)</a>:</h4>
<p>Hi,  I am trying to create a new user using   /api/v1/users.   I have usd the admin user and genearted token.  I get  this message {<br>
    "result": "error",<br>
    "msg": "User not authorized for this query",<br>
    "code": "BAD_REQUEST"<br>
}   what am I doing wrong?   I am able to post messages using API with same credentials etc.</p>



<a name="1447930"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447930" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447930">(Oct 11 2022 at 17:29)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="378" href="/#narrow/stream/378-api-design/topic/Not.20able.20to.20create.20new.20user">#api design &gt; Not able to create new user</a> by <span class="user-mention silent" data-user-id="10349">Mateusz Mandera</span>.</p>



<a name="1447931"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447931" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447931">(Oct 11 2022 at 17:30)</a>:</h4>
<p><span class="user-mention" data-user-id="24992">@Shirish</span> You need an additional permission - see the Note  section at <a href="https://zulip.com/api/create-user">https://zulip.com/api/create-user</a> <br>
(I moved the topic to this stream, because <a class="stream" data-stream-id="378" href="/#narrow/stream/378-api-design">#api design</a> is more for design discussions rather than specific technical issues/help)</p>



<a name="1447932"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447932" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shirish <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447932">(Oct 11 2022 at 17:34)</a>:</h4>
<p><span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> Thanks for moving to technical issues.  I did see the help but I am not able to formlate the correct syntax for manage.py command line.  Appreciate if you could help me with the exact syntax</p>



<a name="1447933"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447933" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447933">(Oct 11 2022 at 17:38)</a>:</h4>
<p><span class="user-mention" data-user-id="24992">@Shirish</span> <code>manage.py change_user_role -r "&lt;realm subdomain&gt;" &lt;useremail@example.com&gt; can_create_users</code> should do it. If the realm is on the root domain, the -r part is just <code>-r ""</code></p>



<a name="1447935"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447935" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shirish <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447935">(Oct 11 2022 at 17:47)</a>:</h4>
<p>Thanks a lot <span class="user-mention" data-user-id="10349">@Mateusz Mandera</span>   It did work  !!!  Issue is resolved.  My only feedback<br>
 is documentation was't clear.  Thanks for the quick help here.</p>



<a name="1447937"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447937" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447937">(Oct 11 2022 at 17:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="24992">Shirish</span> has marked this topic as resolved.</p>



<a name="1447961"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447961" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447961">(Oct 11 2022 at 17:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="24992">Shirish</span> <a href="#narrow/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user/near/1447935">said</a>:</p>
<blockquote>
<p>Thanks a lot <span class="user-mention silent" data-user-id="10349">Mateusz Mandera</span>   It did work  !!!  Issue is resolved.  My only feedback<br>
 is documentation was't clear.  Thanks for the quick help here.</p>
</blockquote>
<p><span class="user-mention" data-user-id="24992">@Shirish</span>: Can you tell us where you did look in the documentation, so we can clarify it there?</p>



<a name="1447973"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447973" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shirish <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447973">(Oct 11 2022 at 18:03)</a>:</h4>
<p><a href="/user_uploads/2/37/kSEkHNRqRj_-uh697Yciye-F/image.png">image.png</a>     There is no mention of Can_Create_User.  Also not clear that it is another command line parameter</p>
<div class="message_inline_image"><a href="/user_uploads/2/37/kSEkHNRqRj_-uh697Yciye-F/image.png" title="image.png"><img src="/user_uploads/2/37/kSEkHNRqRj_-uh697Yciye-F/image.png"></a></div>



<a name="1447974"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447974" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shirish <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447974">(Oct 11 2022 at 18:03)</a>:</h4>
<p><a href="/user_uploads/2/be/aI12shOTXT4B2TXyC1U6Tk0l/image.png">image.png</a>   This help only talks about --revoking but does not mention that it is a seperate parameter to enable</p>
<div class="message_inline_image"><a href="/user_uploads/2/be/aI12shOTXT4B2TXyC1U6Tk0l/image.png" title="image.png"><img src="/user_uploads/2/be/aI12shOTXT4B2TXyC1U6Tk0l/image.png"></a></div>



<a name="1447983"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1447983" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1447983">(Oct 11 2022 at 18:20)</a>:</h4>
<p>Hmm, it's really a separate parameter, but rather it goes in the <code>&lt;new role</code>&gt; argument - but it's indeed not apparent at all (and kind of incorrect even) that <code>can_create_users</code> would be a "new role". </p>
<div class="codehilite"><pre><span></span><code>            choices=[
                &quot;owner&quot;,
                &quot;admin&quot;,
                &quot;moderator&quot;,
                &quot;member&quot;,
                &quot;guest&quot;,
                &quot;can_forge_sender&quot;,
                &quot;can_create_users&quot;,
            ],
</code></pre></div>
<p>Perhaps the help  mode of the command should be printing out this list of available choices?</p>



<a name="1448060"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1448060" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shirish <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1448060">(Oct 11 2022 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="10349">@Mateusz Mandera</span>  Typically 'Can_Create_Users' is considered as a "permission" rather than a "role",  My impression was that permission was explictley excluded by default from admin role and this command will just add that to core "admin" role</p>



<a name="1448523"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Not%20able%20to%20create%20new%20user/near/1448523" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Not.20able.20to.20create.20new.20user.html#1448523">(Oct 12 2022 at 16:44)</a>:</h4>
<p>Yeah, I think the best tweak here would be to add some complete examples in the usage output.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>