<html>
<head><meta charset="utf-8"><title>reverse_proxy · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html">reverse_proxy</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1362032"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362032" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362032">(Apr 07 2022 at 17:56)</a>:</h4>
<p>I am trying to setup zulip from scratch but using a reverse proxy</p>



<a name="1362034"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362034" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362034">(Apr 07 2022 at 17:57)</a>:</h4>
<p>I've ran the setup line: ./zulip-server-*/scripts/setup/install   but with --self-signed command, and that completed properly</p>



<a name="1362035"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362035" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362035">(Apr 07 2022 at 17:57)</a>:</h4>
<p>I then switched zulip from https to http using this guide: <a href="https://zulip.readthedocs.io/en/latest/production/deployment.html#configuring-zulip-to-allow-http">https://zulip.readthedocs.io/en/latest/production/deployment.html#configuring-zulip-to-allow-http</a></p>



<a name="1362036"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362036" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362036">(Apr 07 2022 at 17:58)</a>:</h4>
<p>basically I modified zulip.conf to use http and gave it the nginx proxy IP that sits in front of it</p>



<a name="1362037"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362037" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362037">(Apr 07 2022 at 17:58)</a>:</h4>
<p>I configured my front nginx as described here: <a href="https://zulip.readthedocs.io/en/latest/production/deployment.html#putting-the-zulip-application-behind-a-reverse-proxy">https://zulip.readthedocs.io/en/latest/production/deployment.html#putting-the-zulip-application-behind-a-reverse-proxy</a>  and restarted everything</p>



<a name="1362039"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362039" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362039">(Apr 07 2022 at 17:59)</a>:</h4>
<p>however, whenever I make any request through my front nginx, zulip replies with HTTP/1.1 400 Bad Request</p>



<a name="1362040"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362040" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362040">(Apr 07 2022 at 17:59)</a>:</h4>
<p>What does <code>/var/log/zulip/errors.log</code> say?</p>



<a name="1362041"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362041" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362041">(Apr 07 2022 at 17:59)</a>:</h4>
<p>I ran tcpdump on my front nginx and I see the request going to zulip, it has all the X-headers properly set</p>



<a name="1362043"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362043" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362043">(Apr 07 2022 at 18:00)</a>:</h4>
<p>Likely you need to adjust the <code>ALLOWED_HOSTS</code> in <code>/etc/zulip/settings.py</code></p>



<a name="1362044"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362044" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362044">(Apr 07 2022 at 18:00)</a>:</h4>
<p>nothing at all. it's the first file I checked</p>



<a name="1362045"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362045" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362045">(Apr 07 2022 at 18:00)</a>:</h4>
<p>Huh.  <code>/var/log/zulip/django.log</code> say anything more?</p>



<a name="1362046"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362046" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362046">(Apr 07 2022 at 18:01)</a>:</h4>
<p>one moment, I adjusted ALLOWED_HOSTS and restarted. Let me see now</p>



<a name="1362047"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362047" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362047">(Apr 07 2022 at 18:03)</a>:</h4>
<p>didn't help. django.log shows<br>
[pid: 868|app: 0|req: 4/4] 69.X.250.110 () {68 vars in 1255 bytes} [Thu Apr  7 18:02:48 2022] GET /new/jweha37z5y3neyjaiejs7n2r =&gt; generated 143 bytes in 2 msecs (HTTP/1.1 400) 1 headers in 53 bytes (1 switches on core 0)</p>



<a name="1362048"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362048" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362048">(Apr 07 2022 at 18:04)</a>:</h4>
<p>And requests to <code>/</code> are no better?</p>



<a name="1362049"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362049" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362049">(Apr 07 2022 at 18:06)</a>:</h4>
<p><a href="https://pastebin.com/prpH6A3W">https://pastebin.com/prpH6A3W</a></p>



<a name="1362050"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362050" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362050">(Apr 07 2022 at 18:06)</a>:</h4>
<p>this is the tcpdump packet of what's coming back from zulip server</p>



<a name="1362051"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362051" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362051">(Apr 07 2022 at 18:06)</a>:</h4>
<p>same thing to /</p>



<a name="1362052"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362052" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362052">(Apr 07 2022 at 18:07)</a>:</h4>
<p>What are your <code>ALLOWED_HOSTS</code> set to?</p>



<a name="1362053"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362053" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362053">(Apr 07 2022 at 18:07)</a>:</h4>
<p>Though I think that would show up in the logs.</p>



<a name="1362054"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362054" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362054">(Apr 07 2022 at 18:07)</a>:</h4>
<p>wait, I got something in server.log</p>



<a name="1362055"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362055" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362055">(Apr 07 2022 at 18:08)</a>:</h4>
<p>ERR  [django.security.DisallowedHost] Invalid HTTP_HOST header: '69.X.250.110'. You may need to add '69.X.250.110' to ALLOWED_HOSTS.</p>



<a name="1362057"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362057" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362057">(Apr 07 2022 at 18:08)</a>:</h4>
<p>but that IP is my connecting IP, the client. it's not the server's IP</p>



<a name="1362059"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362059" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362059">(Apr 07 2022 at 18:10)</a>:</h4>
<p>if I connect from another IP, it shows that one and tells me to add it to ALLOWED_HOSTS but that can't be right</p>



<a name="1362060"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362060" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362060">(Apr 07 2022 at 18:10)</a>:</h4>
<p>Then your reverse proxy is sending an incorrect Host header.</p>



<a name="1362061"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362061" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362061">(Apr 07 2022 at 18:11)</a>:</h4>
<p>I'm using this as per docs: proxy_set_header Host $http_host;</p>



<a name="1362064"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362064" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362064">(Apr 07 2022 at 18:12)</a>:</h4>
<p>ok, figured it out</p>



<a name="1362067"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362067" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362067">(Apr 07 2022 at 18:13)</a>:</h4>
<p>woah. my nginx was also sending proxy_set_header  X-Forwarded-Host $remote_addr; and proxy_set_header  X-Forwarded-For $remote_addr;</p>



<a name="1362068"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362068" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362068">(Apr 07 2022 at 18:13)</a>:</h4>
<p>and apparently zulip is reading those instead of HTTP_HOST</p>



<a name="1362069"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362069" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362069">(Apr 07 2022 at 18:13)</a>:</h4>
<p>I removed them and all is good now - thank you Anders!</p>



<a name="1362071"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362071" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362071">(Apr 07 2022 at 18:17)</a>:</h4>
<p><code>X-Forwarded-For</code> is right, but I'm surprised that Zulip trusted the <code>X-Forwarded-Host</code>.  Did you set <code>USE_X_FORWARDED_HOST</code> in your config?</p>



<a name="1362072"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362072" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362072">(Apr 07 2022 at 18:18)</a>:</h4>
<p>Per <a href="https://zulip.readthedocs.io/en/latest/production/deployment.html#nginx-configuration">https://zulip.readthedocs.io/en/latest/production/deployment.html#nginx-configuration</a> you <em>do</em> want to have:</p>
<div class="codehilite" data-code-language="Nginx configuration file"><pre><span></span><code><span class="k">proxy_set_header</span><span class="w">        </span><span class="s">X-Forwarded-For</span><span class="w"> </span><span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>...otherwise the access logs will show the proxy for everything.</p>



<a name="1362074"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362074" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362074">(Apr 07 2022 at 18:19)</a>:</h4>
<p>I did not, I didn't even know about that setting. I just had it in the reverse nginx as a default setting</p>



<a name="1362075"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362075" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362075">(Apr 07 2022 at 18:20)</a>:</h4>
<p>yes, my bad, I kept X-Forwarded-For I only removed these<br>
proxy_set_header X-Forwarded-Proto $scheme;<br>
        proxy_set_header Host $http_host;<br>
        proxy_set_header Upgrade $http_upgrade;<br>
        proxy_set_header Connection $connection_upgrade;<br>
        proxy_set_header X-Forwarded-Proto $scheme;<br>
        proxy_set_header  X-Forwarded-Host $remote_addr;<br>
        proxy_set_header  X-Real-IP $remote_addr;</p>



<a name="1362076"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362076" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362076">(Apr 07 2022 at 18:20)</a>:</h4>
<p>err, didn't remove the Host either :)) sorry, getting confused</p>



<a name="1362077"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362077" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362077">(Apr 07 2022 at 18:21)</a>:</h4>
<p>basically I left it as it's in the docs:<br>
        proxy_set_header X-Forwarded-Proto $scheme;<br>
        proxy_set_header Host $http_host;<br>
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;<br>
        proxy_http_version 1.1;<br>
        proxy_buffering off;<br>
        proxy_read_timeout 20m;</p>



<a name="1362078"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362078" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362078">(Apr 07 2022 at 18:21)</a>:</h4>
<p>I think X-Forwarded-Host was the one causing the issues</p>



<a name="1362080"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362080" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362080">(Apr 07 2022 at 18:28)</a>:</h4>
<p>Yeah, most commonly that would be:</p>
<div class="codehilite" data-code-language="Nginx configuration file"><pre><span></span><code><span class="k">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-Host</span><span class="w"> </span><span class="nv">$http_host</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>not:</p>
<div class="codehilite" data-code-language="Nginx configuration file"><pre><span></span><code><span class="k">proxy_set_header</span><span class="w"> </span><span class="s">X-Forwarded-Host</span><span class="w"> </span><span class="nv">$remote_addr</span><span class="p">;</span><span class="w"></span>
</code></pre></div>



<a name="1362083"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362083" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362083">(Apr 07 2022 at 18:31)</a>:</h4>
<p>We apparently default <code>USE_X_FORWARDED_HOST = True</code>, which explains the behaviour you were seeing.</p>



<a name="1362084"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362084" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> George <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362084">(Apr 07 2022 at 18:32)</a>:</h4>
<p>interesting, I better fix that second bug too for x-forwarded-host. thanks for that as well!</p>



<a name="1362085"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362085" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362085">(Apr 07 2022 at 18:33)</a>:</h4>
<p>You don't need to set <code>X-Forwarded-Host</code> if you're setting <code>Host</code> -- I was just commenting on the configuration you had found in the file.</p>



<a name="1362086"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/reverse_proxy/near/1362086" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/reverse_proxy.html#1362086">(Apr 07 2022 at 18:34)</a>:</h4>
<p>In that I think it would likely confuse other backends other than Zulip. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>