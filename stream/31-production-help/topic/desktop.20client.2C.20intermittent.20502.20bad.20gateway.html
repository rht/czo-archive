<html>
<head><meta charset="utf-8"><title>desktop client, intermittent 502 bad gateway · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html">desktop client, intermittent 502 bad gateway</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="555336"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/555336" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#555336">(Apr 05 2018 at 15:14)</a>:</h4>
<p>Hi, as per this github issue, <a href="https://github.com/zulip/zulip-electron/issues/466" target="_blank" title="https://github.com/zulip/zulip-electron/issues/466">https://github.com/zulip/zulip-electron/issues/466</a> , I experience intermittent 502 bad gateway in console every third  /json/events? request. I tested various scenarios including local setup with just a switch in betwwen server and client. The installation is done over a clean Ubuntu Server 16.04.4 LTS that is current from Ubuntu website. The hypervisor of this VM is Hyper-V 2016 and the VM is created as generation 8 to allow backups.<br/>
These intermittent 502 bad gateway are followed imediately by repeated requests on the same URL with status 200 responses and do not pose a big problem. However if the 502 error happens to the /json/presence? request then the whole desktop client (or chrome browser) get only 502 nginx bad gatweay screen. At this stage the server is not broken. Hard refreshing the browser/client does not solve the issue. Closing the browser/client clears the issue and reopening allows proper reconnect to zulip server. It can take anything from 1 hour to 48 hours for the crash to happen.</p>



<a name="555340"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/555340" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#555340">(Apr 05 2018 at 15:18)</a>:</h4>
<p>As stated before I can provide root access to the server or exported VM for direct investigation</p>



<a name="555359"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/555359" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#555359">(Apr 05 2018 at 15:49)</a>:</h4>
<p>Also I checked the behavior of the client against <a href="http://chat.zulip.org" target="_blank" title="http://chat.zulip.org">chat.zulip.org</a> server. There is no issue like any 502 status response. So the client or my network is not a source of error, all errors happen due to the server.</p>



<a name="555492"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/555492" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#555492">(Apr 05 2018 at 17:55)</a>:</h4>
<p><span class="user-mention" data-user-id="5755">@Richard Vencu</span> let me catch up on other things, but I'd be interested in doing some direct investigation into this after lunch (so in about 2 hours).</p>



<a name="555539"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/555539" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#555539">(Apr 05 2018 at 18:21)</a>:</h4>
<p>When ready please let me know</p>



<a name="555698"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/555698" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#555698">(Apr 05 2018 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> is it possible to postpone this for about 2 weeks? it is almost midnight here and tommorow I leave for Easter vacation.</p>



<a name="555699"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/555699" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#555699">(Apr 05 2018 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="5755">@Richard Vencu</span> yeah, that's fine, let's do this when you're back <span class="emoji emoji-1f603" title="smiley">:smiley:</span></p>



<a name="570461"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/570461" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#570461">(Apr 26 2018 at 08:21)</a>:</h4>
<p>OK, I am back. How to proceed?</p>



<a name="571241"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/571241" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Akash Nimare <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#571241">(Apr 27 2018 at 21:35)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> you might have missed this.</p>



<a name="571243"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/571243" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#571243">(Apr 27 2018 at 21:37)</a>:</h4>
<p>Ahh, yes I did.  <span class="user-mention" data-user-id="5755">@Richard Vencu</span> can you tell us a bit more about your environment (e.g. are you using a host, or an IP address to connect?).  Regardless, ping me in PMs to work out a good time for debugging this.</p>



<a name="571314"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/571314" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#571314">(Apr 28 2018 at 06:01)</a>:</h4>
<p>I am using Windows 2016 Hyper-V Server as hypervisor and Ubuntu Xenial as guest OS. The organization url is <a href="https://chat.dentfix.ro" target="_blank" title="https://chat.dentfix.ro">https://chat.dentfix.ro</a> which resolves to 91.194.31.43</p>



<a name="571316"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/571316" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#571316">(Apr 28 2018 at 06:04)</a>:</h4>
<p>Trying to connect directly to IP address give 400 Bad request error so I am only connecting to the url</p>



<a name="571318"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/desktop%20client%2C%20intermittent%20502%20bad%20gateway/near/571318" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Richard Vencu <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/desktop.20client.2C.20intermittent.20502.20bad.20gateway.html#571318">(Apr 28 2018 at 06:06)</a>:</h4>
<p>I also upgraded the server to 1.8.0 and the problems are persisting.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>