<html>
<head><meta charset="utf-8"><title>update from git · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html">update from git</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="266980"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/266980" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#266980">(Aug 14 2017 at 19:23)</a>:</h4>
<p>just doing an update from master here, too. But I won't see the emoij picker, right?<br>
Yarn installed fine it seems and it was faster updating things than npm</p>



<a name="266982"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/266982" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#266982">(Aug 14 2017 at 19:25)</a>:</h4>
<p>Emoji picker wasn't merged to master just yet</p>



<a name="266984"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/266984" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#266984">(Aug 14 2017 at 19:25)</a>:</h4>
<p>Yep, emoji picker is one of the 2 things I'm currently test-deploying here.</p>



<a name="266985"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/266985" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#266985">(Aug 14 2017 at 19:28)</a>:</h4>
<p>I'll bite--whats' the other? <img alt=":smile_cat:" class="emoji" src="/static/generated/emoji/images/emoji/unicode/1f638.png" title="smile cat"></p>



<a name="266987"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/266987" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#266987">(Aug 14 2017 at 19:29)</a>:</h4>
<p>Zulip got a lot more traction now just because of emoij reactions, haha <img alt=":smile:" class="emoji" src="/static/generated/emoji/images/emoji/unicode/1f604.png" title="smile"></p>



<a name="266988"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/266988" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#266988">(Aug 14 2017 at 19:30)</a>:</h4>
<p>...I mean in our environment</p>



<a name="266989"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/266989" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#266989">(Aug 14 2017 at 19:31)</a>:</h4>
<p>The other was another minor emoji bug fix that isn't currently working :)</p>



<a name="797712"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/797712" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#797712">(Nov 18 2019 at 07:29)</a>:</h4>
<p>Hi there, <br>
wanted to do an update from git yesterday and run into this error: </p>
<div class="codehilite"><pre><span></span>GPG signature looks good
Extracting to /srv/zulip-yarn...
Adding to /usr/bin
Successfully installed Yarn <span class="m">1</span>.19.1!
Generated Camo config file /etc/default/camo
generate_secrets: No new secrets to generate.
<span class="m">2019</span>-11-17 <span class="m">21</span>:22:41,043 upgrade-zulip-stage-2: Building static assets...
Cached version not found! Installing node modules.
+ /srv/zulip-yarn/bin/yarn install --non-interactive --frozen-lockfile --prod

Error running a subcommand of ./tools/update-prod-static: /srv/zulip-yarn/bin/yarn install --non-interactive --frozen-lockfile --prod
Actual error output <span class="k">for</span> the subcommand is just above this.
</pre></div>


<p>what can I do to fix this?</p>



<a name="797776"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/797776" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#797776">(Nov 18 2019 at 18:14)</a>:</h4>
<p>FYI I'm doing an update from git from Zulip 2.0.1</p>



<a name="797796"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/797796" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#797796">(Nov 18 2019 at 20:10)</a>:</h4>
<p><span class="user-mention" data-user-id="1646">@Matthias</span> that likely indicates a networking error.</p>



<a name="797797"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/797797" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#797797">(Nov 18 2019 at 20:10)</a>:</h4>
<p>If you read the logs, there's an <code>update-prod-static.log</code> it outputs the path to; you'll want to read that.</p>



<a name="797852"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/797852" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#797852">(Nov 18 2019 at 21:29)</a>:</h4>
<p>thanks. I'll investigate</p>



<a name="798973"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/798973" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#798973">(Nov 22 2019 at 20:12)</a>:</h4>
<p>I didn't find any useful info in the logs but yesterday I run the update again and apart from very many and long migrations it went through just fine this time. So we are now running 2.1rc in production and no problems.</p>



<a name="798976"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/798976" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#798976">(Nov 22 2019 at 20:13)</a>:</h4>
<p>fyi we cracked through the 1 million messages at weeks ago.</p>



<a name="798978"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/798978" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#798978">(Nov 22 2019 at 20:14)</a>:</h4>
<p>Congrats!</p>



<a name="798979"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/798979" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#798979">(Nov 22 2019 at 20:14)</a>:</h4>
<p>How long did the migrations take in total?  <code>/var/log/zulip/upgrade.log</code> should know.</p>



<a name="798980"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/798980" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#798980">(Nov 22 2019 at 20:14)</a>:</h4>
<p>(Just curious for another data point that isn't our servers)</p>



<a name="798981"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/798981" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#798981">(Nov 22 2019 at 20:23)</a>:</h4>
<p>start at <code>2019-11-21 22:51:28,139</code><br>
upgrade-zulip-stage-2 start at <code>2019-11-21 22:57:10,302</code><br>
upgrade end at <code>2019-11-21 23:09:26,719</code></p>



<a name="798982"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/798982" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#798982">(Nov 22 2019 at 20:23)</a>:</h4>
<p>it's not <em>that</em> long but I noticed the difference since last upgrade around 2.0.1</p>



<a name="798986"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/update%20from%20git/near/798986" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/update.20from.20git.html#798986">(Nov 22 2019 at 20:35)</a>:</h4>
<p>OK, about 12 minutes for 1M messages.  About what I'd have expected -- there are some of our most expensive migrations ever in this release.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>