<html>
<head><meta charset="utf-8"><title>emoji_url error · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html">emoji_url error</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="792901"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/792901" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#792901">(Oct 22 2019 at 15:16)</a>:</h4>
<p>After our upgrade to 2.0.6, some of our users are still getting odd errors. One that I was just looking at was throwing this error in the console: <a href="/user_uploads/2/e2/IraDSu_H-U4RT0wORPEutDEh/Screen-Shot-2019-10-22-at-11.07.35.jpg" target="_blank" title="Screen-Shot-2019-10-22-at-11.07.35.jpg">Screen-Shot-2019-10-22-at-11.07.35.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/e2/IraDSu_H-U4RT0wORPEutDEh/Screen-Shot-2019-10-22-at-11.07.35.jpg" target="_blank" title="Screen-Shot-2019-10-22-at-11.07.35.jpg"><img src="/user_uploads/2/e2/IraDSu_H-U4RT0wORPEutDEh/Screen-Shot-2019-10-22-at-11.07.35.jpg"></a></div>



<a name="792902"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/792902" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#792902">(Oct 22 2019 at 15:16)</a>:</h4>
<p>the user that is getting that error cannot view the "all messages" view anymore</p>



<a name="792936"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/792936" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#792936">(Oct 22 2019 at 19:23)</a>:</h4>
<p>after some digging, we have found that one of the custom emoji is not being returned by the <code>/json/realm/emoji</code> url</p>



<a name="792937"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/792937" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#792937">(Oct 22 2019 at 19:23)</a>:</h4>
<p>its in the database under <code>zerver_realmemoji</code></p>



<a name="793148"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793148" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793148">(Oct 22 2019 at 22:46)</a>:</h4>
<p><span class="user-mention" data-user-id="73">@Tim April</span> if you use a <code>manage.py shell</code>, does it appear in the output of <code>get_realm_emoji_dicts()</code>?</p>



<a name="793149"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793149" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793149">(Oct 22 2019 at 22:47)</a>:</h4>
<p>Based on the code, I would expect that to return everything in that table...</p>



<a name="793329"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793329" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793329">(Oct 23 2019 at 13:24)</a>:</h4>
<p>it showed up in that list</p>



<a name="793330"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793330" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793330">(Oct 23 2019 at 13:25)</a>:</h4>
<p>i PMed you the result</p>



<a name="793460"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793460" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793460">(Oct 23 2019 at 20:55)</a>:</h4>
<p><span class="user-mention" data-user-id="73">@Tim April</span> interesting, can you confirm that the <code>/json/realm/emoji</code> endpoint doesn't contain it?</p>



<a name="793461"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793461" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793461">(Oct 23 2019 at 20:56)</a>:</h4>
<p>That seems unlikely to me; I would much more expect it to be some sort of frontend data tracking bug.</p>



<a name="793663"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793663" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793663">(Oct 24 2019 at 14:20)</a>:</h4>
<p>it appears there now, but it might be past the caching window</p>



<a name="793730"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793730" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793730">(Oct 24 2019 at 20:29)</a>:</h4>
<p><span class="user-mention" data-user-id="73">@Tim April</span> hmm, ok, that's annoying.  Does the issue still occur for anyone?</p>



<a name="793745"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/emoji_url%20error/near/793745" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/emoji_url.20error.html#793745">(Oct 24 2019 at 20:41)</a>:</h4>
<p>I dont think so, the migration was a little over a week ago, so the caches should be expired</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>