<html>
<head><meta charset="utf-8"><title>New Relic · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html">New Relic</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1054092"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1054092" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1054092">(Nov 02 2020 at 05:03)</a>:</h4>
<p>I tried to create a New Relic web hook (cf. <a href="https://github.com/zulip/zulip/pull/16682">https://github.com/zulip/zulip/pull/16682</a>). I can set it up in New Relic One and trigger a test notification, but upon doing so I receive this popup from New Relic:</p>
<div class="codehilite"><pre><span></span><code>{
response: 200,
Unable to invoke Webhook. Webhook responded with HTTP status code 400.
}
</code></pre></div>
<p>No message arrives in the Zulip stream.</p>
<p>How do I debug this further? Is there a way to view the logs of web hooks registered for my Zulip instance?</p>



<a name="1054953"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1054953" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1054953">(Nov 02 2020 at 23:49)</a>:</h4>
<p><span class="user-mention" data-user-id="12320">@Dennis Schridde</span> are you self-hosting or using Zulip Cloud?</p>



<a name="1054959"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1054959" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1054959">(Nov 02 2020 at 23:49)</a>:</h4>
<p><code>/var/log/zulip/webhooks-errors.log</code> (or some name along those lines) should have details on any failures.</p>



<a name="1054961"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1054961" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1054961">(Nov 02 2020 at 23:49)</a>:</h4>
<p>Given the "New Relic One" name, I wonder if it's a relaunched product with a different format than the old New Relic webhook.</p>



<a name="1055405"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1055405" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1055405">(Nov 03 2020 at 05:45)</a>:</h4>
<p>I am using Zulip Cloud.</p>
<p>I was wondering the same, but don't know how to figure out what Zulip sees internally.</p>



<a name="1056355"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1056355" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1056355">(Nov 04 2020 at 00:02)</a>:</h4>
<p>With Zulip cloud our support team can investigate.</p>



<a name="1056854"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1056854" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1056854">(Nov 04 2020 at 14:29)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span>, thanks, that would be great!</p>



<a name="1057948"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1057948" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1057948">(Nov 05 2020 at 21:30)</a>:</h4>
<p>In case it helps, I looked up the docs: <a href="https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-notifications/customize-your-webhook-payload#variables">https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-notifications/customize-your-webhook-payload#variables</a></p>
<p>Example payload as shown in my configuration when pressing "custom payload" as recommended in the docs:</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"account_id"</span><span class="p">:</span> <span class="s2">"$ACCOUNT_ID"</span><span class="p">,</span>
  <span class="nt">"account_name"</span><span class="p">:</span> <span class="s2">"$ACCOUNT_NAME"</span><span class="p">,</span>
  <span class="nt">"closed_violations_count_critical"</span><span class="p">:</span> <span class="s2">"$CLOSED_VIOLATIONS_COUNT_CRITICAL"</span><span class="p">,</span>
  <span class="nt">"closed_violations_count_warning"</span><span class="p">:</span> <span class="s2">"$CLOSED_VIOLATIONS_COUNT_WARNING"</span><span class="p">,</span>
  <span class="nt">"condition_description"</span><span class="p">:</span> <span class="s2">"$DESCRIPTION"</span><span class="p">,</span>
  <span class="nt">"condition_family_id"</span><span class="p">:</span> <span class="s2">"$CONDITION_FAMILY_ID"</span><span class="p">,</span>
  <span class="nt">"condition_name"</span><span class="p">:</span> <span class="s2">"$CONDITION_NAME"</span><span class="p">,</span>
  <span class="nt">"current_state"</span><span class="p">:</span> <span class="s2">"$EVENT_STATE"</span><span class="p">,</span>
  <span class="nt">"details"</span><span class="p">:</span> <span class="s2">"$EVENT_DETAILS"</span><span class="p">,</span>
  <span class="nt">"duration"</span><span class="p">:</span> <span class="s2">"$DURATION"</span><span class="p">,</span>
  <span class="nt">"event_type"</span><span class="p">:</span> <span class="s2">"$EVENT_TYPE"</span><span class="p">,</span>
  <span class="nt">"incident_acknowledge_url"</span><span class="p">:</span> <span class="s2">"$INCIDENT_ACKNOWLEDGE_URL"</span><span class="p">,</span>
  <span class="nt">"incident_id"</span><span class="p">:</span> <span class="s2">"$INCIDENT_ID"</span><span class="p">,</span>
  <span class="nt">"incident_url"</span><span class="p">:</span> <span class="s2">"$INCIDENT_URL"</span><span class="p">,</span>
  <span class="nt">"metadata"</span><span class="p">:</span> <span class="s2">"$METADATA"</span><span class="p">,</span>
  <span class="nt">"open_violations_count_critical"</span><span class="p">:</span> <span class="s2">"$OPEN_VIOLATIONS_COUNT_CRITICAL"</span><span class="p">,</span>
  <span class="nt">"open_violations_count_warning"</span><span class="p">:</span> <span class="s2">"$OPEN_VIOLATIONS_COUNT_WARNING"</span><span class="p">,</span>
  <span class="nt">"owner"</span><span class="p">:</span> <span class="s2">"$EVENT_OWNER"</span><span class="p">,</span>
  <span class="nt">"policy_name"</span><span class="p">:</span> <span class="s2">"$POLICY_NAME"</span><span class="p">,</span>
  <span class="nt">"policy_url"</span><span class="p">:</span> <span class="s2">"$POLICY_URL"</span><span class="p">,</span>
  <span class="nt">"runbook_url"</span><span class="p">:</span> <span class="s2">"$RUNBOOK_URL"</span><span class="p">,</span>
  <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"$SEVERITY"</span><span class="p">,</span>
  <span class="nt">"targets"</span><span class="p">:</span> <span class="s2">"$TARGETS"</span><span class="p">,</span>
  <span class="nt">"timestamp"</span><span class="p">:</span> <span class="s2">"$TIMESTAMP"</span><span class="p">,</span>
  <span class="nt">"violation_callback_url"</span><span class="p">:</span> <span class="s2">"$VIOLATION_CALLBACK_URL"</span><span class="p">,</span>
  <span class="nt">"violation_chart_url"</span><span class="p">:</span> <span class="s2">"$VIOLATION_CHART_URL"</span>
<span class="p">}</span>
</code></pre></div>



<a name="1058876"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1058876" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1058876">(Nov 06 2020 at 18:51)</a>:</h4>
<p>OK, that format looks to be completely unrelated to their old event format.</p>



<a name="1058877"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1058877" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1058877">(Nov 06 2020 at 18:51)</a>:</h4>
<p><span class="user-mention" data-user-id="9895">@Hemanth V. Alluri</span> do you have a bit of time to at least turn this into an issue, or potentially just write a <code>newrelic2</code> integration?</p>



<a name="1058878"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1058878" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1058878">(Nov 06 2020 at 18:51)</a>:</h4>
<p><span class="user-mention" data-user-id="12320">@Dennis Schridde</span> is it possible to use the old New Relic?  I'm wondering if the right fix is to just replace the existing one or we need to support both.</p>



<a name="1058919"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1058919" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1058919">(Nov 06 2020 at 19:45)</a>:</h4>
<p>Since the product is now called New Relic One, naming the integration <code>newrelicone</code> or <code>nr1</code> (an abbreviation they use in some of their products) would be one idea. Others name it after the new tool name “New Relic Alerts“.</p>
<p>I found another page with a more complete example: <a href="https://docs.opsgenie.com/docs/newrelic-alerts-integration">https://docs.opsgenie.com/docs/newrelic-alerts-integration</a></p>
<p>I do not know whether there is a way to still use the old tools. But I can ask their support team about it: <a href="https://discuss.newrelic.com/t/legacy-new-relic-web-hooks/120672">https://discuss.newrelic.com/t/legacy-new-relic-web-hooks/120672</a></p>



<a name="1058986"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1058986" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1058986">(Nov 06 2020 at 23:49)</a>:</h4>
<p>Yeah, calling it "newrelicone" makes sense to me.</p>



<a name="1059115"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1059115" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hemanth V. Alluri <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1059115">(Nov 07 2020 at 04:27)</a>:</h4>
<p><span class="user-mention" data-user-id="12320">@Dennis Schridde</span>  have you found out anything from their support team yet? Once we know if <code>New Relic</code> has been completely replaced with <code>New Relic One</code> we can open an issue for this.</p>



<a name="1059119"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1059119" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1059119">(Nov 07 2020 at 04:40)</a>:</h4>
<p><span class="user-mention" data-user-id="9895">@Hemanth V. Alluri</span> No, I have not. No one responded to <a href="https://discuss.newrelic.com/t/legacy-new-relic-web-hooks/120672">https://discuss.newrelic.com/t/legacy-new-relic-web-hooks/120672</a> so far.</p>



<a name="1059126"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1059126" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hemanth V. Alluri <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1059126">(Nov 07 2020 at 05:14)</a>:</h4>
<p>Alright, let's just wait a bit longer then.</p>



<a name="1060258"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1060258" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1060258">(Nov 09 2020 at 14:39)</a>:</h4>
<p><span class="user-mention" data-user-id="9895">@Hemanth V. Alluri</span> I received a response: <a href="https://discuss.newrelic.com/t/legacy-new-relic-web-hooks/120672/2">https://discuss.newrelic.com/t/legacy-new-relic-web-hooks/120672/2</a> Could you please provide the requested information? I am currently unable to do the research and respond myself.</p>



<a name="1060269"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1060269" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hemanth V. Alluri <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1060269">(Nov 09 2020 at 15:00)</a>:</h4>
<p><span class="user-mention" data-user-id="12320">@Dennis Schridde</span> I believe that you can just send them this: <a href="https://github.com/zulip/zulip/tree/master/zerver/webhooks/newrelic/fixtures">https://github.com/zulip/zulip/tree/master/zerver/webhooks/newrelic/fixtures</a></p>



<a name="1060270"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1060270" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hemanth V. Alluri <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1060270">(Nov 09 2020 at 15:06)</a>:</h4>
<p>But on second thought, I think that showing them something pretty-printed would make things easier:</p>
<div class="codehilite"><pre><span></span><code>alert = {
    &quot;created_at&quot;: &quot;2013-07-23T20:14:15+00:00&quot;,
    &quot;application_name&quot;: &quot;Application name&quot;,
    &quot;account_name&quot;: &quot;Account name&quot;,
    &quot;severity&quot;: &quot;critical&quot;,
    &quot;message&quot;: &quot;Apdex score fell below critical level of 0.90&quot;,
    &quot;short_description&quot;: &quot;[application name] alert opened&quot;,
    &quot;long_description&quot;: &quot;Alert opened on [application name]: Apdex score fell below critical level of 0.90&quot;,
    &quot;alert_url&quot;: &quot;https://rpm.newrelc.com/accounts/[account_id]/applications/[application_id]/incidents/[incident_id]&quot;
}
</code></pre></div>
<p>and</p>
<div class="codehilite"><pre><span></span><code>deployment = {
    &quot;created_at&quot;: &quot;2013-07-23T20:14:25Z&quot;,
    &quot;deployed_by&quot;: &quot;Zulip Test&quot;,
    &quot;revision&quot;: &quot;1242&quot;,
    &quot;description&quot;: &quot;Description sent via curl&quot;,
    &quot;application_name&quot;: &quot;Test App&quot;,
    &quot;account_name&quot;: &quot;Zulip Test&quot;,
    &quot;changelog&quot;: &quot;Changelog string&quot;,
    &quot;deployment_url&quot;: &quot;https://rpm.newrelic.com/accounts/382116/applications/2135922/deployments/679885&quot;
}
</code></pre></div>



<a name="1060271"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1060271" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hemanth V. Alluri <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1060271">(Nov 09 2020 at 15:09)</a>:</h4>
<p>So if you could share these with them, that would be great! (I wanna try to avoid making an account there myself)</p>



<a name="1060273"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1060273" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1060273">(Nov 09 2020 at 15:13)</a>:</h4>
<p>Done, thanks.</p>



<a name="1061306"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1061306" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1061306">(Nov 11 2020 at 00:44)</a>:</h4>
<p>I was able to find the initial new relic blog post when I was looking for documentation for the old format. I sent it on the support thread with new relic.<br>
For reference:<br>
<a href="https://blog.newrelic.com/product-news/using-webhooks-to-get-real-time-information-about-your-application/">https://blog.newrelic.com/product-news/using-webhooks-to-get-real-time-information-about-your-application/</a></p>



<a name="1061649"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1061649" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1061649">(Nov 11 2020 at 13:25)</a>:</h4>
<p>I received a response from the New Relic team: <a href="https://discuss.newrelic.com/t/legacy-new-relic-web-hooks/120672/6">https://discuss.newrelic.com/t/legacy-new-relic-web-hooks/120672/6</a></p>
<p>According to them, the old web him is now unsupported. I assume support can be removed from Zulip.</p>



<a name="1061809"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1061809" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1061809">(Nov 11 2020 at 19:06)</a>:</h4>
<p>Ok, I will start working on it!</p>



<a name="1061818"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1061818" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1061818">(Nov 11 2020 at 19:25)</a>:</h4>
<p>s/web him/web hook/ (auto correct <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span>)</p>



<a name="1061900"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1061900" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1061900">(Nov 12 2020 at 00:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="12320">Dennis Schridde</span> <a href="#narrow/stream/31-production-help/topic/New.20Relic/near/1057948">said</a>:</p>
<blockquote>
<p>In case it helps, I looked up the docs: <a href="https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-notifications/customize-your-webhook-payload#variables">https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-notifications/customize-your-webhook-payload#variables</a></p>
<p>Example payload as shown in my configuration when pressing "custom payload" as recommended in the docs:</p>
<p><div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span>
  <span class="nt">"account_id"</span><span class="p">:</span> <span class="s2">"$ACCOUNT_ID"</span><span class="p">,</span>
  <span class="nt">"account_name"</span><span class="p">:</span> <span class="s2">"$ACCOUNT_NAME"</span><span class="p">,</span>
  <span class="nt">"closed_violations_count_critical"</span><span class="p">:</span> <span class="s2">"$CLOSED_VIOLATIONS_COUNT_CRITICAL"</span><span class="p">,</span>
  <span class="nt">"closed_violations_count_warning"</span><span class="p">:</span> <span class="s2">"$CLOSED_VIOLATIONS_COUNT_WARNING"</span><span class="p">,</span>
  <span class="nt">"condition_description"</span><span class="p">:</span> <span class="s2">"$DESCRIPTION"</span><span class="p">,</span>
  <span class="nt">"condition_family_id"</span><span class="p">:</span> <span class="s2">"$CONDITION_FAMILY_ID"</span><span class="p">,</span>
  <span class="nt">"condition_name"</span><span class="p">:</span> <span class="s2">"$CONDITION_NAME"</span><span class="p">,</span>
  <span class="nt">"current_state"</span><span class="p">:</span> <span class="s2">"$EVENT_STATE"</span><span class="p">,</span>
  <span class="nt">"details"</span><span class="p">:</span> <span class="s2">"$EVENT_DETAILS"</span><span class="p">,</span>
  <span class="nt">"duration"</span><span class="p">:</span> <span class="s2">"$DURATION"</span><span class="p">,</span>
  <span class="nt">"event_type"</span><span class="p">:</span> <span class="s2">"$EVENT_TYPE"</span><span class="p">,</span>
  <span class="nt">"incident_acknowledge_url"</span><span class="p">:</span> <span class="s2">"$INCIDENT_ACKNOWLEDGE_URL"</span><span class="p">,</span>
  <span class="nt">"incident_id"</span><span class="p">:</span> <span class="s2">"$INCIDENT_ID"</span><span class="p">,</span>
  <span class="nt">"incident_url"</span><span class="p">:</span> <span class="s2">"$INCIDENT_URL"</span><span class="p">,</span>
  <span class="nt">"metadata"</span><span class="p">:</span> <span class="s2">"$METADATA"</span><span class="p">,</span>
  <span class="nt">"open_violations_count_critical"</span><span class="p">:</span> <span class="s2">"$OPEN_VIOLATIONS_COUNT_CRITICAL"</span><span class="p">,</span>
  <span class="nt">"open_violations_count_warning"</span><span class="p">:</span> <span class="s2">"$OPEN_VIOLATIONS_COUNT_WARNING"</span><span class="p">,</span>
  <span class="nt">"owner"</span><span class="p">:</span> <span class="s2">"$EVENT_OWNER"</span><span class="p">,</span>
  <span class="nt">"policy_name"</span><span class="p">:</span> <span class="s2">"$POLICY_NAME"</span><span class="p">,</span>
  <span class="nt">"policy_url"</span><span class="p">:</span> <span class="s2">"$POLICY_URL"</span><span class="p">,</span>
  <span class="nt">"runbook_url"</span><span class="p">:</span> <span class="s2">"$RUNBOOK_URL"</span><span class="p">,</span>
  <span class="nt">"severity"</span><span class="p">:</span> <span class="s2">"$SEVERITY"</span><span class="p">,</span>
  <span class="nt">"targets"</span><span class="p">:</span> <span class="s2">"$TARGETS"</span><span class="p">,</span>
  <span class="nt">"timestamp"</span><span class="p">:</span> <span class="s2">"$TIMESTAMP"</span><span class="p">,</span>
  <span class="nt">"violation_callback_url"</span><span class="p">:</span> <span class="s2">"$VIOLATION_CALLBACK_URL"</span><span class="p">,</span>
  <span class="nt">"violation_chart_url"</span><span class="p">:</span> <span class="s2">"$VIOLATION_CHART_URL"</span>
<span class="p">}</span>
</code></pre></div><br>
</p>
</blockquote>
<p><span class="user-mention" data-user-id="12320">@Dennis Schridde</span> Are there any specific fields that would be useful in the summary?<br>
Would including the Acknowledge url in the summary for open notifications be useful?<br>
Right now I am planning on using the policy_name for the topic and including condition_name, current_state, details, and incident_url in the description.<br>
Does this sound good?</p>



<a name="1061901"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1061901" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1061901">(Nov 12 2020 at 00:58)</a>:</h4>
<p>Additionally, would support for a custom field be helpful?</p>



<a name="1061955"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1061955" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1061955">(Nov 12 2020 at 05:46)</a>:</h4>
<p>I have no idea. I do not even know what some of these fields contain. I would suggest to start with something basic, try how that looks like in practice and then improve from there.</p>



<a name="1062565"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1062565" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1062565">(Nov 13 2020 at 01:44)</a>:</h4>
<p><a href="/user_uploads/2/b3/lpcexJdEBRqQgApW5CyJoFgt/Screen-Shot-2020-11-12-at-8.31.16-PM.png">Screen-Shot-2020-11-12-at-8.31.16-PM.png</a> <br>
Here is the result. I think it looks pretty good. I ended up connecting my EC2 instance to NewRelic in order to get some test data I could actually understand.</p>
<div class="message_inline_image"><a href="/user_uploads/2/b3/lpcexJdEBRqQgApW5CyJoFgt/Screen-Shot-2020-11-12-at-8.31.16-PM.png" title="Screen-Shot-2020-11-12-at-8.31.16-PM.png"><img src="/user_uploads/2/b3/lpcexJdEBRqQgApW5CyJoFgt/Screen-Shot-2020-11-12-at-8.31.16-PM.png"></a></div>



<a name="1062567"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1062567" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1062567">(Nov 13 2020 at 01:46)</a>:</h4>
<p>The notification bot message happens if a message in the old format is received.</p>



<a name="1063355"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063355" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063355">(Nov 14 2020 at 13:04)</a>:</h4>
<p>Looks awesome! Thanks a lot for your work!</p>
<p>Some questions and remarks:</p>
<ul>
<li>You open a new topic for each incident? (Is the incident number displayed anywhere and I just don't see it?)</li>
<li>Can Zulip prominently display the incident status (open/acknowledged/closed) somewhere? Highlighted in a box? Or with a red/purple/green background colour? Maybe in the topic title?</li>
<li>Can Zulip display "acknowledge" and "view" as actual buttons that stick out a bit more?</li>
<li>Is it possible to display the "view" button / link only on the first message and just include what changed in the following messages?<ul>
<li>I think we can safely assume that all notifications (open/acknowledged/closed, in particular "open") get through to Zulip, so the check could be simplified from "first message in topic" to "state=open", if that helps.</li>
</ul>
</li>
</ul>



<a name="1063385"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063385" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063385">(Nov 14 2020 at 17:13)</a>:</h4>
<p>I'll make some changes. I can definitely make the status bold and move links to first message only. I will remove the acknowledge link because it takes you to the same place as incident url and has the potential to be accidentally clicked and there is no confirmation before acknowledging.<br>
I can bold the state but I do not think I can change the topic because then it would make 3 topics and they wouldn't be grouped.</p>



<a name="1063389"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063389" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063389">(Nov 14 2020 at 17:35)</a>:</h4>
<p>P.S. My ideal Zulip / New Relic experience would be to get an overview over ongoing incidents (hopefully none <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span> ) by looking at the <code>#alerts</code> stream, where each topic would quickly tell me what the impact is, how old it is and whether someone is already working on it.</p>



<a name="1063390"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063390" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063390">(Nov 14 2020 at 17:39)</a>:</h4>
<p>Do you know of any other integrations with a similar experience? I am not sure if it is possible to change the title of a topic from a webhook.</p>



<a name="1063391"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063391" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063391">(Nov 14 2020 at 17:43)</a>:</h4>
<p>No, I am just dreaming. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="1063392"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063392" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063392">(Nov 14 2020 at 17:45)</a>:</h4>
<p>Is marking a topic as "[answered]" or "[resolved]", like it is a custom in some community forums, a thing in Zulip? How do people handle this use case in Zulip?</p>
<p>I do see a "[moved to production help]" prefix in the <a class="stream" data-stream-id="138" href="/#narrow/stream/138-user-community">#user community</a> stream. How did that end up there?</p>



<a name="1063394"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063394" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063394">(Nov 14 2020 at 17:47)</a>:</h4>
<p>My guess is someone manually changed it</p>



<a name="1063396"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063396" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063396">(Nov 14 2020 at 17:59)</a>:</h4>
<p>I can get a snapshot of the duration of the incident at each stage. It won't show current time open, but I could show how long it was open for on the close message.</p>



<a name="1063397"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063397" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063397">(Nov 14 2020 at 18:02)</a>:</h4>
<p><code>.timestamp</code> contains the time the notification was sent? Then <code>.timestamp - .duration</code> should be the time the incident was opened? You could probably convert that into something human readable in the backend.</p>



<a name="1063401"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063401" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063401">(Nov 14 2020 at 18:08)</a>:</h4>
<p>So a timestamp would be simple to provide. I would be concerned by timezones though.</p>



<a name="1063402"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063402" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063402">(Nov 14 2020 at 18:10)</a>:</h4>
<p>The time the messages are sent is a pretty good indicator of when the alert happened.</p>



<a name="1063403"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063403" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063403">(Nov 14 2020 at 18:12)</a>:</h4>
<p>Actually, timezones should not be a problem.</p>



<a name="1063409"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063409" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063409">(Nov 14 2020 at 18:41)</a>:</h4>
<p><a href="/user_uploads/2/d0/eyJ3TSRqFWZCon3qi-EcNBEl/Screen-Shot-2020-11-14-at-1.40.18-PM.png">Screen-Shot-2020-11-14-at-1.40.18-PM.png</a> Here is what the open message looks like. Thoughts?</p>
<div class="message_inline_image"><a href="/user_uploads/2/d0/eyJ3TSRqFWZCon3qi-EcNBEl/Screen-Shot-2020-11-14-at-1.40.18-PM.png" title="Screen-Shot-2020-11-14-at-1.40.18-PM.png"><img src="/user_uploads/2/d0/eyJ3TSRqFWZCon3qi-EcNBEl/Screen-Shot-2020-11-14-at-1.40.18-PM.png"></a></div>



<a name="1063410"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063410" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063410">(Nov 14 2020 at 18:46)</a>:</h4>
<p><a href="/user_uploads/2/a5/RWYgCuUq2RBez_1N26-pgn7j/Screen-Shot-2020-11-14-at-1.44.27-PM.png">Screen-Shot-2020-11-14-at-1.44.27-PM.png</a> This is what the following messages will look like.</p>
<div class="message_inline_image"><a href="/user_uploads/2/a5/RWYgCuUq2RBez_1N26-pgn7j/Screen-Shot-2020-11-14-at-1.44.27-PM.png" title="Screen-Shot-2020-11-14-at-1.44.27-PM.png"><img src="/user_uploads/2/a5/RWYgCuUq2RBez_1N26-pgn7j/Screen-Shot-2020-11-14-at-1.44.27-PM.png"></a></div>



<a name="1063411"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063411" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063411">(Nov 14 2020 at 18:47)</a>:</h4>
<p>The formatting of the message looks excellent! <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> Follow up messages are awesome: concise and informative. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span><br>
What about the incident ID (i.e. <code>.incident_id</code>) in the topic title?</p>



<a name="1063413"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063413" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063413">(Nov 14 2020 at 18:47)</a>:</h4>
<p>I can do that</p>



<a name="1063414"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063414" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063414">(Nov 14 2020 at 18:49)</a>:</h4>
<p>That would result in a new topic being created for each incident, even under the same policy. Is this ok?</p>



<a name="1063415"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063415" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063415">(Nov 14 2020 at 19:04)</a>:</h4>
<p>That sounds like a good thing, because then you can handle each incident independently of previous instances. Each will have its own discussion and subscribed people and so on, without the topic being cluttered with discussion from the last incidents. In case you want to see that, you could still search for the policy name.</p>



<a name="1063416"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063416" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063416">(Nov 14 2020 at 19:09)</a>:</h4>
<p><a href="/user_uploads/2/18/yL4BkmIBUBGowuSLlhgF1t77/Screen-Shot-2020-11-14-at-2.08.55-PM.png">Screen-Shot-2020-11-14-at-2.08.55-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/18/yL4BkmIBUBGowuSLlhgF1t77/Screen-Shot-2020-11-14-at-2.08.55-PM.png" title="Screen-Shot-2020-11-14-at-2.08.55-PM.png"><img src="/user_uploads/2/18/yL4BkmIBUBGowuSLlhgF1t77/Screen-Shot-2020-11-14-at-2.08.55-PM.png"></a></div>



<a name="1063417"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063417" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063417">(Nov 14 2020 at 19:12)</a>:</h4>
<p><a href="/user_uploads/2/d0/-YFJJVoTbG4ONP_HRc4AQsSB/Screen-Shot-2020-11-14-at-2.10.16-PM.png">Screen-Shot-2020-11-14-at-2.10.16-PM.png</a> I did notice the incident id gets cut off, although I wouldn't expect the exact id to be super important, what is more important is that it is a new topic right?</p>
<div class="message_inline_image"><a href="/user_uploads/2/d0/-YFJJVoTbG4ONP_HRc4AQsSB/Screen-Shot-2020-11-14-at-2.10.16-PM.png" title="Screen-Shot-2020-11-14-at-2.10.16-PM.png"><img src="/user_uploads/2/d0/-YFJJVoTbG4ONP_HRc4AQsSB/Screen-Shot-2020-11-14-at-2.10.16-PM.png"></a></div>



<a name="1063418"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063418" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063418">(Nov 14 2020 at 19:14)</a>:</h4>
<p>Looks awesome! LGTM <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="1063508"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063508" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Pilgrim (neiljp) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063508">(Nov 15 2020 at 06:16)</a>:</h4>
<p>Re the incident ID, it made me wonder for that or anything else, would it help to have a link in the topic?</p>



<a name="1063545"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063545" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063545">(Nov 15 2020 at 09:26)</a>:</h4>
<p>Does Zulip support that? How would you distinguish someone wanting to open and read the topic from someone wanting to follow the link to the incident at New Relic?</p>



<a name="1063626"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063626" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Pilgrim (neiljp) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063626">(Nov 15 2020 at 18:04)</a>:</h4>
<p>It doesn't support it in the topic list - one can hover over the topic to show the full name though.</p>
<p>It mainly made me wonder if the "View Incident" could be supplemented (or alternatively replaced, per configuration perhaps) by a link in the topic - if I understand correctly that the incident number is in the title. That may help in compacting the output further, if that's a factor.</p>



<a name="1063627"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1063627" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Pilgrim (neiljp) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1063627">(Nov 15 2020 at 18:29)</a>:</h4>
<p>Re changing the topic name for the status, depending on your server setup then this is definitely feasible if this was simply using the API.</p>
<p>I'm not sure if there's any position on extending webhooks for this, or just to use a fuller-featured interface.</p>



<a name="1065887"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1065887" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1065887">(Nov 19 2020 at 01:29)</a>:</h4>
<p>We don't currently have a way to put a link in the topic unless you either (1) have a Linkifier setup or (2) have the actual URL present in the topic, which would be overly verbose.</p>



<a name="1065914"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1065914" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Pilgrim (neiljp) <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1065914">(Nov 19 2020 at 01:53)</a>:</h4>
<p>Right, I just noticed that this was tested and remembered that - I'm used to all the linkifiers. Is this a feasible extension - link markdown in topics?</p>



<a name="1066665"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1066665" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1066665">(Nov 19 2020 at 19:58)</a>:</h4>
<p>Yeah, that's certainly an implementable extension.  We'd need to think about the semantics, adjust the length limit for topics to be a visible length limit, and of course port it to every client.</p>



<a name="1069991"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1069991" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1069991">(Nov 25 2020 at 18:28)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="17808">@Max Zawisa</span> and <span class="user-mention" data-user-id="7">@Tim Abbott</span>! I just tested the new New Relic web hook on <a href="http://zulipchat.com">zulipchat.com</a> and it works!</p>
<p>One thing I noticed in the docs: <a href="https://zulip.com/integrations/doc/newrelic">https://zulip.com/integrations/doc/newrelic</a> says to pass <code>stream=stream%20name</code>. I tried to apply the same pattern to other characters that would be URL-encoded to a %form and passed <code>stream=stream%2Fname</code> (for <code>stream/name</code>). However, the Zulip Notification Bot contacted me when triggering the test notification on New Relic, telling me that the stream <code>#stream%2Fname</code> does not exist. So maybe this has changed and now with the new New Relic web hooks URL-encoding is no longer necessary?</p>
<p>And a question / request: <span class="user-mention" data-user-id="17808">@Max Zawisa</span>, did you notice anything when testing "acknowledged" or "closed" events, is information about the person triggering the event included in the payload? I do not see anything obvious in the <a href="https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/alert-notifications/customize-your-webhook-payload#variables">documentation</a>, but maybe you saw something while testing. Having it read "Incident acknowledged by John Doe for condition: ..." would be quite useful.</p>



<a name="1070067"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1070067" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1070067">(Nov 25 2020 at 20:19)</a>:</h4>
<p>It looks like that would be possible to do.  I am not sure what the payload would look like for events that are closed automatically by time.</p>



<a name="1070070"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1070070" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Schridde <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1070070">(Nov 25 2020 at 20:56)</a>:</h4>
<p>Phil Weber answered my question regarding how to determine who caused the change of state: <a href="https://discuss.newrelic.com/t/get-person-who-acknowledged-or-closed-an-incident-from-alert-web-hook/122678">https://discuss.newrelic.com/t/get-person-who-acknowledged-or-closed-an-incident-from-alert-web-hook/122678</a></p>
<p><code>$EVENT_OWNER</code> contains the information. It will contain the name of the person who caused the change. If the change was not caused by a user, it will be empty.</p>



<a name="1070082"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1070082" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1070082">(Nov 25 2020 at 21:31)</a>:</h4>
<p>From my testing, it looks like that is the case for acknowledge notifications, although when it was automatically closed it also had an owner.</p>



<a name="1070187"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1070187" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Max Zawisa <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1070187">(Nov 26 2020 at 01:30)</a>:</h4>
<p>So I can confirm the way it works is it will have the name in the owner field on closed if a user closes it, or if a user acknowledges it and then it is closed by timeout. The users name who will appear is the user who acknowledged it.</p>



<a name="1081033"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1081033" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1081033">(Dec 15 2020 at 20:05)</a>:</h4>
<p>Merged, thanks <span class="user-mention" data-user-id="17808">@Max Zawisa</span> and <span class="user-mention" data-user-id="12320">@Dennis Schridde</span>!</p>



<a name="1081035"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/New%20Relic/near/1081035" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/New.20Relic.html#1081035">(Dec 15 2020 at 20:05)</a>:</h4>
<p>The revisions should be in production in a couple days.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>