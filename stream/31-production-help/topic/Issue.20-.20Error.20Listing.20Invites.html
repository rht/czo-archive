<html>
<head><meta charset="utf-8"><title>Issue - Error Listing Invites · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20-.20Error.20Listing.20Invites.html">Issue - Error Listing Invites</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1424993"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20-%20Error%20Listing%20Invites/near/1424993" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> VS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20-.20Error.20Listing.20Invites.html#1424993">(Aug 25 2022 at 17:23)</a>:</h4>
<p>I am facing an issue where the memory on our Zulip Server is timing out. This started happening after an invite to a user went wrong. Since then I'm facing the following error when trying to view invites:</p>
<div class="codehilite"><pre><span></span><code>2022-08-25 17:19:36.227 ERR  [zerver.middleware.json_error_handler] Traceback (most recent call last):
  File &quot;/srv/zulip-venv-cache/5a2b3930c13b10581d6b0313fd9b016d02c6b36e/zulip-py3-venv/lib/python3.8/site-packages/django/core/handlers/base.py&quot;, line 181, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File &quot;/home/zulip/deployments/2022-08-24-16-04-02/./zerver/lib/rest.py&quot;, line 33, in _wrapped_view_func
    response = view_func(request, *args, **kwargs)
  File &quot;/srv/zulip-venv-cache/5a2b3930c13b10581d6b0313fd9b016d02c6b36e/zulip-py3-venv/lib/python3.8/site-packages/django/views/decorators/csrf.py&quot;, line 54, in wrapped_view
    return view_func(*args, **kwargs)
  File &quot;/home/zulip/deployments/2022-08-24-16-04-02/./zerver/lib/rest.py&quot;, line 169, in rest_dispatch
    return target_function(request, **kwargs)
  File &quot;/srv/zulip-venv-cache/5a2b3930c13b10581d6b0313fd9b016d02c6b36e/zulip-py3-venv/lib/python3.8/site-packages/django/utils/decorators.py&quot;, line 130, in _wrapped_view
    response = view_func(request, *args, **kwargs)
  File &quot;/home/zulip/deployments/2022-08-24-16-04-02/./zerver/decorator.py&quot;, line 790, in _wrapped_view_func
    return authenticate_log_and_execute_json(
  File &quot;/home/zulip/deployments/2022-08-24-16-04-02/./zerver/decorator.py&quot;, line 777, in authenticate_log_and_execute_json
    return limited_view_func(request, user_profile, *args, **kwargs)
  File &quot;/home/zulip/deployments/2022-08-24-16-04-02/./zerver/decorator.py&quot;, line 984, in wrapped_func
    return func(request, *args, **kwargs)
  File &quot;/home/zulip/deployments/2022-08-24-16-04-02/./zerver/decorator.py&quot;, line 599, in _wrapped_view_func
    return view_func(request, user_profile, *args, **kwargs)
  File &quot;/home/zulip/deployments/2022-08-24-16-04-02/./zerver/views/invite.py&quot;, line 102, in get_user_invites
    all_users = do_get_invites_controlled_by_user(user_profile)
  File &quot;/home/zulip/deployments/2022-08-24-16-04-02/./zerver/actions/invites.py&quot;, line 274, in do_get_invites_controlled_by_user
    expiry_date=get_invitation_expiry_date(invitee.confirmation.get()),
  File &quot;/srv/zulip-venv-cache/5a2b3930c13b10581d6b0313fd9b016d02c6b36e/zulip-py3-venv/lib/python3.8/site-packages/django/db/models/manager.py&quot;, line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File &quot;/srv/zulip-venv-cache/5a2b3930c13b10581d6b0313fd9b016d02c6b36e/zulip-py3-venv/lib/python3.8/site-packages/django/db/models/query.py&quot;, line 435, in get
    raise self.model.DoesNotExist(
confirmation.models.Confirmation.DoesNotExist: Confirmation matching query does not exist.

2022-08-25 17:19:36.229 INFO [zr] 1.1.1.1   GET     500  21ms (db: 4ms/7q) /json/invites (8@root via Mozilla)
</code></pre></div>



<a name="1424994"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20-%20Error%20Listing%20Invites/near/1424994" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> VS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20-.20Error.20Listing.20Invites.html#1424994">(Aug 25 2022 at 17:24)</a>:</h4>
<p>any help will be highly appreciated!</p>



<a name="1425066"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20-%20Error%20Listing%20Invites/near/1425066" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20-.20Error.20Listing.20Invites.html#1425066">(Aug 25 2022 at 19:18)</a>:</h4>
<p><span class="user-mention" data-user-id="24621">@VS</span> I'm confused -- if the problem is insufficient memory, you should add more memory to your server.</p>



<a name="1425434"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20-%20Error%20Listing%20Invites/near/1425434" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> VS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20-.20Error.20Listing.20Invites.html#1425434">(Aug 26 2022 at 08:56)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> I've only got about 20 active users and have upgraded the memory to 8GB. Started happening after upgrading to version 5.6 from 5.1 yesterday. Before that, it was working smoothly on 5.2.</p>



<a name="1425491"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20-%20Error%20Listing%20Invites/near/1425491" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> VS <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20-.20Error.20Listing.20Invites.html#1425491">(Aug 26 2022 at 13:46)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> I believe there's some database issue that's causing this and throwing a 500 error at random places.</p>
<div class="codehilite"><pre><span></span><code> File &quot;/srv/zulip-venv-cache/5a2b3930c13b10581d6b0313fd9b016d02c6b36e/zulip-py3-venv/lib/python3.8/site-packages/django/db/models/query.py&quot;, line 435, in get
    raise self.model.DoesNotExist(
confirmation.models.Confirmation.DoesNotExist: Confirmation matching query does not exist.
</code></pre></div>



<a name="1425563"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20-%20Error%20Listing%20Invites/near/1425563" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20-.20Error.20Listing.20Invites.html#1425563">(Aug 26 2022 at 18:49)</a>:</h4>
<p><span class="user-mention" data-user-id="24621">@VS</span> you're going to need to provide the full traceback if you want anyone to be able to help you debug that.</p>



<a name="1425564"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Issue%20-%20Error%20Listing%20Invites/near/1425564" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Issue.20-.20Error.20Listing.20Invites.html#1425564">(Aug 26 2022 at 18:49)</a>:</h4>
<p>What made you think insufficient memory was the problem at all?</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>