<html>
<head><meta charset="utf-8"><title>Upgrade from 1.6 to latest · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html">Upgrade from 1.6 to latest</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="687645"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/687645" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#687645">(Jan 24 2019 at 18:48)</a>:</h4>
<p>Wondering if there is a staggered approach here, or do we just attempt going straight to latest from 1.6? Running on Ubuntu 14.04 currently so maybe a migration is a better idea.</p>



<a name="687705"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/687705" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#687705">(Jan 24 2019 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> I am not aware of issues with going from 1.6 to 1.9.1 directly.  We generally have been fixing issues that might have required a staged migration when we find them, and I think the last ones I remember are all from starting with 1.3.x or 1.4.x.</p>



<a name="687717"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/687717" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#687717">(Jan 24 2019 at 19:13)</a>:</h4>
<p>Great thanks. Will clone to a another VM and try it out.</p>



<a name="694025"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694025" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694025">(Feb 04 2019 at 20:17)</a>:</h4>
<p>Testing upgrading from 1.6 to 1.9.2 on a cloned VM (Ubuntu 14), server comes up after upgrade although I had to do the remove-re-install and reconfigure Rabbit to get it running. Now it's not accepting any known user passwords. We are using AD domain logins. Where can I start digging to see what is missing?  TIA.</p>



<a name="694028"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694028" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694028">(Feb 04 2019 at 20:22)</a>:</h4>
<p>Should clarify on the clone I changed hostname, IP address and edited settings.py and our internal DNS to reflect the test hostname/IP.</p>



<a name="694034"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694034" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694034">(Feb 04 2019 at 20:32)</a>:</h4>
<p>Logger django_auth_ldap, from module django_auth_ldap.config line 157:<br>
Error generated by Anonymous user (not logged in) on zulip-test deployment</p>
<p>No stack trace available</p>
<p>Deployed code:<br>
- ZULIP_VERSION: 1.9.2<br>
- version: 1.9.2</p>



<a name="694074"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694074" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694074">(Feb 04 2019 at 21:33)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> well, rabbitmq breaks when changing hostname, so that part isn't surprising.</p>



<a name="694075"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694075" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694075">(Feb 04 2019 at 21:33)</a>:</h4>
<p>What happens when you do <code>manage.py query_ldap</code>?  That's the tool to use for debugging LDAP issues.</p>



<a name="694076"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694076" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694076">(Feb 04 2019 at 21:34)</a>:</h4>
<p>My guess is you either had some sort of manual customization in your 1.6 version and that is what is failing here, or e.g. your LDAP firewall is blocking the new host.</p>



<a name="694541"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694541" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694541">(Feb 05 2019 at 12:25)</a>:</h4>
<p>It's possible there is customization, I inherited this from the original person who is no longer here and of course left no docs for it. manage.py query_ldap returns command not found.</p>



<a name="694550"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694550" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694550">(Feb 05 2019 at 13:00)</a>:</h4>
<p>If we elect instead to start a new clean OS instead, is there a proven process to migrate 1.6 data to a new 1.9.2 server?</p>



<a name="694672"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694672" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694672">(Feb 05 2019 at 17:59)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> see <a href="https://zulip.readthedocs.io/en/latest/production/maintain-secure-upgrade.html#management-commands" target="_blank" title="https://zulip.readthedocs.io/en/latest/production/maintain-secure-upgrade.html#management-commands">https://zulip.readthedocs.io/en/latest/production/maintain-secure-upgrade.html#management-commands</a> for how to run management commands; I had been assuming you were familiar with the basics.</p>



<a name="694674"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694674" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694674">(Feb 05 2019 at 18:00)</a>:</h4>
<p>The supported way to migrate data between systems involves both systems being on the same version.</p>



<a name="694676"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694676" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694676">(Feb 05 2019 at 18:01)</a>:</h4>
<p>So you'll want to upgrade in any case.</p>



<a name="694680"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694680" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694680">(Feb 05 2019 at 18:09)</a>:</h4>
<p>Ok got the hang of ./manage.py, thanks for that.          - so query_ldap any_user@ourdomain returns:</p>



<a name="694682"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694682" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694682">(Feb 05 2019 at 18:10)</a>:</h4>
<p>Traceback (most recent call last):<br>
  File "./manage.py", line 29, in &lt;module&gt;<br>
    execute_from_command_line(sys.argv)<br>
  File "/home/zulip/deployments/2017-09-17-17-01-30/zulip-venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 367, in execute_from_command_line<br>
    utility.execute()<br>
  File "/home/zulip/deployments/2017-09-17-17-01-30/zulip-venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 359, in execute<br>
    self.fetch_command(subcommand).run_from_argv(self.argv)<br>
  File "/home/zulip/deployments/2017-09-17-17-01-30/zulip-venv/lib/python2.7/site-packages/django/core/management/base.py", line 294, in run_from_argv<br>
    self.execute(*args, **cmd_options)<br>
  File "/home/zulip/deployments/2017-09-17-17-01-30/zulip-venv/lib/python2.7/site-packages/django/core/management/base.py", line 345, in execute<br>
    output = self.handle(*args, **options)<br>
  File "/home/zulip/deployments/2017-09-17-17-01-30/zerver/management/commands/query_ldap.py", line 37, in handle<br>
    query_ldap(**options)<br>
  File "/home/zulip/deployments/2017-09-17-17-01-30/zerver/management/commands/query_ldap.py", line 27, in query_ldap<br>
    print("%s: %s" % (django_field, ldap_attrs[ldap_field]))<br>
  File "/home/zulip/deployments/2017-09-17-17-01-30/zulip-venv/lib/python2.7/site-packages/ldap/cidict.py", line 27, in __getitem__<br>
    return self.data[lower(key)]<br>
KeyError: 'uidnumber'</p>



<a name="694684"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694684" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694684">(Feb 05 2019 at 18:11)</a>:</h4>
<p>OK; that definitely sounds like a configuration problem.  You should read the docs in <code>/etc/zulip/settings.py</code> (search for LDAP) and make sure <code>AUTH_LDAP_USER_ATTR_MAP</code> matches your LDAP database's configuration.</p>



<a name="694686"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/694686" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#694686">(Feb 05 2019 at 18:11)</a>:</h4>
<p>(It sounds like your config is expecting your LDAP user objects to have a <code>uidnumber</code> field, and they don't?)</p>



<a name="697920"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/697920" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#697920">(Feb 11 2019 at 14:43)</a>:</h4>
<p>Trying to install 1.6 (in order to migrate existing server) onto a clean Ubuntu 18 LTS VM,  getting "Unsupported release bionic" - is there a way to override this? Thanks In advance.</p>



<a name="697955"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/697955" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#697955">(Feb 11 2019 at 16:59)</a>:</h4>
<p>Also the above LDAP error happens on a working Zulip server so I don't know if the uidnumber field is actually the issue.</p>



<a name="698075"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698075" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698075">(Feb 11 2019 at 19:35)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> no, 1.6 has no support for Bionic; you won't be able to install it.</p>



<a name="698079"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698079" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698079">(Feb 11 2019 at 19:38)</a>:</h4>
<p>Ok - so we can't go that route then (matching versions in order to migrate). I've setup a new test VM, trying to connect to our LDAP (same AD as the production 1.6 server) - can't even get the new one to log in. Same settings as the old one as far as I can tell. Login screen comes up but won't accept any user/pass. Same errors as above re query_ldap. Strange thing is the old production server throws the same error yet logins are working on that one.</p>



<a name="698085"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698085" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698085">(Feb 11 2019 at 19:42)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> and the new VM is running which version?</p>



<a name="698086"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698086" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698086">(Feb 11 2019 at 19:42)</a>:</h4>
<p>Ubuntu 18.04 LTS and Zulip 1.9.2</p>



<a name="698114"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698114" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698114">(Feb 11 2019 at 19:55)</a>:</h4>
<p>OK.  <span class="user-mention" data-user-id="3275">@hb-it</span> I think your problem is most likely caused by that <code>query_ldap</code> traceback and you'll need to fix that.  If you want someone to debug this for you, this is probably the place you should get a formal support contract, since the problems seem very specific to your configuration and thus are beyond what we can offer as free best-effort support.</p>



<a name="698116"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698116" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698116">(Feb 11 2019 at 19:57)</a>:</h4>
<p>Understood. Will keep looking at that.</p>



<a name="698118"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698118" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698118">(Feb 11 2019 at 19:57)</a>:</h4>
<p>(It's possible 1.9 got stricter about semi-broken LDAP configuration preventing login)</p>



<a name="698124"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698124" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698124">(Feb 11 2019 at 20:02)</a>:</h4>
<p>I removed the UID completely from the settings.py - user lookups are now working successfully via manage.py - still no logins though.</p>



<a name="698163"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698163" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698163">(Feb 11 2019 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> did you restart the server after making those settings changes?</p>



<a name="698164"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698164" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698164">(Feb 11 2019 at 20:39)</a>:</h4>
<p>DId now - new server is working. On to trying to import the old data.</p>



<a name="698166"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698166" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698166">(Feb 11 2019 at 20:40)</a>:</h4>
<p>Great <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="698167"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698167" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698167">(Feb 11 2019 at 20:40)</a>:</h4>
<p>My recommendation for doing this migration would be to import data between the same version.</p>



<a name="698168"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698168" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698168">(Feb 11 2019 at 20:41)</a>:</h4>
<p>So if you want to move from trusty to bionic as part of the process, install a new trusty server on 1.6, migrate your data there using <code>pg_dump</code> (etc.), as we recommend in our backups section -- that's bulletproof.  And then upgrade that server to 1.9.1.  And then you can move data from that trusty server to a bionic server.</p>



<a name="698169"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698169" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698169">(Feb 11 2019 at 20:41)</a>:</h4>
<p>(That is, if you're unwilling to upgrade your existing trusty server to 1.9, which is defintiely the simplest past)</p>



<a name="698484"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/698484" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#698484">(Feb 12 2019 at 13:17)</a>:</h4>
<p>Wasn't a question of unwilling, more that I could not get the production server upgraded in place, would not start after the 1.9 upgrade. Will try your suggested path next in another VM, thanks for the tip.</p>



<a name="704551"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/704551" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#704551">(Feb 20 2019 at 16:26)</a>:</h4>
<p>Hello, is there a correct way to restore a 1.9.2 server from a PSQL dump file?   Running the scripts in current/scripts/setups is producing various errors.    ./postgres-init-db: line 51: ./postgres-create-db: No such file or directory. To update, we managed to get a cloned VM from 1.6 to 1.9.2 on Ubuntu 14, now trying to import from pg_dump into a new clean 1.9.2 running on Ubuntu 18. That process I believe involves dropping the zulip db and letting the scripts create and initialize a new db before importing the dump file?</p>



<a name="704631"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/704631" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#704631">(Feb 20 2019 at 17:00)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> Zulip 2.0 (which there's a release candidate for posted here: <a href="#narrow/stream/2-general/topic/Zulip.202.2E0.2E0-rc1/near/698367" title="#narrow/stream/2-general/topic/Zulip.202.2E0.2E0-rc1/near/698367">https://chat.zulip.org/#narrow/stream/2-general/topic/Zulip.202.2E0.2E0-rc1/near/698367</a>) has a <code>manage.py backup</code> and corresponding restore tool that I'd recommend for doing that sort of <code>pg_dump</code> process.</p>



<a name="704635"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/704635" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#704635">(Feb 20 2019 at 17:01)</a>:</h4>
<p>I'd expect the 1.9.2 to 2.0 upgrade to just work.</p>



<a name="704638"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/704638" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#704638">(Feb 20 2019 at 17:01)</a>:</h4>
<p>Ok will try that. Should I be able to import a 1.9.2 dump into 2.0?</p>



<a name="704655"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/704655" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#704655">(Feb 20 2019 at 17:10)</a>:</h4>
<p>No, you should upgrade the 1.9.2 to 2.0, and then do the dump + restore with that.</p>



<a name="704658"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/704658" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#704658">(Feb 20 2019 at 17:11)</a>:</h4>
<p>Oh, and that backup/restore tool expects the same postgres version on the two systems... so you might need to grab the default postgres version for bionic from a PPA and do the standard postgres database upgrade process on the 14.04 server before trying to import into bionic.</p>



<a name="705549"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/705549" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hb-it <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#705549">(Feb 21 2019 at 20:39)</a>:</h4>
<p>We have managed to get upgraded to 1.9.2 on Ubuntu 18,  by importing a 1.6 dump from the Ubuntu 14 vm and then running upgrade-zulip-stage-2  and copying over the uploads folder. Will look at 2.0 soon, but thanks for the direction to this point. All good! :-)</p>



<a name="706040"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Upgrade%20from%201.6%20to%20latest/near/706040" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Upgrade.20from.201.2E6.20to.20latest.html#706040">(Feb 22 2019 at 21:29)</a>:</h4>
<p><span class="user-mention" data-user-id="3275">@hb-it</span> glad to hear it <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>