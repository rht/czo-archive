<html>
<head><meta charset="utf-8"><title>✔ proxy url · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html">✔ proxy url</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1310504"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310504" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas Madsen <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310504">(Jan 14 2022 at 22:45)</a>:</h4>
<p>Hi,</p>
<p>I'm trying to set the domain that zulip uses for all It's proxying needs to something other than the servers default, but I can't seem to find much of anything in the way of help. Is this something that's supported?</p>



<a name="1310509"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310509" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310509">(Jan 14 2022 at 22:55)</a>:</h4>
<p>You mean <a href="https://zulip.readthedocs.io/en/latest/production/deployment.html#customizing-the-outgoing-http-proxy">setting an outgoing proxy server</a>?</p>



<a name="1310514"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310514" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas Madsen <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310514">(Jan 14 2022 at 23:06)</a>:</h4>
<p>I'm not looking to change the tools Zulip uses by default. Just change what the people that host content that Zulip proxies see. So instead of the request coming from <code>chat.example.com</code> It should come from <code>proxy.example.org</code>. Does that make sense?</p>



<a name="1310517"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310517" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310517">(Jan 14 2022 at 23:24)</a>:</h4>
<p>I'm not sure I'm understanding.</p>
<p>If you set Zulip's outgoing proxy to <code>proxy.example.org</code>, servers that Zulip talks to will see the requests as comign from <code>proxy.example.org</code>.  That includes image preview links that are served to end-users, etc.</p>



<a name="1310518"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310518" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas Madsen <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310518">(Jan 14 2022 at 23:29)</a>:</h4>
<p>Where would I set that? Or how would I configure it? </p>
<p>The documentation only mentions using a custom proxy, not changing the config/behavior of the proxies that are used by default.</p>



<a name="1310519"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310519" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310519">(Jan 14 2022 at 23:31)</a>:</h4>
<p>The proxy that is used by default is on the same host as the zulip server, so I don't think that there's any configuration of it you can make that will produce what you want.  The local smokescreen proxy that is used by default is <em>only</em> to protect against SSRF.  If you want the requests to appear to some from a different IP, you'll need to set up that proxy (if it doesn't exist already) and then point Zulip at it, using the docs I linked to above.</p>



<a name="1310520"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310520" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas Madsen <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310520">(Jan 14 2022 at 23:43)</a>:</h4>
<p>Okay, thank you very much. What about camo ? Could I do something similar there?</p>



<a name="1310521"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310521" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310521">(Jan 14 2022 at 23:57)</a>:</h4>
<p>We just merged a change (<a href="https://github.com/zulip/zulip/commit/d328d3dd4d8abce489ef171fdf0513efa8892550">d328d3dd4d8abce489ef171fdf0513efa8892550</a>) that will make camo use the configured proxy, if it's not set to a local smokescreen.  So you'll get that with the same configuration, if you're running <code>main</code>; we've backported it, and it will be a shortly-forthcoming 4.9 release as well.</p>



<a name="1310523"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310523" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andreas Madsen <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310523">(Jan 15 2022 at 00:02)</a>:</h4>
<p>Cool, thanks a lot for your help! <br>
How far away would you estimate 4.9 to be? Days? Weeks? I'd prefer not to run <code>main</code> If I can avoid it.</p>



<a name="1310525"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310525" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310525">(Jan 15 2022 at 00:18)</a>:</h4>
<p>I expect it'll be in the next week or so.</p>



<a name="1310526"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310526" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310526">(Jan 15 2022 at 00:18)</a>:</h4>
<p>Probably the tail end of next week, maybe the early part of the one after.</p>



<a name="1310527"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310527" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310527">(Jan 15 2022 at 00:19)</a>:</h4>
<p>You can also upgrade to the <code>4.x</code> branch in git.</p>



<a name="1310529"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20proxy%20url/near/1310529" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20proxy.20url.html#1310529">(Jan 15 2022 at 00:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="22840">Andreas Madsen</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>