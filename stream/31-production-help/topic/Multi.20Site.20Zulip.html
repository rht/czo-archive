<html>
<head><meta charset="utf-8"><title>Multi Site Zulip · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html">Multi Site Zulip</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="243594"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243594" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243594">(Jul 05 2017 at 21:17)</a>:</h4>
<p>We just got bitten again about the workflow for multi-site Zulip installs.</p>



<a name="243595"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243595" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243595">(Jul 05 2017 at 21:18)</a>:</h4>
<p>We don't have a good story for making sure upgrades are safe when they're run on one.</p>



<a name="243596"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243596" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243596">(Jul 05 2017 at 21:18)</a>:</h4>
<p>rsync'ing /home/zulip isn't safe, since it also changes stuff in /srv.</p>



<a name="243597"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243597" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243597">(Jul 05 2017 at 21:18)</a>:</h4>
<p>Maybe we need to rsync /home/zulip and then run the puppet apply script?</p>



<a name="243598"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243598" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243598">(Jul 05 2017 at 21:18)</a>:</h4>
<p>Something to think about for more development.</p>



<a name="243599"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243599" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243599">(Jul 05 2017 at 21:18)</a>:</h4>
<p>Zulip really doesn't like changing environments.</p>



<a name="243606"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243606" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243606">(Jul 05 2017 at 22:02)</a>:</h4>
<p><span class="user-mention" data-user-email="hlieberman@setec.io" data-user-id="110">@Harlan Lieberman-Berg</span> why not just run the upgrade script on each one?</p>



<a name="243607"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243607" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243607">(Jul 05 2017 at 22:02)</a>:</h4>
<p>Or are you worried about things like file uploads?</p>



<a name="243884"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243884" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Wedoff <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243884">(Jul 06 2017 at 13:58)</a>:</h4>
<p>The other nodes are running hot standby DB. It is in a RO state, which would cause the upgrade to fail, right?</p>



<a name="243944"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243944" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243944">(Jul 06 2017 at 14:45)</a>:</h4>
<p>I'm worried about the DB upgrades.</p>



<a name="243949"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243949" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243949">(Jul 06 2017 at 14:46)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span>, <span class="user-mention" data-user-email="jwedoff@akamai.com" data-user-id="2782">@John Wedoff</span> is my co-worker and the person taking over administration of Akamai's zulip instance.  John, Tim is the founder of Zulip (twice now!) and a good friend of a bunch of different people at Akamai.</p>



<a name="243954"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243954" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Wedoff <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243954">(Jul 06 2017 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> Hi! I hope I don't end up asking too many dumb questions.</p>



<a name="243956"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243956" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim April <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243956">(Jul 06 2017 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-email="jwedoff@akamai.com" data-user-id="2782">@John Wedoff</span> you've got a long way to go before you ask as many dumb questions to <span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span>  as I have</p>



<a name="243958"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/243958" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harlan Lieberman-Berg <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#243958">(Jul 06 2017 at 14:50)</a>:</h4>
<p>Same.</p>



<a name="244024"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/244024" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#244024">(Jul 06 2017 at 15:58)</a>:</h4>
<p>Haha, great to meet you <span class="user-mention" data-user-email="jwedoff@akamai.com" data-user-id="2782">@John Wedoff</span>! :)</p>



<a name="244229"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/244229" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Wedoff <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#244229">(Jul 06 2017 at 16:45)</a>:</h4>
<p>Likewise. I'm a little overwhelmed, but I'm doing my best.</p>



<a name="244267"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/244267" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Wedoff <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#244267">(Jul 06 2017 at 16:50)</a>:</h4>
<p>Is there any HA guide? I've mostly been doing mostly MySQL DBA/Admin work lately, so I'm trying to get up to speed on PostregSQL tools. I'd <em>really</em> like to have a way to a planned failover with minimal downtime, no loss of user data, and minimal time without the old master node.</p>



<a name="244276"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/244276" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#244276">(Jul 06 2017 at 16:51)</a>:</h4>
<p><a href="http://zulip.readthedocs.io/en/latest/prod-maintain-secure-upgrade.html" target="_blank" title="http://zulip.readthedocs.io/en/latest/prod-maintain-secure-upgrade.html">http://zulip.readthedocs.io/en/latest/prod-maintain-secure-upgrade.html</a> has some useful data on how this stuff works including setup, but I wouldn't say it really has an HA guide.</p>



<a name="244286"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/244286" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Wedoff <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#244286">(Jul 06 2017 at 16:52)</a>:</h4>
<p>Oh good. I was already reading through that. :)</p>



<a name="244289"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Multi%20Site%20Zulip/near/244289" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Wedoff <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Multi.20Site.20Zulip.html#244289">(Jul 06 2017 at 16:52)</a>:</h4>
<p>I don't want to blundering into attempting to reinvent any wheels if I can help it.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>