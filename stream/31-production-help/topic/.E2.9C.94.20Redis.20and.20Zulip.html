<html>
<head><meta charset="utf-8"><title>✔ Redis and Zulip · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html">✔ Redis and Zulip</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1361674"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361674" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361674">(Apr 07 2022 at 05:33)</a>:</h4>
<p>Hi, had some issues with redis not starting after upgraded to version 6.x from 5.x on ubuntu 20.04. Some articles online suggested that I should try removing sudo rm /var/lib/redis/dump.rdb . I did so, redis started yet in my Zulip desktop app, the zulip keeps warning me: Unable to connect to Zulip. Updates may be delayed. Retrying soon… Try now.</p>



<a name="1361675"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361675" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361675">(Apr 07 2022 at 05:35)</a>:</h4>
<p>Is that dump.rdb important? should I restore it from a backup|?</p>



<a name="1361677"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361677" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361677">(Apr 07 2022 at 05:36)</a>:</h4>
<p>I guess it is; Internal server error says now Zulip upon refresh</p>



<a name="1361684"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361684" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361684">(Apr 07 2022 at 05:44)</a>:</h4>
<p>What ever it was that I did, it broked Zulip, will do a restore now from previous day.</p>



<a name="1361685"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361685" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361685">(Apr 07 2022 at 05:44)</a>:</h4>
<p>6.x isn't out yet -- do you mean <code>main</code>?</p>
<p>If redis isn't starting, I would look at its logs.  But you will need it to have its database, yes, so I would suggest restoring it.</p>



<a name="1361686"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361686" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361686">(Apr 07 2022 at 05:45)</a>:</h4>
<p>Well latest stable is <a href="https://redis.io/download/#redis">https://redis.io/download/#redis</a> according to their page</p>



<a name="1361687"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361687" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361687">(Apr 07 2022 at 05:45)</a>:</h4>
<p>its 6.2</p>



<a name="1361688"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361688" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361688">(Apr 07 2022 at 05:45)</a>:</h4>
<p>I managed to start redis</p>



<a name="1361689"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361689" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361689">(Apr 07 2022 at 05:45)</a>:</h4>
<p>Yet my Zulip still wont render only the error page</p>



<a name="1361690"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361690" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361690">(Apr 07 2022 at 05:46)</a>:</h4>
<p>I wonder if removing that dump.rdb could had caused all this]</p>



<a name="1361691"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361691" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361691">(Apr 07 2022 at 05:46)</a>:</h4>
<p>Oh, you upgraded <em>redis</em></p>



<a name="1361692"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361692" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361692">(Apr 07 2022 at 05:46)</a>:</h4>
<p>What does the zulip server log say?  Check <code>/var/log/zulip/error.log</code></p>



<a name="1361693"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361693" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361693">(Apr 07 2022 at 05:48)</a>:</h4>
<p>I don't think we've tested Zulip with Redis 6.  Why and how did you upgrade it?</p>



<a name="1361695"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361695" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361695">(Apr 07 2022 at 05:48)</a>:</h4>
<p>Mmmm, I guess bullseye (Debian 11) has Redis 6, which we do support.  So it should work.</p>



<a name="1361696"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361696" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361696">(Apr 07 2022 at 05:48)</a>:</h4>
<p>I added the official redis repos, and runned apt update &amp;&amp; apt-upgrade -y</p>



<a name="1361697"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361697" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361697">(Apr 07 2022 at 05:49)</a>:</h4>
<p>OK, that's not a configuration we've tested.</p>



<a name="1361698"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361698" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361698">(Apr 07 2022 at 05:49)</a>:</h4>
<p>Since im on ubuntu 20.04</p>



<a name="1361699"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361699" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361699">(Apr 07 2022 at 05:49)</a>:</h4>
<p>OK.  Why, out of curiosity?</p>



<a name="1361700"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361700" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361700">(Apr 07 2022 at 05:49)</a>:</h4>
<p>There is no support release there for 6.2 only 5.0.2</p>



<a name="1361701"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361701" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361701">(Apr 07 2022 at 05:50)</a>:</h4>
<p>Well tbh I went to hubot and tried to redeploy it, yet it was giving me errors about some redis DB missing or unaable to connect to it.</p>



<a name="1361703"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361703" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361703">(Apr 07 2022 at 05:51)</a>:</h4>
<p>So i checked on the redis official docs since version 6.0 they added support for ACL USERS where I can see what users are made inside redis</p>



<a name="1361705"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361705" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361705">(Apr 07 2022 at 05:51)</a>:</h4>
<p>OK.  I think you're definitely in uncharted territory, here.  We don't suggest swapping out pieces of the Zulip system for random other versions.</p>
<p>What does <code>/var/log/zulip/errors.log</code> say?</p>



<a name="1361706"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361706" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361706">(Apr 07 2022 at 05:52)</a>:</h4>
<p>Alex now I cant say since I wiped and restore now</p>



<a name="1361707"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361707" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361707">(Apr 07 2022 at 05:52)</a>:</h4>
<p>I will follow same procedure once is up</p>



<a name="1361708"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361708" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361708">(Apr 07 2022 at 05:52)</a>:</h4>
<p>Without the removal of the dump.rdv</p>



<a name="1361709"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361709" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361709">(Apr 07 2022 at 05:52)</a>:</h4>
<p>progress 77% (read 24968167424 bytes, duration 516 sec)</p>



<a name="1361711"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361711" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361711">(Apr 07 2022 at 05:53)</a>:</h4>
<p>Ahh, you're doing a full disk restore, understood.</p>



<a name="1361712"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361712" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361712">(Apr 07 2022 at 05:53)</a>:</h4>
<p>Yes, I tried to restore only the dump.rdb it did not helped.</p>



<a name="1361713"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361713" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361713">(Apr 07 2022 at 05:54)</a>:</h4>
<p>Are you restoring to before or after the Redis upgrade?</p>



<a name="1361714"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361714" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361714">(Apr 07 2022 at 05:54)</a>:</h4>
<p>before</p>



<a name="1361715"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361715" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361715">(Apr 07 2022 at 05:54)</a>:</h4>
<p>I made all changes today 7.4</p>



<a name="1361716"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361716" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361716">(Apr 07 2022 at 05:54)</a>:</h4>
<p>I restore 6.4</p>



<a name="1361717"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361717" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361717">(Apr 07 2022 at 05:54)</a>:</h4>
<p>So I can redo the upgrade and il make this time a snapshot before upgraade</p>



<a name="1361718"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361718" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361718">(Apr 07 2022 at 05:54)</a>:</h4>
<p>Restore the snapshot if it fails</p>



<a name="1361719"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361719" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361719">(Apr 07 2022 at 05:55)</a>:</h4>
<p>94%</p>



<a name="1361720"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361720" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361720">(Apr 07 2022 at 05:55)</a>:</h4>
<p>OK.  I'll say we generally don't recommend doing those sort of single-component upgrades to versions we don't support, but let us know how it goes.</p>



<a name="1361721"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361721" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361721">(Apr 07 2022 at 05:58)</a>:</h4>
<p>Is my bad i wanted to check what version does zulip support</p>



<a name="1361722"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361722" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361722">(Apr 07 2022 at 05:58)</a>:</h4>
<p>was too deep into setting up stuff around hubot, after several attempts made it to work</p>



<a name="1361723"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361723" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361723">(Apr 07 2022 at 05:59)</a>:</h4>
<p>:nod:  We only test with the version that's default on the OS.  Which means the most recent version we've tested is 6.0, since we support Debian 11.</p>



<a name="1361724"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361724" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361724">(Apr 07 2022 at 06:00)</a>:</h4>
<p>And these sort of interdependencies is why we generally only suggest you run Zulip, and not other services on the same box.  Making the configuration resilient to living peacefully alongside other things is hard.</p>



<a name="1361725"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361725" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361725">(Apr 07 2022 at 06:01)</a>:</h4>
<p>So, it seems I got by mail from Django a lot of errors, is it alright to put them into a gist?</p>



<a name="1361726"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361726" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361726">(Apr 07 2022 at 06:01)</a>:</h4>
<p>Since I dont want to spam here, is quite a lot</p>



<a name="1361727"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361727" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361727">(Apr 07 2022 at 06:02)</a>:</h4>
<p>I'd just show a single representative one.</p>



<a name="1361728"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361728" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361728">(Apr 07 2022 at 06:03)</a>:</h4>
<p>Well i forget to mention that prior to all this</p>



<a name="1361729"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361729" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361729">(Apr 07 2022 at 06:03)</a>:</h4>
<p>I made an update from git main</p>



<a name="1361730"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361730" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361730">(Apr 07 2022 at 06:03)</a>:</h4>
<p>So I was on: - ZULIP_VERSION: 6.0-dev-75-gc6f2b9c636</p>



<a name="1361733"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361733" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361733">(Apr 07 2022 at 06:04)</a>:</h4>
<p>Sure, that's fine -- that's current <code>main</code></p>



<a name="1361734"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361734" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361734">(Apr 07 2022 at 06:05)</a>:</h4>
<p>Easiest for me is to try to upgrade it quickly again</p>



<a name="1361735"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361735" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361735">(Apr 07 2022 at 06:06)</a>:</h4>
<p>Because aat first my redis did not started, and that ofc made zulip generate errors where says he cant connect to redis</p>



<a name="1361736"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361736" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361736">(Apr 07 2022 at 06:06)</a>:</h4>
<p>I suggest only changing one thing at once.</p>



<a name="1361739"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361739" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361739">(Apr 07 2022 at 06:06)</a>:</h4>
<p>If your redis isn't starting, solve that first.</p>



<a name="1361741"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361741" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361741">(Apr 07 2022 at 06:09)</a>:</h4>
<p>Sure I did that already, it was not starting because between 5.0.2 and 6.2 they made major changes on redis.conf and at deployment I was asked to replace or keep, then I made a backup of existing redis.conf replaced with the one from new install, and redis started without issues.</p>



<a name="1361744"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361744" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361744">(Apr 07 2022 at 06:11)</a>:</h4>
<p>OK.  If you restart Zulip (without doing any upgrades of it) does it come up cleanly?</p>



<a name="1361745"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361745" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361745">(Apr 07 2022 at 06:11)</a>:</h4>
<p>Yes</p>



<a name="1361746"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361746" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361746">(Apr 07 2022 at 06:12)</a>:</h4>
<p>OK.  Your problem is going to be that Zulip tries to configure redis, so it's going to overwrite that config file when you upgrade.</p>



<a name="1361747"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361747" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361747">(Apr 07 2022 at 06:12)</a>:</h4>
<p>Zulip has its own config file in redis</p>



<a name="1361748"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361748" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361748">(Apr 07 2022 at 06:13)</a>:</h4>
<p>I will give it now a try, made again upgrade to main, all works well in zulip.</p>



<a name="1361749"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361749" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361749">(Apr 07 2022 at 06:13)</a>:</h4>
<p>Il make a snapshot and try to upgrade redis once again</p>



<a name="1361753"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361753" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361753">(Apr 07 2022 at 06:33)</a>:</h4>
<p>Seems all works well even aafter update, I found out the issue.</p>



<a name="1361754"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361754" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361754">(Apr 07 2022 at 06:34)</a>:</h4>
<p>In the original redis.conf at end of file, there is the directive to include the zulip-redis.conf. without that ofc zulip wont work.</p>



<a name="1361757"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361757" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361757">(Apr 07 2022 at 06:37)</a>:</h4>
<p>Would be great after changing a domain for zulip deployment, to be able to edit also the bots emails.</p>



<a name="1361759"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361759" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361759">(Apr 07 2022 at 06:38)</a>:</h4>
<p>In my case all bots are on @uhl.site and new domain is @uhlhosting.ch</p>



<a name="1361760"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361760" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cosmic Sound <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361760">(Apr 07 2022 at 06:38)</a>:</h4>
<p>I see that email is not editable.</p>



<a name="1361762"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361762" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361762">(Apr 07 2022 at 06:42)</a>:</h4>
<p>It's not a very common need, but I'm sure we're take a patch to add a <code>./manage.py</code> command to adjust all of the domains.</p>



<a name="1361764"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361764" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361764">(Apr 07 2022 at 06:44)</a>:</h4>
<p>I believe you can fix them one-by-one via <code>./manage.py change_user_email</code>.</p>



<a name="1361777"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/%E2%9C%94%20Redis%20and%20Zulip/near/1361777" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/.E2.9C.94.20Redis.20and.20Zulip.html#1361777">(Apr 07 2022 at 07:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="20576">Cosmic Sound</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>