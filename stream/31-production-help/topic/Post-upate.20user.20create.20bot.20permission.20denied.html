<html>
<head><meta charset="utf-8"><title>Post-upate user create bot permission denied · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Post-upate.20user.20create.20bot.20permission.20denied.html">Post-upate user create bot permission denied</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1430756"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Post-upate%20user%20create%20bot%20permission%20denied/near/1430756" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EM <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Post-upate.20user.20create.20bot.20permission.20denied.html#1430756">(Sep 06 2022 at 16:58)</a>:</h4>
<p>after our recent update to latest; I've noticed our user create bot is no longer functioning. And is returning permission denied. is_admit=True and the api key is unchanged. Do keys need to be re-issued for privileged accounts/bots?</p>



<a name="1430757"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Post-upate%20user%20create%20bot%20permission%20denied/near/1430757" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Post-upate.20user.20create.20bot.20permission.20denied.html#1430757">(Sep 06 2022 at 17:02)</a>:</h4>
<p><span class="user-mention" data-user-id="24005">@EM</span> Is it for this endpoint - <a href="https://zulip.com/api/create-user">https://zulip.com/api/create-user</a>? Which version was the server previously on? If it was an old release that makes sense, because we added the requirement of an additional permission some time ago.</p>
<p>If i'm right, then using <code>manage.py change_user_role</code> on the bot to give the <code>can_create_users</code> permission should fix this</p>



<a name="1430762"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Post-upate%20user%20create%20bot%20permission%20denied/near/1430762" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EM <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Post-upate.20user.20create.20bot.20permission.20denied.html#1430762">(Sep 06 2022 at 17:05)</a>:</h4>
<p>that makes perfect sense. is <code>can_create_users</code> just a toggle? IE if I send it again it'll disable the permission?</p>



<a name="1430767"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Post-upate%20user%20create%20bot%20permission%20denied/near/1430767" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mateusz Mandera <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Post-upate.20user.20create.20bot.20permission.20denied.html#1430767">(Sep 06 2022 at 17:14)</a>:</h4>
<p>It's a boolean value. It can be removed via the <code>manage.py change_user_role</code> command with the explicit <code>--revoke</code> flag</p>



<a name="1430777"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Post-upate%20user%20create%20bot%20permission%20denied/near/1430777" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> EM <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Post-upate.20user.20create.20bot.20permission.20denied.html#1430777">(Sep 06 2022 at 17:26)</a>:</h4>
<p>got it , thank you :) we'll be doing retries soon.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>