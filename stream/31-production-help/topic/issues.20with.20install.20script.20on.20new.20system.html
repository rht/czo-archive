<html>
<head><meta charset="utf-8"><title>issues with install script on new system · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html">issues with install script on new system</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="51363"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51363" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51363">(Nov 09 2016 at 23:48)</a>:</h4>
<p>Hello, I'm running into some issues installing Zulip on a freshly installed VPS running Ubuntu 16.04.</p>



<a name="51364"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51364" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51364">(Nov 09 2016 at 23:49)</a>:</h4>
<p>Here are a few snips from the install log:</p>



<a name="51365"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51365" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51365">(Nov 09 2016 at 23:49)</a>:</h4>
<p>Notice: /Stage[main]/Zulip::Postgres_appdb_tuned/Exec[pg_ctlcluster 9.5 main restart]/returns: Job for <a href="mailto:postgresql@9.5-main.service" title="mailto:postgresql@9.5-main.service">postgresql@9.5-main.service</a> failed because the control process exited with error code. See "systemctl status <a href="mailto:postgresql@9.5-main.service" title="mailto:postgresql@9.5-main.service">postgresql@9.5-main.service</a>" and "journalctl -xe" for details.<br>
Error: /Stage[main]/Zulip::Postgres_appdb_tuned/Exec[pg_ctlcluster 9.5 main restart]: Failed to call refresh: pg_ctlcluster 9.5 main restart returned 1 instead of one of [0]<br>
Error: /Stage[main]/Zulip::Postgres_appdb_tuned/Exec[pg_ctlcluster 9.5 main restart]: pg_ctlcluster 9.5 main restart returned 1 instead of one of [0]<br>
Notice: /Stage[main]/Zulip::Base/File[/usr/lib/nagios/plugins/zulip_base]/ensure: created<br>
Notice: /Stage[main]/Zulip::Base/File[/usr/lib/nagios/plugins/zulip_base/check_debian_packages]/ensure: defined content as '{md5}b5eac9a9df7c09d9cfd73249b0447dae'<br>
Notice: /Stage[main]/Zulip::Supervisor/Exec[enable supervisor]/returns: Failed to execute operation: No such file or directory<br>
Error: systemctl enable supervisor returned 1 instead of one of [0]<br>
Error: /Stage[main]/Zulip::Supervisor/Exec[enable supervisor]/returns: change from notrun to 0 failed: systemctl enable supervisor returned 1 instead of one of [0]</p>



<a name="51366"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51366" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51366">(Nov 09 2016 at 23:50)</a>:</h4>
<p>OK, sounds like postgres failed to start on your system</p>



<a name="51367"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51367" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51367">(Nov 09 2016 at 23:51)</a>:</h4>
<p>when I run 'systemctl status <a href="mailto:postgresql@9.5-main.service" title="mailto:postgresql@9.5-main.service">postgresql@9.5-main.service</a>', it returns saying there is a configuration error in the config file</p>



<a name="51368"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51368" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51368">(Nov 09 2016 at 23:51)</a>:</h4>
<p>Interesting.  What VPS provider are you using?</p>



<a name="51369"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51369" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51369">(Nov 09 2016 at 23:52)</a>:</h4>
<p>Through b-host</p>



<a name="51370"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51370" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51370">(Nov 09 2016 at 23:53)</a>:</h4>
<p>not the best, but it's dirt cheap</p>



<a name="51371"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51371" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51371">(Nov 09 2016 at 23:59)</a>:</h4>
<p>could this be avoided by maybe finding a default postgres config file? Assuming Zulip changes it as needed..</p>



<a name="51381"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/51381" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#51381">(Nov 10 2016 at 03:11)</a>:</h4>
<p><span class="user-mention" data-user-email="leightonstarwalt@gmail.com">@Leighton Starwalt</span> Sorry for the slow reply -- I went AFK.  I'm not sure whether a default postgres config file would work; I would guess something else is busted with the system, since Zulip has likely already changed the postgres config file.  I would try debugging by looking at the postgres server startup logs.  </p>



<a name="52030"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/52030" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#52030">(Nov 10 2016 at 22:09)</a>:</h4>
<p>Hey Tim, no worries.</p>



<a name="52035"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/52035" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Leighton Starwalt <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#52035">(Nov 10 2016 at 22:11)</a>:</h4>
<p>I looked at the logs and it turns out it's an issue with locale settings.. so, I ran <strong>locale-gen en_US en_US.UTF-8</strong> and re-ran the install.. and it works!</p>



<a name="52036"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/52036" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#52036">(Nov 10 2016 at 22:11)</a>:</h4>
<p>Great!  I wonder if there's a way we could test for the locale not being setup properly</p>



<a name="1322332"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/1322332" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Hall <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#1322332">(Feb 04 2022 at 01:43)</a>:</h4>
<p>I just set-up a clean install of Debian 11 in a VMware-hosted VM to install Zulip, but the install script fails with an exit code of 134. The last line of the log is "Reading package lists.../root/zulip-server-4.9/scripts/lib/setup-apt-repo: line 53:  3100 Aborted                 apt-get update"</p>



<a name="1322752"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/1322752" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#1322752">(Feb 04 2022 at 23:06)</a>:</h4>
<p><span class="user-mention" data-user-id="23087">@Michael Hall</span> that sounds like a networking problem -- <code>apt-get update</code> is just the Debian system updater.</p>



<a name="1322753"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/issues%20with%20install%20script%20on%20new%20system/near/1322753" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/issues.20with.20install.20script.20on.20new.20system.html#1322753">(Feb 04 2022 at 23:06)</a>:</h4>
<p>We'll be able to help more if you can paste the whole traceback in a code block.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>