<html>
<head><meta charset="utf-8"><title>default language for new users · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html">default language for new users</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1648829"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1648829" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1648829">(Sep 28 2023 at 12:26)</a>:</h4>
<p>Hi,</p>
<p>currently default language for new users is english, but most of my users cant speak english. Is there anyway to change default language to german? Or can i update User Settings via manage.py?</p>
<p>Thx!<br>
Erik</p>



<a name="1648836"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1648836" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1648836">(Sep 28 2023 at 13:12)</a>:</h4>
<p>with this command:</p>
<div class="codehilite"><pre><span></span><code>UserProfile.objects.filter(default_language=&#39;en&#39;).update(default_language=&#39;de&#39;)
</code></pre></div>
<p>i can easy change all default_language, but user will still see english in frontend</p>



<a name="1649069"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649069" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649069">(Sep 28 2023 at 17:09)</a>:</h4>
<p>That changes the database but you'll need to clear caches etc. It'll also corrupt audit logs, which you may not super care about in this case, but if you use the actions function for changing default language in your Python code instead, it'll take care of that for you.</p>



<a name="1649083"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649083" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649083">(Sep 28 2023 at 17:22)</a>:</h4>
<p>is there a function to change default_language? i dont find anything....</p>



<a name="1649143"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649143" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649143">(Sep 28 2023 at 18:04)</a>:</h4>
<p><span class="user-mention" data-user-id="26386">@Erik</span> <code>do_change_user_setting</code>.</p>



<a name="1649147"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649147" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649147">(Sep 28 2023 at 18:05)</a>:</h4>
<p>awesome! thank you very much! and this follow topic stuff is extremly great!</p>



<a name="1649202"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649202" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649202">(Sep 28 2023 at 18:52)</a>:</h4>
<p>Should we include default language on the <a href="https://zulip.com/help/configure-default-new-user-settings">new-user-default-settings</a> set?</p>



<a name="1649212"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649212" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649212">(Sep 28 2023 at 18:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="12178">Alex Vandiver</span> <a href="#narrow/stream/31-production-help/topic/default.20language.20for.20new.20users/near/1649202">schrieb</a>:</p>
<blockquote>
<p>Should we include default language on the <a href="https://zulip.com/help/configure-default-new-user-settings">new-user-default-settings</a> set?</p>
</blockquote>
<p>that would be the best for me :)</p>



<a name="1649246"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649246" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649246">(Sep 28 2023 at 19:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="12178">Alex Vandiver</span> <a href="#narrow/stream/31-production-help/topic/default.20language.20for.20new.20users/near/1649202">said</a>:</p>
<blockquote>
<p>Should we include default language on the <a href="https://zulip.com/help/configure-default-new-user-settings">new-user-default-settings</a> set?</p>
</blockquote>
<p>Yeah, that's probably a good idea.</p>



<a name="1649302"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649302" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649302">(Sep 28 2023 at 20:01)</a>:</h4>
<p>i know you have many things todo, but do you think this would be possible to release this year?</p>



<a name="1649358"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649358" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649358">(Sep 28 2023 at 20:55)</a>:</h4>
<p>There's already the organization-wide language setting:<br>
<a href="https://zulip.com/help/configure-organization-language">https://zulip.com/help/configure-organization-language</a></p>
<p>And I believe that doubles as the default language for new users — at least the docs say it does. So <span class="user-mention" data-user-id="26386">@Erik</span> I'd definitely recommend setting that to German, if you haven't already, in addition to making that change for your existing users.</p>



<a name="1649359"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649359" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649359">(Sep 28 2023 at 20:55)</a>:</h4>
<p>And probably <a href="https://chat.zulip.org/help/configure-default-new-user-settings">/help/configure-default-new-user-settings</a> should link to and mention that setting.</p>



<a name="1649361"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649361" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649361">(Sep 28 2023 at 20:57)</a>:</h4>
<p>Ah, right.  And I guess there's enough other things that does that it wouldn't make sense to express it solely as a default user setting.</p>



<a name="1649589"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649589" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649589">(Sep 29 2023 at 00:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="2187">Greg Price</span> <a href="#narrow/stream/31-production-help/topic/default.20language.20for.20new.20users/near/1649359">said</a>:</p>
<blockquote>
<p>And probably <a href="https://chat.zulip.org/help/configure-default-new-user-settings">/help/configure-default-new-user-settings</a> should link to and mention that setting.</p>
</blockquote>
<p>Yeah that seems like a good idea; <span class="user-mention" data-user-id="3734">@David Rosa</span> want to put up a PR for that tweak?</p>



<a name="1649636"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649636" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> shogo <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649636">(Sep 29 2023 at 04:55)</a>:</h4>
<p>If you are using an LDAP backend, the language will be English regardless of the default setting. Do you know anything about this problem?</p>



<a name="1649638"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649638" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> shogo <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649638">(Sep 29 2023 at 04:57)</a>:</h4>
<p>When registering a user using LDAP, the display changed when I forcibly changed the language. It looks like you are not referring to the default settings.</p>
<ul>
<li>zproject/backends.py</li>
</ul>
<div class="codehilite"><pre><span></span><code>1053         user_profile = do_create_user(
1054             username,
1055             None,
1056             self._realm,
1057             full_name,
1058             default_language=&quot;ja&quot;,
1059             tos_version=UserProfile.TOS_VERSION_BEFORE_FIRST_LOGIN,
1060             acting_user=None,
1061             **opts,
</code></pre></div>



<a name="1649652"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649652" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649652">(Sep 29 2023 at 06:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="27912">shogo</span> <a href="#narrow/stream/31-production-help/topic/default.20language.20for.20new.20users/near/1649638">schrieb</a>:</p>
<blockquote>
<p>When registering a user using LDAP, the display changed when I forcibly changed the language. It looks like you are not referring to the default settings.</p>
<ul>
<li>zproject/backends.py</li>
</ul>
<p><div class="codehilite"><pre><span></span><code>1053         user_profile = do_create_user(
1054             username,
1055             None,
1056             self._realm,
1057             full_name,
1058             default_language=&quot;ja&quot;,
1059             tos_version=UserProfile.TOS_VERSION_BEFORE_FIRST_LOGIN,
1060             acting_user=None,
1061             **opts,
</code></pre></div><br>
</p>
</blockquote>
<p>i use ldap yes, but my function look like this:</p>
<div class="codehilite"><pre><span></span><code>user_profile = do_create_user(
            username,
            None,
            self._realm,
            full_name,
            tos_version=UserProfile.TOS_VERSION_BEFORE_FIRST_LOGIN,
            acting_user=None,
            **opts,
        )
</code></pre></div>



<a name="1649653"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649653" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Erik <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649653">(Sep 29 2023 at 06:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="2187">Greg Price</span> <a href="#narrow/stream/31-production-help/topic/default.20language.20for.20new.20users/near/1649358">schrieb</a>:</p>
<blockquote>
<p>There's already the organization-wide language setting:<br>
<a href="https://zulip.com/help/configure-organization-language">https://zulip.com/help/configure-organization-language</a></p>
<p>And I believe that doubles as the default language for new users — at least the docs say it does. So <span class="user-mention silent" data-user-id="26386">Erik</span> I'd definitely recommend setting that to German, if you haven't already, in addition to making that change for your existing users.</p>
</blockquote>
<p>im confused, of course i set organisation settings to german:</p>
<p><a href="/user_uploads/2/6f/oj1M4V9-U97DU_GgUHcLEVUL/grafik.png">grafik.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/6f/oj1M4V9-U97DU_GgUHcLEVUL/grafik.png" title="grafik.png"><img src="/user_uploads/2/6f/oj1M4V9-U97DU_GgUHcLEVUL/grafik.png"></a></div><p>and in default user settings there is no "language" setting:</p>
<p><a href="/user_uploads/2/c6/_HhO1ZVDqtzL-CSRPiTZRRva/grafik.png">grafik.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/c6/_HhO1ZVDqtzL-CSRPiTZRRva/grafik.png" title="grafik.png"><img src="/user_uploads/2/c6/_HhO1ZVDqtzL-CSRPiTZRRva/grafik.png"></a></div>



<a name="1649654"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649654" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> shogo <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649654">(Sep 29 2023 at 06:14)</a>:</h4>
<p>My code is something I've rewritten myself. When using LDAP, the default is now Japanese.</p>
<p>In the case of email authentication, I think you were able to change the default language, which is currently set to German.</p>



<a name="1649954"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649954" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649954">(Sep 29 2023 at 16:54)</a>:</h4>
<p>It sounds like we have a bug where when a user is created with LDAP, the organization's language setting isn't respected and the user's language is set to English. Thanks <span class="user-mention silent" data-user-id="27912">shogo</span> for reporting that!</p>
<p>And that would explain the behavior <span class="user-mention silent" data-user-id="26386">Erik</span> is seeing.</p>



<a name="1649971"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1649971" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1649971">(Sep 29 2023 at 17:05)</a>:</h4>
<p>Yes, I've now confirmed that reading the code and will have a fix up shortly, thanks for the report!</p>



<a name="1650001"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1650001" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1650001">(Sep 29 2023 at 17:36)</a>:</h4>
<p>Opened <a href="https://github.com/zulip/zulip/pull/26938">#26938</a> to fix this, <span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> a review would be appreciated. </p>
<p>This is a bug introduced in 7.0 when we added support for using a language selected in the registration form -- a side effect of that work was every user created via LDAP or the API having <code>en</code> as their default language.</p>
<p>We can backport to 7.x once it is merged.</p>



<a name="1650022"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1650022" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1650022">(Sep 29 2023 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span>: That looks to have a couple unrelated commits in it</p>



<a name="1650032"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1650032" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1650032">(Sep 29 2023 at 17:49)</a>:</h4>
<p>Oops, yeah, had some commits in <code>main</code> that I needed to rebase out.</p>



<a name="1651392"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/default%20language%20for%20new%20users/near/1651392" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> shogo <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/default.20language.20for.20new.20users.html#1651392">(Oct 02 2023 at 00:14)</a>:</h4>
<p>Thank you!<br>
I didn't expect it to be fixed immediately after reporting it. <br>
I have grown to love not only Zulip's software, but also its developers.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>