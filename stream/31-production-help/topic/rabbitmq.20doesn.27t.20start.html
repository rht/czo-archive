<html>
<head><meta charset="utf-8"><title>rabbitmq doesn&#x27;t start · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html">rabbitmq doesn&#x27;t start</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="108526"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108526" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108526">(Dec 28 2016 at 16:29)</a>:</h4>
<p>Hello.</p>



<a name="108539"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108539" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108539">(Dec 28 2016 at 16:32)</a>:</h4>
<p>I'm trying to install Zulip. Before running install script, rabbitmq server works correctly. But when it is run and is done successfully, it won't start.</p>



<a name="108544"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108544" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108544">(Dec 28 2016 at 16:33)</a>:</h4>
<p>Are you installing it for production or just for development/testing?</p>



<a name="108549"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108549" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108549">(Dec 28 2016 at 16:34)</a>:</h4>
<p>For production, but I have newly got the server and it is nearly completely empty.</p>



<a name="108552"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108552" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108552">(Dec 28 2016 at 16:35)</a>:</h4>
<p>Do you have enough memory in your machine? I think it needs at least 4GB.</p>



<a name="108553"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108553" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108553">(Dec 28 2016 at 16:36)</a>:</h4>
<p>6 GB total, 80% free.</p>



<a name="108559"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108559" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108559">(Dec 28 2016 at 16:37)</a>:</h4>
<p>When you said rabbitmq works correctly, did you install that manually?</p>



<a name="108561"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108561" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108561">(Dec 28 2016 at 16:38)</a>:</h4>
<div class="codehilite"><pre><span></span>root@S1:~# rabbitmqctl status
Status of node rabbit@S1 ...
Error: unable to connect to node rabbit@S1: nodedown

DIAGNOSTICS
===========

attempted to contact: [rabbit@S1]

rabbit@S1:
  * connected to epmd (port 4369) on S1
  * epmd reports node &#39;rabbit&#39; running on port 25672
  * can&#39;t establish TCP connection, reason: econnrefused (connection refused)
  * suggestion: blocked by firewall?

current node details:
- node name: &#39;rabbitmq-cli-24473@S1&#39;
- home dir: /var/lib/rabbitmq
- cookie hash: gzZVCIlT8riUHlYpH0o9cg==
</pre></div>



<a name="108563"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108563" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108563">(Dec 28 2016 at 16:39)</a>:</h4>
<p>Yes, I did.</p>



<a name="108564"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108564" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108564">(Dec 28 2016 at 16:40)</a>:</h4>
<p>I haven't installed a production version before but maybe the install script installed a rabbitmq server in parallel with yours. They might be using the same port, thus blocking each other. The install script should install all dependencies for you.</p>



<a name="108566"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108566" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108566">(Dec 28 2016 at 16:41)</a>:</h4>
<p>I have tried to install Zulip three times or more(!) on a clean (except for the first time) installation of Ubuntu 16.04. The last time I tested whether rabbitmq works or not before installing Zulip.</p>



<a name="108569"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108569" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108569">(Dec 28 2016 at 16:43)</a>:</h4>
<p>Ok I can't help you, I don't really have any experience running it in production. Maybe ask <span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> .</p>



<a name="108572"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108572" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108572">(Dec 28 2016 at 16:43)</a>:</h4>
<p>How should I ask him? Does your mention notify him?</p>



<a name="108573"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108573" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108573">(Dec 28 2016 at 16:45)</a>:</h4>
<p>Yeah but I don't think he is online right now.</p>



<a name="108577"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108577" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108577">(Dec 28 2016 at 16:47)</a>:</h4>
<p>Sorry, I'm confused about the time zones. Where are you and Tim?</p>



<a name="108580"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108580" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108580">(Dec 28 2016 at 16:47)</a>:</h4>
<p>I am in the UK +0 and Tim is in the US west coast I think.</p>



<a name="108617"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108617" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108617">(Dec 28 2016 at 17:00)</a>:</h4>
<p>Thanks for your help.</p>



<a name="108620"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108620" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tommy Ip <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108620">(Dec 28 2016 at 17:01)</a>:</h4>
<p>Actually I think Tim is online, just too busy managing the GCI students!</p>



<a name="108630"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108630" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108630">(Dec 28 2016 at 17:06)</a>:</h4>
<p>Okay. I'll try to contact him later. Thanks again.</p>



<a name="108641"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108641" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108641">(Dec 28 2016 at 17:10)</a>:</h4>
<p><span class="user-mention" data-user-email="Shayan.To@hotmail.com">@Shayan Toqraee</span> so the problem here is that rabbitmq is written in erlang, and erlang is super picky about hostname configuration type stuff</p>



<a name="108642"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108642" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108642">(Dec 28 2016 at 17:11)</a>:</h4>
<p>It's likely there's something it doesn't like in your /etc/hosts file</p>



<a name="108648"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108648" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108648">(Dec 28 2016 at 17:14)</a>:</h4>
<p>Hello.<br>
Can you help me understand what the problem is? I have already read that line in the troubleshooting page.</p>
<div class="codehilite"><pre><span></span>root@S1:~# cat /etc/hosts
127.0.1.1   ubuntu1604clean

# The following lines are desirable for IPv6 capable hosts
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
127.0.0.1 localhost.localdomain localhost
# Auto-generated hostname. Please do not remove this comment.
104.251.217.218 S1.Shayan.To  S1
::1     ip6-localhost ip6-loopback
</pre></div>



<a name="108657"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108657" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> maxlinux2000 <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108657">(Dec 28 2016 at 17:21)</a>:</h4>
<p>please add 127.0.0.1   ubuntu1604clean to /etc/hosts</p>



<a name="108658"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108658" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108658">(Dec 28 2016 at 17:21)</a>:</h4>
<p>And if it does not like something in there, then why would it run before installing Zulip?</p>



<a name="108659"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108659" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108659">(Dec 28 2016 at 17:22)</a>:</h4>
<p>Add or replace the first line?</p>



<a name="108660"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108660" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> maxlinux2000 <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108660">(Dec 28 2016 at 17:22)</a>:</h4>
<p>add</p>



<a name="108662"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108662" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> maxlinux2000 <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108662">(Dec 28 2016 at 17:22)</a>:</h4>
<p>both are necessaries</p>



<a name="108664"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108664" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108664">(Dec 28 2016 at 17:23)</a>:</h4>
<p>Aren't these DN-resolution-like entries?? How come both are necessary??</p>



<a name="108665"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108665" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> maxlinux2000 <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108665">(Dec 28 2016 at 17:23)</a>:</h4>
<p>then try to do $ ping ubuntu1604clean in order to test if this name are solved</p>



<a name="108669"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108669" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108669">(Dec 28 2016 at 17:25)</a>:</h4>
<p>Does this look good?</p>
<div class="codehilite"><pre><span></span>root@S1:~# ping ubuntu1604clean
PING ubuntu1604clean (127.0.0.1) 56(84) bytes of data.
64 bytes from ubuntu1604clean (127.0.0.1): icmp_seq=1 ttl=64 time=0.032 ms
^C
--- ubuntu1604clean ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.032/0.032/0.032/0.000 ms
root@S1:~# cat /etc/hosts
127.0.0.1   ubuntu1604clean
127.0.1.1   ubuntu1604clean

# The following lines are desirable for IPv6 capable hosts
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
127.0.0.1 localhost.localdomain localhost
# Auto-generated hostname. Please do not remove this comment.
104.251.217.218 S1.Shayan.To  S1
::1     ip6-localhost ip6-loopback
</pre></div>



<a name="108675"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108675" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> maxlinux2000 <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108675">(Dec 28 2016 at 17:28)</a>:</h4>
<p>Seem good, please do a $ service rabbitmq restart</p>



<a name="108683"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108683" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> maxlinux2000 <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108683">(Dec 28 2016 at 17:31)</a>:</h4>
<p>it's running now?</p>



<a name="108705"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108705" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108705">(Dec 28 2016 at 17:35)</a>:</h4>
<p>Is hosts file reset after reboot? I did a reboot, and the file was reset to its original configuration.</p>



<a name="108712"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108712" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108712">(Dec 28 2016 at 17:37)</a>:</h4>
<p>It takes a long time for the command to fail with an error message...</p>



<a name="108717"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108717" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108717">(Dec 28 2016 at 17:38)</a>:</h4>
<p>On some systems, yes, hosts files are regenerated on reboot</p>



<a name="108720"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108720" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108720">(Dec 28 2016 at 17:39)</a>:</h4>
<p>The first restart just stopped the service.</p>
<div class="codehilite"><pre><span></span>root@S1:~# service rabbitmq-server start
Job for rabbitmq-server.service failed because a timeout was exceeded. See &quot;systemctl status rabbitmq-server.service&quot; and &quot;journalctl -xe&quot; for details.
root@S1:~# rabbitmqctl status
Status of node rabbit@S1 ...
Error: unable to connect to node rabbit@S1: nodedown

DIAGNOSTICS
===========

attempted to contact: [rabbit@S1]

rabbit@S1:
  * connected to epmd (port 4369) on S1
  * epmd reports: node &#39;rabbit&#39; not running at all
                  no other nodes on S1
  * suggestion: start the node

current node details:
- node name: &#39;rabbitmq-cli-28754@S1&#39;
- home dir: /var/lib/rabbitmq
- cookie hash: gzZVCIlT8riUHlYpH0o9cg==
</pre></div>



<a name="108721"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108721" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108721">(Dec 28 2016 at 17:41)</a>:</h4>
<p>Looking at <a href="https://ubuntuforums.org/showthread.php?t=2202494" target="_blank" title="https://ubuntuforums.org/showthread.php?t=2202494">https://ubuntuforums.org/showthread.php?t=2202494</a>, it would appear your /etc/hosts file is being rewritten by your hosting provider on reboot</p>



<a name="108724"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108724" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108724">(Dec 28 2016 at 17:42)</a>:</h4>
<p>Hrm, so we've made a recent change to Zulip that should eliminate this problem (basically by hardcoding rabbitmq to use localhost), but it hasn't gone into a release yet</p>



<a name="108727"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108727" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108727">(Dec 28 2016 at 17:42)</a>:</h4>
<p>I did set it again before trying the things written above.</p>



<a name="108728"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108728" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108728">(Dec 28 2016 at 17:42)</a>:</h4>
<p>You can probably do it manually though</p>



<a name="108732"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108732" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108732">(Dec 28 2016 at 17:43)</a>:</h4>
<p>If you add a file like this:</p>
<div class="codehilite"><pre><span></span>/etc/rabbitmq/rabbitmq-env.conf 

# Defaults to rabbit. This can be useful if you want to run more than one node
# per machine - RABBITMQ_NODENAME should be unique per erlang-node-and-machine
# combination. See the clustering on a single machine guide for details:
# http://www.rabbitmq.com/clustering.html#single-machine
#
# By default, we set nodename to rabbit@localhost so it will always resolve
NODENAME=zulip@localhost

# By default RabbitMQ will bind to all interfaces, on IPv4 and IPv6 if
# available. Set this if you only want to bind to one network interface or#
# address family.
#NODE_IP_ADDRESS=127.0.0.1

# Defaults to 5672.
#NODE_PORT=5672
</pre></div>


<p>and then purge and reinstall rabbitmq-server, it should start happily again</p>



<a name="108736"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108736" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108736">(Dec 28 2016 at 17:44)</a>:</h4>
<p>First create the file and then purge?</p>



<a name="108739"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108739" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108739">(Dec 28 2016 at 17:45)</a>:</h4>
<p>You might need to purge and then create; I'm not sure</p>



<a name="108740"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108740" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108740">(Dec 28 2016 at 17:45)</a>:</h4>
<p>Depends whether purge deletes that file :)</p>



<a name="108743"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108743" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108743">(Dec 28 2016 at 17:46)</a>:</h4>
<p>So purge first will do it, right?</p>



<a name="108746"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108746" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108746">(Dec 28 2016 at 17:47)</a>:</h4>
<p>yes</p>



<a name="108809"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108809" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108809">(Dec 28 2016 at 18:16)</a>:</h4>
<p>It worked. Thanks a lot.<br>
Just a question. Is it normal that the server load is high?</p>



<a name="108811"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108811" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108811">(Dec 28 2016 at 18:18)</a>:</h4>
<p><code>w</code> reports that the load is about 19...</p>



<a name="108816"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108816" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108816">(Dec 28 2016 at 18:20)</a>:</h4>
<p>I shut it down so that it will not get suspended by the provider...</p>



<a name="108830"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108830" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108830">(Dec 28 2016 at 18:25)</a>:</h4>
<p><span class="user-mention" data-user-email="Shayan.To@hotmail.com">@Shayan Toqraee</span> if rabbitmq is down, the various services may be in a loop restarting themselves, which can lead to high load</p>



<a name="108832"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108832" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108832">(Dec 28 2016 at 18:26)</a>:</h4>
<p><code>supervisorctl status</code> is the thing to look at to see</p>



<a name="108842"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108842" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108842">(Dec 28 2016 at 18:29)</a>:</h4>
<p>It is like this:</p>
<div class="codehilite"><pre><span></span>root@S1:~# supervisorctl status
process-fts-updates                                             FATAL     Exited too quickly (process log may have details)
zulip-django                                                    RUNNING   pid 1039, uptime 0:01:38
zulip-senders:zulip-events-message_sender-0                     STARTING
zulip-senders:zulip-events-message_sender-1                     RUNNING   pid 4730, uptime 0:00:05
zulip-senders:zulip-events-message_sender-2                     RUNNING   pid 4778, uptime 0:00:04
zulip-senders:zulip-events-message_sender-3                     RUNNING   pid 4859, uptime 0:00:02
zulip-senders:zulip-events-message_sender-4                     RUNNING   pid 4855, uptime 0:00:02
zulip-tornado                                                   RUNNING   pid 4847, uptime 0:00:02
zulip-workers:zulip-deliver-enqueued-emails                     RUNNING   pid 4809, uptime 0:00:02
zulip-workers:zulip-events-confirmation-emails                  RUNNING   pid 4788, uptime 0:00:03
zulip-workers:zulip-events-digest_emails                        RUNNING   pid 4866, uptime 0:00:01
zulip-workers:zulip-events-email_mirror                         STARTING
zulip-workers:zulip-events-error_reports                        STARTING
zulip-workers:zulip-events-feedback_messages                    RUNNING   pid 4833, uptime 0:00:02
zulip-workers:zulip-events-missedmessage_mobile_notifications   RUNNING   pid 4546, uptime 0:00:06
zulip-workers:zulip-events-missedmessage_reminders              RUNNING   pid 4761, uptime 0:00:04
zulip-workers:zulip-events-signups                              RUNNING   pid 4781, uptime 0:00:03
zulip-workers:zulip-events-slowqueries                          RUNNING   pid 4783, uptime 0:00:03
zulip-workers:zulip-events-user-activity                        RUNNING   pid 4564, uptime 0:00:06
zulip-workers:zulip-events-user-activity-interval               RUNNING   pid 4393, uptime 0:00:07
zulip-workers:zulip-events-user-presence                        RUNNING   pid 4560, uptime 0:00:06
</pre></div>



<a name="108869"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108869" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108869">(Dec 28 2016 at 18:40)</a>:</h4>
<p>After <code>stop all</code> and <code>start all</code> it was like this, but still high load...</p>
<div class="codehilite"><pre><span></span>root@S1:~# supervisorctl status
process-fts-updates                                             STARTING
zulip-django                                                    RUNNING   pid 14581, uptime 0:00:10
zulip-senders:zulip-events-message_sender-0                     RUNNING   pid 14819, uptime 0:00:04
zulip-senders:zulip-events-message_sender-1                     RUNNING   pid 14782, uptime 0:00:05
zulip-senders:zulip-events-message_sender-2                     RUNNING   pid 14784, uptime 0:00:05
zulip-senders:zulip-events-message_sender-3                     RUNNING   pid 14787, uptime 0:00:05
zulip-senders:zulip-events-message_sender-4                     RUNNING   pid 14772, uptime 0:00:05
zulip-tornado                                                   RUNNING   pid 14843, uptime 0:00:03
zulip-workers:zulip-deliver-enqueued-emails                     RUNNING   pid 14816, uptime 0:00:04
zulip-workers:zulip-events-confirmation-emails                  RUNNING   pid 14826, uptime 0:00:03
zulip-workers:zulip-events-digest_emails                        RUNNING   pid 14829, uptime 0:00:03
zulip-workers:zulip-events-email_mirror                         RUNNING   pid 14820, uptime 0:00:04
zulip-workers:zulip-events-error_reports                        RUNNING   pid 14821, uptime 0:00:04
zulip-workers:zulip-events-feedback_messages                    RUNNING   pid 14865, uptime 0:00:03
zulip-workers:zulip-events-missedmessage_mobile_notifications   RUNNING   pid 14831, uptime 0:00:03
zulip-workers:zulip-events-missedmessage_reminders              RUNNING   pid 14833, uptime 0:00:03
zulip-workers:zulip-events-signups                              RUNNING   pid 14818, uptime 0:00:04
zulip-workers:zulip-events-slowqueries                          RUNNING   pid 14832, uptime 0:00:03
zulip-workers:zulip-events-user-activity                        RUNNING   pid 14790, uptime 0:00:04
zulip-workers:zulip-events-user-activity-interval               RUNNING   pid 14788, uptime 0:00:04
zulip-workers:zulip-events-user-presence                        RUNNING   pid 14895, uptime 0:00:02
</pre></div>



<a name="108986"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108986" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shayan Toqraee <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108986">(Dec 28 2016 at 22:33)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com">@Tim Abbott</span> Could you please see if you can help me? rabbitmq is up, but the server is not usable at all. (I haven't tested anything, but if the load problem is not solved, my VPS will be suspended...)</p>



<a name="108996"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108996" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108996">(Dec 28 2016 at 22:47)</a>:</h4>
<p><span class="user-mention" data-user-email="Shayan.To@hotmail.com">@Shayan Toqraee</span> sorry I was away from my computer.  That output shows that the services are only up for a few seconds, which means they are constantly restarting.  You can see why in /var/log/zulip/</p>



<a name="108997"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/rabbitmq%20doesn%27t%20start/near/108997" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/rabbitmq.20doesn.27t.20start.html#108997">(Dec 28 2016 at 22:47)</a>:</h4>
<p>Oh, you probably need to run <code>scripts/setup/configure-rabbitmq</code> after reinstalling it, if you haven't already</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>