<html>
<head><meta charset="utf-8"><title>how to upgrade Zulip server · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html">how to upgrade Zulip server</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1422830"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1422830" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manoj roy <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1422830">(Aug 22 2022 at 11:43)</a>:</h4>
<p>Hello every one I am new to this zulip group</p>



<a name="1422831"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1422831" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manoj roy <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1422831">(Aug 22 2022 at 11:45)</a>:</h4>
<p>I have a question <br>
How to upgrade Zulip server from 5.0 to latest release</p>



<a name="1422907"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1422907" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1422907">(Aug 22 2022 at 17:30)</a>:</h4>
<p>2 messages were moved here from <a class="stream-topic" data-stream-id="9" href="/#narrow/stream/9-issues/topic/mis-alignment.20in.20bot.20info">#issues &gt; mis-alignment in bot info</a> by <span class="user-mention silent" data-user-id="13313">Chris Bobbe</span>.</p>



<a name="1422908"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1422908" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Bobbe <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1422908">(Aug 22 2022 at 17:31)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="24603">@Manoj roy</span>, I think this is the doc you're looking for: <a href="https://zulip.readthedocs.io/en/stable/production/upgrade-or-modify.html">https://zulip.readthedocs.io/en/stable/production/upgrade-or-modify.html</a></p>



<a name="1423460"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1423460" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manoj roy <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1423460">(Aug 23 2022 at 07:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="13313">Chris Bobbe</span> <a href="#narrow/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server/near/1422908">said</a>:</p>
<blockquote>
<p>Hi <span class="user-mention silent" data-user-id="24603">Manoj roy</span>, I think this is the doc you're looking for: <a href="https://zulip.readthedocs.io/en/stable/production/upgrade-or-modify.html">https://zulip.readthedocs.io/en/stable/production/upgrade-or-modify.html</a></p>
</blockquote>
<p>Thank you soo much</p>



<a name="1424164"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1424164" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paulo A. Silva <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1424164">(Aug 24 2022 at 12:55)</a>:</h4>
<p>I'm experiencing some troubles upgrading zulip to 5.5-0 (official docker image): after (re-)starting the zulip container, zulip workers keep restarting, causing increasingly high server loads.</p>
<p>This is the first time upgrading my self-hosted zulip.<br>
I can get nothing from the logs: I say zulip workers are restarting based on <code>supervisorctl status</code> output.</p>



<a name="1424168"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1424168" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paulo A. Silva <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1424168">(Aug 24 2022 at 13:17)</a>:</h4>
<p>Tornado is also restarting</p>
<div class="codehilite"><pre><span></span><code>Tornado server (re)started on port 9800
2022-08-24 13:14:53.106 INFO [:9800] Tornado 9800 loaded 0 event queues in 0.000s
2022-08-24 13:14:53.441 INFO [zr:9800] 127.0.0.1       POST    200  14ms (+start: 29ms) /api/v1/events/internal [1661346429:0/0] (8@root via internal)
2022-08-24 13:14:53.646 INFO [zr:9800] 127.0.0.1       POST    200   4ms /api/v1/events/internal [1661346429:0/0] (8@root via internal)
2022-08-24 13:16:01.156 INFO [:9800] Tornado 9800 removed 0 expired event queues owned by 0 users in 3.698s.  Now 1 active queues, 0 handlers, latest ID 2
</code></pre></div>



<a name="1424424"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1424424" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1424424">(Aug 24 2022 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="24613">@Paulo A. Silva</span> did you check all the log files under <code>/var/log/zulip</code>?</p>



<a name="1424425"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1424425" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1424425">(Aug 24 2022 at 19:31)</a>:</h4>
<p>I think the most likely explanation is that your Zulip server has insufficient memory, so the processes are constantly crashing due to OOM kills and then being restarted by <code>supervisord</code>.</p>



<a name="1424426"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1424426" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1424426">(Aug 24 2022 at 19:31)</a>:</h4>
<p>So I'd investigate that possibility before doing much more debugging.</p>



<a name="1424883"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1424883" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paulo A. Silva <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1424883">(Aug 25 2022 at 07:35)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> thanks for your reply and insights.<br>
Yes, I've checked all the log files in that directory. Based on the documentation I believe there's nothing in the logs because the processes don't really start.</p>
<p>Should we expect considerable memory consumption increase from 5.2-0 to 5.5-0?<br>
Zulip 5.2-0 was up&amp;running with great performance with the same amount of memory (4GB).</p>
<p>I've tried progressive upgrades from 5.2-0, 5.3-0, 5.4-0, and 5.5-0., but the same behavior happens with any version higher than 5.2-0.<br>
I've even manually run <code>manage.py migrate</code> (just in case), but it doesn't solve the issue: reverting back to 5.2-0 keeps the system stable.</p>



<a name="1425089"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1425089" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1425089">(Aug 25 2022 at 19:40)</a>:</h4>
<p><span class="user-mention" data-user-id="24613">@Paulo A. Silva</span> I would expect there to be no material changes in memory requirements between those versions.</p>
<p>Reading the changes between 5.2 and 5.3, we did upgrade some dependencies in 5.3, most notably Tornado 6.</p>



<a name="1425090"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/how%20to%20upgrade%20Zulip%20server/near/1425090" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/how.20to.20upgrade.20Zulip.20server.html#1425090">(Aug 25 2022 at 19:43)</a>:</h4>
<p>Can you compare the memory used by individual Zulip processes between 5.2 and 5.3 on your system? </p>
<p><code>ps aux | grep python</code> is probably a fine format for the comparison.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>