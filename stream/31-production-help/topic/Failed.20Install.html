<html>
<head><meta charset="utf-8"><title>Failed Install · production help · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/31-production-help/index.html">production help</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html">Failed Install</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="632380"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/632380" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#632380">(Aug 16 2018 at 10:36)</a>:</h4>
<p>I just did a zulip from git install which failed pretty early on<br>
the source is:</p>
<div class="codehilite"><pre><span></span>N: Ignoring file <span class="s1">&#39;zulip.list.apt-update-in-progress&#39;</span> in directory <span class="s1">&#39;/etc/apt/sources.list.d/&#39;</span> as it has an invalid filename extension
W: The repository <span class="s1">&#39;http://ppa.launchpad.net/certbot/certbot/ubuntu cosmic Release&#39;</span> does not have a Release file.
N: Data from such a repository can<span class="err">&#39;</span>t be authenticated and is therefore potentially dangerous to use.
N: See apt-secure<span class="o">(</span><span class="m">8</span><span class="o">)</span> manpage <span class="k">for</span> repository creation and user configuration details.
E: Failed to fetch http://ppa.launchpad.net/certbot/certbot/ubuntu/dists/cosmic/main/binary-amd64/Packages  <span class="m">404</span>  Not Found
E: Some index files failed to download. They have been ignored, or old ones used instead.
</pre></div>


<p>the reason seems to be that there is no 'cosmic' ubuntu release yet in that path. The latest is bionic...</p>



<a name="632425"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/632425" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#632425">(Aug 16 2018 at 10:47)</a>:</h4>
<p>nevermind, was nothing wrong in the install script. my bad</p>



<a name="632427"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/632427" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#632427">(Aug 16 2018 at 10:50)</a>:</h4>
<p>ok, now the script just failed because <code>sudo</code> wasn't installed but assumed by the script<br>
might be worth adding that to the install script</p>



<a name="633088"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/633088" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#633088">(Aug 16 2018 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="6250">@Matthias</span> hmm, yeah, we should probably just install <code>sudo</code> for now.</p>



<a name="659929"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/659929" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Williamson <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#659929">(Nov 09 2018 at 14:43)</a>:</h4>
<p>I am attempting an install on ubuntu 18.04. All is going well until the postgres section of the script is run. Currently, it gets to the 'Flushing Memcached...' line and then fails almost immediately. There are no details as to why its failing within the install log. Any ideas?</p>



<a name="659942"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/659942" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Williamson <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#659942">(Nov 09 2018 at 14:45)</a>:</h4>
<p>Just to add on to that last message, I am able to run the commands that are in the script for fluhing memcached without issue.</p>



<a name="659961"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/659961" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#659961">(Nov 09 2018 at 15:30)</a>:</h4>
<p><span class="user-mention" data-user-id="10238">@Caleb Williamson</span> can you paste the relevant section of output from the script (or equivalently, <code>/var/log/zulip/install.log</code>?</p>



<a name="659978"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/659978" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Moss <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#659978">(Nov 09 2018 at 16:08)</a>:</h4>
<p>Working with Caleb on this, here is the error <a href="https://imgur.com/a/P6Qe69t" target="_blank" title="https://imgur.com/a/P6Qe69t">https://imgur.com/a/P6Qe69t</a></p>



<a name="659998"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/659998" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#659998">(Nov 09 2018 at 18:26)</a>:</h4>
<p>Does running <code>./scripts/setup/flush-memcached</code> manually hang as well?</p>



<a name="660010"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660010" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Williamson <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660010">(Nov 09 2018 at 18:35)</a>:</h4>
<p>Hi Tim, it does not. The output sends the 'Flushing Memcached...' echo and no hanging occurs.  Manually running <code>nc -w 1 localhost 11211</code> also executes without issue.</p>



<a name="660015"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660015" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660015">(Nov 09 2018 at 18:49)</a>:</h4>
<p>Interesting.  So, when we've had similar installer hang problems in the past, they were caused by some earlier step in the installer leaking something.</p>



<a name="660017"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660017" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660017">(Nov 09 2018 at 18:50)</a>:</h4>
<p>Actually, in particular, they had to do with the <code>camo</code> package.  Can you check what version of camo you ended up with installed?</p>



<a name="660018"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660018" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660018">(Nov 09 2018 at 18:53)</a>:</h4>
<p>Ahh, looks like Ubuntu released a new version, so the version in our PPA that fixes this bug is no longer the latest.  OK.</p>



<a name="660019"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660019" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660019">(Nov 09 2018 at 18:53)</a>:</h4>
<p>I'll fix this shortly.</p>



<a name="660020"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660020" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Williamson <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660020">(Nov 09 2018 at 18:57)</a>:</h4>
<p>Thanks for the insight Tim! Any manual fix I can perform, or will I need to download an updated zip?</p>



<a name="660021"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660021" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660021">(Nov 09 2018 at 18:58)</a>:</h4>
<p>So it'll take like 30 minutes for the PPA to update, but once you do, you just need to run the installer and it'll get the correct <code>camo</code> package.</p>



<a name="660023"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660023" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Williamson <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660023">(Nov 09 2018 at 18:59)</a>:</h4>
<p>Awesome, thanks, Tim!</p>



<a name="660059"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660059" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Williamson <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660059">(Nov 09 2018 at 19:44)</a>:</h4>
<p>Hey Tim, can you let me know once this has been updated? Same error is being spit out on my end. <br>
<a href="https://i.imgur.com/DGRJpOJ.png" target="_blank" title="https://i.imgur.com/DGRJpOJ.png">https://i.imgur.com/DGRJpOJ.png</a></p>
<div class="message_inline_image"><a href="https://i.imgur.com/DGRJpOJ.png" target="_blank" title="https://i.imgur.com/DGRJpOJ.png"><img data-src-fullsize="/thumbnail?url=https%3A%2F%2Fi.imgur.com%2FDGRJpOJ.png&amp;size=full" src="/thumbnail?url=https%3A%2F%2Fi.imgur.com%2FDGRJpOJ.png&amp;size=thumbnail"></a></div>



<a name="660065"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660065" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660065">(Nov 09 2018 at 19:52)</a>:</h4>
<p><span class="user-mention" data-user-id="10238">@Caleb Williamson</span> yep, will do; the build is apparently still running (I guess Launchpad's build servers are busy today)</p>



<a name="660508"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660508" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Moss <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660508">(Nov 12 2018 at 16:08)</a>:</h4>
<p>Hey Tim, appreciate your help on this. Can you confirm/deny this has been resolved?</p>



<a name="660512"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660512" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GervaisdeM <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660512">(Nov 12 2018 at 16:12)</a>:</h4>
<p>As part of upgrading Zulip, I thought I would do a fresh install of Zulip 1.9.0  on Ubuntu 18.04 LTS Server and then restore my backup from Zulip 1.8.x. This was how I upgraded Zulip and Ubuntu previously.</p>
<p>I already have TLS certificates, so I ran the install command like this:<br>
<code>./zulip-server-1.9.0/scripts/setup/install --hostname=zulip.mydomain.com --email=gervais@mydomain.com</code></p>
<p>The installer fails very early with installing apt packages, which seems odd to me:</p>
<div class="codehilite"><pre><span></span>Reading package lists...
Building dependency tree...
Reading state information...
Calculating upgrade...
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
+ apt-get install -y puppet git curl wget python python3 python-six python3-six crudini
Reading package lists...
Building dependency tree...
Reading state information...
E: Unable to locate package puppet
E: Unable to locate package crudini
</pre></div>


<p>I've tried to install 1.9.-rc2 and now the final 1.9.0 and the both fail the same way.  I can find and install puppet apt repo and puppet, but crudini is more elusive. </p>
<p>I'm using Ubuntu 18.04:</p>
<div class="codehilite"><pre><span></span>root@zulip-18:/root# lsb_release
No LSB modules are available.
root@zulip-18:/root# lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 18.04.1 LTS
Release:    18.04
Codename:   bionic
</pre></div>


<p>Ideas?</p>



<a name="660569"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660569" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660569">(Nov 12 2018 at 18:45)</a>:</h4>
<p><span class="user-mention" data-user-id="10254">@Josh Moss</span> <span class="user-mention" data-user-id="10238">@Caleb Williamson</span> the new <code>camo</code> package is in our production PPA, so yes, this should now be resolved.</p>



<a name="660571"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660571" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660571">(Nov 12 2018 at 18:46)</a>:</h4>
<p>(Sorry, I lost track of sending the final confirmation on Friday)</p>



<a name="660572"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660572" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660572">(Nov 12 2018 at 18:46)</a>:</h4>
<p><span class="user-mention" data-user-id="70">@GervaisdeM</span> I believe the issue is you don't have the Ubuntu universe repository added.</p>



<a name="660584"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660584" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660584">(Nov 12 2018 at 18:58)</a>:</h4>
<p>(I just merged <a href="https://github.com/zulip/zulip/commit/453c35d0f71f6a07533e05bb8537a2149bfc30a6" target="_blank" title="https://github.com/zulip/zulip/commit/453c35d0f71f6a07533e05bb8537a2149bfc30a6">453c35d0f71f6a07533e05bb8537a2149bfc30a6</a> to provide a clear error message for future users)</p>



<a name="660658"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/31-production%20help/topic/Failed%20Install/near/660658" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GervaisdeM <a href="https://rht.github.io/czo-archive/stream/31-production-help/topic/Failed.20Install.html#660658">(Nov 12 2018 at 21:48)</a>:</h4>
<p>thanks Tim - install looks good now</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>