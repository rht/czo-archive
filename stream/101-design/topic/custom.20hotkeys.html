<html>
<head><meta charset="utf-8"><title>custom hotkeys · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html">custom hotkeys</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="202034"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202034" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202034">(May 12 2017 at 20:58)</a>:</h4>
<p>Should users be allowed to define their own hotkeys?</p>



<a name="202035"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202035" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202035">(May 12 2017 at 20:58)</a>:</h4>
<p>(like choose which key does what feature)</p>



<a name="202036"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202036" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202036">(May 12 2017 at 20:59)</a>:</h4>
<p>Probably.  It'd be a cool feature, but also a lot of work.</p>



<a name="202042"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202042" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Hönig <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202042">(May 12 2017 at 21:01)</a>:</h4>
<p>I can remember this being brouht up back a month <a href="https://chat.zulip.org/#narrow/stream/general/subject/tasks.20that.20require.20a.20mouse" target="_blank" title="https://chat.zulip.org/#narrow/stream/general/subject/tasks.20that.20require.20a.20mouse">here</a>, so it seems to be a somewhat demanded feature.</p>



<a name="202043"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202043" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202043">(May 12 2017 at 21:02)</a>:</h4>
<p><span class="emoji emoji-0032" title=":two:">:two:</span></p>



<a name="202044"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202044" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202044">(May 12 2017 at 21:02)</a>:</h4>
<p>Yeah, this may be something that'd make a good sprint project</p>



<a name="202045"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202045" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202045">(May 12 2017 at 21:02)</a>:</h4>
<p>Oh, it's a regression in the sprite sheet code we have here but not merged into master.  Nice find.</p>



<a name="202046"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202046" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202046">(May 12 2017 at 21:02)</a>:</h4>
<p>Yep</p>



<a name="202048"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202048" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202048">(May 12 2017 at 21:03)</a>:</h4>
<p>I wonder if that just doesn't exist in our sprite sheet</p>



<a name="202049"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202049" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202049">(May 12 2017 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-email="tabbott@zulipchat.com" data-user-id="7">@Tim Abbott</span> should I open an issue for custom hotkeys and label <code>good sprint project</code></p>



<a name="202050"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202050" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202050">(May 12 2017 at 21:05)</a>:</h4>
<p>check that there isn't one, but yeah sounds good</p>



<a name="202052"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202052" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202052">(May 12 2017 at 21:06)</a>:</h4>
<p>Back to hotkeys,  I think basically there are a few components:</p>
<ul>
<li>Storage of the mappings for a given user (and how this will migrate over time).</li>
<li>The UI, both display and widget for capturing a replacement key.</li>
<li>How to handle new hotkeys, etc.</li>
<li>The actually mapping.</li>
</ul>



<a name="202060"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202060" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Robert Hönig <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202060">(May 12 2017 at 21:09)</a>:</h4>
<p>As a follow-up project, maybe some way to easily export and import hotkey configurations in a file?</p>



<a name="202062"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202062" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202062">(May 12 2017 at 21:10)</a>:</h4>
<p>probably not worth worrying about follow-ups until we have something working, but sure ;)</p>



<a name="202082"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202082" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202082">(May 12 2017 at 21:20)</a>:</h4>
<p>Doesn't seem like there is an open issue on this..</p>



<a name="202083"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202083" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202083">(May 12 2017 at 21:21)</a>:</h4>
<p>ok, create one then :)</p>



<a name="202084"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202084" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202084">(May 12 2017 at 21:21)</a>:</h4>
<p>I didn't think there was, just wasn't sure</p>



<a name="202096"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/202096" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#202096">(May 12 2017 at 21:30)</a>:</h4>
<p><a href="https://github.com/zulip/zulip/pull/4777" target="_blank" title="https://github.com/zulip/zulip/pull/4777">#4777</a></p>



<a name="1111446"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/1111446" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mrchntia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#1111446">(Jan 31 2021 at 12:14)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span>  I would like to work on this issue and thought about the following approach:</p>
<ul>
<li>
<p>Store the custom hotkeys per user profile in their own table in the database similar to hotspots. The columns could be: user_id, hotkey, action. (This would mean we don’t support the corner case of a user wanting to configure different hotkeys on different devices.)</p>
</li>
<li>
<p>Use user_id and action as primary key because action is a fixed value space (other option would be user_id and hotkey). This would mean that a user can not have two hotkeys for the same action, which is not very useful anyway. The user can only choose to change the hotkey for an action, they can not define a new action. </p>
</li>
<li>
<p>Either store all actions (with null for default) or only overrides.</p>
<ul>
<li>storing all actions advantages: logic to determine action for a hotkey is slightly less complex, logic to update hotkey for an action doesn’t require a fetch</li>
<li>storing all actions disadvantages: adding a new default hotkey is expensive because a new row has to be added for all users</li>
<li>vice versa for storing only overrides</li>
</ul>
</li>
<li>
<p>The interface for the database could be: <code>get_user_hotkeys(user_id)</code> <code>update_hotkey_for_action(user_id, action)</code></p>
</li>
<li>
<p>Is it necessary to add a new migration in <code>migrations</code> for adding a new table?</p>
</li>
<li>
<p>To ensure performance the hotkey mapping has to be cached in the browser.</p>
</li>
<li>
<p>There may be a conflict if new default hotkeys are added and the key combination is already used by a custom hotkey. This can only happen after an update. Every time the desktop app is opened it should be checked for a conflict and in case show a popup that directs the user to the settings to fix the conflict. Same for the web app.</p>
</li>
<li>
<p>I would like to focus on the backend first, before thinking about the frontend.</p>
</li>
</ul>



<a name="1111454"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/1111454" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#1111454">(Jan 31 2021 at 13:00)</a>:</h4>
<p><span class="user-mention" data-user-id="17784">@mrchntia</span> <a href="https://github.com/zulip/zulip/pull/7517">#7517</a> is the more important issue related to this we would like to solve.</p>



<a name="1111455"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/1111455" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#1111455">(Jan 31 2021 at 13:02)</a>:</h4>
<p><a href="https://github.com/zulip/zulip/issues/7517#issuecomment-552017656">https://github.com/zulip/zulip/issues/7517#issuecomment-552017656</a> has the details of the approach we would like to follow for this.</p>



<a name="1111456"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/1111456" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#1111456">(Jan 31 2021 at 13:04)</a>:</h4>
<p>For <a href="https://github.com/zulip/zulip/pull/4777">#4777</a>, you are overthinking it. We just want user to be able to define their own key for a key (which may or may not be linked to an action). We just need to store which keys user has linked to which keys in the backend. UserProfile is a good place for this.</p>



<a name="1111457"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/1111457" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#1111457">(Jan 31 2021 at 13:09)</a>:</h4>
<p>I just closed <a href="https://github.com/zulip/zulip/pull/4777">#4777</a>.  If <span class="user-mention" data-user-id="7">@Tim Abbott</span> disagrees with me, he can re-open the issue.  I suspect he would agree with me on the tradeoffs, but I don't know for sure, and I don't feel super strongly here.</p>



<a name="1111458"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/1111458" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#1111458">(Jan 31 2021 at 13:09)</a>:</h4>
<p>Yeah, I don't think there is strong demand for it other than the internationalization issue which is a good one to solve.</p>



<a name="1111459"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/1111459" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#1111459">(Jan 31 2021 at 13:10)</a>:</h4>
<p>(And I agree with <span class="user-mention" data-user-id="5140">@Aman Agrawal (amanagr)</span> that <a href="https://github.com/zulip/zulip/pull/7517">#7517</a> is the more important issue.)</p>



<a name="1111472"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/custom%20hotkeys/near/1111472" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mrchntia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/custom.20hotkeys.html#1111472">(Jan 31 2021 at 15:03)</a>:</h4>
<p>Alright, then I would like to work on <a href="https://github.com/zulip/zulip/pull/7517">#7517</a> following the approach in the comments.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>