<html>
<head><meta charset="utf-8"><title>web-public streams · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html">web-public streams</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1328906"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1328906" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1328906">(Feb 15 2022 at 11:29)</a>:</h4>
<p>Making a spot to collect feedback on the recently-deployed web public streams feature :)</p>
<p>You can check it out by looking at <a href="#narrow/stream/1-announce">https://chat.zulip.org/#narrow/stream/1-announce</a> in a incognito/private window</p>



<a name="1328908"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1328908" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1328908">(Feb 15 2022 at 11:33)</a>:</h4>
<p>A few things from me:</p>
<ul>
<li>You shouldn't need to click "Access without an account" if you followed a link to a stream or topic. Many people won't read enough to notice that's an option, and will just bounce instead.</li>
<li>It's confusing that when you click on a message, you get the "login required" popup, since most people are not used to clicking on a message performing any sort of action. We should disable that.</li>
<li>I don't think we should show the local time for users to people who aren't logged in — that seems like it could be a unexpected privacy violation.</li>
</ul>
<p>Overall it looks great, I'm super excited for this feature to land!</p>



<a name="1328964"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1328964" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1328964">(Feb 15 2022 at 13:53)</a>:</h4>
<blockquote>
<p>You shouldn't need to click "Access without an account" if you followed a link to a stream or topic. Many people won't read enough to notice that's an option, and will just bounce instead.</p>
</blockquote>
<p>Yeah, it was already in my plans to bypass login for web public stream links.</p>



<a name="1328977"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1328977" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1328977">(Feb 15 2022 at 14:01)</a>:</h4>
<p>Note that we have another discussion topic at <a class="stream-topic" data-stream-id="101" href="/#narrow/stream/101-design/topic/globe.20icon.20for.20world-public.20streams">#design &gt; globe icon for world-public streams</a>.  (I expect we will have a few breakout design discussions for specific details.)</p>



<a name="1329479"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329479" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329479">(Feb 15 2022 at 23:52)</a>:</h4>
<blockquote>
<p>I don't think we should show the local time for users to people who aren't logged in — that seems like it could be a unexpected privacy violation.</p>
</blockquote>
<p>Sorry, where is this shown?</p>



<a name="1329496"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329496" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329496">(Feb 15 2022 at 23:58)</a>:</h4>
<p>The user profile popover. It’s based on the user’s configured time zone.</p>



<a name="1329507"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329507" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329507">(Feb 16 2022 at 00:03)</a>:</h4>
<p>Oh, weird -- I was confused because it's not shown on dev. Why is it different on CZO? <a href="/user_uploads/2/64/r-MB4EVHNNdtravJ3X5YoK05/Screen-Shot-2022-02-15-at-4.02.23-PM.png">Screen-Shot-2022-02-15-at-4.02.23-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/64/r-MB4EVHNNdtravJ3X5YoK05/Screen-Shot-2022-02-15-at-4.02.23-PM.png" title="Screen-Shot-2022-02-15-at-4.02.23-PM.png"><img src="/user_uploads/2/64/r-MB4EVHNNdtravJ3X5YoK05/Screen-Shot-2022-02-15-at-4.02.23-PM.png"></a></div>



<a name="1329516"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329516" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329516">(Feb 16 2022 at 00:07)</a>:</h4>
<p>The dev users probably don’t have configured time zones.</p>



<a name="1329526"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329526" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329526">(Feb 16 2022 at 00:17)</a>:</h4>
<p>Ah, got it, I guess maybe they should?</p>
<p>Anyway, makes sense to me to remove it.</p>



<a name="1329530"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329530" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329530">(Feb 16 2022 at 00:20)</a>:</h4>
<p>The real question is if we’re comfortable with the data exposed through the API.</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user19257@chat.zulip.org"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">19257</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"avatar_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"is_admin"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"is_owner"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"is_guest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"is_billing_admin"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"role"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"is_bot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alya Abbott"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Los_Angeles"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"date_joined"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-03-14T01:13:29.862934+00:00"</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nt">"avatar_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/user_avatars/2/cc02503483622c520c28ba1637499b1ecefbf6bc.png?version=2"</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="1329543"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329543" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329543">(Feb 16 2022 at 00:42)</a>:</h4>
<p>Yeah, makes sense -- if we decide to hide it, we should do so both in the UI and the API. It wouldn't affect anything about the message feed, would it?</p>



<a name="1329560"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329560" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329560">(Feb 16 2022 at 00:59)</a>:</h4>
<p>Arguably we should be comfortable with that data being in the API for this feature in the sense that account creation is open to the world anyway, so there's little practical difference.  But it'd be easy and I think correc to remove it from the logged-out user API data and thus UI for web-public stream users like we do custom profile fields, which timezone is basically a non-custom version of.  <span class="user-mention" data-user-id="5140">@Aman Agrawal (amanagr)</span> can you do a pull request for that change?</p>
<p>(It is correct that timezone has no effect on message rendering; the data is only used for that bit of display.)</p>



<a name="1329563"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329563" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329563">(Feb 16 2022 at 01:04)</a>:</h4>
<p>Also <code>date_joined</code>, or at least its microsecond-level precision?</p>



<a name="1329574"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329574" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329574">(Feb 16 2022 at 01:11)</a>:</h4>
<p>It seems OK to show it to a day precision? But I'm also not sure it's particularly useful to see, so could go either way.</p>



<a name="1329700"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329700" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329700">(Feb 16 2022 at 03:37)</a>:</h4>
<p>I thought we would allow web-public streams for orgs without open registration? It matters in that case. I agree it should be removed from the API.</p>
<p>I don't see a problem with date_joined, but it seems harmless to remove. I think we should remove <code>is_billing_admin</code> as well, probably?</p>



<a name="1329882"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329882" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rein Zustand <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329882">(Feb 16 2022 at 09:05)</a>:</h4>
<p>I can no longer access the web public view. I have clicked the "Access without an account (Beta)" button multiple times, and got redirected to <a href="login/">https://chat.zulip.org/login/</a> every time. No error showing up in my browser console.</p>



<a name="1329885"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329885" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329885">(Feb 16 2022 at 09:27)</a>:</h4>
<p>I suspect, Tim might have disabled it temporarily.</p>



<a name="1329886"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329886" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329886">(Feb 16 2022 at 09:29)</a>:</h4>
<p>No, I think it's that last deploy we determined it needed this diff:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/zerver/decorator.py b/zerver/decorator.py</span><span class="w"></span>
<span class="gh">index 8ee18edc24..835fd9b8c3 100644</span><span class="w"></span>
<span class="gd">--- a/zerver/decorator.py</span><span class="w"></span>
<span class="gi">+++ b/zerver/decorator.py</span><span class="w"></span>
<span class="gu">@@ -547,10 +547,6 @@ def web_public_view(</span><span class="w"></span>
<span class="w"> </span>          web_public_view path has only been enabled for development purposes<span class="w"></span>
<span class="w"> </span>          currently.<span class="w"></span>
<span class="w"> </span>    """<span class="w"></span>
<span class="gd">-    if not settings.DEVELOPMENT:</span><span class="w"></span>
<span class="gd">-        # Coverage disabled because DEVELOPMENT is always true in development.</span><span class="w"></span>
<span class="gd">-        return zulip_login_required(view_func, redirect_field_name, login_url)  # nocoverage</span><span class="w"></span>
<span class="gd">-</span><span class="w"></span>
<span class="w"> </span>    actual_decorator = lambda view_func: zulip_otp_required(<span class="w"></span>
<span class="w"> </span>        redirect_field_name=redirect_field_name, login_url=login_url<span class="w"></span>
<span class="w"> </span>    )(add_logging_data(view_func))<span class="w"></span>
</code></pre></div>
<p>...but that didn't get re-applied this deploy.</p>



<a name="1329888"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329888" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329888">(Feb 16 2022 at 09:31)</a>:</h4>
<p>Re-applied.</p>



<a name="1329889"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329889" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329889">(Feb 16 2022 at 09:31)</a>:</h4>
<p>Let's wait for <a href="https://github.com/zulip/zulip/pull/21141">#21141</a> to get merged anyway.</p>



<a name="1329891"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329891" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329891">(Feb 16 2022 at 09:32)</a>:</h4>
<p>Can you squash in that diff, <span class="user-mention silent" data-user-id="5140">Aman Agrawal (amanagr)</span>?</p>



<a name="1329892"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1329892" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1329892">(Feb 16 2022 at 09:33)</a>:</h4>
<p>Sure.</p>



<a name="1330416"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1330416" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1330416">(Feb 16 2022 at 23:43)</a>:</h4>
<p>The relevant parts of <a href="https://github.com/zulip/zulip/pull/21141">#21141</a> are merged, so today's deployment should restore this.</p>



<a name="1330417"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1330417" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1330417">(Feb 16 2022 at 23:44)</a>:</h4>
<p>That said, there's still a few highly visible known issues like the right sidebar description not being rendered markdown; I expect this will be much more ready for feedback in a couple days.  </p>
<p>(I originally didn't advertise this here because there was enough obviously broken that I didn't think it worth getting a lot of attention on the test).</p>



<a name="1374518"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1374518" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1374518">(Apr 27 2022 at 19:13)</a>:</h4>
<p>I am working on the UI part of allowing guests to access and subscribe to web-public streams <a href="https://github.com/zulip/zulip/pull/14490">#14490</a>.</p>
<p>Basically we want to enable the <code>All streams</code> tab for the guest users and allow them to subscribe to the streams themselves. </p>
<p>As per the server code, we allow a guest access to the stream in various cases if stream is web public and it does not depend whether the realm or server setting of web public access is enabled or not. </p>
<p>I am not sure what we want to do here in cases where realm or server level setting is disabled but the web-public stream was already created at some time when those settings were enabled. <br>
Are those settings only applicable for whether the logged-out users will be able to access web-public streams and guests with accounts in the realm can access the web-public streams irrespective of realm and  server setting or we should do something else.</p>



<a name="1374531"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1374531" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1374531">(Apr 27 2022 at 19:16)</a>:</h4>
<p>Quoting the comment of changes we need to do from the issue -</p>
<blockquote>
<p>The current state of this issue is that the backend is correct, i.e. a guest user can access a web-public stream by following a direct link to get there.</p>
<p>However, subscribing to web-public streams is not supported in the UI for guests. We need to do the following for guest users:</p>
<ul>
<li>Enable the "All streams" tab in Streams management UI when the organization has web-public streams enabled.</li>
<li>Show a "Subscribe to more streams" link in the left sidebar when the organization has web-public streams enabled.</li>
<li>We currently show the "+" next to the STREAMS header, even though a guest can't generally add streams. Instead, we should only show the "+" to guests when the organization has web-public streams enabled.</li>
<li>Show a "Subscribe" button when viewing a web-public stream the guest is not subscribed to.</li>
</ul>
</blockquote>



<a name="1374539"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1374539" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1374539">(Apr 27 2022 at 19:18)</a>:</h4>
<p>From a user perspective, if web public access is disabled, streams that were designated as web-public should be treated as public streams.</p>



<a name="1374540"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1374540" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1374540">(Apr 27 2022 at 19:19)</a>:</h4>
<p>So guest access should not be allowed unless the guest is specifically invited in that case.</p>



<a name="1374543"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1374543" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1374543">(Apr 27 2022 at 19:20)</a>:</h4>
<p>I guess if the guest has already joined the stream while it was web-public, they should stay on it, and it's up to the admins to unsubscribe the guest if that's the intent.</p>



<a name="1374545"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1374545" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1374545">(Apr 27 2022 at 19:20)</a>:</h4>
<p>But I don't think we should allow guests to join any additional streams at that point.</p>



<a name="1374575"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1374575" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1374575">(Apr 27 2022 at 19:50)</a>:</h4>
<p>I think that's probably a pretty reasonable rule. One subtle technical note is that it's expensive to check whether "web-public streams are fully enabled", in the sense of having at least one web-public stream. But that's conveniently not a thing we need to worry about here, since we're looking at what to do in a conditional where we know the current stream is tagged as web-public.</p>



<a name="1375100"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375100" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375100">(Apr 28 2022 at 07:36)</a>:</h4>
<p>Sounds good. Will also update the current server code then.</p>



<a name="1375923"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375923" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375923">(Apr 29 2022 at 14:07)</a>:</h4>
<blockquote>
<p>We currently show the "+" next to the STREAMS header, even though a guest can't generally add streams. Instead, we should only show the "+" to guests when the organization has web-public streams enabled.</p>
</blockquote>
<p>Regarding this, a user needs to access the streams overlay to change the notification settings of streams as well and in that case "+" icon might be useful. So do we want to show this only when web-public streams are enabled or always?</p>



<a name="1375943"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375943" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375943">(Apr 29 2022 at 15:19)</a>:</h4>
<p>Good question. I think options are:</p>
<ul>
<li>Only show it when there's at least one stream you can join.</li>
<li>Show it disabled when there's no streams you can join.</li>
<li>Change the icon to a gear or something when there are no streams you can join (you can always leave one).</li>
</ul>



<a name="1375953"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375953" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375953">(Apr 29 2022 at 15:26)</a>:</h4>
<p>The option I proposed is different from those three. The reason is that we don't hide the <code>+</code> when someone has joined all possible streams, in general.</p>



<a name="1375954"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375954" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375954">(Apr 29 2022 at 15:26)</a>:</h4>
<p>I thin we can keep it simple as above.</p>



<a name="1375955"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375955" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375955">(Apr 29 2022 at 15:27)</a>:</h4>
<p>If someone wants to modify the notification settings, they can go through the gear menu.</p>



<a name="1375956"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375956" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375956">(Apr 29 2022 at 15:27)</a>:</h4>
<p>Or the stream three-dot menu in the left sidebar.</p>



<a name="1375957"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375957" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375957">(Apr 29 2022 at 15:28)</a>:</h4>
<p>They don't need to see a <code>+</code>, which has totally different semantics. I don't think we need a gear there, either -- there are so many other ways to get to stream settings.</p>



<a name="1375959"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1375959" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1375959">(Apr 29 2022 at 15:29)</a>:</h4>
<p>We could think about hiding/disabling the plus for everyone (not just guests) when there are no streams to join, but I'm not sure it's necessary.</p>



<a name="1376053"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376053" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376053">(Apr 29 2022 at 16:46)</a>:</h4>
<p>It'd need to be when (1) there are no streams to join and (2) you don't have permission to create any type of stream.</p>



<a name="1376054"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376054" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376054">(Apr 29 2022 at 16:46)</a>:</h4>
<p>Which we could of course compute but is messy/complicated.</p>



<a name="1376057"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376057" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376057">(Apr 29 2022 at 16:47)</a>:</h4>
<p>Yeah, I think we can avoid having it displayed on the basis of whether user has any streams to join or not only for guests. We can make it  behave like this for all users to be consistent though.</p>
<p>I was also thinking of having a different icon in case when web-public streams are not enabled, but seems fine with hiding it when web-public streams are not enabled as there are other ways to go to stream settings.</p>



<a name="1376067"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376067" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376067">(Apr 29 2022 at 16:54)</a>:</h4>
<blockquote>
<p>Yeah, I think we can avoid having it displayed on the basis of whether user has any streams to join or not only for guests. We can make it behave like this for all users to be consistent though.</p>
</blockquote>
<p>I think we should have a consistent rule for all roles, but I  think that rule should be "is there a <em>type</em> of stream that you could join (or create)", as proposed in the issue comment.</p>



<a name="1376069"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376069" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376069">(Apr 29 2022 at 16:54)</a>:</h4>
<p>I don't think we need to actually check if there are currently such streams.</p>



<a name="1376070"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376070" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376070">(Apr 29 2022 at 16:54)</a>:</h4>
<p>Yeah, I think that's the right approach.</p>



<a name="1376072"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376072" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376072">(Apr 29 2022 at 16:55)</a>:</h4>
<p>We should just fix <a href="https://github.com/zulip/zulip/pull/21870">#21870</a> to show a reasonable message when there are no streams to join.</p>



<a name="1376073"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376073" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376073">(Apr 29 2022 at 16:55)</a>:</h4>
<p>It's simpler, which is good both for implementation and for users (and us!) being able to understand how it works.</p>



<a name="1376078"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376078" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376078">(Apr 29 2022 at 16:58)</a>:</h4>
<p>I think we can keep it as not showing the icon for guests when web-public streams are not enabled (irrespective of whether there are streams to create or join) in this PR and then can have a follow-up to make it behave as discussed above.</p>



<a name="1376087"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376087" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376087">(Apr 29 2022 at 17:06)</a>:</h4>
<p>And we can do it similarly for <code>Subscribe to more streams</code> link in left sidebar.</p>



<a name="1376100"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376100" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376100">(Apr 29 2022 at 17:11)</a>:</h4>
<p>I'm confused... What you describe is, I think, the situation we want in the long run. What's the difference between the PR and what I proposed above?</p>



<a name="1376122"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376122" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376122">(Apr 29 2022 at 17:57)</a>:</h4>
<p>Ohh, sorry I misread your messsage above. Would do as you proposed above in the PR. Sorry for confusion.</p>



<a name="1376186"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/web-public%20streams/near/1376186" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/web-public.20streams.html#1376186">(Apr 29 2022 at 19:49)</a>:</h4>
<p>Ok, cool, sounds good!</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>