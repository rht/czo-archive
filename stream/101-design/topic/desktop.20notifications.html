<html>
<head><meta charset="utf-8"><title>desktop notifications · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html">desktop notifications</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="300530"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300530" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300530">(Oct 18 2017 at 20:59)</a>:</h4>
<p>I just test-deployed here <a href="https://github.com/zulip/zulip/pull/6964" target="_blank" title="https://github.com/zulip/zulip/pull/6964">#6964</a>, which is a set of changes to make our prompt for whether you want desktop notifications a lot nicer, thanks to work by <span class="user-mention" data-user-email="brock@zulipchat.com" data-user-id="136">@Brock Whittaker</span> and <span class="user-mention" data-user-email="aastha.gupta4104@gmail.com" data-user-id="3334">@Aastha</span>.  </p>
<p>It's a bit hard to test, in that it's likely that the browser you use for Zulip normally will already have permission accepted (so you'll need to either go clear that state in your browser or use a browser you haven't used with Zulip before to see it), but I would very much appreciate a few folks testing this out.</p>



<a name="300531"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300531" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300531">(Oct 18 2017 at 21:00)</a>:</h4>
<p>(There's several different cases: mobile vs. desktop (the banner shouldn't appear on mobile for both iOS and Android), and on desktop, you can either accept immediately or refuse in various ways.)</p>



<a name="300532"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300532" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300532">(Oct 18 2017 at 21:00)</a>:</h4>
<p>I guess probably before other folks test, <span class="user-mention" data-user-email="brock@zulipchat.com" data-user-id="136">@Brock Whittaker</span> can you do a round of testing here?</p>



<a name="300533"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300533" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300533">(Oct 18 2017 at 21:00)</a>:</h4>
<p>There's various things that don't always work the same with browser behavior when testing in a development environment.</p>



<a name="300567"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300567" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300567">(Oct 18 2017 at 21:30)</a>:</h4>
<p>Notifications bar looks pretty good in desktop.</p>



<a name="300572"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300572" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vishnu KS <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300572">(Oct 18 2017 at 21:34)</a>:</h4>
<blockquote>
<p>In future you can disable notices from Zulip's Settings</p>
</blockquote>
<p>Should be notifications instead of notices right?</p>



<a name="300574"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300574" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300574">(Oct 18 2017 at 21:35)</a>:</h4>
<p><span class="user-mention" data-user-email="yo@vishnuks.com" data-user-id="52">@Vishnu Ks</span> yeah, that's a good tweak for the text.  I also think it's a bit too verbose right now.</p>



<a name="300782"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300782" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300782">(Oct 19 2017 at 07:09)</a>:</h4>
<p>OK, posted a revised version (also with a last bug fix).</p>



<a name="300783"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300783" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300783">(Oct 19 2017 at 07:09)</a>:</h4>
<p>I'd super appreciate it if folks could test this on a wide range of browsers and report back on whether or not anything went wrong.  E.g. "I tested all 5 different ways to work through it in Safari, clearing my browser's state in between, and everything worked as expected except that ..."</p>



<a name="300784"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300784" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300784">(Oct 19 2017 at 07:10)</a>:</h4>
<p>It's a lot nicer looking than our old system, but we need to make sure it works.</p>



<a name="300949"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300949" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harshit Bansal <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300949">(Oct 19 2017 at 17:45)</a>:</h4>
<p>I have enabled desktop notifications as well as given permissions for receiving  notifications but the prompt is still appearing on every reload.</p>



<a name="300950"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/300950" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harshit Bansal <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#300950">(Oct 19 2017 at 17:47)</a>:</h4>
<p><a href="/user_uploads/2/61/FL2Owe60tyJ1GoqbBgGs6tlY/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/61/FL2Owe60tyJ1GoqbBgGs6tlY/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/61/FL2Owe60tyJ1GoqbBgGs6tlY/pasted_image.png"></a></div>



<a name="301019"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301019" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301019">(Oct 19 2017 at 18:11)</a>:</h4>
<p><span class="user-mention" data-user-email="brock@zulipchat.com" data-user-id="136">@Brock Whittaker</span> can you help debug this ASAP?</p>



<a name="301022"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301022" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brock Whittaker <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301022">(Oct 19 2017 at 18:12)</a>:</h4>
<p>yep</p>



<a name="301025"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301025" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brock Whittaker <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301025">(Oct 19 2017 at 18:20)</a>:</h4>
<p>This is FF on Linux still? I can't replicate with chrome so I'm going to look into the FF API and possible incongruities.</p>



<a name="301041"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301041" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brock Whittaker <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301041">(Oct 19 2017 at 18:26)</a>:</h4>
<p>I guess <a href="/user_uploads/2/d9/wTcElH3evrWzO0JG0mi_ehsJ/Screen-Shot-2017-10-19-at-11.25.26-AM.png" target="_blank" title="Screen-Shot-2017-10-19-at-11.25.26-AM.png">this comment</a> answers that. ;)</p>
<div class="message_inline_image"><a href="/user_uploads/2/d9/wTcElH3evrWzO0JG0mi_ehsJ/Screen-Shot-2017-10-19-at-11.25.26-AM.png" target="_blank" title="this comment"><img src="/user_uploads/2/d9/wTcElH3evrWzO0JG0mi_ehsJ/Screen-Shot-2017-10-19-at-11.25.26-AM.png"></a></div>



<a name="301044"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301044" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brock Whittaker <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301044">(Oct 19 2017 at 18:28)</a>:</h4>
<p>Here's the commit from 2013 (!!) where this originates from. I'm happy after reading it to just kill the line.<br>
<a href="/user_uploads/2/f6/F_4SRw4KirUFlBWHmcdAwuhb/Screen-Shot-2017-10-19-at-11.27.05-AM.png" target="_blank" title="Screen-Shot-2017-10-19-at-11.27.05-AM.png">Commit Blame</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/f6/F_4SRw4KirUFlBWHmcdAwuhb/Screen-Shot-2017-10-19-at-11.27.05-AM.png" target="_blank" title="Commit Blame"><img src="/user_uploads/2/f6/F_4SRw4KirUFlBWHmcdAwuhb/Screen-Shot-2017-10-19-at-11.27.05-AM.png"></a></div>



<a name="301045"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301045" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brock Whittaker <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301045">(Oct 19 2017 at 18:29)</a>:</h4>
<p>Of which the $.browser.webkit was replaced by me (deprecated) to <code>/webkit/i.test(navigator.userAgent)</code>, but the big point is FF doesn't register webkit in mac either for example.</p>



<a name="301046"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301046" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301046">(Oct 19 2017 at 18:31)</a>:</h4>
<p>I think it's safe to assume that the 2013 change was an expedient hack that might have made some sense four years ago, but I'd defer to your knowledge on the current landscape. <span class="emoji emoji-1f60e" title="smiling face with sunglasses">:smiling_face_with_sunglasses:</span></p>



<a name="301047"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301047" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brock Whittaker <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301047">(Oct 19 2017 at 18:32)</a>:</h4>
<p>This <em>seems</em> to fix it on my Firefox version (ran through the states of blocked, not accepted, accepted), and they all function.</p>



<a name="301048"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301048" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brock Whittaker <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301048">(Oct 19 2017 at 18:33)</a>:</h4>
<p>I just opened <a href="https://github.com/zulip/zulip/pull/7086" target="_blank" title="https://github.com/zulip/zulip/pull/7086">#7086</a> for this. I'd strongly recommend testing with FF on Ubuntu <span class="user-mention" data-user-email="showell@zulipchat.com" data-user-id="58">@Steve Howell</span>, <span class="user-mention" data-user-email="harshitbansal2015@gmail.com" data-user-id="907">@Harshit Bansal</span>.</p>



<a name="301054"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301054" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301054">(Oct 19 2017 at 18:48)</a>:</h4>
<p>I'm deploying that PR on top of master here; should be around in 2 minutes.  Hopefully <span class="user-mention" data-user-email="harshitbansal2015@gmail.com" data-user-id="907">@Harshit Bansal</span> can verify.</p>



<a name="301055"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301055" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brock Whittaker <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301055">(Oct 19 2017 at 18:48)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span></p>



<a name="301125"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301125" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Harshit Bansal <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301125">(Oct 19 2017 at 20:04)</a>:</h4>
<p>Working fine for me! <span class="emoji emoji-1f4af" title="100">:100:</span> <span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span></p>



<a name="301386"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/desktop%20notifications/near/301386" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/desktop.20notifications.html#301386">(Oct 19 2017 at 22:27)</a>:</h4>
<p><span class="user-mention" data-user-email="harshitbansal2015@gmail.com" data-user-id="907">@Harshit Bansal</span> can you test again?  We just deployed a more cleaned up version of <a href="https://github.com/zulip/zulip/pull/7086" target="_blank" title="https://github.com/zulip/zulip/pull/7086">#7086</a>.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>