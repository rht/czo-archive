<html>
<head><meta charset="utf-8"><title>API docs? · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html">API docs?</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="571459"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571459" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571459">(Apr 28 2018 at 22:51)</a>:</h4>
<p>Is there somewhere that describes the client&lt;-&gt;server API as seen from the client?</p>



<a name="571464"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571464" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571464">(Apr 28 2018 at 23:01)</a>:</h4>
<p>You're probably looking for <a href="https://zulipchat.com/api" target="_blank" title="https://zulipchat.com/api">https://zulipchat.com/api</a>?</p>



<a name="571467"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571467" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571467">(Apr 28 2018 at 23:02)</a>:</h4>
<p>Ah, perfect, thanks</p>



<a name="571469"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571469" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571469">(Apr 28 2018 at 23:02)</a>:</h4>
<p>We're currently planning some revisions to that documentation, so feedback is very welcome!</p>



<a name="571471"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571471" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571471">(Apr 28 2018 at 23:13)</a>:</h4>
<p>ok, so the first question is how does a client login; those docs seem to assume you nab an API key from an existing client</p>



<a name="571472"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571472" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571472">(Apr 28 2018 at 23:15)</a>:</h4>
<p>then the next is whether registering a Queue is persistent; i.e. does a client tend to do that when the client starts up, or does it do it once for the user and keep using that queue for ever?</p>



<a name="571474"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571474" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571474">(Apr 28 2018 at 23:19)</a>:</h4>
<p>the other thing, which is what first sparked my curiosity, is whether there's any security on uploaded images/files - from what I can see there isn't, even for an image sent to someone in a private chat?</p>



<a name="571475"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571475" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571475">(Apr 28 2018 at 23:19)</a>:</h4>
<p>I'm not too familiar with the API, but does <a href="https://zulipchat.com/help/add-a-bot-or-integration" target="_blank" title="https://zulipchat.com/help/add-a-bot-or-integration">https://zulipchat.com/help/add-a-bot-or-integration</a> help for your first question?</p>



<a name="571476"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571476" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571476">(Apr 28 2018 at 23:21)</a>:</h4>
<p>not that I'm seeing; that's how to use the existing client to get a key, not an API that turns a email/password into a key</p>



<a name="571477"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571477" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571477">(Apr 28 2018 at 23:22)</a>:</h4>
<p>ah, got it. (Don't know the answer, but hopefully someone who knows will be by soon :).)</p>



<a name="571478"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571478" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571478">(Apr 28 2018 at 23:23)</a>:</h4>
<p>not an answer, but if it helps you can get a users' API key manually by going to Settings from the gear menu.</p>



<a name="571479"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571479" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571479">(Apr 28 2018 at 23:23)</a>:</h4>
<p>right, yep I saw that</p>



<a name="571480"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571480" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571480">(Apr 28 2018 at 23:24)</a>:</h4>
<p>and we have </p>
<div class="codehilite"><pre><span></span>    # This json format view used by the mobile apps accepts a username
    # password/pair and returns an API key.
    url(r&#39;^api/v1/fetch_api_key$&#39;, zerver.views.auth.api_fetch_api_key,
        name=&#39;zerver.views.auth.api_fetch_api_key&#39;),
</pre></div>


<p>in our <code>zproject/urls.py</code> file, which suggests at least a relevant endpoint is there.</p>



<a name="571481"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571481" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571481">(Apr 28 2018 at 23:25)</a>:</h4>
<p>yes, that's the type of thing I'd expect</p>



<a name="571484"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571484" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571484">(Apr 28 2018 at 23:58)</a>:</h4>
<p><span class="user-mention" data-user-id="7589">@Dave Gilbert</span> can you talk a bit about what you're trying to build?</p>



<a name="571485"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571485" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571485">(Apr 28 2018 at 23:58)</a>:</h4>
<p>Regarding security, <a href="http://zulip.readthedocs.io/en/latest/production/security-model.html" target="_blank" title="http://zulip.readthedocs.io/en/latest/production/security-model.html">http://zulip.readthedocs.io/en/latest/production/security-model.html</a> discusses it</p>



<a name="571486"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571486" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571486">(Apr 28 2018 at 23:59)</a>:</h4>
<p>I should note that this server in particular is running Ubuntu Trusty (aka it's a legacy situation that will soon no longer exist in which there is no such security check beyond secret URLs).</p>



<a name="571491"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571491" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571491">(Apr 29 2018 at 00:02)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> I've done some work on the Pidgin/Purple plugin for Matrix, and I was wondering about doing a zulip one, so thought I'd look at the API to understand it.  But also one of my criticisms of Matrix is the lack of security on images/content and wondered if Zulip was any better</p>



<a name="571493"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571493" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dave Gilbert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571493">(Apr 29 2018 at 00:23)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> OK, I'm not quite sure I understand where the translation to the temporary/expiring URL happens, but it does suggest at least you have something.  IMHO guarding with the apikey would be best, bonus points for securing them so that they're only available to members of the room where the image was posted</p>



<a name="571513"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/API%20docs%3F/near/571513" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/API.20docs.3F.html#571513">(Apr 29 2018 at 05:49)</a>:</h4>
<p><span class="user-mention" data-user-id="7589">@Dave Gilbert</span> it's in different places for the S3 integration vs. the LOCAL_UPLOADS_DIR uploads integration, but both implementations are in functions with names starting with <code>server_</code> in <code>zerver/lib/upload.py</code></p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>