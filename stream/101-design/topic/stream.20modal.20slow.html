<html>
<head><meta charset="utf-8"><title>stream modal slow · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html">stream modal slow</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="591782"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591782" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armaan Ahluwalia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591782">(Jun 01 2018 at 00:10)</a>:</h4>
<p>There's something weird going on with the hashchange when you click the stream settings button. It also seems to cause a 1 - 1.5 second delay but that may just be how heavy the rendering is for the modal!</p>



<a name="591783"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591783" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591783">(Jun 01 2018 at 00:12)</a>:</h4>
<p>It's slow for me, too, <span class="user-mention" data-user-id="5837">@Armaan Ahluwalia</span>.  We have ~100k stream/user tuples that are probably being iterated over.</p>



<a name="591785"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591785" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armaan Ahluwalia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591785">(Jun 01 2018 at 00:13)</a>:</h4>
<p>I've mentioned this before but there is no need to render all items in a list on the frontend. This philosophy could be used for the entire app too. Just render the current items with padding above and below. ( may not be worth the effort but good to keep in mind in the future )</p>



<a name="591786"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591786" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armaan Ahluwalia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591786">(Jun 01 2018 at 00:14)</a>:</h4>
<p><span class="user-mention" data-user-id="58">@Steve Howell</span> Unless you were talking about on the backend?</p>



<a name="591788"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591788" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591788">(Jun 01 2018 at 00:14)</a>:</h4>
<p>We already do some progressive rendering on the frontend.</p>



<a name="591789"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591789" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armaan Ahluwalia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591789">(Jun 01 2018 at 00:14)</a>:</h4>
<p>Ah I haven't had the chance to examine the code for it yet <span class="emoji emoji-1f603" title="smiley">:smiley:</span> Sorry for assuming the worst!</p>



<a name="591791"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591791" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591791">(Jun 01 2018 at 00:16)</a>:</h4>
<p>Well, I'm 90% sure we don't use it yet for the streams modal.  The module <code>subs.js</code> is probably our historically hackiest module, so it's kind of tough to modify at times.</p>



<a name="591792"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591792" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armaan Ahluwalia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591792">(Jun 01 2018 at 00:16)</a>:</h4>
<p>There's a really handy react component called quicklist or something similar that does this very very fast just for general knowledge <span class="emoji emoji-1f603" title="smiley">:smiley:</span></p>



<a name="591793"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591793" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591793">(Jun 01 2018 at 00:17)</a>:</h4>
<p>But as always, we should profile, as it could be something else going on, like literally just counting thousands of subscribers for hundreds of streams to provide counts.</p>



<a name="591804"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591804" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armaan Ahluwalia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591804">(Jun 01 2018 at 00:31)</a>:</h4>
<p><span class="user-mention" data-user-id="58">@Steve Howell</span> Could you point me to what module would be handling the hashchange for the stream settings modal? ( Probably a dumb question but faster than me searching for sure )</p>



<a name="591807"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591807" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armaan Ahluwalia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591807">(Jun 01 2018 at 00:35)</a>:</h4>
<p>nvm guess its subs.js</p>



<a name="591808"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591808" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Armaan Ahluwalia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591808">(Jun 01 2018 at 00:42)</a>:</h4>
<p>Some cursory profiling shows the render function takes 1.9s! That seems way too high. This module could definitely use some sort of refactor at some point <span class="emoji emoji-1f603" title="smiley">:smiley:</span></p>



<a name="591842"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591842" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591842">(Jun 01 2018 at 01:20)</a>:</h4>
<p><span class="user-mention" data-user-id="5837">@Armaan Ahluwalia</span> template.render or lower-level browser rendering?</p>



<a name="591843"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/stream%20modal%20slow/near/591843" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/stream.20modal.20slow.html#591843">(Jun 01 2018 at 01:22)</a>:</h4>
<p>I'm kind of curious if <code>stream_data.update_subscribers_count</code> shows up in the profile.  It's the most O() expensive but probably super fast anyway.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>