<html>
<head><meta charset="utf-8"><title>blue box · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html">blue box</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1222727"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222727" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222727">(Jun 29 2021 at 21:18)</a>:</h4>
<p>One thought I have about the Zulip look and feel is that the blue box is only really useful to people who use the keyboard (AFAICT), but it's there for everyone, regardless of whether they use hotkeys or not.</p>
<p>I'm curious if there would be benefit to either making the blue box subtler, or hiding it until the user uses the keyboard to navigate (<code>j</code>/<code>k</code> or up/down keys).</p>
<p>I'm sort of biased, since as a very heavy keyboard user, the box is quite useful to me, but it's worth thinking about the fact that it may be entirely visual noise to a large portion of our users (this is another spot where it'd be nice to have analytics about hotkey usage — I have no idea what percentage of users that is)</p>
<p>Personally, I like the idea of having a "is-keyboard-user" bit that gets set per-session as soon as someone uses the keyboard to navigate between messages, which we use to decide whether to display the blue box.</p>
<p>Thoughts?</p>



<a name="1222733"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222733" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222733">(Jun 29 2021 at 21:28)</a>:</h4>
<p>have there been complaints about the blue box?</p>



<a name="1222734"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222734" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Dehnert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222734">(Jun 29 2021 at 21:28)</a>:</h4>
<p>I've heard some people be confused about the blue box. I'd be nervous about it going away too readily (and, I guess, about when it shows up and vanishes being more confusing than it always being there), but some sort of default-hidden strategy seems like it could be useful.</p>



<a name="1222735"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222735" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Dehnert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222735">(Jun 29 2021 at 21:28)</a>:</h4>
<p>(Webex I think has some sort of keyboard scrolling feature, and my experience is that it routinely stops working for unclear reasons.)</p>



<a name="1222737"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222737" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222737">(Jun 29 2021 at 21:29)</a>:</h4>
<p>Perhaps leave the blue box hidden until a user scrolls via keyboard or clicks on a message?</p>



<a name="1222738"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222738" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222738">(Jun 29 2021 at 21:30)</a>:</h4>
<p>if course, having some indicator of "focused message" before those happen could be useful</p>



<a name="1222744"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222744" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222744">(Jun 29 2021 at 21:34)</a>:</h4>
<p>also I kinda feel like the blue box is indispensible in interleaved views</p>



<a name="1222746"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222746" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Dehnert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222746">(Jun 29 2021 at 21:36)</a>:</h4>
<p>Hm, why? It matters for... the reply button, and maybe that's it? It might not be ridiculous to hide the reply button in interleaved views when the blue box isn't available.</p>



<a name="1222747"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222747" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Dehnert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222747">(Jun 29 2021 at 21:37)</a>:</h4>
<p>(Oh, reply is no more, so it's now the box at the bottom of the screen, and also "new topic" prefills the stream. This is what I get for checking on an old self-hosted zulip.)</p>



<a name="1222750"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222750" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222750">(Jun 29 2021 at 21:40)</a>:</h4>
<p>Count me among the most passionate defenders of the blue box.  I think there’s always room for improvement, but you are gonna have to tear the blue box out of my cold dead hands.</p>
<p>It’s not just a keyboard user feature.  It orients you as a reader.</p>



<a name="1222751"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222751" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Dehnert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222751">(Jun 29 2021 at 21:41)</a>:</h4>
<p>I definitely want the blue box to stay around for people who like it. There are also people who find it confusing, and satisfying both those groups might be worthwhile.</p>



<a name="1222753"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222753" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222753">(Jun 29 2021 at 21:43)</a>:</h4>
<p>the blue box is also nice for remembering your last read message, when you come back to a zulip that's had some new messages show up.</p>



<a name="1222754"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222754" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222754">(Jun 29 2021 at 21:44)</a>:</h4>
<p>I've also seen people be a little confused about it. I don't think whether we've received feedback about it should be a huge factor in our decisions about it, though — I think if we're sure that it's just visual noise for some large percentage of people, that's worth fixing, even if those people aren't complaining about it.</p>
<p><span class="user-mention silent" data-user-id="19444">Ken Clary</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1222738">said</a>:</p>
<blockquote>
<p>if course, having some indicator of "focused message" before those happen could be useful</p>
</blockquote>
<p>What's it useful for? The only thing I can think of is if you click into a narrow, and then you want to press <code>&gt;</code> to quote-and-reply the message that you happen to land on, or something like that, which I think is sort of rare.</p>
<p><span class="user-mention silent" data-user-id="591">Alex Dehnert</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1222734">said</a>:</p>
<blockquote>
<p>I guess, about when it shows up and vanishes being more confusing than it always being there</p>
</blockquote>
<p>I agree that this is an important consideration — if it feels like it randomly appears and disappears, that's a worse experience than it always being there, even if it isn't useful, IMO.</p>
<p><span class="user-mention silent" data-user-id="58">Steve Howell (showell)</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1222750">said</a>:</p>
<blockquote>
<p>It’s not just a keyboard user feature.  It orients you as a reader.</p>
</blockquote>
<p>I'm curious about the exact dynamics of this — how do you imagine it's used by mouse users?</p>
<p>I just asked my partner (who uses Zulip at work) about this, and she couldn't think of anything is was useful for (except showing which messages are marked as read, which it... doesn't do). I can definitely imagine mouse users finding it useful, but I'm not sure if that actually happens in practice (some of the reason I started this thread is to hear from mouse users about what their feelings on the blue box are)</p>



<a name="1222755"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222755" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222755">(Jun 29 2021 at 21:45)</a>:</h4>
<p>I use the mouse from time to time, so mouse users aren’t exactly an exotic species to me…</p>



<a name="1222756"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222756" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222756">(Jun 29 2021 at 21:46)</a>:</h4>
<p>I'm a mixed mouse/keyboard user, fwiw. (I almost never use hotkeys, I scroll by whatever my fingers were most recently using, I often select messages and actions by mouse)</p>



<a name="1222758"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222758" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222758">(Jun 29 2021 at 21:47)</a>:</h4>
<p>…I just like to know which message to read, and then I arrow down, bla bla bla</p>



<a name="1222764"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222764" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222764">(Jun 29 2021 at 21:51)</a>:</h4>
<p>Takeaways from more conversation with my partner:</p>
<ul>
<li>It helped her understand the interleaved view (specifically, how it works and why things are geryed out when the composebox is open). She doesn't like the interleaved view anyways though, and always narrows to a topic if she's going to reply.</li>
<li>It serves as a visual pointer to where she's reading, but the mouse cursor is what she usually uses for that, and the blue box feels redundant — her inclination is to use the cursor to mark where she's reading.</li>
</ul>



<a name="1222779"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222779" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222779">(Jun 29 2021 at 21:54)</a>:</h4>
<p>There's actually more state than I realized involved in interleaved views, though — the state of which narrow you're going to send to only changes when you click, not as you scroll.</p>



<a name="1222789"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222789" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222789">(Jun 29 2021 at 21:56)</a>:</h4>
<p>The blue box is basically a cursor analog. I find that very valuable.</p>



<a name="1222793"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222793" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222793">(Jun 29 2021 at 21:58)</a>:</h4>
<p>also a bookmark analog</p>



<a name="1222817"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222817" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222817">(Jun 29 2021 at 22:03)</a>:</h4>
<p>That's fair — I do appreciate being able to mark a message as the one I was looking at, and have that state persist even when I move my mouse (which the cursor doesn't get you). I'm not sure that's something people think about, though — to me, it feels hard to position the blue box in a specific spot when scrolling with the mouse.</p>



<a name="1222827"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222827" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222827">(Jun 29 2021 at 22:08)</a>:</h4>
<p>It's also worth noting that I do use the mouse for some things, just rarely for scrolling. My suspicion here is that:</p>
<ul>
<li>There is a large percentage of users who don't use hotkeys at all (or maybe just use <code>Enter</code>/<code>r</code> but no others, or something)</li>
<li>Those users have very different habits from users who use hotkeys (even from people who use hotkeys for only a few things)</li>
<li>We may not be designing with these people in mind</li>
</ul>
<p>Those are all pretty speculative though — the first, we can get analytics on, but the other ones are probably harder to measure.</p>



<a name="1222839"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222839" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222839">(Jun 29 2021 at 22:12)</a>:</h4>
<blockquote>
<p>There is a large percentage of users who don't use hotkeys at all (or maybe just use Enter/r but no others, or something)</p>
</blockquote>
<p>That basically describes me. I use enter on occassion, and recently bothered to memorize that 'r' does the same thing</p>



<a name="1222841"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222841" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222841">(Jun 29 2021 at 22:13)</a>:</h4>
<p>(coincidentally, because I turned the "reply" button into the "message &lt;foo&gt;" button, without changing its hotkey)</p>



<a name="1222925"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222925" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jore <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222925">(Jun 29 2021 at 22:59)</a>:</h4>
<p>I'm not a keyboard user but I find the blue box useful regardless.</p>



<a name="1222940"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1222940" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1222940">(Jun 29 2021 at 23:01)</a>:</h4>
<p>I do think that the way the blue box interacts with regular mouse scrolling / scrollwheel is a little...not random, but not exactly sensible.</p>



<a name="1223004"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223004" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223004">(Jun 30 2021 at 00:58)</a>:</h4>
<p>Yeah, I also find it useful with the mouse to help focus my vision on a message.</p>



<a name="1223629"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223629" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223629">(Jul 01 2021 at 15:23)</a>:</h4>
<p>I have a suggestion for improving how the blue blox is handled via mouse-driven scrolling:<br>
(this may not directly address the topic-as-raised, but I think it may make the use of the box more discoverable)</p>
<p>Handle scrollup/scrolldown events the exact same way as up/down keys. So you're moving around the box itself, and the pane merely scrolls to keep it visible. (Possibly the pane's scrolling could be adjusted to try to keep the box in the middle, rather than just on-screen.)</p>



<a name="1223637"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223637" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223637">(Jul 01 2021 at 16:08)</a>:</h4>
<p>That's a good idea, although I think we'll probably need to tune the way that works across operating systems? Since scroll events are sent at different frequencies, I think.</p>



<a name="1223639"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223639" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223639">(Jul 01 2021 at 16:16)</a>:</h4>
<p>may need a cooldown or something, yes</p>



<a name="1223641"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223641" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Dehnert <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223641">(Jul 01 2021 at 16:23)</a>:</h4>
<p>This has the risk that normal scrolling may be well-tuned to scroll exactly as fast as the user wants, and if Zulip hijacks the scrolling, it may end up with something significantly off for a fairly minor advantage.</p>



<a name="1223646"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223646" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223646">(Jul 01 2021 at 16:35)</a>:</h4>
<p>I think that is usually controlled via frequency of scrolldown/up events, yes?</p>



<a name="1223648"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223648" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Aptekar-Cassels <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223648">(Jul 01 2021 at 16:41)</a>:</h4>
<p>I don't think that's true, at least not on all systems. Scroll events have a field for how much the document was scrolled, but I think it's <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Performance/Scroll-linked_effects">pretty complicated</a></p>



<a name="1223889"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223889" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223889">(Jul 01 2021 at 23:33)</a>:</h4>
<p>Another thing on scroll is that if the user starts scrolling, I think we want the messages to promptly start moving around accordingly, even if the blue box happens at that moment to be toward the opposite end of the viewport.</p>
<p>That is, if you start scrolling up and the blue box happens to be near the bottom, I think it wouldn't be a good experience if you had to first scroll the blue box all the way to the middle or the top before you started seeing the earlier messages.</p>



<a name="1223950"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1223950" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1223950">(Jul 02 2021 at 00:50)</a>:</h4>
<p>No. Do not hijack the native behavior of scroll events. Touchpad and touchscreen users will <em>hate</em> you. Source: I am a touchpad user, and I hated Zulip until I ripped out the scrollbar library we used to have that ruined the native scrolling behavior (<a href="https://github.com/zulip/zulip/pull/11792">#11792</a>).</p>



<a name="1224016"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1224016" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jore <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1224016">(Jul 02 2021 at 09:30)</a>:</h4>
<p>Hmm yeah the blue box is not too bad the way it is and maybe this introduces more problems than it solves? Unless doing something like what DuckDuckGo goes would be possible and not objectionable across devices? Their 'box' stays centered on the screen and the rest of the page scrolls (might be hard to see the box cos it's very light gray):</p>
<p><a href="/user_uploads/2/9/BH8lSla_9YOzheBr7Fbru0qb/2021-07-02-19-27-48-1.gif">2021-07-02-19-27-48-1.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/9/BH8lSla_9YOzheBr7Fbru0qb/2021-07-02-19-27-48-1.gif" title="2021-07-02-19-27-48-1.gif"><img src="/user_uploads/2/9/BH8lSla_9YOzheBr7Fbru0qb/2021-07-02-19-27-48-1.gif"></a></div>



<a name="1225042"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1225042" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1225042">(Jul 05 2021 at 12:40)</a>:</h4>
<p>The logic to center the blue box (aka "pointer") is in <code>message_viewport.keep_pointer_in_view()</code>.  The algorithm is roughly inspired by <a href="https://barnowl.mit.edu/">BarnOwl</a>.</p>



<a name="1225043"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1225043" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1225043">(Jul 05 2021 at 12:43)</a>:</h4>
<p>I'd be pretty wary of tweaking the algorithm here.  In my testing the blue box stays sticky as long as you don't scroll off the screen, which I view as a good thing.</p>



<a name="1225046"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1225046" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1225046">(Jul 05 2021 at 12:46)</a>:</h4>
<p>One thing I'll often do when scrolling back is use the arrow keys to select the message I'm reading (and not even necessarily replying to), and then I'll use the mouse to scooch up the message toward the top of the screen.  (When I'm in reading mode, I reach for the mouse pretty often, despite being a mostly-keyboard user, and I use the blue box to keep my eyes oriented, or to not lose my place if I turn my head for a sip of coffee.)</p>



<a name="1225572"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1225572" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1225572">(Jul 06 2021 at 00:40)</a>:</h4>
<p>Yeah, I also feel like I use the blue box to help focus my eyes on a particular message, even with the mouse, which makes me think it's doing something.  Though it's possible that the motivation for that is that the the blue box being somewhere else is distracting.</p>



<a name="1231170"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1231170" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1231170">(Jul 14 2021 at 19:48)</a>:</h4>
<p>For what it's worth, we just got a support request asking about how to remove the border.</p>



<a name="1313487"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1313487" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1313487">(Jan 21 2022 at 15:24)</a>:</h4>
<blockquote>
<p>No. Do not hijack the native behavior of scroll events. Touchpad and touchscreen users will <em>hate</em> you. Source: I am a touchpad user, and I hated Zulip until I ripped out the scrollbar library we used to have that ruined the native scrolling behavior (<a href="https://github.com/zulip/zulip/pull/11792">#11792</a>).</p>
</blockquote>
<p>Kinda picking this back up 6 months later, because I finally had a coherent idea. Apologies if this has been covered in other discussions in the meantime.<br>
Given the new(?) read/unread marking features, that perhaps strictly follow the selection box, I suggest two-ish new power-user preferences.</p>
<ol>
<li>an app-wide "selection box follows scrolling" setting (currently defaults to true). if set to false, the selection stays where it is when you scroll, and the scroll jumps to the selection when you start navigating with keyboard.</li>
<li>an interleaving-specific "selection box marks messages as unread" setting (currently defaults to true). if set to false, moving around the box in interleaved modes doesn't mark anything as read.<br>
(obviously, both of those are very desktop-centric and I haven't thought about interactions with mobile, if any.)</li>
</ol>



<a name="1313530"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1313530" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1313530">(Jan 21 2022 at 17:07)</a>:</h4>
<blockquote>
<p>Given the new(?) read/unread marking features, that perhaps strictly follow the selection box,</p>
</blockquote>
<p>It may make sense to discuss the suggestions in any case, but I don't believe we've made any decisions at this point to change the selection box behavior with respect to read/unread marking.</p>



<a name="1379414"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379414" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379414">(May 08 2022 at 20:40)</a>:</h4>
<p>Hi, I'd like to know if there are still plans to make the Big Bad Blue Border of dread, despair and destitution a little less attention grabbing.</p>
<p>I've seen <a href="https://github.com/zulip/zulip/pull/14312">#14312</a>, but it seems inactive. A thick left border alone would do the trick for me, and it would be far less distracting (especially if it fades in and out).</p>
<p>If nothing on that front is in the pipeline, it would be nice to let admins tweak the CSS of their instance like users of the desktop app can.</p>



<a name="1379452"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379452" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379452">(May 09 2022 at 09:11)</a>:</h4>
<p>I wanted to add in "dreariness" between "despair" and "destitution", but the edit window is closed.</p>
<p>Did I mention I don't like that part of the UX? :-p</p>



<a name="1379453"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379453" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379453">(May 09 2022 at 09:16)</a>:</h4>
<p>More seriously, that's a major a11y concern for folks with ADHD.</p>
<p>More generally, things that move abruptly in the peripheral vision trigger your danger detection circuitry and attract the gaze.</p>
<p>It looks like you are trying to emulate an eye tracker, but that's impossible without input (and would be too privacy-invading to implement using the webcam). When you wrongly guess where my eyes landed, you pull them out of what I'm trying to read. That's suboptimal.</p>



<a name="1379541"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379541" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379541">(May 09 2022 at 19:20)</a>:</h4>
<p>The blue box has several functions, none of which have anything to do with “trying to emulate an eye tracker”.</p>
<ul>
<li>It signals where to start reading when you switch to a view with a mix of read and unread messages.</li>
<li>It defines the position where messages get marked read as you scroll.</li>
<li>It highlights a specific message, if you clicked on a link to a message.</li>
<li>It serves as a keyboard focus indicator.</li>
</ul>



<a name="1379542"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379542" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379542">(May 09 2022 at 19:25)</a>:</h4>
<p>It's also not intended to move out of the corner of your eye -- it should only be moving when you're intentionally scrolling, and should stay pretty much centered in the viewport.</p>
<p>Does that match the behaviour that you're seeing, or is it moving at other times for you?  Can you talk a little about how you're interacting with it that causes it to feel like it's moving abruptly?</p>



<a name="1379543"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379543" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379543">(May 09 2022 at 19:34)</a>:</h4>
<p><span class="user-mention" data-user-id="24153">@Pygy</span>: I've merged this into one topic where we discussed changes to the box -- see scrollback.</p>
<p>But we've made some progress experimenting with turning it off in some cases -- you may be interested in <a href="https://github.com/zulip/zulip/pull/20934">#20934</a>, or <a class="stream-topic" data-stream-id="101" href="/#narrow/stream/101-design/topic/turning.20off.20blue.20box">#design &gt; turning off blue box</a>.</p>



<a name="1379544"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379544" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379544">(May 09 2022 at 19:36)</a>:</h4>
<blockquote>
<p>It defines the position where messages get marked read as you scroll.</p>
</blockquote>
<p>oh, is that true now?</p>



<a name="1379545"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379545" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379545">(May 09 2022 at 19:39)</a>:</h4>
<p>AFAIK that has always been true. (To complete the story, they also get marked if the whitespace below the last message is in view.)</p>



<a name="1379557"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379557" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379557">(May 09 2022 at 19:56)</a>:</h4>
<p><span class="user-mention" data-user-id="699">@Anders Kaseorg</span> thanks for the clarification</p>
<p>I'm new to Zulip, I had noticed the last two functions.</p>
<p>The first three functions would IMO be better served by using background color that fades out, à la Gitter. Or an indicator in the margin.</p>
<p>The keyboard focus could also be located in the margin... I just tried this</p>
<div class="codehilite" data-code-language="CSS"><pre><span></span><code><span class="p">.</span><span class="nc">selected_message</span><span class="w"> </span><span class="p">.</span><span class="nc">messagebox-content</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">box-shadow</span><span class="p">:</span><span class="w"> </span><span class="kc">inset</span><span class="w"> </span><span class="mi">6</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mh">#4375bb</span><span class="p">,</span><span class="w"> </span><span class="mi">-2</span><span class="kt">px</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mh">#4375bb</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This is perfect for me</p>
<p><span class="user-mention" data-user-id="12178">@Alex Vandiver</span> That matches what I'm seeing.</p>
<p>The thing is, I read while scrolling (with trackpads and smooth scrolling, this is comfortable), and the box jumps around...</p>



<a name="1379558"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379558" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379558">(May 09 2022 at 19:59)</a>:</h4>
<p>OK, thanks for clarifying that!</p>



<a name="1379559"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379559" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379559">(May 09 2022 at 19:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="24153">Pygy</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1379414">said</a>:</p>
<blockquote>
<p>It would be nice to let admins tweak the CSS of their instance like users of the desktop app can.</p>
</blockquote>
<p>I don't know if it's and option in your case, but if you self-host, you can adjust the CSS for desktop and web users alike -- but that's not possible if you're on Zulip Cloud.</p>



<a name="1379561"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379561" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379561">(May 09 2022 at 20:07)</a>:</h4>
<p>So I'm playing with it (I tweaked the snippet above a little so that it properly covers the left border).</p>
<p>The horizontal lines are the problem for me.</p>
<p>We're trying out <a href="https://mithril.zulipchat.com">https://mithril.zulipchat.com</a> in order to maybe move the mithril.js chat from gitter to Zulip. The cloud hosting solution is better for us from a (lack of) maintenance point of view, but thanks for mentioning the self-hosting possibility, we'll think about it.</p>



<a name="1379562"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379562" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379562">(May 09 2022 at 20:09)</a>:</h4>
<p>As referenced on the tail end of <a class="stream-topic" data-stream-id="101" href="/#narrow/stream/101-design/topic/turning.20off.20blue.20box">#design &gt; turning off blue box</a>, this is something we were iterating a bit on not too long ago, and just got put on pause while we closed in on the 5.0 release.  Thanks for the nudge to think about picking it up again.</p>



<a name="1379563"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379563" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379563">(May 09 2022 at 20:10)</a>:</h4>
<p>As a focus marker, it works fine with the CSS...</p>
<p>FWIW I think the blue box is too overloaded with functionality. I'm off to read that thread and the related issue</p>



<a name="1379564"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379564" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379564">(May 09 2022 at 20:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="24153">Pygy</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1379452">said</a>:</p>
<blockquote>
<p>I wanted to add in "dreariness" between "despair" and "destitution", but the edit window is closed.</p>
<p>Did I mention I don't like that part of the UX? :-p</p>
</blockquote>
<p>Admins can <a href="https://zulip.com/help/configure-message-editing-and-deletion">adjust how big the edit window is</a>.  We have it set reasonably long (4 hours) here -- the balance with allowing edits is always how much risk that someone will adjust their message after the conversation has responded to its content (though the edit history is always visible).  If in your organization that isn't an issue, you can set the duration to "anytime."</p>



<a name="1379565"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379565" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379565">(May 09 2022 at 20:19)</a>:</h4>
<p>Sorry <span class="user-mention" data-user-id="12178">@Alex Vandiver</span> that was a joke that fell flat. I was not complaining about the length of the edit window, it is fine as it is</p>



<a name="1379602"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379602" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379602">(May 10 2022 at 00:24)</a>:</h4>
<p><span class="user-mention" data-user-id="24153">@Pygy</span> would you able to talk about this on a call?</p>



<a name="1379669"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379669" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379669">(May 10 2022 at 04:21)</a>:</h4>
<p><span class="user-mention" data-user-id="22433">@Vlad Korobov</span> I was sleeping...</p>
<p>I generally prefer typing but we can do a call if you want</p>



<a name="1379686"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379686" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379686">(May 10 2022 at 04:46)</a>:</h4>
<p>I won't be able to do it before <time datetime="2022-05-10T06:35:00Z">2022-05-10T08:35:00+02:00</time>  and that will be far into your night though</p>



<a name="1379713"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1379713" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1379713">(May 10 2022 at 08:13)</a>:</h4>
<p><span class="user-mention" data-user-id="699">@Anders Kaseorg</span> </p>
<blockquote>
<ul>
<li>It defines the position where messages get marked read as you scroll.</li>
</ul>
</blockquote>
<p>^^^ This is probably what I perceived as trying to track my gaze. The blue box is far less annoying when scrolling through posts that have already been read.</p>



<a name="1380221"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380221" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380221">(May 11 2022 at 11:54)</a>:</h4>
<p>Checking again re. read status, it doesn't seem to be the case... I may be getting used to it...</p>



<a name="1380228"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380228" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380228">(May 11 2022 at 11:55)</a>:</h4>
<p>it is my impression that the blue box does not actually control read status at all, though maybe that kind of thing is in the works. (also, I'd really prefer having a concrete way of controlling read status, like that.)</p>



<a name="1380319"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380319" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Pilgrim (neiljp) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380319">(May 11 2022 at 16:57)</a>:</h4>
<p>Read status is normally indicated by a different color left vertical line, I believe?</p>



<a name="1380320"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380320" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Neil Pilgrim (neiljp) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380320">(May 11 2022 at 17:00)</a>:</h4>
<p>For those not aware, there is discussion of a 'marking unread' feature in the server. There is possibly an issue for toggling automatic mark-as-read  in the web-app - that's something controllable in zulip-terminal on startup and which at least there I'm also interested in having an option to toggle such an <code>explore</code> mode at run-time.</p>



<a name="1380332"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380332" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380332">(May 11 2022 at 20:06)</a>:</h4>
<p>Our unread indicator is a green vertical line. What I said was that the blue box <em>defines the position where</em> messages get marked read. As you scroll, the blue box moves; as the blue box passes messages, those messages get marked read; as messages get marked read, their green line disappears.</p>



<a name="1380333"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380333" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380333">(May 11 2022 at 20:07)</a>:</h4>
<p>I see the green line disappear well before the blue box reaches it.</p>



<a name="1380336"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380336" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380336">(May 11 2022 at 20:12)</a>:</h4>
<p>Then you’re probably seeing</p>
<blockquote>
<p>(To complete the story, they also get marked if the whitespace below the last message is in view.)</p>
</blockquote>



<a name="1380338"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380338" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380338">(May 11 2022 at 20:15)</a>:</h4>
<p>given that I'm ~always sitting at the bottom of my messages, that seems like a pretty all-encompassing case.</p>



<a name="1380339"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380339" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380339">(May 11 2022 at 20:17)</a>:</h4>
<p>to the point that it took quite a bit of conscious doing to even see evidence that the green bars exist at all, after years of using the app.</p>



<a name="1380341"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380341" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380341">(May 11 2022 at 20:22)</a>:</h4>
<p>Yeah, a lot of workflows will result in you rarely seeing them, and that’s fine. If you catch up using the all messages view, you’ll see them more often.</p>



<a name="1380342"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380342" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380342">(May 11 2022 at 20:26)</a>:</h4>
<p>the all messages view is the view I use all the time. that's kinda my confusion: in my experience, the green bars disappear seconds after a message scrolls on the the screen, whether or not there is whitespace directly beneath it.</p>



<a name="1380343"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380343" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380343">(May 11 2022 at 20:26)</a>:</h4>
<p>(really, less than a second)</p>



<a name="1380344"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380344" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380344">(May 11 2022 at 20:27)</a>:</h4>
<p>(also, in some other thread a month or two ago, someone said the opposite, that the blue box does not actually mark messages as read, but that maybe such a feature was in the works.)</p>



<a name="1380345"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380345" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380345">(May 11 2022 at 20:29)</a>:</h4>
<p>(I may be mis-paraphrasing)</p>



<a name="1380363"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380363" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380363">(May 11 2022 at 22:08)</a>:</h4>
<p>It took me some time, but I finally managed to get a glimpse of the green line. In dark mode, it is pretty dark too, making it barely noticeable...</p>



<a name="1380402"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380402" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380402">(May 12 2022 at 02:48)</a>:</h4>
<p>I shared with <span class="user-mention" data-user-id="24153">@Pygy</span> 20 min video clarification about concerns and possible solutions, about test we didn't do (I hope we will) and about styles we picked + reasons behind.<br>
Video <a href="https://www.loom.com/share/15b32cef72754d44ad32caa212e72134">https://www.loom.com/share/15b32cef72754d44ad32caa212e72134</a></p>



<a name="1380498"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380498" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380498">(May 12 2022 at 14:09)</a>:</h4>
<p>Thanks for sharing <span class="user-mention" data-user-id="22433">@Vlad Korobov</span> </p>
<p>Here's my understanding of the situation, then a few ideas to chew on...</p>
<ol>
<li>
<p>The blue box is, primarily, a keyboard navigation cursor (hereafter the Knursor™). It's a good boy, it follows you around when you scroll, but it wags its tail too heavily in the process.</p>
</li>
<li>
<p>Marking posts as read currently depends on the knursor's automatic tracking logic</p>
</li>
<li>
<p>There's a lot of state to display, competing for real estate on the screen.</p>
</li>
</ol>
<ul>
<li>The knursor which, even when the user doesn't use the arrow, shows what post they'll reply to</li>
<li>Mouseover/hover state</li>
<li>read/unread status</li>
<li>messages with @mentions</li>
<li>other ways to highlight messages</li>
</ul>
<p>Here's my analysis</p>
<p>A. Given how these features interact, the nut should be cracked holistically. Committing to e.g. the green line on the left without solving the rest is IMO premature.</p>
<p>B. Keyboard nav and distraction-free reading are IMO not mutually exclusive, because you don't do them at the same time. Users will be either reading/replying, xor moderating/administrating.</p>
<p>C. When reading, text is king. When scrolling with the mouse, the knursor should get out of the way, and the hover states should not trigger (the emoji/kebab/star should remain hidden). You may even want to hide the mouse cursor, some apps do that.</p>
<p>C'. When navigating with the keyboard, though, having a distinctive knursor is important, and not distracting because the user is in control, so the movement is predictable.</p>
<p>D. You can't entirely get rid of the knursor when reading, because it indicates visually the message and thus the topic one is replying to. So it would make sense to me to have the knursor minimized to the left (where the read/unread line lives). I'd rather have it where the green line is right now to put it as far as possible from the main text column.</p>
<p>D'. Once minimized if the knursor fades in/out when it moves it will be even less obtrusive. </p>
<p>E. The unread line could leave between the user picture and the text, or on the other side. (another option that IIRC hasn't been discussed would be to change the background color of the timestamp). Something that vanishes is, at least to me, less distracting than something that appears. Right now, with the channel border on the left, the green line is barely visible in dark mode anyway.</p>
<p>F. The logic to automatically mark posts as read/unread should IMO be based around a timer that starts when the posts appear on screen. If they stay long enough, they're read (at least that would be a sane behavior for non-power users). You may add the option to use the knursor to mark things as read (posts remain unread until they are focused under the knursor).</p>
<p>F'. Not sure what to do when a post is manually marked as unread... It should stay unread as long as it is visible on screen, but should it automatically me marked as read when they come back to it. I guess it would make sense...</p>
<p>G. Not sure what to do with the other states at this point. The mouse hover state could slightly alter the background color, regardless of what it is. A pale, translucent grey <code>::before::</code> pseudo-element, below the text, <br>
 would work I think.</p>
<p>Got to go now, I'll be AFK for ~4-5 hours</p>



<a name="1380502"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380502" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380502">(May 12 2022 at 15:01)</a>:</h4>
<p>One last consideration: there are actually two knursors, one commanded by the arrows, and one commanded by tabbing. I have little a11y experience, but I wonder if it wouldn't make sense to restrict the tabbing targets to the blue box, in the message view.</p>



<a name="1380507"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380507" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380507">(May 12 2022 at 16:27)</a>:</h4>
<blockquote>
<p>You may add the option to use the knursor to mark things as read (posts remain unread until they are focused under the knursor).</p>
</blockquote>
<blockquote>
<p>Not sure what to do when a post is manually marked as unread... It should stay unread as long as it is visible on screen, but should it automatically me marked as read when they come back to it. I guess it would make sense...</p>
</blockquote>
<p>I think the first thing quote would be a good prerequisite for marking things as unread, because it allows "proper" manual control of read status.</p>



<a name="1380510"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1380510" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pygy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1380510">(May 12 2022 at 16:39)</a>:</h4>
<p>Indeed... Side note, if knursor makes you cringe, we may go for k-nav cursor...</p>



<a name="1517555"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1517555" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhijeet Bodas <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1517555">(Mar 03 2023 at 08:14)</a>:</h4>
<p>Not sure if this has been discussed elsewhere, but would it be a good idea to replace the blue "box" with a blue strip on the right edge of the message? I'm imagining something similar to the green strip we currently have for unread messages.<br>
This would make it less intrusive, and possibly more coherent with the existing green strip?</p>



<a name="1517628"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1517628" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1517628">(Mar 03 2023 at 11:47)</a>:</h4>
<p><span class="user-mention" data-user-id="16839">@Abhijeet Bodas</span> we’ve tested that approach. Hardly visible.</p>



<a name="1517638"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1517638" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhijeet Bodas <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1517638">(Mar 03 2023 at 12:19)</a>:</h4>
<p>I didn't understand. If it's the same thickness as the unread green strip, it would be pretty visible right?<br>
(Is there any previous discussion topic in this which I can read, in case I'm missing something?)</p>



<a name="1517661"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1517661" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1517661">(Mar 03 2023 at 13:14)</a>:</h4>
<p>I used zulip for years without realizing there was a green strip at all</p>



<a name="1517682"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1517682" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1517682">(Mar 03 2023 at 14:31)</a>:</h4>
<p>if it is on the right side it is not as visible</p>



<a name="1517872"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1517872" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1517872">(Mar 03 2023 at 19:44)</a>:</h4>
<p>For cross-reference (especially for anyone finding the 2021 and 2022 discussions above):</p>
<p>A redesign that makes the blue box less conspicuous is being discussed at<br>
<a href="#narrow/stream/101-design/topic/UI.20redesign.3A.20blue.20box/near/1517224">https://chat.zulip.org/#narrow/stream/101-design/topic/UI.20redesign.3A.20blue.20box/near/1517224</a> .</p>



<a name="1573490"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573490" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Wight <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573490">(May 20 2023 at 14:59)</a>:</h4>
<p>Adding onto the ADHD discussion, it is a bit distracting for me as a person who has ADHD. Specifically when I'm scrolling, it feels like the blue box is lagging behind if it falls out of view. It then plays 'catchup' and I'll see it scrolling back up at the bottom or top (depending on which direction I'm scrolling). Then if I reach the top of the thread and continue to scroll, it's like I'm scrolling the blue box up? I feel like that's inconsistent. </p>
<p>As a keyboard user it works perfect, like the exact way I want it to. When I broke my wrist and had to use my computer by voice this is exactly the kind of feature that made apps accessible to me. But also apps like Discord or other alternatives wait until you do a keyboard navigation to show it. I especially like how Discord does things, where when they detect a keyboard navigation, they open a modal showing you how to use the keyboard navigation of the app (not the shortcuts, a modal explaining the tabbing, shift tabbing, and quick switcher).</p>



<a name="1573492"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573492" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573492">(May 20 2023 at 15:04)</a>:</h4>
<p><span class="user-mention" data-user-id="27044">@Sam Wight</span> Just to be clear, when you mention scrolling here, it's mouse scrolling, correct?</p>



<a name="1573493"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573493" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Wight <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573493">(May 20 2023 at 15:05)</a>:</h4>
<p>Scrolling with a trackpad, but yes! This is on macOS.</p>



<a name="1573495"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573495" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573495">(May 20 2023 at 15:06)</a>:</h4>
<p>I have kinda expressed my thoughts on the blue box too much here, so my lack of response here is just not trying to repeat myself, haha.</p>
<p>But I think your feedback will be appreciated here!</p>



<a name="1573496"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573496" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Wight <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573496">(May 20 2023 at 15:07)</a>:</h4>
<p>It feels like there's two behaviors with the mouse and the blue box:</p>
<ul>
<li>The cursor follows you as it scrolls out of view. </li>
<li>You control the cursor and can scroll it further down when you reach the end of the thread. Normally this is where you would overscroll. </li>
</ul>
<p>It's not a huge deal and most people won't notice it, just is a bit inconsistent.</p>



<a name="1573497"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573497" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Wight <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573497">(May 20 2023 at 15:07)</a>:</h4>
<p>No problem, also sorry if this is the wrong thread! I'm new here and still getting used to how things work <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="1573498"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573498" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573498">(May 20 2023 at 15:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="27044">Sam Wight</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1573497">said</a>:</p>
<blockquote>
<p>No problem, also sorry if this is the wrong thread! I'm new here and still getting used to how things work <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>
</blockquote>
<p>No, this is the perfect thread!  I am just saying that my lack of response isn't for lack of interest. :)</p>



<a name="1573499"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573499" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573499">(May 20 2023 at 15:24)</a>:</h4>
<p>my understanding is that, currently, when you scroll, javascript code tries to keep the blue box in the visible area, but easily falls behind when you scroll quickly.<br>
I agree that this is odd and sometimes distracting.<br>
The only way I can think of to keep the box on the screen in a rational fashion would be to intercept scroll up/down events and use them to control the box (not the pane), and have the pane autoscroll to keep up with the box (thus making mouse/pad scrolling act like keyboard scrolling). This has been resoundingly rejected by folks here.</p>



<a name="1573505"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573505" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Wight <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573505">(May 20 2023 at 16:12)</a>:</h4>
<p>I think a good intermediate step would be to just fade out the box while scrolling and then wait until scrolling stops to have the box reappear. You can still do whatever calculations are necessary to ensure it stays on screen, but that way it's just more DOM-efficient and also isn't distracting.</p>



<a name="1573506"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573506" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Wight <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573506">(May 20 2023 at 16:30)</a>:</h4>
<p>Petition to call the 'blue box' just the focus ring? That's the standard name for it accessibility wise AFAIK. I think generally it shouldn't have 'overloaded' and should have the same functionality as just your standard focus ring. Folks who depend on focus rings to navigate with accessibility tooling will expect it to work the same way as a focus ring generally. Would also be good to use as much of the standard browser focus stuff as much as possible too if we're not already. Keyboard navigation is great, but tools like voice navigation tools or VoiceOver will use the browser focus to do stuff like skip between messages smartly or give users more info about what's highlighted. </p>
<p>Also it would be nice to do contrast and low vision checks on it to make sure that folks with vision problems are still able to see it.</p>



<a name="1573519"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573519" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573519">(May 20 2023 at 18:41)</a>:</h4>
<p>This isn’t JavaScript accidentally falling behind; someone intentionally <a href="https://github.com/zulip/zulip/blob/d9716bc18946a65e63adc0f31bd7c450890e0d67/web/src/message_scroll.js#L202">programmed this behavior</a>. It was before my time; I’m skeptical that it’s a good behavior.</p>



<a name="1573533"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573533" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573533">(May 20 2023 at 21:11)</a>:</h4>
<p>The <code>git blame</code> for that particular line points to me, but I was just moving the code from the kitchen sink of <code>ui.js</code>.  I wish I remember the history here, but I suspect the solution is to just do whatever makes sense now, and the lagging scrolling is certainly not the kind of behavior that I would justify.</p>



<a name="1573534"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573534" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573534">(May 20 2023 at 21:13)</a>:</h4>
<p>Here is the commit where I think I am mostly just moving code around: <a href="https://github.com/zulip/zulip/commit/8063f73f6de5c68b3bceb12b3cf64ca0e350e4fe">8063f73f6de5c68b3bceb12b3cf64ca0e350e4fe</a></p>



<a name="1573535"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573535" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573535">(May 20 2023 at 21:14)</a>:</h4>
<p>I do say "We also defer starting the scroll handler until <code>message_fetch.js</code>has been initialized", which sounds like an intentional behavior change, but I don't remember the thought process from five years ago.</p>



<a name="1573536"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573536" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573536">(May 20 2023 at 21:16)</a>:</h4>
<p>perhaps there is some logic to have the box explicitly 'visit' each message along the way, marking them as read?<br>
(just guessing)<br>
and I know that the 'mark as read' features are getting...overhauled?</p>



<a name="1573537"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573537" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573537">(May 20 2023 at 21:20)</a>:</h4>
<p>One of my first projects in Cambridge in 2013 was to tweak the scrolling code to be more BarnOwl-like, or maybe less BarnOwl-like, but I only remember tweaking things like where to put the cursor, and I don't remember any conversations related to scrolling delays.  But, like I said, I think this is a case where you don't really need a ton of historical context, and it should just be re-visited.</p>



<a name="1573538"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573538" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573538">(May 20 2023 at 21:21)</a>:</h4>
<p>And, yeah, to Ken's point, I am sure that some of the behavior is probably slightly related to marking-as-unread concerns, but I don't think that necessarily justifies what we have now.</p>



<a name="1573540"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573540" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573540">(May 20 2023 at 21:24)</a>:</h4>
<p>I am about 60% sure that if you really tracked down the git history, this code would even precede my time at Zulip.</p>



<a name="1573541"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573541" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573541">(May 20 2023 at 21:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19444">Ken Clary</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1573536">said</a>:</p>
<blockquote>
<p>perhaps there is some logic to have the box explicitly 'visit' each message along the way, marking them as read?<br>
(just guessing)<br>
and I know that the 'mark as read' features are getting...overhauled?</p>
</blockquote>
<p>I actually don't suspect that any of the recent efforts relating to unread semantics are the cause of this blue-box problem, but obviously any blue-box solution here should be tested carefully in terms of unread messages.</p>



<a name="1573542"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573542" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sergey L. <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573542">(May 20 2023 at 21:28)</a>:</h4>
<p>hi all</p>



<a name="1573543"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573543" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573543">(May 20 2023 at 21:31)</a>:</h4>
<blockquote>
<p>I actually don't suspect that any of the recent efforts relating to unread semantics are the cause of this blue-box problem, but obviously any blue-box solution here should be tested carefully in terms of unread messages.</p>
</blockquote>
<p>oh I'm guessing that the delay is an attempt to make the box hit each message (no skipping) regardless of how fast you scroll</p>



<a name="1573544"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573544" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573544">(May 20 2023 at 21:33)</a>:</h4>
<p>Yeah, and I think BarnOwl scrolling was also an inspiration.  I remember feeling back in 2013/2014 that the BarnOwl approach didn't necessarily make sense for a web app, but I was following marching orders at the time.</p>



<a name="1573545"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573545" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573545">(May 20 2023 at 21:38)</a>:</h4>
<p>For whatever reason the current behavior doesn't bother me at all, and I am generally picky about these kind of things.  I wonder if the pragmatic solution here could be as simple as tweaking a delay to a few fewer milliseconds.</p>



<a name="1573546"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573546" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573546">(May 20 2023 at 21:40)</a>:</h4>
<p>This is the perfect kind of change where you can just run an experiment, and I would try to do it un-announced.</p>



<a name="1573547"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573547" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573547">(May 20 2023 at 21:44)</a>:</h4>
<p>I guess it's also possible that this was originally just a performance-driven hack back in ~2013, but I think I would have remembered those discussions if they had happened, despite my generally fuzzy memory.</p>



<a name="1573548"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573548" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573548">(May 20 2023 at 21:51)</a>:</h4>
<p><span class="user-mention" data-user-id="699">@Anders Kaseorg</span> <a href="https://github.com/zulip/zulip/commit/1b029288066ec68e61fd089ab10c40dcc6048d9d">1b029288066ec68e61fd089ab10c40dcc6048d9d</a> seems relevant.  (Two months before I was hired.)  It actually does seem like a performance-related thing.</p>



<a name="1573549"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573549" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573549">(May 20 2023 at 21:53)</a>:</h4>
<p>See <code>keep_pointer_in_view()</code>, for example, in that diff.  (I believe it was an actual pointer back then!  pre-blue-box)</p>



<a name="1573550"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573550" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573550">(May 20 2023 at 21:58)</a>:</h4>
<p>This code also seems relevant to your efforts to modernize how we pin the floating recipient bar, which is a direction that I agree with.</p>



<a name="1573562"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573562" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573562">(May 20 2023 at 22:13)</a>:</h4>
<p>The relevant timing parameters are 50 and 100ms. <a href="https://github.com/zulip/zulip/commit/1b029288066ec68e61fd089ab10c40dcc6048d9d#diff-f2b22549dc2fb4824b37e787d964a2c9f4f580e767f86b6d7ded1d0ff37d5a62R552">https://github.com/zulip/zulip/commit/1b029288066ec68e61fd089ab10c40dcc6048d9d#diff-f2b22549dc2fb4824b37e787d964a2c9f4f580e767f86b6d7ded1d0ff37d5a62R552</a></p>



<a name="1573578"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573578" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573578">(May 20 2023 at 22:20)</a>:</h4>
<p>I would be curious what happened if you just changed both of these to 5ms:</p>
<div class="codehilite" data-code-language="JavaScript"><pre><span></span><code><span class="w">    </span><span class="nx">scroll_timer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">scroll_finished</span><span class="p">,</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">initialize</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">message_viewport</span><span class="p">.</span><span class="nx">$message_pane</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span>
<span class="w">        </span><span class="s2">"scroll"</span><span class="p">,</span>
<span class="w">        </span><span class="nx">_</span><span class="p">.</span><span class="nx">throttle</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">unread_ops</span><span class="p">.</span><span class="nx">process_visible</span><span class="p">();</span>
<span class="w">            </span><span class="nx">scroll_finish</span><span class="p">();</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="mf">50</span><span class="p">),</span>
<span class="w">    </span><span class="p">);</span>
</code></pre></div>



<a name="1573584"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573584" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573584">(May 20 2023 at 22:29)</a>:</h4>
<p>Or maybe 10ms?  I think 10ms is basically imperceptible to most humans.</p>



<a name="1573624"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573624" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573624">(May 21 2023 at 05:14)</a>:</h4>
<p>The problem is not so much the 50ms or 100ms delay, but rather the way in which the delay gets continually reset and extended while the user is actively scrolling, which effectively makes it arbitrarily long.</p>



<a name="1573630"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573630" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573630">(May 21 2023 at 06:08)</a>:</h4>
<p>It’s especially problematic on modern touchpads or touchscreens with pixel precision and kinetic scrolling on fling, since that results in scrolling events on every frame, for up to several seconds after the user’s finger was raised.</p>



<a name="1573708"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573708" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573708">(May 21 2023 at 14:23)</a>:</h4>
<p>I would be interested in a deeper analysis of this code.  At least for the throttled-every-50-ms logic, that seems like a reasonable strategy.  I mean, maybe it's unnecessary to throttle at that level of the stack, but you do want to eventually throttle the code to mark messages as unread.</p>



<a name="1573711"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573711" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573711">(May 21 2023 at 14:34)</a>:</h4>
<p>I wonder if some of the delay (box catching up with scrolling) is due to "smooth scrolling" handled at the browser-level rather than, strictly, javascript frames</p>



<a name="1573712"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573712" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573712">(May 21 2023 at 14:41)</a>:</h4>
<p>Well, you would certainly get an interesting data point toward that hypothesis by just making the timeouts be 5ms.  I don't claim to fully understand the code here, but it seems like the delay here literally comes from the two timeout values that were coded up in 2013.  Obviously, decreasing those might have unintended side effects or maybe prove not to solve the root cause problem, but it's such an easy experiment to conduct.</p>



<a name="1573713"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573713" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573713">(May 21 2023 at 14:43)</a>:</h4>
<p>It's worth noting that if you really aggressively scroll with a trackpad, you start exercising code that sets a render window of a couple hundred messages.  Some of that code may be a bit outdated, or if not completely outdated, due for some tuning of parameters.</p>



<a name="1573714"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573714" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573714">(May 21 2023 at 14:44)</a>:</h4>
<p>Like, a decade later, maybe it's worthwhile to simply double the size of the render windows and halve the sizes of the time intervals, and see how it actually feels to users?</p>



<a name="1573716"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573716" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573716">(May 21 2023 at 14:45)</a>:</h4>
<div class="codehilite" data-code-language="JavaScript"><pre><span></span><code><span class="w"> </span><span class="mf">268</span><span class="w">     </span><span class="c1">// Number of messages to render at a time</span>
<span class="w"> </span><span class="mf">269</span><span class="w">     </span><span class="nx">_RENDER_WINDOW_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">400</span><span class="p">;</span>
<span class="w"> </span><span class="mf">270</span><span class="w">     </span><span class="c1">// Number of messages away from edge of render window at which we</span>
<span class="w"> </span><span class="mf">271</span><span class="w">     </span><span class="c1">// trigger a re-render</span>
<span class="w"> </span><span class="mf">272</span><span class="w">     </span><span class="nx">_RENDER_THRESHOLD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">50</span><span class="p">;</span>
</code></pre></div>



<a name="1573717"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573717" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573717">(May 21 2023 at 14:47)</a>:</h4>
<p><a href="https://github.com/zulip/zulip/commit/182eb86db788c674863560a674ac52ba88a5c063">182eb86db788c674863560a674ac52ba88a5c063</a> from Zev was actually written in the same timeframe as Jessica's code.</p>



<a name="1573718"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573718" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573718">(May 21 2023 at 14:49)</a>:</h4>
<p>And the values are the same about 10.2 years later.</p>



<a name="1573720"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573720" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573720">(May 21 2023 at 14:59)</a>:</h4>
<p>Ah, and then a couple months later in 2013, I contributed this change related to BarnOwl: <a href="https://github.com/zulip/zulip/commit/66b93d5cfd5840da0e41a848c79a6c7dc964ddf2">66b93d5cfd5840da0e41a848c79a6c7dc964ddf2</a></p>



<a name="1573721"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573721" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573721">(May 21 2023 at 15:02)</a>:</h4>
<p>My change apparently tweaked a couple fractions, but I was mostly refactoring the existing code (and I am too lazy at the moment to track down the earlier-written code).</p>



<a name="1573722"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573722" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573722">(May 21 2023 at 15:06)</a>:</h4>
<p>To summarize the events of 2013:</p>
<ul>
<li>Feb - Jessica adds timeouts and throttling for scroll handlers</li>
<li>March - Zev adds render-window logic</li>
<li>May - Steve (me) tweaks BarnOwl-based scrolling logic</li>
</ul>



<a name="1573733"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573733" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573733">(May 21 2023 at 16:35)</a>:</h4>
<p>I did that analysis, and I linked specifically to the <code>clearTimeout</code> line to point out what’s going on. The only thing that happens every 50ms is that the 100ms timer is cancelled and restarted from the beginning. As long as this keeps happening continually, the 100ms timer will never fire. This code was designed specifically to wait until the end of an arbitrarily long continuous scrolling motion; that’s the only reason one would write that multi-level timer pattern. If I scroll for 7 seconds, the blue box lags for 7 seconds (really 7.100 to 7.150 seconds, but what I’m saying is that tiny delta is not the relevant effect).</p>



<a name="1573740"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573740" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573740">(May 21 2023 at 16:39)</a>:</h4>
<p>Here is the <strong>CODE LINK</strong> again for convenience: <a href="https://github.com/zulip/zulip/blob/d9716bc18946a65e63adc0f31bd7c450890e0d67/web/src/message_scroll.js#L202">https://github.com/zulip/zulip/blob/d9716bc18946a65e63adc0f31bd7c450890e0d67/web/src/message_scroll.js#L202</a></p>



<a name="1573741"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573741" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573741">(May 21 2023 at 16:41)</a>:</h4>
<p>Don't we also call <code>unread_ops.process_visible()</code> and <code>show_scroll_to_bottom_button()</code> every 50ms, or am I just completely mis-reading this code?</p>



<a name="1573742"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573742" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573742">(May 21 2023 at 16:43)</a>:</h4>
<p>Just to be completely clear, I think we are both on the same page that this code needs a re-visit, and that's why I emphasized and tracked down the ten-year history here.</p>



<a name="1573743"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573743" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573743">(May 21 2023 at 16:45)</a>:</h4>
<p><code>show_scroll_to_bottom_button()</code> yes, but the <code>unread_ops.process_visible</code> call is inside the 100ms timer that does not fire at all during those 7 seconds.</p>



<a name="1573744"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573744" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573744">(May 21 2023 at 16:51)</a>:</h4>
<p>Is that a typo?</p>
<div class="codehilite"><pre><span></span><code>    message_viewport.$message_pane.on(
        &quot;scroll&quot;,
        _.throttle(() =&gt; {
            unread_ops.process_visible();
            scroll_finish();
        }, 50),
    );
</code></pre></div>



<a name="1573748"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573748" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573748">(May 21 2023 at 16:57)</a>:</h4>
<p>Here is the code for <a href="https://github.com/zulip/zulip/blob/d9716bc18946a65e63adc0f31bd7c450890e0d67/web/src/unread_ops.js#L425">unread_ops</a>, and I am about 60% sure it eventually calls code that has its own throttling for sending stuff to the server.  I am definitely sympathetic toward any efforts to avoid multi-level timing patterns, and this codepath is pretty tricky, and very possibly unnecessarily tricky.</p>



<a name="1573750"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573750" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573750">(May 21 2023 at 17:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="58">Steve Howell</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1573748">said</a>:</p>
<blockquote>
<p>Here is the code for <a href="https://github.com/zulip/zulip/blob/d9716bc18946a65e63adc0f31bd7c450890e0d67/web/src/unread_ops.js#L425">unread_ops</a>, and I am about 60% sure it eventually calls code that has its own throttling for sending stuff to the server.  I am definitely sympathetic toward any efforts to avoid multi-level timing patterns, and this codepath is pretty tricky, and very possibly unnecessarily tricky.</p>
</blockquote>
<p>Actually, I think I take back my "60%" guess.  I think if we removed the throttling inside the scrolling code, we would have to either introduce some throttling in how we talk to the server, or maybe just accept the fact that we make multiple trips to the server (which might not actually be a problem).</p>



<a name="1573751"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573751" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573751">(May 21 2023 at 17:02)</a>:</h4>
<p>Oh sorry, yes, there are two <code>unread_ops.process_visible</code> calls, one of which is in the 50ms timer.</p>



<a name="1573752"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573752" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573752">(May 21 2023 at 17:05)</a>:</h4>
<p>I just realized that there is <code>scroll_finish</code> and <code>scroll_finished</code> here, which is super confusing, and it probably made me misunderstand some of your earlier points. <span aria-label="cry" class="emoji emoji-1f622" role="img" title="cry">:cry:</span></p>



<a name="1573753"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573753" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573753">(May 21 2023 at 17:07)</a>:</h4>
<p><code>scroll_finish</code> is definitely a puzzling function to read.</p>



<a name="1573755"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573755" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573755">(May 21 2023 at 17:08)</a>:</h4>
<p>You would think, for example, that it would immediately early-exit after the first time it's called.</p>



<a name="1573756"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573756" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573756">(May 21 2023 at 17:10)</a>:</h4>
<p>No, if it early-exited, it would not have the effect I described, and then there would be no reason for there to be multiple levels of timers at all.</p>



<a name="1573757"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573757" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573757">(May 21 2023 at 17:12)</a>:</h4>
<p>(I mean, the multiple levels are already unnecessary because <a href="https://lodash.com/docs/4.17.15#debounce"><code>_.debounce</code></a> exists for exactly this purpose, but I’ll charitably assume the author wasn’t aware of <code>_.debounce</code>.)</p>



<a name="1573759"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573759" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573759">(May 21 2023 at 17:16)</a>:</h4>
<p>I know for a fact that Jessica didn't have access to the underscore version of debounce, because she wrote that code before I arrived, and we introduced underscore after I arrived.</p>



<a name="1573760"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573760" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573760">(May 21 2023 at 17:17)</a>:</h4>
<p>I guess jQuery has that?</p>



<a name="1573761"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573761" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573761">(May 21 2023 at 17:17)</a>:</h4>
<p><code>_.debounce</code> and <code>_.throttle</code> were both added in the same version of Underscore (1.1.3).</p>



<a name="1573762"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573762" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573762">(May 21 2023 at 17:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="699">Anders Kaseorg</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1573761">said</a>:</p>
<blockquote>
<p><code>_.debounce</code> and <code>_.throttle</code> were both added in the same version of Underscore (1.1.3).</p>
</blockquote>
<p>Yeah, but we didn't introduce underscore until later.</p>



<a name="1573763"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573763" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573763">(May 21 2023 at 17:17)</a>:</h4>
<p>Oh yeah this was jQuery at the time.</p>



<a name="1573764"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573764" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573764">(May 21 2023 at 17:19)</a>:</h4>
<p>As much as I like to provide historical context on things, I wouldn't obsess too much on the history here.  I assume that most things that were done in 2013 were done for 2013 reasons that don't necessarily apply in 2023.  The best process here is probably just to fix the code and come up with a good scheme to gain confidence in it, which I would assume mostly involves czo burn-in. You'll probably want to look at the network tab to address my one concern about churning unread updates to the server, but it's possible that's actually mostly a non-issue.</p>



<a name="1573765"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573765" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573765">(May 21 2023 at 17:19)</a>:</h4>
<p>We had a <code>/static/third/jquery-throttle-debounce/jquery.ba-throttle-debounce.min.js</code> plugin that provided both <code>$.throttle</code> and <code>$.debounce</code>.</p>



<a name="1573766"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573766" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573766">(May 21 2023 at 17:20)</a>:</h4>
<p>We really were a bunch of C programmers learning JS back in 2013. :) All very well educated, but moving fast in start-up mode across from the T. :)</p>



<a name="1573767"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573767" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573767">(May 21 2023 at 17:21)</a>:</h4>
<p>I mean, we all knew Python too, but they had just finished auto-patching kernels, and I had just finished doing big-data stuff on web domains.</p>



<a name="1573768"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573768" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573768">(May 21 2023 at 17:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="58">Steve Howell</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1573764">said</a>:</p>
<blockquote>
<p>You'll probably want to look at the network tab to address my one concern about churning unread updates to the server, but it's possible that's actually mostly a non-issue.</p>
</blockquote>
<p>I can try to elaborate later on this, since I don't think I really clearly explained my concern here, but I am off the gym ( <span aria-label="muscle" class="emoji emoji-1f4aa" role="img" title="muscle">:muscle:</span> ).</p>



<a name="1573769"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1573769" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anders Kaseorg <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1573769">(May 21 2023 at 17:33)</a>:</h4>
<p>No I get the concern.</p>



<a name="1576316"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576316" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576316">(May 25 2023 at 00:13)</a>:</h4>
<p>I have some recollection of the history of this code path. I suspect the motivation had to do with the chunking of requests to the server to mark messages as read into coherent "I scrolled past this block of messages" events, and I am almost certain there was a user-visible problem that it caused if we didn't have those delays in the Zulip web app design at the time.</p>
<p>I suspect that the current behavior is a local optimum compromise between the following design constraints:</p>
<ul>
<li>"It might be a significant performance concern if scrolling through a feed with 100 unread messages ended up sending 100 API requests to the server". Mark-as-read requests are very cheap, but generally you don't want to make a routine user action like scrolling involve completely unbatched work like this.</li>
<li>"It's weird if the blue selection box moves past unread messages without visibly marking them as read", so having the "mark as read" requests to the server be debounced, without also debouncing the blue box moves, might look buggy.</li>
<li>"The unread markers animation where it fades as you mark messages as read might have very weird/distracting behavior where they all fade at different rates" -- I think it's probably less visually distracting to have them fade synchronously (i.e. when a batch is sent off to the server).</li>
</ul>
<p>I would be interested in seeing experiments around removing that behavior and seeing how it feels on our current visual design. I would be surprised if there wasn't a better place we could end up with here, but I also expect it make require some fiddling/iteration to not end up with something that feels buggy.</p>



<a name="1576317"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576317" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576317">(May 25 2023 at 00:17)</a>:</h4>
<p>We do have existing logic for locally displaying state changes to which messages are read that we've planned to send to the server, in <code>message_flags.send_read</code> -- this is used for batching requests to at most 1k message IDs at once, for example.</p>



<a name="1576319"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576319" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576319">(May 25 2023 at 00:18)</a>:</h4>
<p>So I don't think there's any strong constraint that would limit our ability to have the local display of what you've marked as read via scrolling by slightly desynchronized from what we've sent to the server.</p>



<a name="1576336"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576336" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576336">(May 25 2023 at 00:30)</a>:</h4>
<blockquote>
<p>"It's weird if the blue selection box moves past unread messages without visibly marking them as read", so having the "mark as read" requests to the server be debounced, without also debouncing the blue box moves, might look buggy.<br>
"The unread markers animation where it fades as you mark messages as read might have very weird/distracting behavior where they all fade at different rates" -- I think it's probably less visually distracting to have them fade synchronously (i.e. when a batch is sent off to the server).</p>
</blockquote>
<p>Given that the current visual oddity is the way the blue box falls behind / snaps up <em>because it goes off-screen</em>, I'd think that any visual discrepancy between a smoothly-following blue box and batched marked-as-read updates would be, well, hidden off-screen.</p>



<a name="1576341"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576341" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576341">(May 25 2023 at 00:39)</a>:</h4>
<p>I am skeptical of that claim but I think the right answer is to design and test an alternative version here rather than doing further speculation -- I think it'll be pretty easy to tell if a variant feels off.</p>



<a name="1576348"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576348" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576348">(May 25 2023 at 00:57)</a>:</h4>
<p>I agree with Tim's proposal to experiment a bit with some new behaviors and just see how it feels with the current design (as well as the current state of browsers).  There would definitely be some failed experiments, but the push-things-for-a-little-to-chat-zulip-org process would probably mitigate most of that risk, especially if you do it fairly early in the release cycle.</p>
<p>My main proposal remains to simply start by tweaking a couple parameters, and don't change anything else.</p>



<a name="1576349"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576349" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576349">(May 25 2023 at 00:57)</a>:</h4>
<p>(Obviously, I am assuming none of these experiments would be for 7.0)</p>



<a name="1576366"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576366" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576366">(May 25 2023 at 02:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="699">Anders Kaseorg</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1573630">said</a>:</p>
<blockquote>
<p>It’s especially problematic on modern touchpads or touchscreens with pixel precision and kinetic scrolling on fling, since that results in scrolling events on every frame, for up to several seconds after the user’s finger was raised.</p>
</blockquote>
<p>This is a very interesting point. It explains how the current behavior can be annoying and buggy-feeling for many people in 2023 in ways that it would have been much more rarely in 2013.</p>



<a name="1576367"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576367" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576367">(May 25 2023 at 02:07)</a>:</h4>
<p>It also explains part of the variation in different people's perception of the behavior at the same time, in 2023. <span class="user-mention silent" data-user-id="27044">Sam Wight</span> is using one of those touchpads with (assuming default system settings) kinetic scrolling on fling:</p>
<p><span class="user-mention silent" data-user-id="27044">Sam Wight</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1573493">said</a>:</p>
<blockquote>
<p>Scrolling with a trackpad, but yes! This is on macOS.</p>
</blockquote>
<p>I scroll with a mouse scroll wheel, if not the keyboard. Probably many of us do, or use trackpads without fling momentum. So in addition to the differences that can exist in how different people respond to the same behavior on the screen, many of us are just not seeing in the first place the behavior that <span class="user-mention silent" data-user-id="27044">Sam Wight</span> and others do.</p>



<a name="1576368"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576368" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ken Clary <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576368">(May 25 2023 at 02:11)</a>:</h4>
<p>I can scroll quite fast with a trackpad</p>



<a name="1576369"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576369" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576369">(May 25 2023 at 02:12)</a>:</h4>
<p>(My mouse scroll wheel has its own, literal, kinetic momentum when I fling. But the friction is much lower than in macOS's trackpad behavior, so I rarely let it coast to a stop; instead I'll touch the wheel again with my finger to bring it quickly to a stop.</p>
<p>The delay I perceive before the blue box "catches up" into the viewport seems a bit longer than the 100-150ms delays that <span class="user-mention silent" data-user-id="699">Anders Kaseorg</span> and <span class="user-mention silent" data-user-id="58">Steve Howell</span> were discussing above; but not more than like 200-250ms, and that discrepancy could just be a matter of my calibration in gauging such times by eye.)</p>



<a name="1576555"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576555" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576555">(May 25 2023 at 11:03)</a>:</h4>
<p>FWIW I have a trackpad on a Dell Windows laptop.  The scrolling for me is super fluid.  I do perceive a slight delay for the blue box to reach its final position after I scroll, but it has never really felt funny to me.  I think, despite that, I would enjoy the experience even more if we made the blue box a bit more snappy by reducing the 50/100ms timeouts.</p>



<a name="1576669"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576669" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576669">(May 25 2023 at 17:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="58">Steve Howell</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1576555">said</a>:</p>
<blockquote>
<p>FWIW I have a trackpad on a Dell Windows laptop.  […]  I do perceive a slight delay for the blue box to reach its final position after I scroll, but it has never really felt funny to me.</p>
</blockquote>
<p>I think your trackpad (really, your OS's interpretation of the trackpad) is probably not doing the thing <span class="user-mention silent" data-user-id="699">Anders Kaseorg</span> was referring to:</p>
<p><span class="user-mention silent" data-user-id="699">Anders Kaseorg</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1573630">said</a>:</p>
<blockquote>
<p>It’s especially problematic on modern touchpads or touchscreens with pixel precision and kinetic scrolling on fling, since that results in scrolling events on every frame, for up to several seconds after the user’s finger was raised.</p>
</blockquote>
<p>To see that behavior in action, the easiest thing is probably to open up Zulip in a web browser on your phone. It'll be most conspicuous on iOS, if you have an iPhone or iPad handy, but it's also quite noticeable on Android.</p>



<a name="1576673"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1576673" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1576673">(May 25 2023 at 17:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="58">Steve Howell</span> <a href="#narrow/stream/101-design/topic/blue.20box/near/1576555">said</a>:</p>
<blockquote>
<p>I think, despite that, I would enjoy the experience even more if we made the blue box a bit more snappy by reducing the 50/100ms timeouts.</p>
</blockquote>
<p>I get similar behavior with my mouse scroll wheel to what I think you're seeing with your touchpad, and I agree.</p>
<p>That's a much smaller annoyance for us, though, than the behavior on a kinetic fling-scroll is for people whose touchpads or touchscreens give them that behavior. Reducing the timeouts might improve that experience slightly, but won't affect the larger annoyance that the blue box stays behind until the scroll finally reaches a complete stop.</p>



<a name="1577749"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/blue%20box/near/1577749" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/blue.20box.html#1577749">(May 26 2023 at 18:33)</a>:</h4>
<p>Yeah, thanks for pointing that out -- I actually had the same observation in a brief oral conversation with <span class="user-mention silent" data-user-id="19257">Alya Abbott</span> yesterday about this thread -- that this quirk of Zulip's scrolling is a non-issue/invisible for folks like me who mainly use external mice with a mousewheel to scroll, and is mainly a thing that's going to be important for folks who are primarily using a different type of mouse (and have built a specific set of habits around how they like to scroll taking advantage of some of the features of those).</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>