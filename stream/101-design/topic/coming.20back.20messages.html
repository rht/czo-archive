<html>
<head><meta charset="utf-8"><title>coming back messages · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html">coming back messages</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="276040"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276040" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276040">(Sep 02 2017 at 17:28)</a>:</h4>
<p>There are two situations where I think it makes sense to give the user a few recent messages: 1) when they just join the realm, and 2) after bankruptcy. It solves the "now what" question you get when presented with a realm with 20 streams, with no obvious thing to click on next. </p>
<p>I'm trying to figure out how many messages to show. I want it to be enough that there is likely to be enough diversity, but not so many that it feels overwhelming. I'm thinking something like the following algorithm might make sense:</p>
<ul>
<li>Keep all PMs and at-mentions unread</li>
<li>Make the last N messages unread</li>
<li>If the N messages are diverse enough (at least 2 streams, and at least 4 different topics), done</li>
<li>Otherwise make the last 2N messages unread, and send those.</li>
</ul>
<p>Thoughts? Also, what should N be?</p>



<a name="276051"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276051" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276051">(Sep 02 2017 at 17:42)</a>:</h4>
<p>I think we'll want different approaches for new-realm and new-bankruptcy.   For bankruptcy, I think we should simply keep the last N messages unread.   I'm not sure PMs actually deserve any special treatment under bankruptcy.  I don't think there's a huge fear-of-missing-out problem with PMs.  I actually think streams are worse for FOMO, since there's no single person (other than yourself) who can get you caught up on what you missed, whereas for PMs, as soon as the other person pings you, you can scroll back as needed for any context.</p>



<a name="276052"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276052" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276052">(Sep 02 2017 at 17:44)</a>:</h4>
<p>For the create-new-realm scenario, can we get unread messages basically for free by being sure to start them in some useful  non-interleaved view?  (I'm also fine with just making the auto-read mechanism less aggressive for new users, or all users, actually, haha.)</p>



<a name="276061"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276061" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276061">(Sep 02 2017 at 17:54)</a>:</h4>
<p>for the create-new-realm, we now start people in a PM with welcome-bot, and try to direct them to click on streams first. But still by default all the stream messages are marked as read.</p>



<a name="276071"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276071" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276071">(Sep 02 2017 at 18:13)</a>:</h4>
<p>Are the stream messages marked as read as part of the code that creates the messages, or do they become read as soon as they appear on the screen?</p>



<a name="276074"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276074" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276074">(Sep 02 2017 at 18:16)</a>:</h4>
<p>I think the first. It's sort of an explicit decision we have to make, otherwise new users would have 1000 unread messages (the number we pre-fill).</p>



<a name="276076"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276076" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276076">(Sep 02 2017 at 18:24)</a>:</h4>
<p>We pre-fill 1000 messages?</p>



<a name="276079"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276079" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aditya Bansal <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276079">(Sep 02 2017 at 18:26)</a>:</h4>
<p>I guess we pre-fill 100 messages if I am able to remember correctly from reading code</p>



<a name="276080"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276080" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276080">(Sep 02 2017 at 18:27)</a>:</h4>
<p>yeah, in zerver.lib.add_new_user_history (though looks like we restrict to messages sent in the last week)</p>



<a name="276084"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276084" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276084">(Sep 02 2017 at 18:37)</a>:</h4>
<p>Oh, those messages...yeah, I understand the logic there of making most of them by "read" by default, and I agree with you that we should make a few exceptions for recent messages.  Also, I think users will generally get a few messages that are truly new to the user, and those should be unread, but I guess many of those are now coming from the welcome bot.</p>



<a name="276085"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276085" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276085">(Sep 02 2017 at 18:39)</a>:</h4>
<p>yeah, the initial messages (mostly applicable to the first-in-realm) are indeed currently left as unread, since they are created after do_create_user (which is what calls add_new_user_history).</p>



<a name="276086"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276086" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276086">(Sep 02 2017 at 18:48)</a>:</h4>
<p>also somewhat unrelatedly, I think the 1 week restriction is too strict there. I could easily imagine a lot of realms that get not very many messages a week, but are putting effort into trying to grow. Or there was a bunch of activity, then the champion got distracted for a week, and is now trying to get their realm back up again. </p>
<p>I'd be in favor of raising it to 1 or 2 months; I'm not sure there is much harm in showing old messages, and especially at the beginning it is helpful to have enough messages to see what we mean by threading.</p>



<a name="276087"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276087" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276087">(Sep 02 2017 at 19:02)</a>:</h4>
<p>I think it's generally better to measure "time" in terms of messages sent vs. actual calendar time.</p>



<a name="276088"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276088" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276088">(Sep 02 2017 at 19:05)</a>:</h4>
<p>agreed. If there are no perf implications, I'd also be down for removing the time restriction entirely.<br>
The queries are</p>
<div class="codehilite"><pre><span></span>    recipients = Recipient.objects.filter(
        type=Recipient.STREAM,
        type_id__in=[stream.id for stream in streams
                     if not stream.invite_only])
    recent_messages = Message.objects.filter(
        recipient_id__in=recipients,
        pub_date__gt=one_week_ago).order_by(&quot;-id&quot;)
    message_ids_to_use = list(reversed(recent_messages.values_list(&#39;id&#39;, flat=True)[0:1000]))
</pre></div>



<a name="276089"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/276089" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#276089">(Sep 02 2017 at 19:10)</a>:</h4>
<p>Make sense.  I'd try to unbury the <code>[0:1000]</code> snippet by extracting a line of code to set the values_list and limit-by.</p>



<a name="279865"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/279865" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#279865">(Sep 12 2017 at 14:47)</a>:</h4>
<p>What if we just left the last 100 unread?</p>



<a name="280779"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/280779" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#280779">(Sep 14 2017 at 01:44)</a>:</h4>
<p>Sounds fine as a V1, and we can revisit once we have more feedback. Opened as <a href="https://github.com/zulip/zulip/pull/6512" target="_blank" title="https://github.com/zulip/zulip/pull/6512">#6512</a> (with 80 instead of 100, vaguely based on the length of the longest real-time conversations I see on <a href="http://chat.zulip.org" target="_blank" title="http://chat.zulip.org">chat.zulip.org</a>).</p>



<a name="438827"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/438827" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> srikant <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#438827">(Jan 10 2018 at 19:15)</a>:</h4>
<p>can anyone explain what is bankruptcy and where is the code for it?</p>



<a name="438877"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/438877" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#438877">(Jan 10 2018 at 19:38)</a>:</h4>
<p>When you have lots of unread messages, we give you the option to "declare bankruptcy," which basically means you set all your messages to being "read," which means you're effectively wiping out your "unread message debt."</p>
<p>Run this command to start finding the relevant code:</p>
<div class="codehilite"><pre><span></span>git grep bankruptcy -- &#39;*.js&#39;
</pre></div>



<a name="627644"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/627644" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anmol Chugh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#627644">(Aug 08 2018 at 20:01)</a>:</h4>
<p>hello, i am working on issue <a href="https://github.com/zulip/zulip/pull/6512" target="_blank" title="https://github.com/zulip/zulip/pull/6512">#6512</a> . As I am new to zulip and i feel that its codebase is huge i am trying to resolve issues bit by part. I made a PR <a href="https://github.com/zulip/zulip/pull/10242" target="_blank" title="https://github.com/zulip/zulip/pull/10242">#10242</a> can you review and tell whether it is correct for new users and also guide me for further changes in bankruptcy.</p>



<a name="627682"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/627682" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#627682">(Aug 08 2018 at 20:13)</a>:</h4>
<p><span class="user-mention" data-user-id="8242">@Anmol Chugh</span> <a class="stream" data-stream-id="91" href="/#narrow/stream/91-code-review">#code review</a> is the right stream to post for code review requests (also, just make a new topic for your issue)</p>



<a name="690581"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690581" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690581">(Jan 28 2019 at 21:05)</a>:</h4>
<p>I want to say something that when user just join the realm ,he definitely asked for the help from where he get started so i just want to say that realm member helped him by giving the topic as a link and after clicking the link all the message is load containing in the topic and the stream which contain the topic .For bankruptcy we use the same algorithm of 80 unread message .</p>



<a name="690590"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690590" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690590">(Jan 28 2019 at 21:09)</a>:</h4>
<p>If we use last 80 message unread there was a probability that last 80 message is not so important for that user .</p>



<a name="690591"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690591" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690591">(Jan 28 2019 at 21:11)</a>:</h4>
<p>Even though 80 is an arbitrary number, I support the concept.  Users can always read back further if 80 is not enough.  (Just because we mark a message as read, it doesn't make it disappear.)</p>



<a name="690592"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690592" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690592">(Jan 28 2019 at 21:12)</a>:</h4>
<p>for convenience: <a href="https://github.com/zulip/zulip/pull/6512" target="_blank" title="https://github.com/zulip/zulip/pull/6512">#6512</a> is what we're discussing</p>



<a name="690594"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690594" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690594">(Jan 28 2019 at 21:18)</a>:</h4>
<p>Okay so i am assigned for this issue and i am interested to solve this issue .What can i do now?</p>



<a name="690597"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690597" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690597">(Jan 28 2019 at 21:21)</a>:</h4>
<p>I would start by figuring out which endpoint is used, and then track that to a view.</p>



<a name="690598"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690598" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690598">(Jan 28 2019 at 21:21)</a>:</h4>
<p>And then when you find the view, you can play around with excluding the last 80 messages from the logic there.</p>



<a name="690600"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690600" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690600">(Jan 28 2019 at 21:21)</a>:</h4>
<p>In testing, it might be worth using a smaller number than 80 at first, just so you don't have to create lots of test data.</p>



<a name="690606"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690606" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690606">(Jan 28 2019 at 21:31)</a>:</h4>
<p>How i track the endpoint to the view?</p>



<a name="690608"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690608" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690608">(Jan 28 2019 at 21:33)</a>:</h4>
<p>look at <code>zproject/urls.py</code></p>



<a name="690609"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690609" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690609">(Jan 28 2019 at 21:34)</a>:</h4>
<p>One good thing to know is that our server uses the Django framework.  So spending some time up front on a Django tutorial is well worth your time.</p>



<a name="690610"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690610" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690610">(Jan 28 2019 at 21:35)</a>:</h4>
<p>We are generally good about following Django conventions, with <code>urls.py</code> being a good example of where we more or less "do it by the book" according to Django.</p>



<a name="690611"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690611" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690611">(Jan 28 2019 at 21:36)</a>:</h4>
<p>It's also good to read this:</p>
<p><a href="https://zulip.readthedocs.io/en/latest/tutorials/new-feature-tutorial.html#example-feature" target="_blank" title="https://zulip.readthedocs.io/en/latest/tutorials/new-feature-tutorial.html#example-feature">https://zulip.readthedocs.io/en/latest/tutorials/new-feature-tutorial.html#example-feature</a></p>



<a name="690612"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690612" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690612">(Jan 28 2019 at 21:36)</a>:</h4>
<p>Even though you're not adding a new feature for this task, that Zulip-specific tutorial will help you get oriented to the codebase.</p>



<a name="690615"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690615" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690615">(Jan 28 2019 at 21:41)</a>:</h4>
<p>Okay i understood .Actually i had done some Django project  but i have never use rest api with django  so your code base little bit trickier for me .<br>
 So with the help of Urls I track views then models for database and then actions.py and then events.py file .Am i right?</p>



<a name="690618"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690618" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690618">(Jan 28 2019 at 21:42)</a>:</h4>
<p>Yep!</p>



<a name="690619"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690619" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690619">(Jan 28 2019 at 21:43)</a>:</h4>
<p>You probably won't need to go too deep into <code>events.py</code>, but you'll often be looking at <code>actions.py</code> and, in particular, <code>send_event</code> calls.</p>



<a name="690621"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/690621" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#690621">(Jan 28 2019 at 21:45)</a>:</h4>
<p>Okay <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="692595"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692595" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692595">(Jan 31 2019 at 20:14)</a>:</h4>
<p><span class="user-mention" data-user-id="58">@Steve Howell</span> <span class="user-mention" data-user-id="131">@Rishi Gupta</span>  Hello,I think we have to create dialogue box who get permission from new user  whether  to show 80 unread message or not  .<br>
If he say yes than we show 80 unread message +all PM unread message +all @mention unread message.<br>
If he say no then we show all unread message of realm .</p>



<a name="692597"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692597" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692597">(Jan 31 2019 at 20:15)</a>:</h4>
<p>Yeah and maybe let them edit the number?</p>



<a name="692599"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692599" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692599">(Jan 31 2019 at 20:16)</a>:</h4>
<p>We already have a dialog box for bankruptcy, correct?</p>



<a name="692604"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692604" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692604">(Jan 31 2019 at 20:18)</a>:</h4>
<p>@Steve Howell ,Yes we gave  user  an option to edit a number .<br>
Yes we have dialog box for bankruptcy.</p>



<a name="692638"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692638" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692638">(Jan 31 2019 at 20:35)</a>:</h4>
<p><span class="user-mention" data-user-id="58">@Steve Howell</span> <span class="user-mention" data-user-id="131">@Rishi Gupta</span>  Can i fix this issue now by  implementing that features or you want  to add something else ?</p>



<a name="692640"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692640" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692640">(Jan 31 2019 at 20:36)</a>:</h4>
<p>Fine by me.</p>



<a name="692643"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692643" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692643">(Jan 31 2019 at 20:39)</a>:</h4>
<p>I would vote against letting them edit the number. I think for this V1 we should ignore the bankruptcy case and just focus on the new user case</p>



<a name="692644"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692644" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692644">(Jan 31 2019 at 20:39)</a>:</h4>
<p>(since the new user case happens 10x as often, and is less complicated to think about)</p>



<a name="692646"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692646" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692646">(Jan 31 2019 at 20:41)</a>:</h4>
<p>Is your concern mostly about confusing users with too many options?  Or just the work involved?</p>



<a name="692655"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692655" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692655">(Jan 31 2019 at 20:50)</a>:</h4>
<p><span class="user-mention" data-user-id="131">@Rishi Gupta</span> Pardon ,I don't understand what do you want to say?</p>



<a name="692665"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692665" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692665">(Jan 31 2019 at 21:04)</a>:</h4>
<p>confusing users with too many options</p>



<a name="692734"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692734" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692734">(Jan 31 2019 at 21:36)</a>:</h4>
<p>So except this .I create the dialogue box .</p>



<a name="692739"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692739" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692739">(Jan 31 2019 at 21:39)</a>:</h4>
<p>there's no need for a dialogue box for the new user case</p>



<a name="692756"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692756" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692756">(Jan 31 2019 at 22:13)</a>:</h4>
<p>If the user doesn’t need to confirm, should this all be backend?  Also do we want to split the original issue into two?</p>



<a name="692759"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/692759" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#692759">(Jan 31 2019 at 22:24)</a>:</h4>
<p>yeah, I think this can all be backend</p>



<a name="693089"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/693089" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paras Lakhani <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#693089">(Feb 01 2019 at 20:15)</a>:</h4>
<p>If all this be backend then the user only show 80 unread message +all PM message +@message .</p>



<a name="729910"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/729910" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aylin Lopez <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#729910">(Apr 08 2019 at 06:12)</a>:</h4>
<p>Hello all! I'm new to contributing to open-source projects but have experience with Python and Django and thought I'd give this issue a shot.</p>
<p>It looks like elenaoat and modestfool have made some progress on making the last N messages unread. (<a href="https://github.com/zulip/zulip/pull/6918" target="_blank" title="https://github.com/zulip/zulip/pull/6918">https://github.com/zulip/zulip/pull/6918</a>, <a href="https://github.com/zulip/zulip/pull/10676" target="_blank" title="https://github.com/zulip/zulip/pull/10676">https://github.com/zulip/zulip/pull/10676</a>)</p>
<p>Is "keep all PMs and at-mentions unread" still needed?</p>



<a name="730141"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/730141" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#730141">(Apr 08 2019 at 18:22)</a>:</h4>
<p><span class="user-mention" data-user-id="12137">@Aylin Lopez</span> do you know what's left from the current effort? Getting that mergeable is probably the most important part.</p>



<a name="730768"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/730768" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#730768">(Apr 09 2019 at 23:55)</a>:</h4>
<p><span class="user-mention" data-user-id="12137">@Aylin Lopez</span> yeah, I think even just rebasing one of those and addressing the PR feedback would be helpful.</p>



<a name="749344"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/749344" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Akshay Mittal <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#749344">(Jun 04 2019 at 08:55)</a>:</h4>
<p>I want to work on this... <br>
I have seen the PR <a href="https://github.com/zulip/zulip/pull/10676" target="_blank" title="https://github.com/zulip/zulip/pull/10676">#10676</a> regarding this issue... I dont think someone is working on it</p>



<a name="749665"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/749665" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Akshay Mittal <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#749665">(Jun 04 2019 at 17:00)</a>:</h4>
<p>I have opened <a href="https://github.com/zulip/zulip/pull/12484" target="_blank" title="https://github.com/zulip/zulip/pull/12484">#12484</a> for the same</p>



<a name="762885"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/762885" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Szeto <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#762885">(Jul 03 2019 at 05:52)</a>:</h4>
<p>one major issue that i encountered when joining the <a href="http://chat.zulip.org" target="_blank" title="http://chat.zulip.org">chat.zulip.org</a> realm in particular was that my mobile app was inundated with thousands of messages that caused the UI to repeatedly jitter as it rendered them all</p>



<a name="763219"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/763219" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#763219">(Jul 04 2019 at 03:50)</a>:</h4>
<p><span class="user-mention" data-user-id="12096">@Andrew Szeto</span> did you create an account in <a href="http://chat.zulip.org" target="_blank" title="http://chat.zulip.org">chat.zulip.org</a> a long time ago?</p>



<a name="763220"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/763220" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#763220">(Jul 04 2019 at 03:51)</a>:</h4>
<p>I'm also not sure what screen you're describing.  In any case, probably better to move this discussion to <a class="stream" data-stream-id="48" href="/#narrow/stream/48-mobile">#mobile</a>, since it sounds mobile-app specific</p>



<a name="763226"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/763226" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Szeto <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#763226">(Jul 04 2019 at 03:54)</a>:</h4>
<p>oof, didn't realize my Zulip account was that old. that explains the thousands of messages coming in when I finally looked back in.</p>



<a name="763232"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/763232" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#763232">(Jul 04 2019 at 04:10)</a>:</h4>
<p>You should be able to easily mark them all as read in the webapp to resolve the issue.</p>



<a name="776925"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/coming%20back%20messages/near/776925" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> JAYATI SHRIVASTAVA <a href="https://rht.github.io/czo-archive/stream/101-design/topic/coming.20back.20messages.html#776925">(Aug 07 2019 at 13:46)</a>:</h4>
<blockquote>
<p>I would vote against letting them edit the number. I think for this V1 we should ignore the bankruptcy case and just focus on the new user case</p>
</blockquote>
<p>i am currently working on this issue.<br>
are we still ignoring the bankruptcy case?<br>
as of now upon bankruptcy,all the messages are marked read by default.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>