<html>
<head><meta charset="utf-8"><title>status-emoji tooltip · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html">status-emoji tooltip</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1618020"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1618020" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1618020">(Jul 31 2023 at 09:59)</a>:</h4>
<p>Hey! Can anyone suggest me a design for the status emoji tippy tooltip in the user card popover .  I guess a simple tippy tooltip like below should work well. <br>
<a href="/user_uploads/2/59/TvCtohNdWlFXtbppIuNhaLvT/Screenshot-2023-07-31-at-3.28.05-PM.png">Screenshot-2023-07-31-at-3.28.05-PM.png</a><br>
Suggestions are welcome!<br>
Code for the above implementation - </p>
<div class="message_inline_image"><a href="/user_uploads/2/59/TvCtohNdWlFXtbppIuNhaLvT/Screenshot-2023-07-31-at-3.28.05-PM.png" title="Screenshot-2023-07-31-at-3.28.05-PM.png"><img src="/user_uploads/2/59/TvCtohNdWlFXtbppIuNhaLvT/Screenshot-2023-07-31-at-3.28.05-PM.png"></a></div><div class="codehilite"><pre><span></span><code>$(&quot;body&quot;).on(&quot;mouseenter&quot;,&quot;.status-emoji&quot;,function(){
        tippy(&#39;.status-emoji&#39;, {
            content: (reference) =&gt; {
            const tooltipContent = reference.getAttribute(&#39;data-tippy-content&#39;);
            return `&lt;strong&gt;${tooltipContent}&lt;/strong&gt;`;
        },
            interactive: true,
            placement: &#39;left&#39;,
            animation: &#39;scale&#39;,
            allowHTML:true,
          });
    })
</code></pre></div>
<p>The following implementation is to fix the PR for <br>
<a href="https://github.com/zulip/zulip/pull/26383">https://github.com/zulip/zulip/pull/26383</a>.</p>



<a name="1618813"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1618813" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1618813">(Aug 02 2023 at 03:21)</a>:</h4>
<p>I will just post about some previous related conversation here for context.</p>
<p>The issue for this is <a href="https://github.com/zulip/zulip/pull/19821">#19821</a> and the issue mentions about showing the emoji name while hovering over emoji present on the right of user name in the right sidebar. There was some discussion in <a href="https://github.com/zulip/zulip/pull/20138">#20138</a>, but I don't think there was a conclusion on how to handle this.</p>
<p>Then another PR <a href="https://github.com/zulip/zulip/pull/24976">#24976</a> was opened for the same issue, where <span class="user-mention silent" data-user-id="5140">Aman (amanagr)</span> suggested to show the emoji name using tooltip in the user profile popover and the PR mentioned in the above message implements that.</p>



<a name="1618814"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1618814" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1618814">(Aug 02 2023 at 03:24)</a>:</h4>
<p>I think showing emoji name in a tooltip atleast in the user popover is a good idea. But I am not sure whether we should use the tippy tooltip or the HTML title.</p>
<p>For emojis used in the message content we use HTML title. But we use tippy tooltips for showing the "Active now" text while hovering over the green circle in the user profile popover.</p>



<a name="1623210"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1623210" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1623210">(Aug 10 2023 at 21:34)</a>:</h4>
<p>I think probably we will want to convert the message content ones to tippy eventually? That might be the last HTML title in the message feed.</p>



<a name="1623492"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1623492" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1623492">(Aug 11 2023 at 11:35)</a>:</h4>
<p>My PR <a href="https://github.com/zulip/zulip/pull/26383">#26383</a> has been open for quite a long and I was wondering if the new proposal fixes the issue or should I add some more improvements?</p>



<a name="1624056"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1624056" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1624056">(Aug 12 2023 at 00:51)</a>:</h4>
<p><span class="user-mention" data-user-id="27091">@Shashank Singh</span> posted a quick review, thanks!</p>



<a name="1624318"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1624318" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1624318">(Aug 13 2023 at 07:50)</a>:</h4>
<p>When I am using the standard zulip tippy tooltip for my status-emoji-tooltip I think it is somehow not extracting the complete details. For eg - When I added a className of tippy-zulip-tooltip with aria-label and data-tippy-content it should technically show the name of status-emoji with dark black background but in my case it has light black background which seems a lil bit different from standard tippy tooltip.  Would love to get suggestions Thanks !!<br>
<a href="/user_uploads/2/fd/jIAq1W2kyiVFx4t1gqqCO3VH/Screenshot-2023-08-13-at-1.11.20-PM.png">Screenshot-2023-08-13-at-1.11.20-PM.png</a><br>
<a href="/user_uploads/2/3e/Tes9tv8vZ4xkUbqk6eAxPuiy/Screenshot-2023-08-13-at-1.11.44-PM.png">Screenshot-2023-08-13-at-1.11.44-PM.png</a><br>
<a href="/user_uploads/2/99/4Jc9RnQByRwlkBHRj_wFcAer/Screenshot-2023-08-13-at-1.11.59-PM.png">Screenshot-2023-08-13-at-1.11.59-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/fd/jIAq1W2kyiVFx4t1gqqCO3VH/Screenshot-2023-08-13-at-1.11.20-PM.png" title="Screenshot-2023-08-13-at-1.11.20-PM.png"><img src="/user_uploads/2/fd/jIAq1W2kyiVFx4t1gqqCO3VH/Screenshot-2023-08-13-at-1.11.20-PM.png"></a></div><div class="message_inline_image"><a href="/user_uploads/2/3e/Tes9tv8vZ4xkUbqk6eAxPuiy/Screenshot-2023-08-13-at-1.11.44-PM.png" title="Screenshot-2023-08-13-at-1.11.44-PM.png"><img src="/user_uploads/2/3e/Tes9tv8vZ4xkUbqk6eAxPuiy/Screenshot-2023-08-13-at-1.11.44-PM.png"></a></div><div class="message_inline_image"><a href="/user_uploads/2/99/4Jc9RnQByRwlkBHRj_wFcAer/Screenshot-2023-08-13-at-1.11.59-PM.png" title="Screenshot-2023-08-13-at-1.11.59-PM.png"><img src="/user_uploads/2/99/4Jc9RnQByRwlkBHRj_wFcAer/Screenshot-2023-08-13-at-1.11.59-PM.png"></a></div>



<a name="1624592"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1624592" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl Stolley <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1624592">(Aug 14 2023 at 13:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="27091">Shashank Singh</span> I'll have a look at your PR regarding the color issues today.</p>



<a name="1624804"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1624804" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl Stolley <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1624804">(Aug 14 2023 at 19:42)</a>:</h4>
<p>I left some comments on the PR--basically, you're working a little too hard :) I gave you some starter code and places to look in the code to add Tippies in line with how we do across the Zulip project.</p>



<a name="1625381"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1625381" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1625381">(Aug 15 2023 at 14:33)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="26369">@Karl Stolley</span>  Thanks for having a review.<br>
But can you please have a view on my previous screenshots on this stream where I have implemented the required changes Tim suggested me.<br>
I have also written the problem due to which I am not committing those changes and those are the same changes you suggested me in my PR.<br>
The only problem is that I just had a hunch that my tooltip looks a lil bit more transparent despite using the standard zulip tippy tooltip instead of my own tippy instance.</p>



<a name="1625384"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1625384" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl Stolley <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1625384">(Aug 15 2023 at 14:39)</a>:</h4>
<p>I really can't review screenshots, Shashank. There could be any number of reasons why things look the way they do.</p>



<a name="1625385"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1625385" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl Stolley <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1625385">(Aug 15 2023 at 14:39)</a>:</h4>
<p>I don't see any fresh commits to your PR <a href="https://github.com/zulip/zulip/pull/26383">#26383</a>, but please let me know when those are up. The suggestions I gave you over there that use our Tippy classes should solve this issue.</p>



<a name="1626107"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1626107" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1626107">(Aug 16 2023 at 05:53)</a>:</h4>
<p>Hey Karl thank you so much for you suggestion. <br>
While I was doing some necessary changes I did some blunders will pushing the changes resolving which caused more complications.<br>
Being new to open source I will try my best to solve those blunders ASAP and get back to you shortly for review.</p>



<a name="1626206"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1626206" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl Stolley <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1626206">(Aug 16 2023 at 12:36)</a>:</h4>
<p>Sure thing. You might find some of our Git guides useful, such as <a href="https://zulip.readthedocs.io/en/latest/git/using.html#examine-and-tidy-your-commit-history">https://zulip.readthedocs.io/en/latest/git/using.html#examine-and-tidy-your-commit-history</a></p>



<a name="1626224"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1626224" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniil Fadeev <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1626224">(Aug 16 2023 at 13:48)</a>:</h4>
<p>Left a comment on <a href="https://github.com/zulip/zulip/pull/26383">#26383</a> with a possible solution to the issue with the colors.</p>



<a name="1626238"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1626238" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1626238">(Aug 16 2023 at 14:39)</a>:</h4>
<p>I have resolved those github issues and implemented the solution to the issue with the colors.<br>
You can check it out and suggest me improvements if any.</p>



<a name="1629258"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1629258" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1629258">(Aug 22 2023 at 07:22)</a>:</h4>
<p>In my current PR <a href="https://github.com/zulip/zulip/pull/26383">#26383</a> I was recommended to apply  <code>appendTo: () =&gt; document.body</code> , for the emoji in the popover only and not on complete tippy-zulip-tooltip as this change was on a much larger scale and can break other tooltips as well. But while doing so I was targeting the element as </p>
<div class="codehilite"><pre><span></span><code>    delegate(&quot;body&quot;, {
        target: &quot;.user_info_status_text &gt; #status_message &gt; .tippy-zulip-tooltip&quot;,
        appendTo: () =&gt; document.body,
        placement : &quot;bottom&quot;,
    })
</code></pre></div>
<p>But I cant understand why the above changes could not be implemented even though I am targeting the correct element.<br>
<span class="user-mention" data-user-id="5140">@Aman (amanagr)</span> if you could please help me with this.</p>



<a name="1629286"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1629286" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1629286">(Aug 22 2023 at 10:31)</a>:</h4>
<p>You don't need to use <code>tippy-zulip-tooltip</code> class on the elment now. That's what is causing the issue.</p>



<a name="1629334"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1629334" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1629334">(Aug 22 2023 at 12:32)</a>:</h4>
<p>Thanks! But even if remove the <code>tippy-zulip-tooltip</code> class on the element it does not give  me the favourable output. (It targets the complete line and gives double tooltip)<br>
Even targeting the .status-emoji class or img tag after it does not change anything.<br>
Is there a different approach to target that element?</p>
<p>The output when  I do not target the <code>.tippy-zulip-tooltip</code> is as follows-<br>
<a href="/user_uploads/2/b0/p5h8-UsFhmIKXw7hf1FcxTbw/Screenshot-2023-08-22-at-6.01.02-PM.png">Screenshot-2023-08-22-at-6.01.02-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/b0/p5h8-UsFhmIKXw7hf1FcxTbw/Screenshot-2023-08-22-at-6.01.02-PM.png" title="Screenshot-2023-08-22-at-6.01.02-PM.png"><img src="/user_uploads/2/b0/p5h8-UsFhmIKXw7hf1FcxTbw/Screenshot-2023-08-22-at-6.01.02-PM.png"></a></div><p>Below is the code for which I am targeting the element.</p>
<div class="codehilite"><pre><span></span><code>    {{#if status_content_available}}
        &lt;li class=&quot;user_info_status_text&quot;&gt;
            &lt;span id=&quot;status_message&quot;&gt;
                {{#if status_emoji_info}}
                    {{#if status_emoji_info.emoji_alt_code}}
                        &lt;div class=&quot;emoji_alt_code&quot;&gt;&amp;nbsp;:{{status_emoji_info.emoji_name}}:&lt;/div&gt;
                    {{else if status_emoji_info.url}}
                        &lt;img src=&quot;{{status_emoji_info.url}}&quot; class=&quot;emoji status-emoji tippy-zulip-tooltip&quot;
                         data-tippy-content=&quot;:{{status_emoji_info.emoji_name}}:&quot; /&gt;
                    {{else}}
                        &lt;div class=&quot;emoji status-emoji emoji-{{status_emoji_info.emoji_code}} tippy-zulip-tooltip&quot; data-tippy-content=&quot;:{{status_emoji_info.emoji_name}}:&quot;&gt;&lt;/div&gt;
                    {{/if}}
                {{/if}}
                &lt;span class=&quot;status_text&quot;&gt;
                    {{status_text}}
                    {{#if is_me}}
                    &lt;span class=&quot;clear_status_button&quot;&gt;(&lt;a tabindex=&quot;0&quot; class=&quot;clear_status&quot;&gt;{{t &quot;clear&quot; }}&lt;/a&gt;)&lt;/span&gt;
                    {{/if}}
                &lt;/span&gt;
            &lt;/span&gt;
        &lt;/li&gt;
    {{/if}}
</code></pre></div>



<a name="1629761"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1629761" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1629761">(Aug 23 2023 at 00:51)</a>:</h4>
<p><span class="user-mention" data-user-id="27091">@Shashank Singh</span> the point is that you write your own tippy handler for this particular element using that <code>appendTo</code> handler; we have a lot of those in <code>tippy.js</code>; without changing the base behavior which would have many unpredictable consequences.</p>



<a name="1629847"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1629847" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1629847">(Aug 23 2023 at 05:57)</a>:</h4>
<p>Thanks Tim, I have written my own tippy handler in <code>tippyjs.js</code> as - </p>
<div class="codehilite"><pre><span></span><code>    delegate(&quot;body&quot;, {
        target: &quot;.user_info_status_text &gt; #status_message &gt; .status-emoji &quot;,
        appendTo: () =&gt; document.body,
        placement : &quot;bottom&quot;,
    })
</code></pre></div>
<p>But i don't understand why the above changes wont be implemented.<br>
Chances are I am not targeting the  element the right way as standard zulip norms.</p>



<a name="1630873"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1630873" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aman (amanagr) <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1630873">(Aug 24 2023 at 14:53)</a>:</h4>
<p>You most likely are using the wrong <code>target</code>.</p>



<a name="1630903"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/status-emoji%20tooltip/near/1630903" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shashank Singh <a href="https://rht.github.io/czo-archive/stream/101-design/topic/status-emoji.20tooltip.html#1630903">(Aug 24 2023 at 16:02)</a>:</h4>
<p>I have implemented the changes and now its working fine. PTAL</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>