<html>
<head><meta charset="utf-8"><title>notification emails · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html">notification emails</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1428483"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1428483" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1428483">(Aug 31 2022 at 07:04)</a>:</h4>
<p>As <a href="#narrow/stream/137-feedback/topic/.40participants/near/1428445">discussed on another thread</a>, our email notifications include a line in the signature part of the message that explains why you're receiving the email. At present, it is:</p>
<ol>
<li><strong>PMs</strong>: none</li>
<li><strong>Personal mentions and wildcard mentions</strong>: You are receiving this because you were mentioned in {{ realm_name }}.</li>
<li><strong> Group mentions</strong>: You are receiving this because @{{ mentioned_user_group_name }} was mentioned in {{ realm_name }}.</li>
<li><strong> Stream message notifications</strong>: You are receiving this because you have email notifications enabled for this stream.</li>
</ol>
<p><a href="/user_uploads/2/81/dKc4erVQMS85w2uZlQ0vyGk4/Screen-Shot-2022-08-30-at-11.54.36-PM.png">Screen-Shot-2022-08-30-at-11.54.36-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/81/dKc4erVQMS85w2uZlQ0vyGk4/Screen-Shot-2022-08-30-at-11.54.36-PM.png" title="Screen-Shot-2022-08-30-at-11.54.36-PM.png"><img src="/user_uploads/2/81/dKc4erVQMS85w2uZlQ0vyGk4/Screen-Shot-2022-08-30-at-11.54.36-PM.png"></a></div><p>We should think about improving these, in particular:</p>
<ol>
<li>It seems like it would be very helpful to indicate whether your were personally mentioned or if it was a wildcard mention. (This change is easy to make from a technical perspective, as the data is already being piped through.) Something like this, perhaps?</li>
</ol>
<blockquote>
<p>You are receiving this because you were personally mentioned in {{ realm_name }}.<br>
You are receiving this because everyone was mentioned in {{ realm_name }}.</p>
</blockquote>
<ol start="2">
<li>It seems odd to include just the realm name in these lines; I think we should either drop it, or include both the realm name and the stream &gt; topic (even though the stream &gt; topic info is also in the subject line). I.e.</li>
</ol>
<blockquote>
<p>You are receiving this because you were personally mentioned. <em>-or-</em><br>
You are receiving this because you were personally mentioned in <code>#stream &gt; topic</code> in {{ realm_name }}.</p>
</blockquote>
<p>Thoughts?</p>
<ol start="3">
<li>Should we use the name of the stream instead of "this stream" for stream notifications?</li>
</ol>



<a name="1428685"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1428685" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1428685">(Aug 31 2022 at 18:22)</a>:</h4>
<p>All of that sounds right to me.</p>



<a name="1428686"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1428686" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1428686">(Aug 31 2022 at 18:22)</a>:</h4>
<p>(those proposed changes, that is)</p>



<a name="1429710"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429710" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429710">(Sep 02 2022 at 18:57)</a>:</h4>
<p>I agree with indicating personal/wildcard. I think I might prefer "because you were personally mentioned in this topic" over repeating the stream/topic name there; it's in the email subject line, and might make this line more distracting when just reading the email for that text to be variable since it'll look visually different on each notification email.</p>



<a name="1429711"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429711" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429711">(Sep 02 2022 at 18:58)</a>:</h4>
<p>I think the <code>realm_name</code> might be there because it doesn't always appear in the email anywhere else if you don't have our setting that includes the realm name in the subject line enabled.</p>



<a name="1429712"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429712" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429712">(Sep 02 2022 at 18:58)</a>:</h4>
<p>So while I think we should remove it, we might need to sequence it with something to include the realm name in the <code>From</code> or <code>Subject</code> field.</p>



<a name="1429733"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429733" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429733">(Sep 02 2022 at 19:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/101-design/topic/notification.20emails/near/1429711">said</a>:</p>
<blockquote>
<p>I think the <code>realm_name</code> might be there because it doesn't always appear in the email anywhere else if you don't have our setting that includes the realm name in the subject line enabled.</p>
</blockquote>
<p>Yeah, let's find a different place to put the realm in. As it is, PM notification emails may not contain it.</p>
<p>Maybe somewhere in this line?</p>
<blockquote>
<p>Reply to this email directly, <a href="https://categorytheory.zulipchat.com/#narrow/pm-with/100007-welcome-bot">view it in Zulip</a>, or <a href="https://categorytheory.zulipchat.com/#settings/notifications">manage email preferences</a>.</p>
</blockquote>
<p>"view it in &lt;organization name&gt; Zulip" ?</p>



<a name="1429735"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429735" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429735">(Sep 02 2022 at 19:13)</a>:</h4>
<p>Separately, it feels weird to me that we invite users to reply to <code>noreply@zulip.com</code>. For reference, GitHub uses <code>notifications@</code>.</p>



<a name="1429771"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429771" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429771">(Sep 02 2022 at 19:56)</a>:</h4>
<p>Hmm yeah -- if replying is actually useful / if we encourage it, we should not call the address "noreply".</p>



<a name="1429791"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429791" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429791">(Sep 02 2022 at 20:21)</a>:</h4>
<p>I suspect the sender is <code>noreply@</code> but it has a <code>Reply-to</code> set that does something.</p>



<a name="1429792"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429792" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429792">(Sep 02 2022 at 20:22)</a>:</h4>
<p>There may be options for making this better, but many email providers for security/anti-spam reasons limit what you can use as the sender for an email -- so at least in many self-hosting systems, the Zulip server only has permission to send as 1-2 fixed email senders.</p>



<a name="1429809"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1429809" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1429809">(Sep 02 2022 at 20:46)</a>:</h4>
<p>Mm, yeah, the reply-to is specific to the conversation you're replying to (which may not be the most inviting):</p>
<p><a href="/user_uploads/2/7d/_Eog8lyZSZfjY-OB25XeklNV/Screen-Shot-2022-09-02-at-1.45.30-PM.png">Screen-Shot-2022-09-02-at-1.45.30-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/7d/_Eog8lyZSZfjY-OB25XeklNV/Screen-Shot-2022-09-02-at-1.45.30-PM.png" title="Screen-Shot-2022-09-02-at-1.45.30-PM.png"><img src="/user_uploads/2/7d/_Eog8lyZSZfjY-OB25XeklNV/Screen-Shot-2022-09-02-at-1.45.30-PM.png"></a></div>



<a name="1432012"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1432012" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1432012">(Sep 08 2022 at 07:01)</a>:</h4>
<p>I filed <strong>Improve missed message email notifications</strong> <a href="https://github.com/zulip/zulip/pull/22885">#22885</a>. Marked as high priority because these changes are high-visibility and the issue should be relatively straightforward to solve, so it would be great if someone picked it up.</p>



<a name="1588768"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1588768" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1588768">(Jun 08 2023 at 17:20)</a>:</h4>
<p>We're actively working on the "@topic mention" feature -- <a href="https://github.com/zulip/zulip/pull/25828">#25828</a></p>
<p>Continuing the above discussions:</p>
<p>For wildcard mentions (@_all, @_everyone, @_stream), currently, we have:</p>
<blockquote>
<p>You are receiving this because everyone was mentioned in #{{ stream_name }}.</p>
</blockquote>
<p>Proposals for @topic mention:<br>
<span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="https://github.com/zulip/zulip/pull/25828#discussion_r1222306851">suggested</a>:</p>
<ul>
<li>You are receiving this because @topic was mentioned in #{{ stream_name }} &gt; {{ topic_name }}.</li>
<li>You are receiving this because all participants were mentioned in #{{ stream_name }} &gt; {{ topic_name }}.</li>
</ul>
<p>Maybe:</p>
<ul>
<li>You are receiving this because all topic participants were mentioned in #{{ stream_name }} &gt; {{ topic_name }}.</li>
</ul>



<a name="1588956"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1588956" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1588956">(Jun 08 2023 at 22:13)</a>:</h4>
<p>The "@topic" phrasing definitely feels awkward to me. The last option sounds good -- I think that makes it clear what's going on.</p>



<a name="1589041"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1589041" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1589041">(Jun 08 2023 at 23:36)</a>:</h4>
<p>Yeah, I think I like that last option the best too.</p>



<a name="1598232"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1598232" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1598232">(Jun 24 2023 at 14:35)</a>:</h4>
<p>We are working on the "Follow Topics" and "@topic mention" features.</p>
<p>This is the present structure:</p>
<ul>
<li>Email Message:<ul>
<li><strong>topic wildcard mention in a topic</strong>: "You are receiving this because all topic participants were mentioned in #{{ stream_name }} &gt; {{ topic_name }}."</li>
<li><strong>stream wildcard mention in a topic</strong>: "You are receiving this because everyone was mentioned in #{{ stream_name }}."</li>
<li><strong>topic wildcard mention in a followed topic</strong>: (Not yet decided)</li>
<li><strong>stream wildcard mention in a followed topic</strong>: "You are receiving this because you have wildcard mention notifications enabled for topics you follow."</li>
</ul>
</li>
</ul>



<a name="1598233"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1598233" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1598233">(Jun 24 2023 at 14:36)</a>:</h4>
<ul>
<li>Push notifications (apns_alert_subtitle):<ul>
<li><strong>topic wildcard mention in a topic</strong>: "{full_name} mentioned all the topic participants:"</li>
<li><strong>stream wildcard mention in a topic</strong>: "{full_name} mentioned everyone:"</li>
<li><strong>topic wildcard mention in a followed topic</strong>: (Not yet decided)</li>
<li><strong>stream wildcard mention in a followed topic</strong>: (Not yet decided)</li>
</ul>
</li>
</ul>



<a name="1598234"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1598234" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1598234">(Jun 24 2023 at 14:37)</a>:</h4>
<ul>
<li>Push notifications (gcm_alert):<ul>
<li><strong>topic wildcard mention in a topic</strong>: "King Hamlet mentioned all the topic participants in #Verona &gt; Test topic"</li>
<li><strong>stream wildcard mention in a topic</strong>: "King Hamlet mentioned everyone in #Verona"</li>
<li><strong>topic wildcard mention in a followed topic</strong>: (Not yet decided)</li>
<li><strong>stream wildcard mention in a followed topic</strong>: (Not yet decided)</li>
</ul>
</li>
</ul>



<a name="1599165"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1599165" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1599165">(Jun 27 2023 at 02:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="22341">Prakhar Pratyush</span> <a href="#narrow/stream/101-design/topic/notification.20emails/near/1598232">said</a>:</p>
<blockquote>
<p>* <strong>topic wildcard mention in a followed topic</strong>: (Not yet decided)</p>
</blockquote>
<p>Is there a reason the string for this shouldn't be the same as topic wildcard mention in a normal topic?</p>



<a name="1599167"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1599167" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1599167">(Jun 27 2023 at 02:59)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="21">@mobile</span> your input might be helpful on the push notifications questions, since there are some mobile implementation and visual sizing constraints on what goes there that I'm not super familiar with.</p>



<a name="1599220"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1599220" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1599220">(Jun 27 2023 at 03:33)</a>:</h4>
<blockquote>
<p>Is there a reason the string for this shouldn't be the same as topic wildcard mention in a normal topic?</p>
</blockquote>
<p>We have different strings for 'stream wildcard mention' in a normal topic and followed topic. For the same reason,  I think topic wildcard mention should have different strings?</p>



<a name="1599664"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1599664" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1599664">(Jun 27 2023 at 18:50)</a>:</h4>
<p>Well, the reason we have a different string for "stream wildcard mention" is that it's possible for the stream wildcard mention to have not notified you based on your notification settings for the stream, but to still notify you only because of your notification settings for a followed topic.</p>



<a name="1599667"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1599667" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1599667">(Jun 27 2023 at 18:52)</a>:</h4>
<p>So I guess this ends up boiling down to a question about the actual product behavior -- is an <code>@topic</code> mention treated as a "wildcard mention" where your notification settings around notifications for <code>@all</code> wildcard mentions apply, or more like a "personal mention"?</p>



<a name="1599669"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1599669" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1599669">(Jun 27 2023 at 18:53)</a>:</h4>
<p>If <code>@topic</code> mentions are not treated as optional like other wildcard mentions, then we wouldn't need a special string here.</p>



<a name="1600006"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1600006" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1600006">(Jun 28 2023 at 03:56)</a>:</h4>
<p>It's possible for the <strong>topic wildcard mention</strong> to have not notified you based on your notification settings for the stream, but to still notify you only because of your notification settings for a followed topic.</p>
<p>So, let's suppose:</p>
<ul>
<li>wildcard mention notifications setting for the <strong>stream</strong> -- disabled </li>
<li>wildcard mention notifications setting for the <strong>followed topic</strong> -- enabled</li>
</ul>
<p>When we receive a notification for <code>@topic</code> mention in the followed topic; we should have a different string (like we have for stream wildcard) which clearly says "this notification is because you have enabled the wildcard notification setting for topics you follow".</p>



<a name="1600099"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1600099" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhijeet Bodas <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1600099">(Jun 28 2023 at 06:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/101-design/topic/notification.20emails/near/1599667">said</a>:</p>
<blockquote>
<p>So I guess this ends up boiling down to a question about the actual product behavior -- is an <code>@topic</code> mention treated as a "wildcard mention" where your notification settings around notifications for <code>@all</code> wildcard mentions apply, or more like a "personal mention"?</p>
</blockquote>
<p>Currently, we are planning on having a single setting (<code>wildcard_mention_notify</code>, in its current state), which will determine whether wildcard mentions (both stream and topic wildcards) are <em>treated like</em> personal mentions, for the purpose of notifications.<br>
So, <code>topic</code> mentions are <strong>not</strong> like personal mentions, ref <a class="stream-topic" data-stream-id="101" href="/#narrow/stream/101-design/topic/.40topic.20mention">#design &gt; @topic mention</a>.</p>



<a name="1603388"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1603388" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1603388">(Jul 04 2023 at 05:02)</a>:</h4>
<p>OK, I think that plan is reasonable and certainly simplest -- we can always change that detail if we find we get feedback that suggests a different model in this rare corner case.</p>



<a name="1604041"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1604041" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1604041">(Jul 05 2023 at 11:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/101-design/topic/notification.20emails/near/1599167">said</a>:</p>
<blockquote>
<p><span class="user-group-mention silent" data-user-group-id="21">mobile</span> your input might be helpful on the push notifications questions, since there are some mobile implementation and visual sizing constraints on what goes there that I'm not super familiar with.</p>
</blockquote>
<p><span class="user-group-mention" data-user-group-id="21">@mobile</span> It would be helpful if we could finalize the strings here. It's the last blocker we have :)</p>



<a name="1609662"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1609662" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1609662">(Jul 14 2023 at 01:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="22341">Prakhar Pratyush</span> <a href="#narrow/stream/101-design/topic/notification.20emails/near/1598234">said</a>:</p>
<blockquote>
<ul>
<li>Push notifications (gcm_alert):</li>
</ul>
</blockquote>
<p>Fun fact about these (the <code>gcm_alert</code> function specifically): I believe these strings do not get used at all, and have not been used since at least 2019. On Android, we construct the notification UI ourselves in the client, and we ignore the <code>alert</code> string which that function is used to compute.</p>
<p>So these can be whatever we like. Separately, a good PR would be to remove <code>alert</code> from the Android/FCM notification payloads entirely. We'd want to run that as an experiment for a bit on <a href="http://chat.zulip.org">chat.zulip.org</a> just to double-check I haven't missed some way it matters.</p>



<a name="1609669"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1609669" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1609669">(Jul 14 2023 at 01:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="22341">Prakhar Pratyush</span> <a href="#narrow/stream/101-design/topic/notification.20emails/near/1598233">said</a>:</p>
<blockquote>
<ul>
<li>Push notifications (apns_alert_subtitle):<ul>
<li><strong>topic wildcard mention in a topic</strong>: "{full_name} mentioned all the topic participants:"</li>
<li><strong>stream wildcard mention in a topic</strong>: "{full_name} mentioned everyone:"</li>
<li><strong>topic wildcard mention in a followed topic</strong>: (Not yet decided)</li>
<li><strong>stream wildcard mention in a followed topic</strong>: (Not yet decided)</li>
</ul>
</li>
</ul>
</blockquote>
<p>For these, the way they show up in the UI is as a notification (on iOS) that looks like:</p>
<blockquote>
<p><strong>#Verona &gt; Test topic</strong><br>
<strong>King Hamlet mentioned everyone:</strong><br>
For @all, our thanks. Now follows, that you know, young Fortinbras, …</p>
</blockquote>



<a name="1609672"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1609672" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1609672">(Jul 14 2023 at 01:12)</a>:</h4>
<p>Given that context, I think the same "mentioned everyone" text actually works well for all four of those scenarios.</p>
<p>The exact scope of "everyone" is different between different scenarios: everyone in the stream, or in the topic. But that distinction can be seen in the @-mention in the text (unless it comes so late in a long message that it's cut off).</p>
<p>And I think it's best to get pretty quickly to the content of the message without a lot of extra text explaining precisely what settings you have that caused it to notify you.</p>



<a name="1632905"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1632905" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1632905">(Aug 29 2023 at 11:24)</a>:</h4>
<blockquote>
<p>Given that context, I think the same "mentioned everyone" text actually works well for all four of those scenarios.</p>
</blockquote>
<p>Here's the PR <a href="https://github.com/zulip/zulip/pull/26597">#26597</a></p>
<p>I'm working on the "Push notifications (gcm_alert)" part. That would be a separate PR:</p>
<blockquote>
<p>Separately, a good PR would be to remove alert from the Android/FCM notification payloads entirely. We'd want to run that as an experiment for a bit on <a href="http://chat.zulip.org">chat.zulip.org</a> just to double-check I haven't missed some way it matters.</p>
</blockquote>



<a name="1633071"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1633071" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Prakhar Pratyush <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1633071">(Aug 29 2023 at 16:44)</a>:</h4>
<p>Here's the other PR <a href="https://github.com/zulip/zulip/pull/26599">#26599</a></p>



<a name="1645087"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1645087" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1645087">(Sep 21 2023 at 22:42)</a>:</h4>
<p>What language did we end up with in emails? It wasn't clear to me from skimming this thread.</p>



<a name="1645169"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notification%20emails/near/1645169" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notification.20emails.html#1645169">(Sep 21 2023 at 23:57)</a>:</h4>
<p>From <code>templates/zerver/emails/missed_message.html</code>:</p>
<div class="codehilite" data-code-language="HTML+Django/Jinja"><pre><span></span><code>    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">personal_mentioned</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>You are receiving this because you were personally mentioned.<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">mentioned_user_group_name</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>You are receiving this because @<span class="cp">{{</span> <span class="nv">mentioned_user_group_name</span> <span class="cp">}}</span> was mentioned.<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">topic_wildcard_mentioned_in_followed_topic</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>You are receiving this because all topic participants were mentioned in #<span class="cp">{{</span> <span class="nv">stream_name</span> <span class="cp">}}</span> &gt; <span class="cp">{{</span> <span class="nv">topic_name</span> <span class="cp">}}</span>.<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">stream_wildcard_mentioned_in_followed_topic</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>You are receiving this because you have wildcard mention notifications enabled for topics you follow.<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">topic_wildcard_mentioned</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>You are receiving this because all topic participants were mentioned in #<span class="cp">{{</span> <span class="nv">stream_name</span> <span class="cp">}}</span> &gt; <span class="cp">{{</span> <span class="nv">topic_name</span> <span class="cp">}}</span>.<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">stream_wildcard_mentioned</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>You are receiving this because everyone was mentioned in #<span class="cp">{{</span> <span class="nv">stream_name</span> <span class="cp">}}</span>.<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">followed_topic_email_notify</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>You are receiving this because you have email notifications enabled for topics you follow.<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">elif</span> <span class="nv">stream_email_notify</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">trans</span> <span class="cp">%}</span>You are receiving this because you have email notifications enabled for #<span class="cp">{{</span> <span class="nv">stream_name</span> <span class="cp">}}</span>.<span class="cp">{%</span> <span class="k">endtrans</span> <span class="cp">%}</span><span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre></div>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>