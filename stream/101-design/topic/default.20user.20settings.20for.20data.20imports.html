<html>
<head><meta charset="utf-8"><title>default user settings for data imports · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html">default user settings for data imports</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1531766"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1531766" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1531766">(Mar 23 2023 at 19:40)</a>:</h4>
<p>I'd like to make a plan for improving how we set defaults of user personal preference settings for data import organizations. Currently, we have a "default user settings" feature that allows organization administrators to set the default values for personal preference settings based on what makes sense for how the organization works. (For important settings like email address visibility, we prompt during account creation).</p>
<p>However, AFAIK, we don't currently use that code path at all for users imported from another chat platform -- the user accounts are created automatically by the import process (which is good, since then they're attached to their message history), including that of the organization administrators, which means there's no opportunity to set these defaults for users before their values are fixed by the user's account existing.</p>



<a name="1531776"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1531776" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1531776">(Mar 23 2023 at 19:44)</a>:</h4>
<p>We do have a bit of a special code path that runs when an imported user logs in for the first time -- there's a special form where we ask them to accept the terms of service. My thinking is that we probably want to use that form to (1) prompt about key privacy settings like email address visibility, as we do during account creation and (2) set all the values of settings managed by <code>RealmUserDefaults</code> to the value currently configured for the organization.</p>
<p>This would mean that these users would get their settings set to match the organization's defaults when they first login, giving administrators the opportunity to <a href="https://zulip.com/help/configure-default-new-user-settings">configure default new user settings</a> after the import is completed but before they invite everyone in their organization to join the imported organization. (And we can advertise this is a good idea in the data import guide).</p>
<p>Thoughts?</p>



<a name="1531782"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1531782" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1531782">(Mar 23 2023 at 19:45)</a>:</h4>
<p>I think it might require a bit more engineering than the above hints, in that we probably need to store some state to keep track of whether a user was imported and has never logged in (The existing form appears if you haven't accepted the current major version of the ToS, and we don't want logic to reset your settings to the organization defaults again if a server ever changes their ToS version!).</p>



<a name="1535510"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1535510" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1535510">(Mar 28 2023 at 17:38)</a>:</h4>
<p>That plan makes sense to me.</p>



<a name="1535595"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1535595" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1535595">(Mar 28 2023 at 19:24)</a>:</h4>
<p>Yeah, that all sounds good. <span class="user-mention" data-user-id="10349">@Mateusz Mandera</span> would you be up for adding this part to your to-do list?</p>
<blockquote>
<p>we probably need to store some state to keep track of whether a user was imported and has never logged in</p>
</blockquote>
<p>I think we can finalize the design of the form in parallel with that.</p>



<a name="1535757"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1535757" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1535757">(Mar 28 2023 at 21:53)</a>:</h4>
<p>Oh, and as noted on <a href="https://github.com/zulip/zulip/pull/24800">#24800</a>, we don't currently have Welcome Bot send messages to imported users, and we probably should. So if it's not too hard, maybe sending Welcome Bot messages when an imported user first logs in can be part of the initial project to track that state.</p>



<a name="1545070"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1545070" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1545070">(Apr 11 2023 at 09:32)</a>:</h4>
<p>After discussion with <span class="user-mention silent" data-user-id="10349">Mateusz Mandera</span> , I am starting work on this. I am planning to first update the form to prompt about <code>email_address_visibility</code> setting. Do we want to add a new field to <code>UserProfile</code> model to keep track of whether user has logged in once after import? We can name the field something like <code>first_login_after_import</code>.</p>



<a name="1545257"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1545257" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1545257">(Apr 11 2023 at 14:43)</a>:</h4>
<p>Can't we key off of <code>tos_version</code> being None?</p>



<a name="1545270"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1545270" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1545270">(Apr 11 2023 at 14:53)</a>:</h4>
<p>I was thinking whether it is possible that a self-hosted organization does not have any terms of service. The default value of <code>TERMS_OF_SERVICE_VERSION</code> setting is <code>None</code>.</p>



<a name="1545271"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1545271" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Vandiver <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1545271">(Apr 11 2023 at 14:55)</a>:</h4>
<p>Ah, yeah.  Hm.  Is there no other field that we set (e.g. a nullable timestamp column) that we set upon first login?  It seems a bit silly to have a field which is only ever false for a trivial percentage of users, but we may need it.</p>



<a name="1545303"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1545303" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1545303">(Apr 11 2023 at 16:20)</a>:</h4>
<p>I cannot find any other existing field which can be used here.</p>



<a name="1546539"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1546539" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1546539">(Apr 13 2023 at 00:13)</a>:</h4>
<p>Yeah, I thought about this for a while earlier, and we don't have an existing field to check this. I'm sure there's some sort of <code>RealmAuditLog</code> thing we could do (Check if there's an imported event and no "activated" event) if we really wanted to avoid extending the table.</p>



<a name="1546540"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1546540" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1546540">(Apr 13 2023 at 00:14)</a>:</h4>
<p>I suppose the other option is we could set <code>tos_version</code> to a special value like <code>-1</code> when importing an account. That feels a little hacky, but it is the case that the modal that we're trying to extend logically here is the "Accept the ToS" modal which is basically the only thing that looks at <code>tos_version</code>, so it'd be pretty easy to document.</p>



<a name="1546673"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1546673" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1546673">(Apr 13 2023 at 03:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/101-design/topic/default.20user.20settings.20for.20data.20imports/near/1546539">said</a>:</p>
<blockquote>
<p>Yeah, I thought about this for a while earlier, and we don't have an existing field to check this. I'm sure there's some sort of <code>RealmAuditLog</code> thing we could do (Check if there's an imported event and no "activated" event) if we really wanted to avoid extending the table.</p>
</blockquote>
<p>I am not sure whether we have any kind of imported event, we only have a "REALM_EXPORTED" type <code>RealmAuditLog</code> object. While importing the realm, we just create a <code>REALM_CREATED</code> type <code>RealmAuditLog</code> object, only if it did not exist already.</p>



<a name="1546676"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1546676" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1546676">(Apr 13 2023 at 03:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/101-design/topic/default.20user.20settings.20for.20data.20imports/near/1546540">said</a>:</p>
<blockquote>
<p>I suppose the other option is we could set <code>tos_version</code> to a special value like <code>-1</code> when importing an account. That feels a little hacky, but it is the case that the modal that we're trying to extend logically here is the "Accept the ToS" modal which is basically the only thing that looks at <code>tos_version</code>, so it'd be pretty easy to document.</p>
</blockquote>
<p>I am thinking whether we want to attach this case of checking first login after importing with <code>tos_version</code> field. As mentioned above, there might be case where there are no terms of service by the organization and user may not see the "Accept the TOS" modal during their first login.</p>



<a name="1547633"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1547633" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1547633">(Apr 14 2023 at 00:00)</a>:</h4>
<p>Well, from a logical standpoint, if we wanted to use that field, we could check for the special value of <code>-1</code>, and set it to <code>None</code> after completing this step if the organization doesn't have ToS configured.</p>



<a name="1547731"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1547731" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1547731">(Apr 14 2023 at 03:28)</a>:</h4>
<p>Hm. Yes, we can do this. Do we want to proceed with this then? Though it still feels a hacky solution, especially when we are using <code>tos_version</code> to check whether to show a page which allows setting <code>email_address_visibility</code> but does not have any "TOS" related thing (when organization doesn't have it configured).</p>



<a name="1548104"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1548104" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1548104">(Apr 14 2023 at 18:11)</a>:</h4>
<p><span class="user-mention" data-user-id="10242">@Sahil Batra</span> I think conceptually the way I'd document it is that <code>tos_version=-1</code> means that this is an account that formally hasn't been created yet in Zulip, but has been prepared for creation. I think it's valid to think about that as a distinct from a ToS standpoint as different from <code>None</code>, which is that you implicitly accepted the nonexistent ToS.</p>



<a name="1548107"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1548107" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1548107">(Apr 14 2023 at 18:12)</a>:</h4>
<p>Thinking about this more, we'll probably end up wanting to tag accounts created via the API with <code>tos_version=-1</code> as well, since they're similarly a situation where the user has not actually accessed Zulip yet.</p>



<a name="1559027"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559027" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559027">(May 01 2023 at 11:52)</a>:</h4>
<p>I started some work on it. Any suggestions for the design to support setting <code>email_address_visibility</code> here.</p>
<p>The current ToS page looks like -<br>
<a href="/user_uploads/2/ec/cnjCBTH4-N5Lw5oQnFEuapj0/tos-page.png">tos-page.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/ec/cnjCBTH4-N5Lw5oQnFEuapj0/tos-page.png" title="tos-page.png"><img src="/user_uploads/2/ec/cnjCBTH4-N5Lw5oQnFEuapj0/tos-page.png"></a></div>



<a name="1559028"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559028" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559028">(May 01 2023 at 11:54)</a>:</h4>
<p>Do we want to show a modal like we do in user registration form. We can have a link or button to open the modal somewhere near the email field.</p>



<a name="1559093"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559093" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559093">(May 01 2023 at 14:11)</a>:</h4>
<p>I think in the context we're discussing (an imported account), that page should just show the ToS checkbox, not the "they've changed" notice, right?</p>



<a name="1559094"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559094" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559094">(May 01 2023 at 14:12)</a>:</h4>
<p>Yes.</p>



<a name="1559095"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559095" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559095">(May 01 2023 at 14:13)</a>:</h4>
<p>I think we can pose the question the same way we do on the registration page.</p>
<p><a href="/user_uploads/2/ad/aR7PSbTUGxqj8i6WKQdPpqkv/Screen-Shot-2023-05-01-at-7.12.42-AM.png">Screen-Shot-2023-05-01-at-7.12.42-AM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/ad/aR7PSbTUGxqj8i6WKQdPpqkv/Screen-Shot-2023-05-01-at-7.12.42-AM.png" title="Screen-Shot-2023-05-01-at-7.12.42-AM.png"><img src="/user_uploads/2/ad/aR7PSbTUGxqj8i6WKQdPpqkv/Screen-Shot-2023-05-01-at-7.12.42-AM.png"></a></div>



<a name="1559096"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559096" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559096">(May 01 2023 at 14:13)</a>:</h4>
<p>Can we style the text the same way as well?</p>



<a name="1559101"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559101" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559101">(May 01 2023 at 14:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="10242">Sahil Batra</span> <a href="#narrow/stream/101-design/topic/default.20user.20settings.20for.20data.20imports/near/1559094">said</a>:</p>
<blockquote>
<p>Yes.</p>
</blockquote>
<p>But, we can actually have a template file to show for an imported account which can be set in <code>zproject/default_settings.py</code>.</p>



<a name="1559103"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559103" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559103">(May 01 2023 at 14:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19257">Alya Abbott</span> <a href="#narrow/stream/101-design/topic/default.20user.20settings.20for.20data.20imports/near/1559095">said</a>:</p>
<blockquote>
<p>I think we can pose the question the same way we do on the registration page.</p>
<p><a href="/user_uploads/2/ad/aR7PSbTUGxqj8i6WKQdPpqkv/Screen-Shot-2023-05-01-at-7.12.42-AM.png">Screen-Shot-2023-05-01-at-7.12.42-AM.png</a></p>
</blockquote>
<p>I was thinking of something similar too.</p>



<a name="1559378"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1559378" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1559378">(May 01 2023 at 18:46)</a>:</h4>
<p>Yeah, that design makes sense to me.</p>



<a name="1563403"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1563403" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1563403">(May 08 2023 at 12:22)</a>:</h4>
<p>I have come up with this till now.<br>
<a href="/user_uploads/2/72/mPdh6ORqG_QH43Lfhtp7TerB/Screenshot-from-2023-05-08-17-46-25.png">Screenshot-from-2023-05-08-17-46-25.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/72/mPdh6ORqG_QH43Lfhtp7TerB/Screenshot-from-2023-05-08-17-46-25.png" title="Screenshot-from-2023-05-08-17-46-25.png"><img src="/user_uploads/2/72/mPdh6ORqG_QH43Lfhtp7TerB/Screenshot-from-2023-05-08-17-46-25.png"></a></div>



<a name="1563404"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1563404" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1563404">(May 08 2023 at 12:22)</a>:</h4>
<p>We would also want to change the heading and button text in case the organization has not configured terms of service. Any suggestions for heading? We can update the button to be "Submit" and remove the checkbox.</p>



<a name="1563473"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1563473" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1563473">(May 08 2023 at 13:36)</a>:</h4>
<p>Hm, I'm having a hard time visually processing the top part. It's not clear that "Email", the actual email, and the note below it are all part of the same idea. Maybe we can try making "Email" look like a heading, and add more vertical space above the TOS checkbox?</p>



<a name="1563479"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1563479" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1563479">(May 08 2023 at 13:40)</a>:</h4>
<p>If we wanted to avoid conditionals for the title and button, maybe something like "Welcome to Zulip" and "Continue" would work fine either way?</p>



<a name="1563508"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1563508" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1563508">(May 08 2023 at 14:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19257">Alya Abbott</span> <a href="#narrow/stream/101-design/topic/default.20user.20settings.20for.20data.20imports/near/1563473">said</a>:</p>
<blockquote>
<p>Hm, I'm having a hard time visually processing the top part. It's not clear that "Email", the actual email, and the note below it are all part of the same idea. Maybe we can try making "Email" look like a heading, and add more vertical space above the TOS checkbox?</p>
</blockquote>
<p>Yes. We can change it to be similar to what we have in user registration page and more space above the checkbox.<br>
<a href="/user_uploads/2/ae/Y2Q6B0XRTrgI9A5VQypcthyu/Screenshot-from-2023-05-08-19-50-01.png">Screenshot-from-2023-05-08-19-50-01.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/ae/Y2Q6B0XRTrgI9A5VQypcthyu/Screenshot-from-2023-05-08-19-50-01.png" title="Screenshot-from-2023-05-08-19-50-01.png"><img src="/user_uploads/2/ae/Y2Q6B0XRTrgI9A5VQypcthyu/Screenshot-from-2023-05-08-19-50-01.png"></a></div>



<a name="1563517"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1563517" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1563517">(May 08 2023 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19257">Alya Abbott</span> <a href="#narrow/stream/101-design/topic/default.20user.20settings.20for.20data.20imports/near/1563479">said</a>:</p>
<blockquote>
<p>If we wanted to avoid conditionals for the title and button, maybe something like "Welcome to Zulip" and "Continue" would work fine either way?</p>
</blockquote>
<p>Yes, this sounds good to me to avoid conditionals.</p>



<a name="1563769"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1563769" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1563769">(May 08 2023 at 18:02)</a>:</h4>
<p>Yeah, I like trying to match the registration page design with the organization heading.</p>



<a name="1568005"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1568005" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1568005">(May 12 2023 at 15:02)</a>:</h4>
<p>I did some changes and sharing the screenshots below for feedback.</p>
<p><a href="/user_uploads/2/f5/_WY3TdPy-Z4HHOAUYFNpuOe1/tos-first-login.png">tos-first-login.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/f5/_WY3TdPy-Z4HHOAUYFNpuOe1/tos-first-login.png" title="tos-first-login.png"><img src="/user_uploads/2/f5/_WY3TdPy-Z4HHOAUYFNpuOe1/tos-first-login.png"></a></div><p>There can also be a case when there is a template to show the user when user is logging in for the first time. I had a doubt whether we want to limit the width of the email address visibility text above. If we do limit it like in the first screenshot, then it might look odd if we have the template set to show for the user logging in for first time.<br>
<a href="/user_uploads/2/16/QtNF-8KrdgetEOMU7ALGWJBs/tos_with_first_time_template.png">tos_with_first_time_template.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/16/QtNF-8KrdgetEOMU7ALGWJBs/tos_with_first_time_template.png" title="tos_with_first_time_template.png"><img src="/user_uploads/2/16/QtNF-8KrdgetEOMU7ALGWJBs/tos_with_first_time_template.png"></a></div>



<a name="1568006"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1568006" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1568006">(May 12 2023 at 15:03)</a>:</h4>
<p>Also sharing the screenshots, when user is not logging in for the first time and hence cannot set email address visibility as we have changed the email field styling as well.<br>
<a href="/user_uploads/2/ab/o0XCx7ez0U4_tMadfWGmXYKH/TOS-changes.png">TOS-changes.png</a><br>
<a href="/user_uploads/2/c3/nUiW2aaMf8j7gfafm0JYt_61/TOS-changes-without-description.png">TOS-changes-without-description.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/ab/o0XCx7ez0U4_tMadfWGmXYKH/TOS-changes.png" title="TOS-changes.png"><img src="/user_uploads/2/ab/o0XCx7ez0U4_tMadfWGmXYKH/TOS-changes.png"></a></div><div class="message_inline_image"><a href="/user_uploads/2/c3/nUiW2aaMf8j7gfafm0JYt_61/TOS-changes-without-description.png" title="TOS-changes-without-description.png"><img src="/user_uploads/2/c3/nUiW2aaMf8j7gfafm0JYt_61/TOS-changes-without-description.png"></a></div>



<a name="1568028"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1568028" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1568028">(May 12 2023 at 15:47)</a>:</h4>
<p>Thanks! I think these generally look reasonable. </p>
<blockquote>
<p>I had a doubt whether we want to limit the width of the email address visibility text above.</p>
</blockquote>
<p>Yeah, that looks odd. The email visibility text should probably have the same max width as the other text. The other one actually looks rather wide to me, so we could try limiting it to the same width as the email visibility text, or else something in the middle for both.</p>



<a name="1568029"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1568029" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1568029">(May 12 2023 at 15:47)</a>:</h4>
<p>I guess the title still needs to be changed.</p>



<a name="1568549"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1568549" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1568549">(May 12 2023 at 23:35)</a>:</h4>
<p>Yeah, I agree with that feedback.</p>



<a name="1568551"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1568551" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1568551">(May 12 2023 at 23:36)</a>:</h4>
<p>I'm not sure what the right answer is for the page titles.</p>



<a name="1568923"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1568923" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1568923">(May 14 2023 at 06:33)</a>:</h4>
<p>This is what I proposed above:</p>
<blockquote>
<p>If we wanted to avoid conditionals for the title and button, maybe something like "Welcome to Zulip" and "Continue" would work fine either way?</p>
</blockquote>



<a name="1569044"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1569044" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1569044">(May 14 2023 at 23:44)</a>:</h4>
<p>Yeah that plan works for me and I think nicely solves this problem.</p>



<a name="1569153"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1569153" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1569153">(May 15 2023 at 03:27)</a>:</h4>
<p>This is how it looks when we restrict the width of other text to be same as that of email visibility text. We actually allow to set a template here instead of text to be shown for users accepting the TOS first time and there can be anything inside that template. So, not sure whether it will be a good idea to restrict width here. <br>
<a href="/user_uploads/2/e3/h-wnPPUmPPML2kRjKOoNTuFs/limited-width-tos.png">limited-width-tos.png</a>.</p>
<div class="message_inline_image"><a href="/user_uploads/2/e3/h-wnPPUmPPML2kRjKOoNTuFs/limited-width-tos.png" title="limited-width-tos.png"><img src="/user_uploads/2/e3/h-wnPPUmPPML2kRjKOoNTuFs/limited-width-tos.png"></a></div><p>And when we do not restrict the width -<br>
<a href="/user_uploads/2/29/KfUVyiP5O1cdrsFBuVJ3Ogq6/no-width-limit.png">no-width-limit.png</a><br>
<a href="/user_uploads/2/9b/hnBk8lHXNDkHDErNTv4XZwWe/no-width-limit-without-TOS-template.png">no-width-limit-without-TOS-template.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/29/KfUVyiP5O1cdrsFBuVJ3Ogq6/no-width-limit.png" title="no-width-limit.png"><img src="/user_uploads/2/29/KfUVyiP5O1cdrsFBuVJ3Ogq6/no-width-limit.png"></a></div><div class="message_inline_image"><a href="/user_uploads/2/9b/hnBk8lHXNDkHDErNTv4XZwWe/no-width-limit-without-TOS-template.png" title="no-width-limit-without-TOS-template.png"><img src="/user_uploads/2/9b/hnBk8lHXNDkHDErNTv4XZwWe/no-width-limit-without-TOS-template.png"></a></div>



<a name="1569513"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1569513" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1569513">(May 15 2023 at 17:45)</a>:</h4>
<blockquote>
<p>We actually allow to set a template here instead of text to be shown for users accepting the TOS first time and there can be anything inside that template.</p>
</blockquote>
<p>I'm not sure what setting a template entails. Does this mean that self-hosters could theoretically have images in there? And custom formatting for text?</p>



<a name="1569515"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1569515" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sahil Batra <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1569515">(May 15 2023 at 17:46)</a>:</h4>
<p>This is the comment with the field in <code>default_setings.py</code>. It mentions html template file, so could possibly be anything I think.</p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="c1"># HTML template path (e.g. "corporate/zulipchat_migration_tos.html")</span>
<span class="c1"># displayed to users when increasing TERMS_OF_SERVICE_VERSION when a</span>
<span class="c1"># user is to accept the terms of service for the first time, but</span>
<span class="c1"># already has an account. This primarily comes up when doing a data</span>
<span class="c1"># import.</span>
<span class="n">FIRST_TIME_TERMS_OF_SERVICE_TEMPLATE</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>



<a name="1569519"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1569519" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1569519">(May 15 2023 at 17:56)</a>:</h4>
<p>Hm, OK. Would it be easy to restrict the width for Zulip Cloud (where we know what the content is going to be) but not for self-hosted orgs?</p>



<a name="1569703"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1569703" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1569703">(May 15 2023 at 22:01)</a>:</h4>
<p>That is a setting that is not documented because it's purpose is to just allow us to set the Zulip Cloud language at all, without that language appearing for self-hosted servers. I expect no self-hosted organizations set something there, and the styling needs should be based on what will look good with the Zulip Cloud language.</p>



<a name="1569709"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1569709" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1569709">(May 15 2023 at 22:02)</a>:</h4>
<p>So I think we should proceed with the width-limiting CSS that looks good with that language. We can always change it if we get feedback with a real use case from self-hosting options, but right now that's designed as an internal setting and I don't think we need to consider potential other values for it.</p>



<a name="1569710"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/default%20user%20settings%20for%20data%20imports/near/1569710" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/default.20user.20settings.20for.20data.20imports.html#1569710">(May 15 2023 at 22:03)</a>:</h4>
<p><span class="user-mention" data-user-id="10242">@Sahil Batra</span> it'd be great if you can get a draft PR up for this tomorrow, so I can do an initial review before taking Wednesday off.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>