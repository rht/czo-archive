<html>
<head><meta charset="utf-8"><title>duplicate poll answers · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html">duplicate poll answers</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1272945"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1272945" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1272945">(Oct 27 2021 at 18:35)</a>:</h4>
<p>Hey! Our polls currently allow duplicate answers, as long as you specify two copies of an answer when you originally create the poll. What do we think should happen in this scenario?</p>



<a name="1272946"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1272946" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1272946">(Oct 27 2021 at 18:35)</a>:</h4>
<p>/poll <br>
foo<br>
foo</p>



<a name="1272948"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1272948" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1272948">(Oct 27 2021 at 18:36)</a>:</h4>
<p>Oh, oops, let me try again.</p>



<a name="1272949"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1272949" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1272949">(Oct 27 2021 at 18:36)</a>:</h4>
<p>/poll some poll<br>
option 1<br>
option 1</p>



<a name="1272951"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1272951" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1272951">(Oct 27 2021 at 18:37)</a>:</h4>
<p>(Trying to add a duplicate option to an existing poll results in nothing happening, so we should definitely pop up an explanation in that scenario.)</p>



<a name="1272961"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1272961" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1272961">(Oct 27 2021 at 18:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19257">Alya Abbott</span> <a href="#narrow/stream/101-design/topic/duplicate.20poll.20answers/near/1272951">said</a>:</p>
<blockquote>
<p>(Trying to add a duplicate option to an existing poll results in nothing happening, so we should definitely pop up an explanation in that scenario.)</p>
</blockquote>
<p>Thoughts on the visual design for this part?</p>



<a name="1272981"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1272981" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1272981">(Oct 27 2021 at 18:47)</a>:</h4>
<p>I think that's just a bug and we should treat duplicates the same regardless of when they were created.</p>



<a name="1272983"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1272983" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1272983">(Oct 27 2021 at 18:48)</a>:</h4>
<p>BTW, folks can see the new poll visual styling here thanks to <span class="user-mention" data-user-id="20503">@Jore</span>!.  </p>
<p>(As a sidenote, <span class="user-mention" data-user-id="2187">@Greg Price</span> should we open an issue for syncing that bit of CSS to the mobile apps?)</p>



<a name="1273023"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273023" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273023">(Oct 27 2021 at 18:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/101-design/topic/duplicate.20poll.20answers/near/1272981">said</a>:</p>
<blockquote>
<p>I think that's just a bug and we should treat duplicates the same regardless of when they were created.</p>
</blockquote>
<p>So would you silently ignore any options that duplicate options above them? Just in how the poll is displayed, or would we change the message itself?</p>



<a name="1273028"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273028" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273028">(Oct 27 2021 at 19:00)</a>:</h4>
<p>On the internals: The poll is actually a totally separate data structure; the message associated with it is empty <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>.</p>



<a name="1273032"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273032" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273032">(Oct 27 2021 at 19:01)</a>:</h4>
<p>I'm not sure exactly how this works but yes, I'd treat a poll with a set of initial options are equivalent to a poll where you added the options in sequence just after creating a poll with no options.</p>



<a name="1273037"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273037" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273037">(Oct 27 2021 at 19:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/101-design/topic/duplicate.20poll.20answers/near/1273028">said</a>:</p>
<blockquote>
<p>On the internals: The poll is actually a totally separate data structure; the message associated with it is empty :).</p>
</blockquote>
<p>The message is <em>not</em> empty in a user-facing way:</p>
<p><a href="/user_uploads/2/d4/94L1vdDFqlAYYkdEhxG_07N_/Screen-Shot-2021-10-27-at-12.02.37-PM.png">Screen-Shot-2021-10-27-at-12.02.37-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/d4/94L1vdDFqlAYYkdEhxG_07N_/Screen-Shot-2021-10-27-at-12.02.37-PM.png" title="Screen-Shot-2021-10-27-at-12.02.37-PM.png"><img src="/user_uploads/2/d4/94L1vdDFqlAYYkdEhxG_07N_/Screen-Shot-2021-10-27-at-12.02.37-PM.png"></a></div>



<a name="1273039"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273039" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273039">(Oct 27 2021 at 19:03)</a>:</h4>
<p>Yeah, I guess maybe I mean "not used in rendering the poll", which is a bit different.</p>



<a name="1273043"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273043" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273043">(Oct 27 2021 at 19:04)</a>:</h4>
<p>My point is that you can get to a state with duplicate options by initially creating such a poll. It is not possible to get to such a state by adding options one at a time.</p>



<a name="1273180"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273180" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273180">(Oct 27 2021 at 19:59)</a>:</h4>
<p>I agree with this as a desirable property for how polls should work:</p>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> <a href="#narrow/stream/101-design/topic/duplicate.20poll.20answers/near/1273032">said</a>:</p>
<blockquote>
<p>I'm not sure exactly how this works but yes, I'd treat a poll with a set of initial options are equivalent to a poll where you added the options in sequence just after creating a poll with no options.</p>
</blockquote>
<p>and to the extent that's not the case now, I'd want to treat that as a bug.</p>



<a name="1273187"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273187" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273187">(Oct 27 2021 at 20:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19257">Alya Abbott</span> <a href="#narrow/stream/101-design/topic/duplicate.20poll.20answers/near/1273037">said</a>:</p>
<blockquote>
<p>The message is <em>not</em> empty in a user-facing way:</p>
<p><a href="/user_uploads/2/d4/94L1vdDFqlAYYkdEhxG_07N_/Screen-Shot-2021-10-27-at-12.02.37-PM.png">Screen-Shot-2021-10-27-at-12.02.37-PM.png</a></p>
</blockquote>
<p>Hmm interesting point. I wonder: if you edit a message like that, does it have any effect on what options exist in the poll?</p>
<p>I don't know but I'd guess that it doesn't. Conversely, if you add options later through the poll interface, I'm pretty sure it will not go back and edit what text you see in that edit box / in the message source.</p>
<p>That's making me think that perhaps it'd be better to actually give the message an empty content, because having that text show up there is confusing.</p>



<a name="1273226"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273226" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273226">(Oct 27 2021 at 20:39)</a>:</h4>
<p>We're actually pretty smart, and don't let you edit the text of a poll message.</p>



<a name="1273228"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273228" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273228">(Oct 27 2021 at 20:40)</a>:</h4>
<p>Adding options does not change the text you see in the message source.</p>



<a name="1273238"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1273238" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1273238">(Oct 27 2021 at 21:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19257">Alya Abbott</span> <a href="#narrow/stream/101-design/topic/duplicate.20poll.20answers/near/1273226">said</a>:</p>
<blockquote>
<p>We're actually pretty smart, and don't let you edit the text of a poll message.</p>
</blockquote>
<p>Oh, that's good.</p>
<p>It's still awkward that when you add options the message source gets out of sync. But the fact you can't edit does mitigate it, and maybe means that on balance it's best that it is visible, to help a bit with discoverability of the syntax.</p>



<a name="1276900"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1276900" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1276900">(Nov 04 2021 at 22:50)</a>:</h4>
<p>Filed <a href="https://github.com/zulip/zulip/pull/20164">#20164</a>.</p>



<a name="1279255"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/duplicate%20poll%20answers/near/1279255" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/duplicate.20poll.20answers.html#1279255">(Nov 10 2021 at 20:50)</a>:</h4>
<p>OK, and this is merged.  <span class="user-mention" data-user-id="2187">@Greg Price</span> FYI, the mobile app will get the bug fix the next time it syncs the <code>shared</code> module.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>