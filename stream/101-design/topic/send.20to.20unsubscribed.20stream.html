<html>
<head><meta charset="utf-8"><title>send to unsubscribed stream · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html">send to unsubscribed stream</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1318205"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1318205" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1318205">(Jan 28 2022 at 21:39)</a>:</h4>
<p>Hey folks! It is currently not possible to send a message to a stream you're not subscribed to. </p>
<p>However, we have an inconsistency where rather than disabling the compose box or the send button, we show a banner that implies that messages <em>can</em> be sent.<br>
<a href="/user_uploads/2/4a/YzIEfqWZVGpFa9pOqn_IinHS/Screen-Shot-2022-01-28-at-1.25.41-PM.png">Screen-Shot-2022-01-28-at-1.25.41-PM.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/4a/YzIEfqWZVGpFa9pOqn_IinHS/Screen-Shot-2022-01-28-at-1.25.41-PM.png" title="Screen-Shot-2022-01-28-at-1.25.41-PM.png"><img src="/user_uploads/2/4a/YzIEfqWZVGpFa9pOqn_IinHS/Screen-Shot-2022-01-28-at-1.25.41-PM.png"></a></div><p>According to <span class="user-mention silent" data-user-id="7">Tim Abbott</span>, the back story is that we've gone back and forth in the past as to whether or not to allow sending to an unsubcribed stream. Either choice is easy from a technical perspective -- we just need to pick one and make the UI communicate correctly what's going on.</p>
<p>Thoughts on which way to go?</p>



<a name="1318206"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1318206" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1318206">(Jan 28 2022 at 21:40)</a>:</h4>
<p>I can imagine various scenarios where sending to an unsubscribed stream would be convenient, e.g. a senior manager dropping by a thread in some team's channel to congratulate them on a feature launch.</p>



<a name="1318211"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1318211" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1318211">(Jan 28 2022 at 21:56)</a>:</h4>
<p>My vote is to not allow it.  The use case is certainly plausible, but it seems rare enough to me that we should just let folks use the obvious workarounds.</p>



<a name="1318272"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1318272" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1318272">(Jan 28 2022 at 22:41)</a>:</h4>
<p>For context, the Zulip backend has always allowed you to send messages to public streams without being subscribed -- it's a client-side limitation that was added a few years ago that you can't actually click send here.</p>



<a name="1318273"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1318273" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1318273">(Jan 28 2022 at 22:42)</a>:</h4>
<p>I guess I don't understand what the benefit is of not allowing one to do so -- it's about the same UI and user-facing complexity either way.</p>



<a name="1318274"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1318274" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1318274">(Jan 28 2022 at 22:43)</a>:</h4>
<p>Where there is some small (marginal, I agree) benefit of being able to send without subscribing, and as one can see with the banner we've already done the work to communicate what one would want to know about this situation to users.</p>



<a name="1345532"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1345532" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1345532">(Mar 15 2022 at 22:46)</a>:</h4>
<p>It sounds to me like we should just let the Send button work in this case.</p>
<p>In particular, it seems like that'd be the simplest way to make this consistent -- we already have all the UI set to communicate that.</p>



<a name="1345621"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1345621" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1345621">(Mar 15 2022 at 23:23)</a>:</h4>
<p>Yeah, I think I agree with that.</p>



<a name="1345632"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1345632" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1345632">(Mar 15 2022 at 23:28)</a>:</h4>
<p>Works for me. <span class="user-mention" data-user-id="7">@Tim Abbott</span> do we need an issue for this?</p>



<a name="1345683"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1345683" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1345683">(Mar 15 2022 at 23:49)</a>:</h4>
<p><span class="user-mention" data-user-id="19257">@Alya Abbott</span> yes, that'd be appreciated.</p>



<a name="1345705"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1345705" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1345705">(Mar 15 2022 at 23:55)</a>:</h4>
<p>Filed <a href="https://github.com/zulip/zulip/pull/21433">#21433</a>; marked high priority because it sounds like it should be easy, and will address an inconsistent/confusing experience.</p>



<a name="1346412"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1346412" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yash <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1346412">(Mar 16 2022 at 20:13)</a>:</h4>
<p>What about the error message, Should we still be displaying it with the message being sent?</p>



<a name="1346603"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1346603" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Greg Price <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1346603">(Mar 16 2022 at 23:52)</a>:</h4>
<p>Do you mean the orange banner in Alya's screenshot at the top of the thread?</p>
<p>If so: yes, we definitely want to continue showing that warning. We just want to let the user ignore the warning and send anyway, if they choose.</p>



<a name="1347218"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1347218" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yash <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1347218">(Mar 17 2022 at 20:44)</a>:</h4>
<p>I have made a PR for this issue. Can anyone please review the <a href="https://github.com/zulip/zulip/pull/21467">PR#21467</a>?</p>



<a name="1347343"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1347343" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1347343">(Mar 17 2022 at 22:41)</a>:</h4>
<p>I've tagged this as a release goal and asked a couple folks to review. No guarantees we'll ship it, and <span class="user-mention" data-user-id="22581">@Yash</span> you should start by fixing CI, but it seems like it'd be nice to include either in the release or in 5.1 if we can.</p>



<a name="1370703"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1370703" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Sah <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1370703">(Apr 20 2022 at 17:18)</a>:</h4>
<p>I gave this a try, implementing it as a "Send anyway" button, which seemed pretty easy &amp; intuitive:<br>
<a href="https://github.com/zulip/zulip/issues/21433">PR #21433</a><br>
cc <span class="user-mention" data-user-id="19257">@Alya Abbott</span> - WDYT?  includes a unittest, etc <span class="user-mention" data-user-id="2187">@Greg Price</span></p>
<p>Showing both the action, and how the buttons look on a narrower screen:<br>
<a href="/user_uploads/2/6c/FEWAYVTZGZUy22GQA8sRwFbM/164093817-ca87cdc1-9c61-4ca0-8398-41c81303746e.gif">164093817-ca87cdc1-9c61-4ca0-8398-41c81303746e.gif</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/6c/FEWAYVTZGZUy22GQA8sRwFbM/164093817-ca87cdc1-9c61-4ca0-8398-41c81303746e.gif" title="164093817-ca87cdc1-9c61-4ca0-8398-41c81303746e.gif"><img src="/user_uploads/2/6c/FEWAYVTZGZUy22GQA8sRwFbM/164093817-ca87cdc1-9c61-4ca0-8398-41c81303746e.gif"></a></div>



<a name="1373190"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1373190" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1373190">(Apr 25 2022 at 20:44)</a>:</h4>
<p>So looking at the screencast, I notice a bug, which is that the "You unsubscribed from ..." notice appears in the wrong place after sending such a message.</p>



<a name="1373191"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1373191" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1373191">(Apr 25 2022 at 20:47)</a>:</h4>
<p>I think there's a few things going on that bug: </p>
<ul>
<li>I notice the timestamp isn't appearing -- that's what happens when the server does not confirm a locally echoed message via the <a href="https://zulip.readthedocs.io/en/latest/subsystems/events-system.html">server=&gt;client events system</a>. This is likely happening because the current user is not subscribed to the stream, and thus is not a "recipient" of the message. It's possible we want to do a preparatory change to the server to always include the sender as a recipient of stream messages, even if they are not subscribed -- but I'm not sure that doesn't have cascading secondary issues. (We'd at the very least be removing the invariant that stream messages you receive are always to a stream you're subscribed to, which could break clients that assume that invariant is true).</li>
<li>We're not setting the <code>historical</code> flag properly for the locally echoed message, which is oddly named but generally is used whenever we are displaying a message that the current user did not receive, and is used to back-computer where to display those informative notices.</li>
</ul>



<a name="1373192"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1373192" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1373192">(Apr 25 2022 at 20:50)</a>:</h4>
<p>If we think those two visible glitches are a problem, which seems likely, then we likely need to address both of those details before we can merge this change.</p>



<a name="1373193"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1373193" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1373193">(Apr 25 2022 at 20:51)</a>:</h4>
<p>The hacky option we have is that we could trigger a hard refresh of the current view when we get a 200 after sending a message via this "send anyway" code path ... but we try hard to avoid having code paths like that.</p>



<a name="1373275"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/send%20to%20unsubscribed%20stream/near/1373275" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Adam Sah <a href="https://rht.github.io/czo-archive/stream/101-design/topic/send.20to.20unsubscribed.20stream.html#1373275">(Apr 25 2022 at 22:06)</a>:</h4>
<p>thx/gotcha - I'm on it, will dig in.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>