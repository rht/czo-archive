<html>
<head><meta charset="utf-8"><title>notifications settings · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html">notifications settings</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="292703"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/292703" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#292703">(Oct 04 2017 at 06:56)</a>:</h4>
<p>Currently this is how we describe our notifications:<br>
<a href="/user_uploads/2/29/0KD6lbhsrxlKnRtKMqwANvKl/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<p>Should "Audible notifications" be a sub-setting of Desktop notifications? I like how slack does this</p>
<div class="codehilite"><pre><span></span>[ ] Desktop notifications
    [ ] Play a sound when receiving a notification
</pre></div>


<p>Also, I think most products just call it "Mobile notifications", rather than "Mobile push notifications".<br>
Thoughts?</p>
<div class="message_inline_image"><a href="/user_uploads/2/29/0KD6lbhsrxlKnRtKMqwANvKl/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/29/0KD6lbhsrxlKnRtKMqwANvKl/pasted_image.png"></a></div>



<a name="292704"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/292704" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Pan <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#292704">(Oct 04 2017 at 06:57)</a>:</h4>
<p>I like the sub-setting idea and agree that I don't think I've ever heard "Mobile push notifs" before</p>



<a name="292854"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/292854" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Howell <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#292854">(Oct 04 2017 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-email="rishig@zulipchat.com" data-user-id="131">@Rishi Gupta</span> Both of you suggestions seem reasonable to me.</p>



<a name="293038"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293038" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293038">(Oct 04 2017 at 18:06)</a>:</h4>
<p><span class="user-mention" data-user-email="rishig@zulipchat.com" data-user-id="131">@Rishi Gupta</span> I don't think we want to move sound to be a subsetting, since that would entail removing the ability to only have the sound and not the popup.</p>



<a name="293042"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293042" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293042">(Oct 04 2017 at 18:07)</a>:</h4>
<p>(I actually use that feature).</p>



<a name="293043"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293043" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293043">(Oct 04 2017 at 18:07)</a>:</h4>
<p>ah, I didn't realize that was the intended behavior :). <span class="emoji emoji-1f914" title="thinking face">:thinking_face:</span></p>



<a name="293045"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293045" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293045">(Oct 04 2017 at 18:07)</a>:</h4>
<p>And I think we did it because someone asked for it.</p>



<a name="293047"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293047" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293047">(Oct 04 2017 at 18:08)</a>:</h4>
<p>I think we do want to make it easier to toggle those 2 as a group, though, since I think that's the common case.</p>



<a name="293048"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293048" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293048">(Oct 04 2017 at 18:08)</a>:</h4>
<p>it's more I wanted to make "audible notifications" less confusing, since .. audible where? on my phone? on the desktop?</p>



<a name="293050"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293050" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293050">(Oct 04 2017 at 18:09)</a>:</h4>
<p>Yeah, I think we should make "Desktop notifications" a block and have 2 indented checkboxes under it</p>



<a name="293053"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293053" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293053">(Oct 04 2017 at 18:09)</a>:</h4>
<p>With something like "Popup notifications" and "Play a sound" underneath.</p>



<a name="293057"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293057" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293057">(Oct 04 2017 at 18:10)</a>:</h4>
<p>yeah, I like that. Also presumably these settings still apply, but just do different things, when one is using the desktop app?</p>



<a name="293060"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/293060" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#293060">(Oct 04 2017 at 18:11)</a>:</h4>
<p>Correct.</p>



<a name="603084"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603084" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603084">(Jun 24 2018 at 01:03)</a>:</h4>
<p>We're redesigning our notification settings to be more intuitive / extensible / convenient. Some goals are</p>
<ul>
<li>Put all the notification settings in one place (currently it's split between settings and stream settings)</li>
<li>Make it easy to "do the right thing", i.e. for a new user to put some settings in place that are the right settings for them</li>
<li>Make it easy to add features like notifications for "topics I write on", or "pinned streams"</li>
</ul>
<p>Here's a proposal for how it could look:<br>
<a href="/user_uploads/2/b4/v7goeE5YkCpP5E7i0aOCjAXQ/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/2/b4/v7goeE5YkCpP5E7i0aOCjAXQ/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/b4/v7goeE5YkCpP5E7i0aOCjAXQ/pasted_image.png"></a></div><p>Two notes about this proposal:</p>
<ul>
<li>Some js will be needed for the interaction between "streams" and "pinned streams"; it shouldn't be possible to get a notification type for streams but not pinned streams. Same for 1-2 of the other settings.</li>
<li>There can be as many rows as needed for "custom settings for individual streams". </li>
</ul>
<p>Thoughts?</p>



<a name="603085"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603085" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603085">(Jun 24 2018 at 01:04)</a>:</h4>
<p>For comparison, here's what it looks like now:<br>
<a href="/user_uploads/2/17/F6oS4Zk7X7aHdeCPYLhi0dbl/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/17/F6oS4Zk7X7aHdeCPYLhi0dbl/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/17/F6oS4Zk7X7aHdeCPYLhi0dbl/pasted_image.png"></a></div>



<a name="603099"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603099" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Abhigyan Khaund <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603099">(Jun 24 2018 at 07:13)</a>:</h4>
<p>I'd love the new addition of topics that I write to notification.</p>



<a name="603100"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603100" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shubham Padia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603100">(Jun 24 2018 at 08:00)</a>:</h4>
<blockquote>
<p>There can be as many rows as needed for "custom settings for individual streams"</p>
</blockquote>
<p>I think a modal for the custom settings would be great, as something with increase-able rows would not be suited on the current notification settings page.<br>
But the stream list for each row would also need a modal to display the list I presume, so then we would've two modals.</p>



<a name="603102"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603102" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603102">(Jun 24 2018 at 08:27)</a>:</h4>
<blockquote>
<p>something with increase-able rows would not be suited on the current notification settings page.</p>
</blockquote>
<p>Interesting. For technical reasons, or design reasons?</p>



<a name="603105"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603105" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shubham Padia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603105">(Jun 24 2018 at 10:01)</a>:</h4>
<p>Design reasons, wouldn't a large no. of rows on the notifications setting page push the other settings down the page</p>



<a name="603129"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603129" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603129">(Jun 24 2018 at 16:46)</a>:</h4>
<p>hm. Ideally I would like a design where you can see all your notification settings on one page, but I agree that if someone has a lot of custom stuff it may be too long. </p>
<p>It's worth noting though that in the typical case I expect not more than 1-2 rows for any given user, though if they have a large number of streams, the smallness of the streams input box may cause that to grow quickly.</p>



<a name="603142"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603142" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603142">(Jun 24 2018 at 17:53)</a>:</h4>
<p>I mostly want to add that we'll probably want to keep the notification settings list on the per-stream pages (rather than removing it there), but I agree it'd be really nice to have a single page that shows everything.  I agree the per-stream exceptions list is probably going to be &lt;5 for most folks, so as long as the page is scrollable, it's not a big deal if they make the settings screen tall.</p>



<a name="603155"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603155" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shubham Padia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603155">(Jun 24 2018 at 18:09)</a>:</h4>
<p>Yeah, makes sense if the expected rows are less :)</p>



<a name="603281"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603281" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603281">(Jun 25 2018 at 06:25)</a>:</h4>
<blockquote>
<p>I mostly want to add that we'll probably want to keep the notification settings list on the per-stream pages</p>
</blockquote>
<p>What do you think of replacing that section with </p>
<div class="codehilite"><pre><span></span>Notifications

X Visual (desktop)   X Audible (desktop)   [check] Mobile   [check] Email
[Update notification preferences]
</pre></div>


<p>where the last link would link to the settings page?<br>
Duplicating the stream settings logic (and keeping the two in sync, etc) feels like it'll be a hassle to implement and maintain.</p>
<p>I'd actually vote for not bothering to show the notifications section at all on the per-stream page for the V1 (and just have a link to the settings page).</p>



<a name="603301"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603301" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603301">(Jun 25 2018 at 07:27)</a>:</h4>
<p>Well, we already have the stream settings logic, so it's more work to remove it correctly, and for me at least, the way I want to adjust my notification preferences for a given stream is by clicking the link in the left sidebar to "Stream settings" for that stream, not start out in the gear menu and find the stream.</p>



<a name="603314"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603314" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603314">(Jun 25 2018 at 07:37)</a>:</h4>
<p>ok. Well, we can continue with it there, and see how hard it ends up being.</p>
<p><span class="user-mention" data-user-id="5263">@Shubham Padia</span> I think the first steps here are</p>
<ul>
<li>Add a field like Subscription.custom_notifications (bool)</li>
<li>Update the behavior of these checkboxes <a href="/user_uploads/2/d/wT4lDUHuM6b0k61xngmb_WV0/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a><br>
to match the new model.<div class="message_inline_image"><a href="/user_uploads/2/d/wT4lDUHuM6b0k61xngmb_WV0/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/d/wT4lDUHuM6b0k61xngmb_WV0/pasted_image.png"></a></div></li>
</ul>



<a name="603318"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603318" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shubham Padia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603318">(Jun 25 2018 at 07:40)</a>:</h4>
<p>Cool, no visual changes to the existing behavior in this step, right?</p>



<a name="603323"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603323" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603323">(Jun 25 2018 at 07:43)</a>:</h4>
<p>right (beyond removing the "apply to all streams" followup question)</p>



<a name="603328"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603328" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giora Guttsait <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603328">(Jun 25 2018 at 07:46)</a>:</h4>
<p>(deleted)</p>



<a name="603329"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603329" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Giora Guttsait <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603329">(Jun 25 2018 at 07:47)</a>:</h4>
<blockquote>
<p>Here's a proposal for how it could look:<br>
<a href="/user_uploads/2/b4/v7goeE5YkCpP5E7i0aOCjAXQ/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> </p>
<div class="message_inline_image"><a href="/user_uploads/2/b4/v7goeE5YkCpP5E7i0aOCjAXQ/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/b4/v7goeE5YkCpP5E7i0aOCjAXQ/pasted_image.png"></a></div></blockquote>
<p>I liked that design, I think it's fairly versatile and allows the easiest customization.</p>



<a name="603331"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603331" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603331">(Jun 25 2018 at 07:49)</a>:</h4>
<p>yup, just to be clear that's still the end state we're aiming for, but it'll probably be several steps before we get there :)</p>



<a name="603334"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603334" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shubham Padia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603334">(Jun 25 2018 at 07:52)</a>:</h4>
<blockquote>
<p>beyond removing "apply to all streams" followup question.</p>
</blockquote>
<p>Would we be applying to all streams by default or the opposite?</p>



<a name="603338"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603338" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603338">(Jun 25 2018 at 07:52)</a>:</h4>
<p>Applying to all streams that don't have Subscirption.custom_notifications set</p>



<a name="603340"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603340" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603340">(Jun 25 2018 at 07:54)</a>:</h4>
<p>I guess it'll be in a bit of a broken state until <a href="/user_uploads/2/c4/QIaJvZ0-9E6ImzY_MTua6NK9/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a> is in place.</p>
<div class="message_inline_image"><a href="/user_uploads/2/c4/QIaJvZ0-9E6ImzY_MTua6NK9/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/2/c4/QIaJvZ0-9E6ImzY_MTua6NK9/pasted_image.png"></a></div>



<a name="603342"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603342" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603342">(Jun 25 2018 at 07:56)</a>:</h4>
<p>so maybe: </p>
<ul>
<li>Add field for Subscription.custom_notifications (bool)</li>
<li>Add the "Custom settings for individual streams" thing</li>
<li>Then change the behavior of the checkboxes in the stream section</li>
</ul>



<a name="603347"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603347" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shubham Padia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603347">(Jun 25 2018 at 07:58)</a>:</h4>
<p>Okay, i'm not still clear about what custom_notifications field is for. So is the idea with the first step here to check the per stream setting if custom_notification is set, and use the default setting if that field is not set.</p>



<a name="603353"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603353" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603353">(Jun 25 2018 at 08:02)</a>:</h4>
<p>if Subscription.custom_notifications is set, then that stream appears in the custom notifications section, and the stream is not affected by changes to the general stream settings checkbox grid above it.</p>



<a name="603355"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603355" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603355">(Jun 25 2018 at 08:03)</a>:</h4>
<p>to set it initially, we'll need to write a custom migration that sets it to True iff its current settings are different from the current default stream settings.</p>



<a name="603357"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603357" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shubham Padia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603357">(Jun 25 2018 at 08:04)</a>:</h4>
<p>Cool, makes sense.</p>



<a name="603362"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603362" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Shubham Padia <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603362">(Jun 25 2018 at 08:11)</a>:</h4>
<p>Okay, so should the first step be as below?</p>
<ul>
<li>Add field for subscription.custom_notifications</li>
<li>Do the migration to set it to true iff current settings are different from default stream settings.</li>
<li>Change the current notifications code to respect the newly added field   i.e the current code should check default settings if custom_notifications is unset.</li>
</ul>



<a name="603384"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603384" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603384">(Jun 25 2018 at 09:48)</a>:</h4>
<p><span class="user-mention" data-user-id="131">@Rishi Gupta</span> why do we need to change the database model to add a <code>.custom_notifications</code> to support this?  I would have thought we could just show in that bottom list the streams that have a different value from the default set.  Or even have a model where we put <code>None</code> in the individual field if it's supposed to match the default, and <code>True/False</code> otherwise.</p>



<a name="603386"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603386" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603386">(Jun 25 2018 at 09:49)</a>:</h4>
<p>I think we'll be a lot happier with the <code>None</code> model (plus a property to make accessing a non-None value, or something) than adding a new field that could just have been computed from other fields.</p>



<a name="603525"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603525" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603525">(Jun 25 2018 at 16:36)</a>:</h4>
<p>The reason I suggested <code>.custom_notifications</code> is that I thought it would reduce the amount the existing code has to be changed. The <code>None</code> method also introduces a coupling constraint where now either each of the four <code>Subscription.desktop_notifiactions, Subscription.audible_notifications, ..</code> have to be <code>None</code>, or none of them should be <code>None</code>.</p>
<p>But I'm fine with the <code>None</code> model as well.</p>
<p>In that case the first step is to make our notifications code support <code>None</code> in those values, and then do the migration to change everyone's existing subscriptions.</p>



<a name="603526"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/603526" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#603526">(Jun 25 2018 at 16:39)</a>:</h4>
<p>Also, whether or not we go with the <code>None</code> model, would it make sense to change our notifications fields to be BitFields with 4 values, one for each of desktop, audible, push, and email? That would solve the coupling problem mentioned above, and I think also make it cleaner to add more notifications settings (like for pinned streams, and topics I follow) in the future.</p>



<a name="606362"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/606362" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#606362">(Jul 01 2018 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="131">@Rishi Gupta</span> can you explain why you think bitfields would be cleaner?  They're generally more annoying to work with code-wise.</p>
<p>Also, I guess I'm not convinced that we want to couple the custom-value behavior; if I disable mobile notifications for a stream, and then change the email notifications default for my streams, do I really want it that stream to stay with email notifications running?</p>



<a name="606391"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/notifications%20settings/near/606391" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rishi Gupta <a href="https://rht.github.io/czo-archive/stream/101-design/topic/notifications.20settings.html#606391">(Jul 01 2018 at 15:02)</a>:</h4>
<p>I'm imagining this is going to be something people set and forget, rather than something people fiddle with. So my main goal is to make it easy to set something that does something reasonable. <br>
The main reason I coupled the custom-value behavior is that I couldn't think of a clean UI that doesn't couple them, and it didn't seem like much of a loss.</p>
<p>For bitfields: if we imagine eventually having 5+ rows (streams, pinned streams, topics I follow, etc.), I thought it would be more manageable to have 5 variables rather than 20, and to have them accessed/manipulated in a standardized way. I've never worked with bitfields before though, so if you think individual variables make more sense, we can go with that.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>