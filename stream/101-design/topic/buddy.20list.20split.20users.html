<html>
<head><meta charset="utf-8"><title>buddy list split users · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html">buddy list split users</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1629582"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629582" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629582">(Aug 22 2023 at 19:18)</a>:</h4>
<p>I just started looking into <a href="https://github.com/zulip/zulip/pull/21285">#21285</a>, which is splitting the right buddy list into users relevant to a conversation and everyone else.</p>
<p>Our current faded-user system focuses on the <strong>compose box recipient</strong>, but I want to make a case that we should do it for the <strong>current narrow</strong>. We now have the handy button to let users move to the narrow they're composing to, which would let them see the relevant users for their recipient if they want.</p>
<p>Many users have asked for this feature and they mostly talk about stream view and not composebox view:</p>
<ul>
<li>"please highlight users when stream is selected and not only when compose box is entered" <a href="https://github.com/zulip/zulip/issues/10208#issuecomment-461079759">https://github.com/zulip/zulip/issues/10208#issuecomment-461079759</a></li>
<li>"It seems that a good enhancement would be to only show the users subscribed to the current stream?" <a href="https://github.com/zulip/zulip/issues/236">https://github.com/zulip/zulip/issues/236</a> </li>
<li>"When in a narrow other than all-messages, we should limit the display of users to show those in the narrow, much like the webapp makes the display of out-of-narrow users." <a href="https://github.com/zulip/zulip-terminal/issues/575">https://github.com/zulip/zulip-terminal/issues/575</a></li>
<li><a href="https://github.com/zulip/zulip/issues/16835">https://github.com/zulip/zulip/issues/16835</a></li>
</ul>
<p>Can I get confirmation that we're specifically doing this for the current narrow and not the compose box recipient?</p>



<a name="1629609"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629609" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629609">(Aug 22 2023 at 21:37)</a>:</h4>
<p>I think you right. Compose box is derived from that. You want to see compose box autosuggest people first from the list of the current narrow</p>



<a name="1629610"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629610" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629610">(Aug 22 2023 at 21:40)</a>:</h4>
<p>The compose box can be for a different narrow than the visible one. Autosuggesting people from the list is different than the thing I'm suggesting, which is to always keep it matching the narrow.</p>



<a name="1629701"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629701" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629701">(Aug 22 2023 at 23:34)</a>:</h4>
<p><span class="user-mention" data-user-id="21453">@Evy</span> it was definitely intentional that the existing fading logic is for the current narrow.</p>
<p>I don't think we need to stick with that with a design change to no longer be doing fading as how we're doing things in the sidebar -- but the fading is meant to reinforce/match the fading that we do of visible messages that are not in the conversation you're composing to -- as part of helping folks avoid accidentally sending messages to a different place/audience than they intended.</p>
<p>So I think we should feel fine changing the logic, but we should try to avoid an intermediate state where we're still doing fading with a different rule, if that makes sense.</p>



<a name="1629702"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629702" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629702">(Aug 22 2023 at 23:36)</a>:</h4>
<p>I suppose one could imagine continuing to do fading under the current rule based on the compose box, either by default or as an option -- the proposed design change is mostly a change in organization/sectioning for the sidebar.</p>



<a name="1629704"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629704" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629704">(Aug 22 2023 at 23:36)</a>:</h4>
<p>But I think the main goal here is to, when you're in a narrow/view that is limited to a single stream, change the main sidebar display around that.</p>



<a name="1629705"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629705" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629705">(Aug 22 2023 at 23:37)</a>:</h4>
<p>Okay great -- yeah my plan was to remove the fading as a commit immediately following the split buddy list, so that they wouldn't both exist at the same time.</p>



<a name="1629709"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629709" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629709">(Aug 22 2023 at 23:37)</a>:</h4>
<p>Does that sound reasonable?</p>



<a name="1629748"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629748" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629748">(Aug 23 2023 at 00:27)</a>:</h4>
<p>Yeah that seems fine, and would make it easy to restore the fading in some form via reverting that commit (possibly hidden behind an option) if we find folks complain about it being removed.</p>



<a name="1629750"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629750" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629750">(Aug 23 2023 at 00:27)</a>:</h4>
<p>(Which I'm not particularly expecting, but it can be very handy to have the option in case users surprise us.)</p>



<a name="1629854"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629854" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629854">(Aug 23 2023 at 07:04)</a>:</h4>
<p>Okay! I worked a while on the buddy list today and got something working which feels exciting! I tried it on a dev environment with 1k users (I attempted 10k but the setup script crashed) and it seems to work fine in that it still paginates loading users -- though it might actually do that more than we want, so I'm going to play around with that a bit more. It's a bit hard to test because all the users have the same "last active" time which is very unrealistic and results in us sorting/filtering in ways that appear wrong but maybe are actually fine. This is notable on user search as well.</p>
<p>Put up the code I have so far as a PR on my own fork if folks want to see: <a href="https://github.com/evykassirer/zulip/pull/4">https://github.com/evykassirer/zulip/pull/4</a></p>



<a name="1629855"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629855" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629855">(Aug 23 2023 at 07:04)</a>:</h4>
<p>note: I haven't added user counts to the sections, and am considering not having this as part of the first version we merge, especially because of the pagination situation.</p>



<a name="1629856"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1629856" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1629856">(Aug 23 2023 at 07:04)</a>:</h4>
<p>I also haven't made any custom heading text other than "In selected conversation" and am not sure if that's something we specifically want or not.</p>



<a name="1630249"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1630249" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1630249">(Aug 23 2023 at 20:00)</a>:</h4>
<p>I'm surprised the setup script cracked -- let's debug that in <a class="stream" data-stream-id="3" href="/#narrow/stream/3-backend">#backend</a>. We definitely want to be able to do performance testing with 10K users.</p>



<a name="1630251"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1630251" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1630251">(Aug 23 2023 at 20:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="21453">Evy</span> <a href="#narrow/stream/101-design/topic/buddy.20list.20split.20users/near/1629855">said</a>:</p>
<blockquote>
<p>note: I haven't added user counts to the sections, and am considering not having this as part of the first version we merge, especially because of the pagination situation.</p>
</blockquote>
<p>That's totally fine, it's a very naturally cut enhancement.</p>



<a name="1639227"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1639227" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1639227">(Sep 13 2023 at 01:17)</a>:</h4>
<p>I've put up a draft PR! <a href="https://github.com/zulip/zulip/pull/26717">#26717</a></p>
<p><a href="/user_uploads/2/a2/ndqpGdN4s4GewfKZwbTdF4ta/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/2/a2/ndqpGdN4s4GewfKZwbTdF4ta/image.png" title="image.png"><img src="/user_uploads/2/a2/ndqpGdN4s4GewfKZwbTdF4ta/image.png"></a></div>



<a name="1639649"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1639649" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1639649">(Sep 13 2023 at 18:00)</a>:</h4>
<p>Should I play with it, or is it better for someone to review the code first?</p>



<a name="1639831"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1639831" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1639831">(Sep 13 2023 at 20:26)</a>:</h4>
<p>If you're feeling tight for time and want to reduce the number of passes you do, then waiting might be a good idea. But I've played around with a decent amount and don't know of any current UX issues, so I would definitely benefit from your input!</p>



<a name="1639834"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1639834" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Karl Stolley <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1639834">(Sep 13 2023 at 20:37)</a>:</h4>
<p>I'm planning to poke at and review this PR this week, Evy. I'll make notes if there's anything I think we could pair on, if you'd be up for that.</p>



<a name="1639840"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1639840" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1639840">(Sep 13 2023 at 20:47)</a>:</h4>
<p>Why don’t we open search field by default?</p>



<a name="1639856"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1639856" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1639856">(Sep 13 2023 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="22433">Vlad Korobov</span> <a href="#narrow/stream/101-design/topic/buddy.20list.20split.20users/near/1639840">said</a>:</p>
<blockquote>
<p>Why don’t we open search field by default?</p>
</blockquote>
<p>Is that in the designs? I think it's cleaner to have it closed but don't feel that attached to that. If we have the search field open all the time I'd want to make it prettier :)</p>



<a name="1639936"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1639936" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1639936">(Sep 13 2023 at 22:12)</a>:</h4>
<p>Well right now we do this without a design pass, I guess and showing the search bar open could be UX improvement. I see that people are reluctant to click search icon when they are actually want to search for a person</p>



<a name="1639937"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1639937" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1639937">(Sep 13 2023 at 22:12)</a>:</h4>
<p>And I will propose the designed version together in the Left Sidebar redesign</p>



<a name="1640008"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1640008" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1640008">(Sep 13 2023 at 23:09)</a>:</h4>
<p>I don't think any similar apps have always-open "filter users" widget there; Zulip had it always-open originally several years ago, and it was pointed to as a source of clutter. Doesn't necessarily mean we can't decide those users were wrong, but I figure it's worth mentioning.</p>



<a name="1640026"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/buddy%20list%20split%20users/near/1640026" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/buddy.20list.20split.20users.html#1640026">(Sep 13 2023 at 23:33)</a>:</h4>
<p>Messenger and Signal have it, though that's mostly 1:1 conversations. Slack doesn't have the buddy list unless you click into a modal, and the modal has the always-open search. Discord doesn't seem to offer user search at all?</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>