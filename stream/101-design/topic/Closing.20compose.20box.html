<html>
<head><meta charset="utf-8"><title>Closing compose box · design · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rht.github.io/czo-archive/stream/101-design/index.html">design</a></h2>
<h3>Topic: <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html">Closing compose box</a></h3>

<hr>

<base href="https://chat.zulip.org">

<head><link href="https://rht.github.io/czo-archive/style.css" rel="stylesheet"></head>

<a name="1439916"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1439916" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1439916">(Sep 23 2022 at 05:43)</a>:</h4>
<p>Why would we close compose box if a user click on another view? Every time I click on another stream compose box is closing on me... that is painful. What if I didn't send my message? What If I want to check something, like topic name in another stream or just some information to select and copy from semitransparent view?</p>



<a name="1440015"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440015" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Bradburn <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440015">(Sep 23 2022 at 15:39)</a>:</h4>
<p>The behaviour of the compose box has been a constant cause of confusion and frustration for some of our users too, a lot of people come from other chat tools where the compose box is always open. I think perhaps the idea in zulip is that there is a "read mode" and "write mode" - which I think can be valuable for a lot of people. But it would be nice to be able to pin the compose box or something for users that want that.</p>



<a name="1440028"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440028" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyphase <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440028">(Sep 23 2022 at 16:34)</a>:</h4>
<p>To be clear, this only seems to happen if the message body is empty, or all whitespace. Which doesn't totally invalidate the points above.</p>



<a name="1440060"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440060" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440060">(Sep 23 2022 at 17:30)</a>:</h4>
<p>No it is not. I type things, click on another stream and boom my stuff is gone</p>



<a name="1440073"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440073" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440073">(Sep 23 2022 at 17:38)</a>:</h4>
<p>I think that automatically restoring drafts when you go back could make a huge difference for this (<a href="https://github.com/zulip/zulip/pull/22104">#22104</a>) but I agree it's confusing, and is one of the biggest UX challenges I have when using Zulip (which is why I worked on <a href="https://github.com/zulip/zulip/pull/22104">#22104</a>)</p>



<a name="1440077"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440077" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440077">(Sep 23 2022 at 17:40)</a>:</h4>
<p>If you click on another stream, the compose box will stay open, but if you click on a <em>message</em> in another stream, the compose box will clear and turn into a reply to the topic the message is in. <span class="user-mention" data-user-id="22433">@Vlad Korobov</span> can you confirm that this is what you're experiencing?</p>



<a name="1440078"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440078" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440078">(Sep 23 2022 at 17:41)</a>:</h4>
<p>Oh also if you click anywhere that's not a message, the compose box closes.</p>



<a name="1440082"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440082" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440082">(Sep 23 2022 at 17:42)</a>:</h4>
<p>I would be pretty in favour of having a speedbump ("are you sure?") anytime you leave a composebox that has text in it by clicking elsewhere. We could maybe make this optional if it would be too annoying to power-users, but it would make the onboarding experience so much less confusing imo</p>



<a name="1440088"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440088" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440088">(Sep 23 2022 at 17:43)</a>:</h4>
<p>Though the long-term solution likely involves some combination of <a href="https://github.com/zulip/zulip/pull/22104">#22104</a> and keeping the composebox open in some situations where you click away (like, I see no reason to close the compsebox if I click the whitespace right above it)</p>



<a name="1440090"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440090" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Evy <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440090">(Sep 23 2022 at 17:43)</a>:</h4>
<p>I'd be extremely excited to work on anything that improves this category of experience :)</p>



<a name="1440285"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440285" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyphase <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440285">(Sep 23 2022 at 21:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="21453">Evy</span> <a href="#narrow/stream/101-design/topic/Closing.20compose.20box/near/1440077">said</a>:</p>
<blockquote>
<p>If you click on another stream, the compose box will stay open, but if you click on a <em>message</em> in another stream, the compose box will clear and turn into a reply to the topic the message is in. <span class="user-mention silent" data-user-id="22433">Vlad Korobov</span> can you confirm that this is what you're experiencing?</p>
</blockquote>
<p>Definitely wondering about this. Because..</p>
<p><span class="user-mention silent" data-user-id="22433">Vlad Korobov</span> <a href="#narrow/stream/101-design/topic/Closing.20compose.20box/near/1439916">said</a>:</p>
<blockquote>
<p>What If I want to check something, like topic name in another stream or just some information to select and copy from semitransparent view?</p>
</blockquote>
<p>This makes it sound like it's happening when it shouldn't. I can check topic names in other streams and even <em>select</em> and copy text in a semitransparent view, as well as click the buttons on a message (EDITED, reaction, actions, star). It's only when clicking on a message or on empty space that the compose box closes for me. Clicking on a stream or topic (or other narrow) in the left sidebar, click-dragging to select message text, clicking on a user in the right sidebar; none of these close the compose box for me.</p>



<a name="1440414"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440414" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440414">(Sep 24 2022 at 00:47)</a>:</h4>
<p>Yeah, I regularly navigate to other streams/topics without the compose box closing. My guess is that there's some element that is not properly tagged for the purpose of this logic, that <span class="user-mention" data-user-id="22433">@Vlad Korobov</span> clicks on and that <span class="user-mention silent" data-user-id="4976">Cyphase</span> and I don't <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="1440418"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440418" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440418">(Sep 24 2022 at 00:59)</a>:</h4>
<p>This is an area that has a lot of subtlety, and has been tweaked in a number of ways over time. I don't have time at the moment to a complete writeup summarizing all of the cases clearly for discussion, but at a high level, there's three options we have for what to do with the compose box when the user clicks on something in the UI (that potentially navigates somewhere else):</p>
<ul>
<li>Leaving the compose box open, without changing it's recipient. This is what we intend to do when the user navigates to another stream/topic or clicking on most elements in the UI, such as the gear menu, any message elements, etc.</li>
<li>Leaving the compose box open, but changing its recipient to match the place you're sending to. This is what we try to do when the compose box is empty. Doing anything else would likely be bad, because we leave the compose box open after you send a message, and your intent is likely not that sending a message and then switching views (with an empty compose box) leads to </li>
<li>Closing the compose box, saving any content as a draft. One situation in which we might want to do this is the user clicking on blank space on the screen, such as the sidebars or blank space above the compose box, which can indicate intent to clear clutter (basically the mouse user equivalent of hitting "escape").</li>
</ul>
<p>(Again, the above is not intended to be a precise summary of the rules in the code)</p>



<a name="1440419"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440419" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440419">(Sep 24 2022 at 00:59)</a>:</h4>
<p>Any rule we pick for exactly how we pick one of those options will have cases where the user would have preferred one of the other ones. Many possible ideas for "simple" feeling changes to this behavior that might improve a particular workflow someone has would cause another workflow, which could potentially be 10x as common, to be worse. So, we need to be careful.</p>



<a name="1440420"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440420" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440420">(Sep 24 2022 at 00:59)</a>:</h4>
<p>My experience in working on the details of this has been that it's important to be extremely specific about the workflow one is doing where one experiences something annoying around this. </p>
<p>Then we can look at what's happening when something feels annoying -- is it just a bug (where say, a selector didn't get migrated in some design change, which definitely happens), an intentional choice we made in the past that involves a tradeoff, an intended side effect of such a decision, or something else.</p>



<a name="1440943"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440943" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440943">(Sep 26 2022 at 00:05)</a>:</h4>
<p>I see now the situation I was in...<br>
I didn't input any text in the message input, but I did wrote a new topic name. So in my mind I already invested in the composing a message. Now if I click on any topic or  stream compose box is closing.</p>
<p>Another case is when I have my message input filled with something and I click on an empty space and compose box is closing.</p>
<p>I suggest to not close compose box automatically unless user did it</p>



<a name="1440944"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1440944" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vlad Korobov <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1440944">(Sep 26 2022 at 00:12)</a>:</h4>
<p>Here is the video showing confusing cases <a href="https://www.loom.com/share/09acdcc65f784a4ebe9b980e260736bf">https://www.loom.com/share/09acdcc65f784a4ebe9b980e260736bf</a></p>



<a name="1441200"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441200" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441200">(Sep 26 2022 at 18:42)</a>:</h4>
<p>Mm, yeah, I definitely have had the experience of the compose box closing on me unexpectedly as well, and I'd love to dig into the questions brought up by <span class="user-mention silent" data-user-id="22433">Vlad Korobov</span> above.</p>



<a name="1441206"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441206" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441206">(Sep 26 2022 at 18:43)</a>:</h4>
<p><span class="user-mention" data-user-id="7">@Tim Abbott</span> One specific observation is that if you have an <em>empty</em> compose box, clicking on a topic in the left sidebar keeps it open, but clicking on a stream closes it. Is that intentional? I think that one has bitten me before, when I'm trying to look up some bit of information before writing my message.</p>



<a name="1441208"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441208" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441208">(Sep 26 2022 at 18:45)</a>:</h4>
<blockquote>
<p>Closing the compose box, saving any content as a draft. One situation in which we might want to do this is the user clicking on blank space on the screen, such as the sidebars or blank space above the compose box, which can indicate intent to clear clutter (basically the mouse user equivalent of hitting "escape").</p>
</blockquote>
<p>More generally, what evidence do we have that users want to use this way of exiting the compose box? Would it be difficult to try test-deploying a PR here that turns off this behavior?</p>



<a name="1441215"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441215" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441215">(Sep 26 2022 at 18:52)</a>:</h4>
<p>Removing that behavior without other changes would feel pretty broken, because of the interaction with how we fade messages that aren't where you're composing to when the compose target doesn't match the current view. It'd feel pretty bad to have to go click the small X in the compose box in order to clear that state.</p>



<a name="1441216"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441216" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alya Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441216">(Sep 26 2022 at 18:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19257">Alya Abbott</span> <a href="#narrow/stream/101-design/topic/Closing.20compose.20box/near/1441206">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> One specific observation is that if you have an <em>empty</em> compose box, clicking on a topic in the left sidebar keeps it open, but clicking on a stream closes it. Is that intentional? I think that one has bitten me before, when I'm trying to look up some bit of information before writing my message.</p>
</blockquote>
<p>It's tricky to get to because of the above behavior, but I think clicking on a <em>topic</em> within a <em>different stream</em> from the one you're composing to also closes the compose box.</p>



<a name="1441218"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441218" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441218">(Sep 26 2022 at 18:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="19257">Alya Abbott</span> <a href="#narrow/stream/101-design/topic/Closing.20compose.20box/near/1441206">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="7">Tim Abbott</span> One specific observation is that if you have an <em>empty</em> compose box, clicking on a topic in the left sidebar keeps it open, but clicking on a stream closes it. Is that intentional? I think that one has bitten me before, when I'm trying to look up some bit of information before writing my message.</p>
</blockquote>
<p>I'm pretty sure this is intentional; a lot of discussion went into discussion around this detail ~3 years ago when we last made major changes to it. A user aware of this behavior can type a couple characters the compose box to avoid it closing; this is a habit I certainly have.</p>
<p>Note that when clicking on a different topic in the current stream with an empty compose box, we keep the compose box open but change the topic field to match the new topic you've visited. That interaction is designed to make the much more common workflow sequence of "Send a message (which leaves the compose box open to the current topic), click to another topic, compose a message in the new topic" feel nice. </p>
<p>When moving to a stream narrow, it would feel buggy to leave the compose box open to the last topic you visited in the previous stream, and we also can't readily change the compose box to point to a topic in the new stream, because you're now in an interleaved view anyway.</p>



<a name="1441219"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441219" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441219">(Sep 26 2022 at 19:00)</a>:</h4>
<p>There's certainly potential to enhance the experience of looking up something with the compose box open by adding an explicit control -- say, there's a "Lock recipient" toggle button that you can click that will leave the compose box open and pointing to a given recipient until you send your next message.</p>



<a name="1441221"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441221" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441221">(Sep 26 2022 at 19:00)</a>:</h4>
<p>Or we could try to document/advertise the existing control mechanism of typing some content in pages like <a href="https://chat.zulip.org/help/mastering-the-compose-box">/help/mastering-the-compose-box</a> ... it'd certainly be easier to explain a "lock recipient" control, but idunno if it's worth the space it'd require in the compose box UI, and interaction design issues of how that control relates to the automatic "is the compose box empty or not" logic we might still want.</p>



<a name="1441246"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441246" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyphase <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441246">(Sep 26 2022 at 19:17)</a>:</h4>
<p>I have the same habit of typing a non-whitespace character into the compose box – only one is required – in order to keep it open where I want it.</p>



<a name="1441252"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1441252" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cyphase <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1441252">(Sep 26 2022 at 19:25)</a>:</h4>
<p>As an aside, while poking at it just now, I found that switching to another topic while the compose box contains only whitespace will change the topic, but keep the whitespace, and also select it all. See <a class="stream-topic" data-stream-id="9" href="/#narrow/stream/9-issues/topic/compose.20box.20topic.20change.20handling">#issues &gt; compose box topic change handling</a>.</p>



<a name="1493767"></a>
<h4><a href="https://chat.zulip.org#narrow/stream/101-design/topic/Closing%20compose%20box/near/1493767" class="zl"><img src="https://rht.github.io/czo-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tim Abbott <a href="https://rht.github.io/czo-archive/stream/101-design/topic/Closing.20compose.20box.html#1493767">(Jan 20 2023 at 20:58)</a>:</h4>
<p>Just an update, we've now merged the tweak inspired by this conversation that was further discussed in <a class="stream-topic" data-stream-id="101" href="/#narrow/stream/101-design/topic/auto-setting.20compose.20box.20topic">#design &gt; auto-setting compose box topic</a>; hopefully this makes a material difference on the pain points discussed above.</p>



<hr><p>Last updated: Oct 02 2023 at 04:38 UTC</p>
</html>